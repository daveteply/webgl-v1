(self.webpackChunkwebgl_v1=self.webpackChunkwebgl_v1||[]).push([[179],{3999:(dn,dt,q)=>{"use strict";q.d(dt,{AG:()=>Oe,Dj:()=>j,EH:()=>ce,Gg:()=>Pe,Gz:()=>Ne,IJ:()=>Y,K5:()=>S,LU:()=>Ee,MP:()=>lt,Ng:()=>ve,RC:()=>St,TT:()=>Mt,Tx:()=>Se,UB:()=>bt,ZO:()=>le,_p:()=>Dt,a0:()=>J,aw:()=>ut,i8:()=>b,oE:()=>Ge,pj:()=>Ae,qZ:()=>We,uo:()=>de});var A=q(2329);const b=6.5,j=10,le=360,ce=1.05,Oe=75,Pe=50,Ge=A.M8C.degToRad(j),Se=A.M8C.degToRad(90),We=.66,S=.86,Y=56,J=800,de=2*Math.PI,Ae=Math.PI/2,ve=.001,Ne=6,Mt=3,Dt=3,lt=800,Ee=10,ut=50,St=80,bt=[16711680,16753920,16776960,32768,255,8388736]},9587:(dn,dt,q)=>{"use strict";q.d(dt,{w:()=>A,y:()=>b});var A=(()=>{return(j=A||(A={}))[j.LEVEL_START_1=1]="LEVEL_START_1",j[j.LEVEL_START_2=2]="LEVEL_START_2",j[j.LEVEL_START_3=3]="LEVEL_START_3",j[j.LEVEL_START_4=4]="LEVEL_START_4",j[j.LEVEL_START_5=5]="LEVEL_START_5",j[j.PIECE_MOVE=6]="PIECE_MOVE",j[j.PIECE_NON_MOVE=7]="PIECE_NON_MOVE",j[j.PIECE_REMOVE=8]="PIECE_REMOVE",j[j.PIECE_SELECT=9]="PIECE_SELECT",j[j.MATCH_FAIL=10]="MATCH_FAIL",j[j.MATCH_LONG=11]="MATCH_LONG",j[j.POWER_MOVE_APPEAR=12]="POWER_MOVE_APPEAR",j[j.POWER_MOVE_USE=13]="POWER_MOVE_USE",j[j.LEVEL_END_1=14]="LEVEL_END_1",j[j.LEVEL_END_2=15]="LEVEL_END_2",j[j.LEVEL_END_3=16]="LEVEL_END_3",A;var j})();const b=[{url:"assets/audio/level-start/mixkit-slow-tape-rewind-cinematic-transition-1089.mp3",audioType:A.LEVEL_START_1},{url:"assets/audio/level-start/mixkit-cinematic-laser-gun-thunder-1287.mp3",audioType:A.LEVEL_START_2},{url:"assets/audio/level-start/mixkit-epic-movie-trailer-whoosh-impact-2918.mp3",audioType:A.LEVEL_START_3},{url:"assets/audio/level-start/mixkit-epic-movie-transition-2904.mp3",audioType:A.LEVEL_START_4},{url:"assets/audio/level-start/mixkit-futuristic-machine-starting-2689.mp3",audioType:A.LEVEL_START_5},{url:"assets/audio/piece-move.mp3",audioType:A.PIECE_MOVE},{url:"assets/audio/piece-non-move.mp3",audioType:A.PIECE_NON_MOVE},{url:"assets/audio/piece-remove.mp3",audioType:A.PIECE_REMOVE},{url:"assets/audio/piece-select.mp3",audioType:A.PIECE_SELECT},{url:"assets/audio/match-fail.mp3",audioType:A.MATCH_FAIL},{url:"assets/audio/long-match.mp3",audioType:A.MATCH_LONG},{url:"assets/audio/power-move-appear.mp3",audioType:A.POWER_MOVE_APPEAR},{url:"assets/audio/power-move-use.mp3",audioType:A.POWER_MOVE_USE},{url:"assets/audio/level-complete/Assassins.mp3",audioType:A.LEVEL_END_1},{url:"assets/audio/level-complete/Essence.mp3",audioType:A.LEVEL_END_2},{url:"assets/audio/level-complete/Sk8board.mp3",audioType:A.LEVEL_END_3}]},9208:(dn,dt,q)=>{"use strict";q.d(dt,{X:()=>Oe});var A=q(9587),b=q(6461),le=q(3999),ce=q(5e3);let Oe=(()=>{class Pe{constructor(){this.ProgressionMin=48,this.ProgressionMax=71,this._progressionNext=this.ProgressionMin,this._trackVolume=.5}get Volume(){return this._trackVolume}set Volume(Me){this._trackVolume=Me,b.Howler.volume(this._trackVolume)}PlayLevelComplete(){switch(Math.floor(3*Math.random())+1){case 1:this.PlayAudio(A.w.LEVEL_END_1);break;case 2:this.PlayAudio(A.w.LEVEL_END_2);break;default:this.PlayAudio(A.w.LEVEL_END_3)}}StopLevelComplete(){this.stopMusic(A.w.LEVEL_END_1),this.stopMusic(A.w.LEVEL_END_2),this.stopMusic(A.w.LEVEL_END_3)}PlayLevelStart(){switch(Math.floor(5*Math.random())+1){case 1:this.PlayAudio(A.w.LEVEL_START_1);break;case 2:this.PlayAudio(A.w.LEVEL_START_2);break;case 3:this.PlayAudio(A.w.LEVEL_START_3);break;case 4:this.PlayAudio(A.w.LEVEL_START_4);break;default:this.PlayAudio(A.w.LEVEL_START_5)}}StartProgression(){this._progressionNext=this.ProgressionMin}PlayAudio(Me,Se=!1){const We=A.y.find(S=>S.audioType===Me);We&&(We.howl?this.playLoadedAudio(We.howl,Se):(We.howl=new b.Howl({src:We.url}),We.howl.on("load",()=>{We.howl&&this.playLoadedAudio(We.howl,Se)})))}PlayLongMatch(Me){this.StartProgression();let Se=0;for(let We=0;We<Me-le.TT;We++)Se=this.nextProgression;this.PlayAudio(A.w.MATCH_LONG,!0)}playLoadedAudio(Me,Se){Me.rate(Se?this.nextProgression:1),Me.play()}stopMusic(Me){var Se;const We=A.y.find(S=>S.audioType===Me);We&&(null===(Se=We.howl)||void 0===Se||Se.stop())}get nextProgression(){return this._progressionNext++,this._progressionNext>this.ProgressionMax&&(this._progressionNext=this.ProgressionMin),Math.pow(2,(this._progressionNext-60)/12)}}return Pe.\u0275fac=function(Me){return new(Me||Pe)},Pe.\u0275prov=ce.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})()},2340:(dn,dt,q)=>{"use strict";q.d(dt,{N:()=>A});const A={production:!0,includeHelpers:!1}},9332:(dn,dt,q)=>{"use strict";var A=q(2313),b=q(5e3),j=q(843);const le=[{path:"game",loadChildren:()=>q.e(406).then(q.bind(q,9406)).then(L=>L.GameModule)},{path:"",redirectTo:"game",pathMatch:"full"}];let ce=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275mod=b.oAB({type:L}),L.\u0275inj=b.cJS({imports:[[j.Bz.forRoot(le)],j.Bz]}),L})();var Oe=q(5512),Pe=q(7423),Ge=q(8099);let Me=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275cmp=b.Xpm({type:L,selectors:[["wgl-about"]],decls:15,vars:0,consts:[["mat-dialog-title","",1,"dialog-header"],["mat-dialog-content",""],["target","_blank","href","https://audionautix.com/"],["target","_blank","href","https://mixkit.co/"],["mat-dialog-actions","","align","center"],["mat-button","","mat-dialog-close","","mat-icon-button","","color","primary","mat-mini-fab",""],["aria-hidden","false","aria-label","CLose"]],template:function(E,W){1&E&&(b.TgZ(0,"h1",0),b._uU(1,"About"),b.qZA(),b.TgZ(2,"div",1)(3,"p"),b._uU(4," Level End Music by "),b.TgZ(5,"a",2),b._uU(6,"audionautix.com"),b.qZA()(),b.TgZ(7,"p"),b._uU(8," Sound effect by "),b.TgZ(9,"a",3),b._uU(10,"mixkit"),b.qZA()()(),b.TgZ(11,"div",4)(12,"button",5)(13,"mat-icon",6),b._uU(14,"close"),b.qZA()()())},directives:[Oe.uh,Oe.xY,Oe.H8,Pe.lW,Oe.ZT,Ge.Hw],styles:[".dialog-header[_ngcontent-%COMP%]{text-align:center}"]}),L})();var Se=q(508),We=q(9808),S=q(925);const Y=["*",[["mat-toolbar-row"]]],J=["*","mat-toolbar-row"],de=(0,Se.pj)(class{constructor(L){this._elementRef=L}});let Ae=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275dir=b.lG2({type:L,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),L})(),ve=(()=>{class L extends de{constructor(E,W,it){super(E),this._platform=W,this._document=it}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return L.\u0275fac=function(E){return new(E||L)(b.Y36(b.SBq),b.Y36(S.t4),b.Y36(We.K0))},L.\u0275cmp=b.Xpm({type:L,selectors:[["mat-toolbar"]],contentQueries:function(E,W,it){if(1&E&&b.Suo(it,Ae,5),2&E){let sn;b.iGM(sn=b.CRH())&&(W._toolbarRows=sn)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(E,W){2&E&&b.ekj("mat-toolbar-multiple-rows",W._toolbarRows.length>0)("mat-toolbar-single-row",0===W._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[b.qOj],ngContentSelectors:J,decls:2,vars:0,template:function(E,W){1&E&&(b.F$t(Y),b.Hsn(0),b.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),L})(),Mt=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275mod=b.oAB({type:L}),L.\u0275inj=b.cJS({imports:[[Se.BQ],Se.BQ]}),L})();var Dt=q(9208),lt=q(3191),Ee=q(1159);q(2076),q(4128),q(4004);const Qe=new b.OlP("NgValueAccessor");var no=q(6360),lo=q(727),Fo=q(2494),_s=q(226);const ls=["sliderWrapper"],Ws=(0,S.i$)({passive:!1}),K={provide:Qe,useExisting:(0,b.Gpc)(()=>Ie),multi:!0};class te{}const Te=(0,Se.sb)((0,Se.pj)((0,Se.Id)(class{constructor(L){this._elementRef=L}}),"accent"));let Ie=(()=>{class L extends Te{constructor(E,W,it,sn,Li,or,Cr,Qr){super(E),this._focusMonitor=W,this._changeDetectorRef=it,this._dir=sn,this._ngZone=or,this._animationMode=Qr,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new b.vpe,this.input=new b.vpe,this.valueChange=new b.vpe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=lo.w0.EMPTY,this._pointerDown=Qi=>{this.disabled||this._isSliding||!It(Qi)&&0!==Qi.button||this._ngZone.run(()=>{this._touchId=It(Qi)?function fn(L,I){for(let E=0;E<L.touches.length;E++){const W=L.touches[E].target;if(I===W||I.contains(W))return L.touches[E].identifier}}(Qi,this._elementRef.nativeElement):void 0;const mn=_n(Qi,this._touchId);if(mn){const On=this.value;this._isSliding="pointer",this._lastPointerEvent=Qi,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(Qi),this._focusHostElement(),this._updateValueFromPosition(mn),this._valueOnSlideStart=On,Qi.cancelable&&Qi.preventDefault(),On!=this.value&&this._emitInputEvent()}})},this._pointerMove=Qi=>{if("pointer"===this._isSliding){const mn=_n(Qi,this._touchId);if(mn){Qi.preventDefault();const On=this.value;this._lastPointerEvent=Qi,this._updateValueFromPosition(mn),On!=this.value&&this._emitInputEvent()}}},this._pointerUp=Qi=>{"pointer"===this._isSliding&&(!It(Qi)||"number"!=typeof this._touchId||yn(Qi.changedTouches,this._touchId))&&(Qi.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=Cr,this.tabIndex=parseInt(Li)||0,or.runOutsideAngular(()=>{const Qi=E.nativeElement;Qi.addEventListener("mousedown",this._pointerDown,Ws),Qi.addEventListener("touchstart",this._pointerDown,Ws)})}get invert(){return this._invert}set invert(E){this._invert=(0,lt.Ig)(E)}get max(){return this._max}set max(E){this._max=(0,lt.su)(E,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(E){this._min=(0,lt.su)(E,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(E){this._step=(0,lt.su)(E,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(E){this._thumbLabel=(0,lt.Ig)(E)}get tickInterval(){return this._tickInterval}set tickInterval(E){this._tickInterval="auto"===E?"auto":"number"==typeof E||"string"==typeof E?(0,lt.su)(E,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(E){if(E!==this._value){let W=(0,lt.su)(E,0);this._roundToDecimal&&W!==this.min&&W!==this.max&&(W=parseFloat(W.toFixed(this._roundToDecimal))),this._value=W,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(E){this._vertical=(0,lt.Ig)(E)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(E){this._focusHostElement(E)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const W=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${W})`}}_getTrackFillStyles(){const E=this.percent,it=this.vertical?`1, ${E}, 1`:`${E}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${it})`,display:0===E?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let E=100*this._tickIntervalPercent,or={backgroundSize:this.vertical?`2px ${E}%`:`${E}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${E/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const Cr=this._shouldInvertAxis();let Qr;Qr=this.vertical?Cr?"Bottom":"Top":Cr?"Right":"Left",or[`padding${Qr}`]=`${this._getThumbGap()}px`}return or}_getThumbContainerStyles(){const E=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?E:!E)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const E=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?E:!E}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(E=>{this._isActive=!!E&&"keyboard"!==E,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const E=this._elementRef.nativeElement;E.removeEventListener("mousedown",this._pointerDown,Ws),E.removeEventListener("touchstart",this._pointerDown,Ws),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(E){if(this.disabled||(0,Ee.Vb)(E)||this._isSliding&&"keyboard"!==this._isSliding)return;const W=this.value;switch(E.keyCode){case Ee.Ku:this._increment(10);break;case Ee.VM:this._increment(-10);break;case Ee.uR:this.value=this.max;break;case Ee.Sd:this.value=this.min;break;case Ee.oh:this._increment("rtl"==this._getDirection()?1:-1);break;case Ee.LH:this._increment(1);break;case Ee.SV:this._increment("rtl"==this._getDirection()?-1:1);break;case Ee.JH:this._increment(-1);break;default:return}W!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",E.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(E){const W=this._document,it=It(E),Li=it?"touchend":"mouseup";W.addEventListener(it?"touchmove":"mousemove",this._pointerMove,Ws),W.addEventListener(Li,this._pointerUp,Ws),it&&W.addEventListener("touchcancel",this._pointerUp,Ws);const or=this._getWindow();void 0!==or&&or&&or.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const E=this._document;E.removeEventListener("mousemove",this._pointerMove,Ws),E.removeEventListener("mouseup",this._pointerUp,Ws),E.removeEventListener("touchmove",this._pointerMove,Ws),E.removeEventListener("touchend",this._pointerUp,Ws),E.removeEventListener("touchcancel",this._pointerUp,Ws);const W=this._getWindow();void 0!==W&&W&&W.removeEventListener("blur",this._windowBlur)}_increment(E){const W=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(W+this.step*E,this.min,this.max)}_updateValueFromPosition(E){if(!this._sliderDimensions)return;let Li=this._clamp(((this.vertical?E.y:E.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(Li=1-Li),0===Li)this.value=this.min;else if(1===Li)this.value=this.max;else{const or=this._calculateValue(Li),Cr=Math.round((or-this.min)/this.step)*this.step+this.min;this.value=this._clamp(Cr,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let E;if("auto"==this.tickInterval){let W=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;E=Math.ceil(30/(W*this.step/(this.max-this.min)))*this.step/W}else E=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=rt(E)?E:0}_createChangeEvent(E=this.value){let W=new te;return W.source=this,W.value=E,W}_calculatePercentage(E){const W=((E||0)-this.min)/(this.max-this.min);return rt(W)?W:0}_calculateValue(E){return this.min+E*(this.max-this.min)}_clamp(E,W=0,it=1){return Math.max(W,Math.min(E,it))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(E){this._elementRef.nativeElement.focus(E)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(E){this.value=E}registerOnChange(E){this._controlValueAccessorChangeFn=E}registerOnTouched(E){this.onTouched=E}setDisabledState(E){this.disabled=E}}return L.\u0275fac=function(E){return new(E||L)(b.Y36(b.SBq),b.Y36(Fo.tE),b.Y36(b.sBO),b.Y36(_s.Is,8),b.$8M("tabindex"),b.Y36(b.R0b),b.Y36(We.K0),b.Y36(no.Qb,8))},L.\u0275cmp=b.Xpm({type:L,selectors:[["mat-slider"]],viewQuery:function(E,W){if(1&E&&b.Gf(ls,5),2&E){let it;b.iGM(it=b.CRH())&&(W._sliderWrapper=it.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(E,W){1&E&&b.NdJ("focus",function(){return W._onFocus()})("blur",function(){return W._onBlur()})("keydown",function(sn){return W._onKeydown(sn)})("keyup",function(){return W._onKeyup()})("mouseenter",function(){return W._onMouseenter()})("selectstart",function(sn){return sn.preventDefault()}),2&E&&(b.Ikx("tabIndex",W.tabIndex),b.uIk("aria-disabled",W.disabled)("aria-valuemax",W.max)("aria-valuemin",W.min)("aria-valuenow",W.value)("aria-valuetext",null==W.valueText?W.displayValue:W.valueText)("aria-orientation",W.vertical?"vertical":"horizontal"),b.ekj("mat-slider-disabled",W.disabled)("mat-slider-has-ticks",W.tickInterval)("mat-slider-horizontal",!W.vertical)("mat-slider-axis-inverted",W._shouldInvertAxis())("mat-slider-invert-mouse-coords",W._shouldInvertMouseCoords())("mat-slider-sliding",W._isSliding)("mat-slider-thumb-label-showing",W.thumbLabel)("mat-slider-vertical",W.vertical)("mat-slider-min-value",W._isMinValue())("mat-slider-hide-last-tick",W.disabled||W._isMinValue()&&W._getThumbGap()&&W._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===W._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[b._Bn([K]),b.qOj],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(E,W){1&E&&(b.TgZ(0,"div",0,1)(2,"div",2),b._UZ(3,"div",3)(4,"div",4),b.qZA(),b.TgZ(5,"div",5),b._UZ(6,"div",6),b.qZA(),b.TgZ(7,"div",7),b._UZ(8,"div",8)(9,"div",9),b.TgZ(10,"div",10)(11,"span",11),b._uU(12),b.qZA()()()()),2&E&&(b.xp6(3),b.Q6J("ngStyle",W._getTrackBackgroundStyles()),b.xp6(1),b.Q6J("ngStyle",W._getTrackFillStyles()),b.xp6(1),b.Q6J("ngStyle",W._getTicksContainerStyles()),b.xp6(1),b.Q6J("ngStyle",W._getTicksStyles()),b.xp6(1),b.Q6J("ngStyle",W._getThumbContainerStyles()),b.xp6(5),b.Oqu(W.displayValue))},directives:[We.PC],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),L})();function rt(L){return!isNaN(L)&&isFinite(L)}function It(L){return"t"===L.type[0]}function _n(L,I){let E;return E=It(L)?"number"==typeof I?yn(L.touches,I)||yn(L.changedTouches,I):L.touches[0]||L.changedTouches[0]:L,E?{x:E.clientX,y:E.clientY}:void 0}function yn(L,I){for(let E=0;E<L.length;E++)if(L[E].identifier===I)return L[E]}let Jn=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275mod=b.oAB({type:L}),L.\u0275inj=b.cJS({imports:[[We.ez,Se.BQ],Se.BQ]}),L})();function jn(L,I){1&L&&(b.TgZ(0,"mat-icon"),b._uU(1,"volume_up"),b.qZA())}function gi(L,I){1&L&&(b.TgZ(0,"mat-icon"),b._uU(1,"volume_off"),b.qZA())}let Zi=(()=>{class L{constructor(E){this.audioManager=E,this.Muted=!1,this._currentVolume=this.audioManager.Volume}volumeChanged(E){this.Muted=!1,this.audioManager.Volume=E.value||0}toggleMute(){this.Muted=!this.Muted,this.Muted?(this._currentVolume=this.audioManager.Volume,this.audioManager.Volume=0):this.audioManager.Volume=this._currentVolume}}return L.\u0275fac=function(E){return new(E||L)(b.Y36(Dt.X))},L.\u0275cmp=b.Xpm({type:L,selectors:[["wgl-gain-control"]],decls:4,vars:3,consts:[["min","0.0","max","1.0","step","0.01",3,"value","input"],["mat-icon-button","","color","accent",3,"click"],[4,"ngIf"]],template:function(E,W){1&E&&(b.TgZ(0,"mat-slider",0),b.NdJ("input",function(sn){return W.volumeChanged(sn)}),b.qZA(),b.TgZ(1,"button",1),b.NdJ("click",function(){return W.toggleMute()}),b.YNc(2,jn,2,0,"mat-icon",2),b.YNc(3,gi,2,0,"mat-icon",2),b.qZA()),2&E&&(b.Q6J("value",W.audioManager.Volume),b.xp6(2),b.Q6J("ngIf",!W.Muted),b.xp6(1),b.Q6J("ngIf",W.Muted))},directives:[Ie,Pe.lW,We.O5,Ge.Hw],styles:[""]}),L})(),Hr=(()=>{class L{constructor(E){this.dialog=E,this.ABOUT_DIALOG_ID="about-dialog"}about(){const E=this.dialog.getDialogById(this.ABOUT_DIALOG_ID);E?E.close():this.dialog.open(Me,{id:this.ABOUT_DIALOG_ID})}}return L.\u0275fac=function(E){return new(E||L)(b.Y36(Oe.uw))},L.\u0275cmp=b.Xpm({type:L,selectors:[["wgl-root"]],decls:11,vars:0,consts:[[1,"main-container"],["color","primary",1,"mat-elevation-z4"],[1,"toolbar-item-spacer"],["mat-icon-button","",3,"click"]],template:function(E,W){1&E&&(b.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"span"),b._uU(3,"WebGL Demo"),b.qZA(),b._UZ(4,"span",2)(5,"wgl-gain-control"),b.TgZ(6,"button",3),b.NdJ("click",function(){return W.about()}),b.TgZ(7,"mat-icon"),b._uU(8,"info"),b.qZA()()(),b.TgZ(9,"main"),b._UZ(10,"router-outlet"),b.qZA()())},directives:[ve,Zi,Pe.lW,Ge.Hw,j.lC],styles:[".main-container[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:56px 1fr;overflow:hidden}.main-container[_ngcontent-%COMP%]   .toolbar-item-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),L})(),ps=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275mod=b.oAB({type:L}),L.\u0275inj=b.cJS({imports:[[We.ez,Jn,Pe.ot,Ge.Ps,Oe.Is]]}),L})(),Ji=(()=>{class L{}return L.\u0275fac=function(E){return new(E||L)},L.\u0275mod=b.oAB({type:L,bootstrap:[Hr]}),L.\u0275inj=b.cJS({providers:[],imports:[[A.b2,ce,A.t6,no.PW,ps,Mt,Pe.ot,Ge.Ps]]}),L})();q(2340).N.production&&(0,b.G48)(),A.q6().bootstrapModule(Ji).catch(L=>console.error(L))},6461:(dn,dt)=>{var A;!function(){"use strict";var b=function(){this.init()};b.prototype={init:function(){var S=this||j;return S._counter=1e3,S._html5AudioPool=[],S.html5PoolSize=10,S._codecs={},S._howls=[],S._muted=!1,S._volume=1,S._canPlayEvent="canplaythrough",S._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,S.masterGain=null,S.noAudio=!1,S.usingWebAudio=!0,S.autoSuspend=!0,S.ctx=null,S.autoUnlock=!0,S._setup(),S},volume:function(S){var Y=this||j;if(S=parseFloat(S),Y.ctx||We(),void 0!==S&&S>=0&&S<=1){if(Y._volume=S,Y._muted)return Y;Y.usingWebAudio&&Y.masterGain.gain.setValueAtTime(S,j.ctx.currentTime);for(var J=0;J<Y._howls.length;J++)if(!Y._howls[J]._webAudio)for(var de=Y._howls[J]._getSoundIds(),Ae=0;Ae<de.length;Ae++){var ve=Y._howls[J]._soundById(de[Ae]);ve&&ve._node&&(ve._node.volume=ve._volume*S)}return Y}return Y._volume},mute:function(S){var Y=this||j;Y.ctx||We(),Y._muted=S,Y.usingWebAudio&&Y.masterGain.gain.setValueAtTime(S?0:Y._volume,j.ctx.currentTime);for(var J=0;J<Y._howls.length;J++)if(!Y._howls[J]._webAudio)for(var de=Y._howls[J]._getSoundIds(),Ae=0;Ae<de.length;Ae++){var ve=Y._howls[J]._soundById(de[Ae]);ve&&ve._node&&(ve._node.muted=!!S||ve._muted)}return Y},stop:function(){for(var S=this||j,Y=0;Y<S._howls.length;Y++)S._howls[Y].stop();return S},unload:function(){for(var S=this||j,Y=S._howls.length-1;Y>=0;Y--)S._howls[Y].unload();return S.usingWebAudio&&S.ctx&&void 0!==S.ctx.close&&(S.ctx.close(),S.ctx=null,We()),S},codecs:function(S){return(this||j)._codecs[S.replace(/^x-/,"")]},_setup:function(){var S=this||j;if(S.state=S.ctx&&S.ctx.state||"suspended",S._autoSuspend(),!S.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(S._canPlayEvent="canplay")}catch(J){S.noAudio=!0}else S.noAudio=!0;try{(new Audio).muted&&(S.noAudio=!0)}catch(J){}return S.noAudio||S._setupCodecs(),S},_setupCodecs:function(){var S=this||j,Y=null;try{Y="undefined"!=typeof Audio?new Audio:null}catch(lt){return S}if(!Y||"function"!=typeof Y.canPlayType)return S;var J=Y.canPlayType("audio/mpeg;").replace(/^no$/,""),de=S._navigator?S._navigator.userAgent:"",Ae=de.match(/OPR\/([0-6].)/g),ve=Ae&&parseInt(Ae[0].split("/")[1],10)<33,Ne=-1!==de.indexOf("Safari")&&-1===de.indexOf("Chrome"),Mt=de.match(/Version\/(.*?) /),Dt=Ne&&Mt&&parseInt(Mt[1],10)<15;return S._codecs={mp3:!(ve||!J&&!Y.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!J,opus:!!Y.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!Y.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!Y.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(Y.canPlayType('audio/wav; codecs="1"')||Y.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!Y.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!Y.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(Y.canPlayType("audio/x-m4a;")||Y.canPlayType("audio/m4a;")||Y.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(Y.canPlayType("audio/x-m4b;")||Y.canPlayType("audio/m4b;")||Y.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(Y.canPlayType("audio/x-mp4;")||Y.canPlayType("audio/mp4;")||Y.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(Dt||!Y.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(Dt||!Y.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!Y.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(Y.canPlayType("audio/x-flac;")||Y.canPlayType("audio/flac;")).replace(/^no$/,"")},S},_unlockAudio:function(){var S=this||j;if(!S._audioUnlocked&&S.ctx){S._audioUnlocked=!1,S.autoUnlock=!1,!S._mobileUnloaded&&44100!==S.ctx.sampleRate&&(S._mobileUnloaded=!0,S.unload()),S._scratchBuffer=S.ctx.createBuffer(1,1,22050);var Y=function(J){for(;S._html5AudioPool.length<S.html5PoolSize;)try{var de=new Audio;de._unlocked=!0,S._releaseHtml5Audio(de)}catch(lt){S.noAudio=!0;break}for(var Ae=0;Ae<S._howls.length;Ae++)if(!S._howls[Ae]._webAudio)for(var ve=S._howls[Ae]._getSoundIds(),Ne=0;Ne<ve.length;Ne++){var Mt=S._howls[Ae]._soundById(ve[Ne]);Mt&&Mt._node&&!Mt._node._unlocked&&(Mt._node._unlocked=!0,Mt._node.load())}S._autoResume();var Dt=S.ctx.createBufferSource();Dt.buffer=S._scratchBuffer,Dt.connect(S.ctx.destination),void 0===Dt.start?Dt.noteOn(0):Dt.start(0),"function"==typeof S.ctx.resume&&S.ctx.resume(),Dt.onended=function(){Dt.disconnect(0),S._audioUnlocked=!0,document.removeEventListener("touchstart",Y,!0),document.removeEventListener("touchend",Y,!0),document.removeEventListener("click",Y,!0),document.removeEventListener("keydown",Y,!0);for(var lt=0;lt<S._howls.length;lt++)S._howls[lt]._emit("unlock")}};return document.addEventListener("touchstart",Y,!0),document.addEventListener("touchend",Y,!0),document.addEventListener("click",Y,!0),document.addEventListener("keydown",Y,!0),S}},_obtainHtml5Audio:function(){var S=this||j;if(S._html5AudioPool.length)return S._html5AudioPool.pop();var Y=(new Audio).play();return Y&&"undefined"!=typeof Promise&&(Y instanceof Promise||"function"==typeof Y.then)&&Y.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(S){var Y=this||j;return S._unlocked&&Y._html5AudioPool.push(S),Y},_autoSuspend:function(){var S=this;if(S.autoSuspend&&S.ctx&&void 0!==S.ctx.suspend&&j.usingWebAudio){for(var Y=0;Y<S._howls.length;Y++)if(S._howls[Y]._webAudio)for(var J=0;J<S._howls[Y]._sounds.length;J++)if(!S._howls[Y]._sounds[J]._paused)return S;return S._suspendTimer&&clearTimeout(S._suspendTimer),S._suspendTimer=setTimeout(function(){if(S.autoSuspend){S._suspendTimer=null,S.state="suspending";var de=function(){S.state="suspended",S._resumeAfterSuspend&&(delete S._resumeAfterSuspend,S._autoResume())};S.ctx.suspend().then(de,de)}},3e4),S}},_autoResume:function(){var S=this;if(S.ctx&&void 0!==S.ctx.resume&&j.usingWebAudio)return"running"===S.state&&"interrupted"!==S.ctx.state&&S._suspendTimer?(clearTimeout(S._suspendTimer),S._suspendTimer=null):"suspended"===S.state||"running"===S.state&&"interrupted"===S.ctx.state?(S.ctx.resume().then(function(){S.state="running";for(var Y=0;Y<S._howls.length;Y++)S._howls[Y]._emit("resume")}),S._suspendTimer&&(clearTimeout(S._suspendTimer),S._suspendTimer=null)):"suspending"===S.state&&(S._resumeAfterSuspend=!0),S}};var j=new b,le=function(S){S.src&&0!==S.src.length?this.init(S):console.error("An array of source files must be passed with any new Howl.")};le.prototype={init:function(S){var Y=this;return j.ctx||We(),Y._autoplay=S.autoplay||!1,Y._format="string"!=typeof S.format?S.format:[S.format],Y._html5=S.html5||!1,Y._muted=S.mute||!1,Y._loop=S.loop||!1,Y._pool=S.pool||5,Y._preload="boolean"!=typeof S.preload&&"metadata"!==S.preload||S.preload,Y._rate=S.rate||1,Y._sprite=S.sprite||{},Y._src="string"!=typeof S.src?S.src:[S.src],Y._volume=void 0!==S.volume?S.volume:1,Y._xhr={method:S.xhr&&S.xhr.method?S.xhr.method:"GET",headers:S.xhr&&S.xhr.headers?S.xhr.headers:null,withCredentials:!(!S.xhr||!S.xhr.withCredentials)&&S.xhr.withCredentials},Y._duration=0,Y._state="unloaded",Y._sounds=[],Y._endTimers={},Y._queue=[],Y._playLock=!1,Y._onend=S.onend?[{fn:S.onend}]:[],Y._onfade=S.onfade?[{fn:S.onfade}]:[],Y._onload=S.onload?[{fn:S.onload}]:[],Y._onloaderror=S.onloaderror?[{fn:S.onloaderror}]:[],Y._onplayerror=S.onplayerror?[{fn:S.onplayerror}]:[],Y._onpause=S.onpause?[{fn:S.onpause}]:[],Y._onplay=S.onplay?[{fn:S.onplay}]:[],Y._onstop=S.onstop?[{fn:S.onstop}]:[],Y._onmute=S.onmute?[{fn:S.onmute}]:[],Y._onvolume=S.onvolume?[{fn:S.onvolume}]:[],Y._onrate=S.onrate?[{fn:S.onrate}]:[],Y._onseek=S.onseek?[{fn:S.onseek}]:[],Y._onunlock=S.onunlock?[{fn:S.onunlock}]:[],Y._onresume=[],Y._webAudio=j.usingWebAudio&&!Y._html5,void 0!==j.ctx&&j.ctx&&j.autoUnlock&&j._unlockAudio(),j._howls.push(Y),Y._autoplay&&Y._queue.push({event:"play",action:function(){Y.play()}}),Y._preload&&"none"!==Y._preload&&Y.load(),Y},load:function(){var S=this,Y=null;if(j.noAudio)S._emit("loaderror",null,"No audio support.");else{"string"==typeof S._src&&(S._src=[S._src]);for(var J=0;J<S._src.length;J++){var de,Ae;if(S._format&&S._format[J])de=S._format[J];else{if("string"!=typeof(Ae=S._src[J])){S._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(de=/^data:audio\/([^;,]+);/i.exec(Ae))||(de=/\.([^.]+)$/.exec(Ae.split("?",1)[0])),de&&(de=de[1].toLowerCase())}if(de||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),de&&j.codecs(de)){Y=S._src[J];break}}if(Y)return S._src=Y,S._state="loading","https:"===window.location.protocol&&"http:"===Y.slice(0,5)&&(S._html5=!0,S._webAudio=!1),new ce(S),S._webAudio&&Pe(S),S;S._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(S,Y){var J=this,de=null;if("number"==typeof S)de=S,S=null;else{if("string"==typeof S&&"loaded"===J._state&&!J._sprite[S])return null;if(void 0===S&&(S="__default",!J._playLock)){for(var Ae=0,ve=0;ve<J._sounds.length;ve++)J._sounds[ve]._paused&&!J._sounds[ve]._ended&&(Ae++,de=J._sounds[ve]._id);1===Ae?S=null:de=null}}var Ne=de?J._soundById(de):J._inactiveSound();if(!Ne)return null;if(de&&!S&&(S=Ne._sprite||"__default"),"loaded"!==J._state){Ne._sprite=S,Ne._ended=!1;var Mt=Ne._id;return J._queue.push({event:"play",action:function(){J.play(Mt)}}),Mt}if(de&&!Ne._paused)return Y||J._loadQueue("play"),Ne._id;J._webAudio&&j._autoResume();var Dt=Math.max(0,Ne._seek>0?Ne._seek:J._sprite[S][0]/1e3),lt=Math.max(0,(J._sprite[S][0]+J._sprite[S][1])/1e3-Dt),Ee=1e3*lt/Math.abs(Ne._rate),ut=J._sprite[S][0]/1e3,St=(J._sprite[S][0]+J._sprite[S][1])/1e3;Ne._sprite=S,Ne._ended=!1;var bt=function(){Ne._paused=!1,Ne._seek=Dt,Ne._start=ut,Ne._stop=St,Ne._loop=!(!Ne._loop&&!J._sprite[S][2])};if(!(Dt>=St)){var xt=Ne._node;if(J._webAudio){var qe=function(){J._playLock=!1,bt(),J._refreshBuffer(Ne),xt.gain.setValueAtTime(Ne._muted||J._muted?0:Ne._volume,j.ctx.currentTime),Ne._playStart=j.ctx.currentTime,void 0===xt.bufferSource.start?xt.bufferSource.noteGrainOn(0,Dt,Ne._loop?86400:lt):xt.bufferSource.start(0,Dt,Ne._loop?86400:lt),Ee!==1/0&&(J._endTimers[Ne._id]=setTimeout(J._ended.bind(J,Ne),Ee)),Y||setTimeout(function(){J._emit("play",Ne._id),J._loadQueue()},0)};"running"===j.state&&"interrupted"!==j.ctx.state?qe():(J._playLock=!0,J.once("resume",qe),J._clearTimer(Ne._id))}else{var Qe=function(){xt.currentTime=Dt,xt.muted=Ne._muted||J._muted||j._muted||xt.muted,xt.volume=Ne._volume*j.volume(),xt.playbackRate=Ne._rate;try{var Vt=xt.play();if(Vt&&"undefined"!=typeof Promise&&(Vt instanceof Promise||"function"==typeof Vt.then)?(J._playLock=!0,bt(),Vt.then(function(){J._playLock=!1,xt._unlocked=!0,Y?J._loadQueue():J._emit("play",Ne._id)}).catch(function(){J._playLock=!1,J._emit("playerror",Ne._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),Ne._ended=!0,Ne._paused=!0})):Y||(J._playLock=!1,bt(),J._emit("play",Ne._id)),xt.playbackRate=Ne._rate,xt.paused)return void J._emit("playerror",Ne._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==S||Ne._loop?J._endTimers[Ne._id]=setTimeout(J._ended.bind(J,Ne),Ee):(J._endTimers[Ne._id]=function(){J._ended(Ne),xt.removeEventListener("ended",J._endTimers[Ne._id],!1)},xt.addEventListener("ended",J._endTimers[Ne._id],!1))}catch(yt){J._emit("playerror",Ne._id,yt)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===xt.src&&(xt.src=J._src,xt.load());var pt=window&&window.ejecta||!xt.readyState&&j._navigator.isCocoonJS;if(xt.readyState>=3||pt)Qe();else{J._playLock=!0,J._state="loading";var _t=function(){J._state="loaded",Qe(),xt.removeEventListener(j._canPlayEvent,_t,!1)};xt.addEventListener(j._canPlayEvent,_t,!1),J._clearTimer(Ne._id)}}return Ne._id}J._ended(Ne)},pause:function(S){var Y=this;if("loaded"!==Y._state||Y._playLock)return Y._queue.push({event:"pause",action:function(){Y.pause(S)}}),Y;for(var J=Y._getSoundIds(S),de=0;de<J.length;de++){Y._clearTimer(J[de]);var Ae=Y._soundById(J[de]);if(Ae&&!Ae._paused&&(Ae._seek=Y.seek(J[de]),Ae._rateSeek=0,Ae._paused=!0,Y._stopFade(J[de]),Ae._node))if(Y._webAudio){if(!Ae._node.bufferSource)continue;void 0===Ae._node.bufferSource.stop?Ae._node.bufferSource.noteOff(0):Ae._node.bufferSource.stop(0),Y._cleanBuffer(Ae._node)}else(!isNaN(Ae._node.duration)||Ae._node.duration===1/0)&&Ae._node.pause();arguments[1]||Y._emit("pause",Ae?Ae._id:null)}return Y},stop:function(S,Y){var J=this;if("loaded"!==J._state||J._playLock)return J._queue.push({event:"stop",action:function(){J.stop(S)}}),J;for(var de=J._getSoundIds(S),Ae=0;Ae<de.length;Ae++){J._clearTimer(de[Ae]);var ve=J._soundById(de[Ae]);ve&&(ve._seek=ve._start||0,ve._rateSeek=0,ve._paused=!0,ve._ended=!0,J._stopFade(de[Ae]),ve._node&&(J._webAudio?ve._node.bufferSource&&(void 0===ve._node.bufferSource.stop?ve._node.bufferSource.noteOff(0):ve._node.bufferSource.stop(0),J._cleanBuffer(ve._node)):(!isNaN(ve._node.duration)||ve._node.duration===1/0)&&(ve._node.currentTime=ve._start||0,ve._node.pause(),ve._node.duration===1/0&&J._clearSound(ve._node))),Y||J._emit("stop",ve._id))}return J},mute:function(S,Y){var J=this;if("loaded"!==J._state||J._playLock)return J._queue.push({event:"mute",action:function(){J.mute(S,Y)}}),J;if(void 0===Y){if("boolean"!=typeof S)return J._muted;J._muted=S}for(var de=J._getSoundIds(Y),Ae=0;Ae<de.length;Ae++){var ve=J._soundById(de[Ae]);ve&&(ve._muted=S,ve._interval&&J._stopFade(ve._id),J._webAudio&&ve._node?ve._node.gain.setValueAtTime(S?0:ve._volume,j.ctx.currentTime):ve._node&&(ve._node.muted=!!j._muted||S),J._emit("mute",ve._id))}return J},volume:function(){var J,de,Ne,S=this,Y=arguments;if(0===Y.length)return S._volume;if(1===Y.length||2===Y.length&&void 0===Y[1]){var Ae=S._getSoundIds(),ve=Ae.indexOf(Y[0]);ve>=0?de=parseInt(Y[0],10):J=parseFloat(Y[0])}else Y.length>=2&&(J=parseFloat(Y[0]),de=parseInt(Y[1],10));if(!(void 0!==J&&J>=0&&J<=1))return(Ne=de?S._soundById(de):S._sounds[0])?Ne._volume:0;if("loaded"!==S._state||S._playLock)return S._queue.push({event:"volume",action:function(){S.volume.apply(S,Y)}}),S;void 0===de&&(S._volume=J),de=S._getSoundIds(de);for(var Mt=0;Mt<de.length;Mt++)(Ne=S._soundById(de[Mt]))&&(Ne._volume=J,Y[2]||S._stopFade(de[Mt]),S._webAudio&&Ne._node&&!Ne._muted?Ne._node.gain.setValueAtTime(J,j.ctx.currentTime):Ne._node&&!Ne._muted&&(Ne._node.volume=J*j.volume()),S._emit("volume",Ne._id));return S},fade:function(S,Y,J,de){var Ae=this;if("loaded"!==Ae._state||Ae._playLock)return Ae._queue.push({event:"fade",action:function(){Ae.fade(S,Y,J,de)}}),Ae;S=Math.min(Math.max(0,parseFloat(S)),1),Y=Math.min(Math.max(0,parseFloat(Y)),1),J=parseFloat(J),Ae.volume(S,de);for(var ve=Ae._getSoundIds(de),Ne=0;Ne<ve.length;Ne++){var Mt=Ae._soundById(ve[Ne]);if(Mt){if(de||Ae._stopFade(ve[Ne]),Ae._webAudio&&!Mt._muted){var Dt=j.ctx.currentTime,lt=Dt+J/1e3;Mt._volume=S,Mt._node.gain.setValueAtTime(S,Dt),Mt._node.gain.linearRampToValueAtTime(Y,lt)}Ae._startFadeInterval(Mt,S,Y,J,ve[Ne],void 0===de)}}return Ae},_startFadeInterval:function(S,Y,J,de,Ae,ve){var Ne=this,Mt=Y,Dt=J-Y,lt=Math.abs(Dt/.01),Ee=Math.max(4,lt>0?de/lt:de),ut=Date.now();S._fadeTo=J,S._interval=setInterval(function(){var St=(Date.now()-ut)/de;ut=Date.now(),Mt+=Dt*St,Mt=Math.round(100*Mt)/100,Mt=Dt<0?Math.max(J,Mt):Math.min(J,Mt),Ne._webAudio?S._volume=Mt:Ne.volume(Mt,S._id,!0),ve&&(Ne._volume=Mt),(J<Y&&Mt<=J||J>Y&&Mt>=J)&&(clearInterval(S._interval),S._interval=null,S._fadeTo=null,Ne.volume(J,S._id),Ne._emit("fade",S._id))},Ee)},_stopFade:function(S){var Y=this,J=Y._soundById(S);return J&&J._interval&&(Y._webAudio&&J._node.gain.cancelScheduledValues(j.ctx.currentTime),clearInterval(J._interval),J._interval=null,Y.volume(J._fadeTo,S),J._fadeTo=null,Y._emit("fade",S)),Y},loop:function(){var J,de,Ae,S=this,Y=arguments;if(0===Y.length)return S._loop;if(1===Y.length){if("boolean"!=typeof Y[0])return!!(Ae=S._soundById(parseInt(Y[0],10)))&&Ae._loop;S._loop=J=Y[0]}else 2===Y.length&&(J=Y[0],de=parseInt(Y[1],10));for(var ve=S._getSoundIds(de),Ne=0;Ne<ve.length;Ne++)(Ae=S._soundById(ve[Ne]))&&(Ae._loop=J,S._webAudio&&Ae._node&&Ae._node.bufferSource&&(Ae._node.bufferSource.loop=J,J&&(Ae._node.bufferSource.loopStart=Ae._start||0,Ae._node.bufferSource.loopEnd=Ae._stop,S.playing(ve[Ne])&&(S.pause(ve[Ne],!0),S.play(ve[Ne],!0)))));return S},rate:function(){var J,de,Ne,S=this,Y=arguments;if(0===Y.length)de=S._sounds[0]._id;else if(1===Y.length){var Ae=S._getSoundIds(),ve=Ae.indexOf(Y[0]);ve>=0?de=parseInt(Y[0],10):J=parseFloat(Y[0])}else 2===Y.length&&(J=parseFloat(Y[0]),de=parseInt(Y[1],10));if("number"!=typeof J)return(Ne=S._soundById(de))?Ne._rate:S._rate;if("loaded"!==S._state||S._playLock)return S._queue.push({event:"rate",action:function(){S.rate.apply(S,Y)}}),S;void 0===de&&(S._rate=J),de=S._getSoundIds(de);for(var Mt=0;Mt<de.length;Mt++)if(Ne=S._soundById(de[Mt])){S.playing(de[Mt])&&(Ne._rateSeek=S.seek(de[Mt]),Ne._playStart=S._webAudio?j.ctx.currentTime:Ne._playStart),Ne._rate=J,S._webAudio&&Ne._node&&Ne._node.bufferSource?Ne._node.bufferSource.playbackRate.setValueAtTime(J,j.ctx.currentTime):Ne._node&&(Ne._node.playbackRate=J);var Dt=S.seek(de[Mt]),lt=(S._sprite[Ne._sprite][0]+S._sprite[Ne._sprite][1])/1e3-Dt,Ee=1e3*lt/Math.abs(Ne._rate);(S._endTimers[de[Mt]]||!Ne._paused)&&(S._clearTimer(de[Mt]),S._endTimers[de[Mt]]=setTimeout(S._ended.bind(S,Ne),Ee)),S._emit("rate",Ne._id)}return S},seek:function(){var J,de,S=this,Y=arguments;if(0===Y.length)S._sounds.length&&(de=S._sounds[0]._id);else if(1===Y.length){var Ae=S._getSoundIds(),ve=Ae.indexOf(Y[0]);ve>=0?de=parseInt(Y[0],10):S._sounds.length&&(de=S._sounds[0]._id,J=parseFloat(Y[0]))}else 2===Y.length&&(J=parseFloat(Y[0]),de=parseInt(Y[1],10));if(void 0===de)return 0;if("number"==typeof J&&("loaded"!==S._state||S._playLock))return S._queue.push({event:"seek",action:function(){S.seek.apply(S,Y)}}),S;var Ne=S._soundById(de);if(Ne){if(!("number"==typeof J&&J>=0)){if(S._webAudio){var Ee=S.playing(de)?j.ctx.currentTime-Ne._playStart:0,ut=Ne._rateSeek?Ne._rateSeek-Ne._seek:0;return Ne._seek+(ut+Ee*Math.abs(Ne._rate))}return Ne._node.currentTime}var Mt=S.playing(de);Mt&&S.pause(de,!0),Ne._seek=J,Ne._ended=!1,S._clearTimer(de),!S._webAudio&&Ne._node&&!isNaN(Ne._node.duration)&&(Ne._node.currentTime=J);var Dt=function(){Mt&&S.play(de,!0),S._emit("seek",de)};if(Mt&&!S._webAudio){var lt=function(){S._playLock?setTimeout(lt,0):Dt()};setTimeout(lt,0)}else Dt()}return S},playing:function(S){var Y=this;if("number"==typeof S){var J=Y._soundById(S);return!!J&&!J._paused}for(var de=0;de<Y._sounds.length;de++)if(!Y._sounds[de]._paused)return!0;return!1},duration:function(S){var Y=this,J=Y._duration,de=Y._soundById(S);return de&&(J=Y._sprite[de._sprite][1]/1e3),J},state:function(){return this._state},unload:function(){for(var S=this,Y=S._sounds,J=0;J<Y.length;J++)Y[J]._paused||S.stop(Y[J]._id),S._webAudio||(S._clearSound(Y[J]._node),Y[J]._node.removeEventListener("error",Y[J]._errorFn,!1),Y[J]._node.removeEventListener(j._canPlayEvent,Y[J]._loadFn,!1),Y[J]._node.removeEventListener("ended",Y[J]._endFn,!1),j._releaseHtml5Audio(Y[J]._node)),delete Y[J]._node,S._clearTimer(Y[J]._id);var de=j._howls.indexOf(S);de>=0&&j._howls.splice(de,1);var Ae=!0;for(J=0;J<j._howls.length;J++)if(j._howls[J]._src===S._src||S._src.indexOf(j._howls[J]._src)>=0){Ae=!1;break}return Oe&&Ae&&delete Oe[S._src],j.noAudio=!1,S._state="unloaded",S._sounds=[],S=null,null},on:function(S,Y,J,de){return"function"==typeof Y&&this["_on"+S].push(de?{id:J,fn:Y,once:de}:{id:J,fn:Y}),this},off:function(S,Y,J){var de=this,Ae=de["_on"+S],ve=0;if("number"==typeof Y&&(J=Y,Y=null),Y||J)for(ve=0;ve<Ae.length;ve++){var Ne=J===Ae[ve].id;if(Y===Ae[ve].fn&&Ne||!Y&&Ne){Ae.splice(ve,1);break}}else if(S)de["_on"+S]=[];else{var Mt=Object.keys(de);for(ve=0;ve<Mt.length;ve++)0===Mt[ve].indexOf("_on")&&Array.isArray(de[Mt[ve]])&&(de[Mt[ve]]=[])}return de},once:function(S,Y,J){return this.on(S,Y,J,1),this},_emit:function(S,Y,J){for(var de=this,Ae=de["_on"+S],ve=Ae.length-1;ve>=0;ve--)(!Ae[ve].id||Ae[ve].id===Y||"load"===S)&&(setTimeout(function(Ne){Ne.call(this,Y,J)}.bind(de,Ae[ve].fn),0),Ae[ve].once&&de.off(S,Ae[ve].fn,Ae[ve].id));return de._loadQueue(S),de},_loadQueue:function(S){var Y=this;if(Y._queue.length>0){var J=Y._queue[0];J.event===S&&(Y._queue.shift(),Y._loadQueue()),S||J.action()}return Y},_ended:function(S){var Y=this,J=S._sprite;if(!Y._webAudio&&S._node&&!S._node.paused&&!S._node.ended&&S._node.currentTime<S._stop)return setTimeout(Y._ended.bind(Y,S),100),Y;var de=!(!S._loop&&!Y._sprite[J][2]);if(Y._emit("end",S._id),!Y._webAudio&&de&&Y.stop(S._id,!0).play(S._id),Y._webAudio&&de){Y._emit("play",S._id),S._seek=S._start||0,S._rateSeek=0,S._playStart=j.ctx.currentTime;var Ae=1e3*(S._stop-S._start)/Math.abs(S._rate);Y._endTimers[S._id]=setTimeout(Y._ended.bind(Y,S),Ae)}return Y._webAudio&&!de&&(S._paused=!0,S._ended=!0,S._seek=S._start||0,S._rateSeek=0,Y._clearTimer(S._id),Y._cleanBuffer(S._node),j._autoSuspend()),!Y._webAudio&&!de&&Y.stop(S._id,!0),Y},_clearTimer:function(S){var Y=this;if(Y._endTimers[S]){if("function"!=typeof Y._endTimers[S])clearTimeout(Y._endTimers[S]);else{var J=Y._soundById(S);J&&J._node&&J._node.removeEventListener("ended",Y._endTimers[S],!1)}delete Y._endTimers[S]}return Y},_soundById:function(S){for(var Y=this,J=0;J<Y._sounds.length;J++)if(S===Y._sounds[J]._id)return Y._sounds[J];return null},_inactiveSound:function(){var S=this;S._drain();for(var Y=0;Y<S._sounds.length;Y++)if(S._sounds[Y]._ended)return S._sounds[Y].reset();return new ce(S)},_drain:function(){var S=this,Y=S._pool,J=0,de=0;if(!(S._sounds.length<Y)){for(de=0;de<S._sounds.length;de++)S._sounds[de]._ended&&J++;for(de=S._sounds.length-1;de>=0;de--){if(J<=Y)return;S._sounds[de]._ended&&(S._webAudio&&S._sounds[de]._node&&S._sounds[de]._node.disconnect(0),S._sounds.splice(de,1),J--)}}},_getSoundIds:function(S){if(void 0===S){for(var J=[],de=0;de<this._sounds.length;de++)J.push(this._sounds[de]._id);return J}return[S]},_refreshBuffer:function(S){return S._node.bufferSource=j.ctx.createBufferSource(),S._node.bufferSource.buffer=Oe[this._src],S._node.bufferSource.connect(S._panner?S._panner:S._node),S._node.bufferSource.loop=S._loop,S._loop&&(S._node.bufferSource.loopStart=S._start||0,S._node.bufferSource.loopEnd=S._stop||0),S._node.bufferSource.playbackRate.setValueAtTime(S._rate,j.ctx.currentTime),this},_cleanBuffer:function(S){var J=j._navigator&&j._navigator.vendor.indexOf("Apple")>=0;if(j._scratchBuffer&&S.bufferSource&&(S.bufferSource.onended=null,S.bufferSource.disconnect(0),J))try{S.bufferSource.buffer=j._scratchBuffer}catch(de){}return S.bufferSource=null,this},_clearSound:function(S){/MSIE |Trident\//.test(j._navigator&&j._navigator.userAgent)||(S.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var ce=function(S){this._parent=S,this.init()};ce.prototype={init:function(){var S=this,Y=S._parent;return S._muted=Y._muted,S._loop=Y._loop,S._volume=Y._volume,S._rate=Y._rate,S._seek=0,S._paused=!0,S._ended=!0,S._sprite="__default",S._id=++j._counter,Y._sounds.push(S),S.create(),S},create:function(){var S=this,Y=S._parent,J=j._muted||S._muted||S._parent._muted?0:S._volume;return Y._webAudio?(S._node=void 0===j.ctx.createGain?j.ctx.createGainNode():j.ctx.createGain(),S._node.gain.setValueAtTime(J,j.ctx.currentTime),S._node.paused=!0,S._node.connect(j.masterGain)):j.noAudio||(S._node=j._obtainHtml5Audio(),S._errorFn=S._errorListener.bind(S),S._node.addEventListener("error",S._errorFn,!1),S._loadFn=S._loadListener.bind(S),S._node.addEventListener(j._canPlayEvent,S._loadFn,!1),S._endFn=S._endListener.bind(S),S._node.addEventListener("ended",S._endFn,!1),S._node.src=Y._src,S._node.preload=!0===Y._preload?"auto":Y._preload,S._node.volume=J*j.volume(),S._node.load()),S},reset:function(){var S=this,Y=S._parent;return S._muted=Y._muted,S._loop=Y._loop,S._volume=Y._volume,S._rate=Y._rate,S._seek=0,S._rateSeek=0,S._paused=!0,S._ended=!0,S._sprite="__default",S._id=++j._counter,S},_errorListener:function(){var S=this;S._parent._emit("loaderror",S._id,S._node.error?S._node.error.code:0),S._node.removeEventListener("error",S._errorFn,!1)},_loadListener:function(){var S=this,Y=S._parent;Y._duration=Math.ceil(10*S._node.duration)/10,0===Object.keys(Y._sprite).length&&(Y._sprite={__default:[0,1e3*Y._duration]}),"loaded"!==Y._state&&(Y._state="loaded",Y._emit("load"),Y._loadQueue()),S._node.removeEventListener(j._canPlayEvent,S._loadFn,!1)},_endListener:function(){var S=this,Y=S._parent;Y._duration===1/0&&(Y._duration=Math.ceil(10*S._node.duration)/10,Y._sprite.__default[1]===1/0&&(Y._sprite.__default[1]=1e3*Y._duration),Y._ended(S)),S._node.removeEventListener("ended",S._endFn,!1)}};var Oe={},Pe=function(S){var Y=S._src;if(Oe[Y])return S._duration=Oe[Y].duration,void Se(S);if(/^data:[^;]+;base64,/.test(Y)){for(var J=atob(Y.split(",")[1]),de=new Uint8Array(J.length),Ae=0;Ae<J.length;++Ae)de[Ae]=J.charCodeAt(Ae);Me(de.buffer,S)}else{var ve=new XMLHttpRequest;ve.open(S._xhr.method,Y,!0),ve.withCredentials=S._xhr.withCredentials,ve.responseType="arraybuffer",S._xhr.headers&&Object.keys(S._xhr.headers).forEach(function(Ne){ve.setRequestHeader(Ne,S._xhr.headers[Ne])}),ve.onload=function(){var Ne=(ve.status+"")[0];"0"===Ne||"2"===Ne||"3"===Ne?Me(ve.response,S):S._emit("loaderror",null,"Failed loading audio file with status: "+ve.status+".")},ve.onerror=function(){S._webAudio&&(S._html5=!0,S._webAudio=!1,S._sounds=[],delete Oe[Y],S.load())},Ge(ve)}},Ge=function(S){try{S.send()}catch(Y){S.onerror()}},Me=function(S,Y){var J=function(){Y._emit("loaderror",null,"Decoding audio data failed.")},de=function(Ae){Ae&&Y._sounds.length>0?(Oe[Y._src]=Ae,Se(Y,Ae)):J()};"undefined"!=typeof Promise&&1===j.ctx.decodeAudioData.length?j.ctx.decodeAudioData(S).then(de).catch(J):j.ctx.decodeAudioData(S,de,J)},Se=function(S,Y){Y&&!S._duration&&(S._duration=Y.duration),0===Object.keys(S._sprite).length&&(S._sprite={__default:[0,1e3*S._duration]}),"loaded"!==S._state&&(S._state="loaded",S._emit("load"),S._loadQueue())},We=function(){if(j.usingWebAudio){try{"undefined"!=typeof AudioContext?j.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?j.ctx=new webkitAudioContext:j.usingWebAudio=!1}catch(Ae){j.usingWebAudio=!1}j.ctx||(j.usingWebAudio=!1);var S=/iP(hone|od|ad)/.test(j._navigator&&j._navigator.platform),Y=j._navigator&&j._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),J=Y?parseInt(Y[1],10):null;if(S&&J&&J<9){var de=/safari/.test(j._navigator&&j._navigator.userAgent.toLowerCase());j._navigator&&!de&&(j.usingWebAudio=!1)}j.usingWebAudio&&(j.masterGain=void 0===j.ctx.createGain?j.ctx.createGainNode():j.ctx.createGain(),j.masterGain.gain.setValueAtTime(j._muted?0:j._volume,j.ctx.currentTime),j.masterGain.connect(j.ctx.destination)),j._setup()}};void 0!==(A=function(){return{Howler:j,Howl:le}}.apply(dt,[]))&&(dn.exports=A),dt.Howler=j,dt.Howl=le,"undefined"!=typeof global?(global.HowlerGlobal=b,global.Howler=j,global.Howl=le,global.Sound=ce):"undefined"!=typeof window&&(window.HowlerGlobal=b,window.Howler=j,window.Howl=le,window.Sound=ce)}(),function(){"use strict";var j;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(j){var le=this;if(!le.ctx||!le.ctx.listener)return le;for(var ce=le._howls.length-1;ce>=0;ce--)le._howls[ce].stereo(j);return le},HowlerGlobal.prototype.pos=function(j,le,ce){var Oe=this;return Oe.ctx&&Oe.ctx.listener?"number"!=typeof j?Oe._pos:(Oe._pos=[j,le="number"!=typeof le?Oe._pos[1]:le,ce="number"!=typeof ce?Oe._pos[2]:ce],void 0!==Oe.ctx.listener.positionX?(Oe.ctx.listener.positionX.setTargetAtTime(Oe._pos[0],Howler.ctx.currentTime,.1),Oe.ctx.listener.positionY.setTargetAtTime(Oe._pos[1],Howler.ctx.currentTime,.1),Oe.ctx.listener.positionZ.setTargetAtTime(Oe._pos[2],Howler.ctx.currentTime,.1)):Oe.ctx.listener.setPosition(Oe._pos[0],Oe._pos[1],Oe._pos[2]),Oe):Oe},HowlerGlobal.prototype.orientation=function(j,le,ce,Oe,Pe,Ge){var Me=this;if(!Me.ctx||!Me.ctx.listener)return Me;var Se=Me._orientation;return"number"!=typeof j?Se:(Me._orientation=[j,le="number"!=typeof le?Se[1]:le,ce="number"!=typeof ce?Se[2]:ce,Oe="number"!=typeof Oe?Se[3]:Oe,Pe="number"!=typeof Pe?Se[4]:Pe,Ge="number"!=typeof Ge?Se[5]:Ge],void 0!==Me.ctx.listener.forwardX?(Me.ctx.listener.forwardX.setTargetAtTime(j,Howler.ctx.currentTime,.1),Me.ctx.listener.forwardY.setTargetAtTime(le,Howler.ctx.currentTime,.1),Me.ctx.listener.forwardZ.setTargetAtTime(ce,Howler.ctx.currentTime,.1),Me.ctx.listener.upX.setTargetAtTime(Oe,Howler.ctx.currentTime,.1),Me.ctx.listener.upY.setTargetAtTime(Pe,Howler.ctx.currentTime,.1),Me.ctx.listener.upZ.setTargetAtTime(Ge,Howler.ctx.currentTime,.1)):Me.ctx.listener.setOrientation(j,le,ce,Oe,Pe,Ge),Me)},Howl.prototype.init=(j=Howl.prototype.init,function(le){var ce=this;return ce._orientation=le.orientation||[1,0,0],ce._stereo=le.stereo||null,ce._pos=le.pos||null,ce._pannerAttr={coneInnerAngle:void 0!==le.coneInnerAngle?le.coneInnerAngle:360,coneOuterAngle:void 0!==le.coneOuterAngle?le.coneOuterAngle:360,coneOuterGain:void 0!==le.coneOuterGain?le.coneOuterGain:0,distanceModel:void 0!==le.distanceModel?le.distanceModel:"inverse",maxDistance:void 0!==le.maxDistance?le.maxDistance:1e4,panningModel:void 0!==le.panningModel?le.panningModel:"HRTF",refDistance:void 0!==le.refDistance?le.refDistance:1,rolloffFactor:void 0!==le.rolloffFactor?le.rolloffFactor:1},ce._onstereo=le.onstereo?[{fn:le.onstereo}]:[],ce._onpos=le.onpos?[{fn:le.onpos}]:[],ce._onorientation=le.onorientation?[{fn:le.onorientation}]:[],j.call(this,le)}),Howl.prototype.stereo=function(j,le){var ce=this;if(!ce._webAudio)return ce;if("loaded"!==ce._state)return ce._queue.push({event:"stereo",action:function(){ce.stereo(j,le)}}),ce;var Oe=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===le){if("number"!=typeof j)return ce._stereo;ce._stereo=j,ce._pos=[j,0,0]}for(var Pe=ce._getSoundIds(le),Ge=0;Ge<Pe.length;Ge++){var Me=ce._soundById(Pe[Ge]);if(Me){if("number"!=typeof j)return Me._stereo;Me._stereo=j,Me._pos=[j,0,0],Me._node&&(Me._pannerAttr.panningModel="equalpower",(!Me._panner||!Me._panner.pan)&&b(Me,Oe),"spatial"===Oe?void 0!==Me._panner.positionX?(Me._panner.positionX.setValueAtTime(j,Howler.ctx.currentTime),Me._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),Me._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):Me._panner.setPosition(j,0,0):Me._panner.pan.setValueAtTime(j,Howler.ctx.currentTime)),ce._emit("stereo",Me._id)}}return ce},Howl.prototype.pos=function(j,le,ce,Oe){var Pe=this;if(!Pe._webAudio)return Pe;if("loaded"!==Pe._state)return Pe._queue.push({event:"pos",action:function(){Pe.pos(j,le,ce,Oe)}}),Pe;if(le="number"!=typeof le?0:le,ce="number"!=typeof ce?-.5:ce,void 0===Oe){if("number"!=typeof j)return Pe._pos;Pe._pos=[j,le,ce]}for(var Ge=Pe._getSoundIds(Oe),Me=0;Me<Ge.length;Me++){var Se=Pe._soundById(Ge[Me]);if(Se){if("number"!=typeof j)return Se._pos;Se._pos=[j,le,ce],Se._node&&((!Se._panner||Se._panner.pan)&&b(Se,"spatial"),void 0!==Se._panner.positionX?(Se._panner.positionX.setValueAtTime(j,Howler.ctx.currentTime),Se._panner.positionY.setValueAtTime(le,Howler.ctx.currentTime),Se._panner.positionZ.setValueAtTime(ce,Howler.ctx.currentTime)):Se._panner.setPosition(j,le,ce)),Pe._emit("pos",Se._id)}}return Pe},Howl.prototype.orientation=function(j,le,ce,Oe){var Pe=this;if(!Pe._webAudio)return Pe;if("loaded"!==Pe._state)return Pe._queue.push({event:"orientation",action:function(){Pe.orientation(j,le,ce,Oe)}}),Pe;if(le="number"!=typeof le?Pe._orientation[1]:le,ce="number"!=typeof ce?Pe._orientation[2]:ce,void 0===Oe){if("number"!=typeof j)return Pe._orientation;Pe._orientation=[j,le,ce]}for(var Ge=Pe._getSoundIds(Oe),Me=0;Me<Ge.length;Me++){var Se=Pe._soundById(Ge[Me]);if(Se){if("number"!=typeof j)return Se._orientation;Se._orientation=[j,le,ce],Se._node&&(Se._panner||(Se._pos||(Se._pos=Pe._pos||[0,0,-.5]),b(Se,"spatial")),void 0!==Se._panner.orientationX?(Se._panner.orientationX.setValueAtTime(j,Howler.ctx.currentTime),Se._panner.orientationY.setValueAtTime(le,Howler.ctx.currentTime),Se._panner.orientationZ.setValueAtTime(ce,Howler.ctx.currentTime)):Se._panner.setOrientation(j,le,ce)),Pe._emit("orientation",Se._id)}}return Pe},Howl.prototype.pannerAttr=function(){var ce,Oe,Pe,j=this,le=arguments;if(!j._webAudio)return j;if(0===le.length)return j._pannerAttr;if(1===le.length){if("object"!=typeof le[0])return(Pe=j._soundById(parseInt(le[0],10)))?Pe._pannerAttr:j._pannerAttr;ce=le[0],void 0===Oe&&(ce.pannerAttr||(ce.pannerAttr={coneInnerAngle:ce.coneInnerAngle,coneOuterAngle:ce.coneOuterAngle,coneOuterGain:ce.coneOuterGain,distanceModel:ce.distanceModel,maxDistance:ce.maxDistance,refDistance:ce.refDistance,rolloffFactor:ce.rolloffFactor,panningModel:ce.panningModel}),j._pannerAttr={coneInnerAngle:void 0!==ce.pannerAttr.coneInnerAngle?ce.pannerAttr.coneInnerAngle:j._coneInnerAngle,coneOuterAngle:void 0!==ce.pannerAttr.coneOuterAngle?ce.pannerAttr.coneOuterAngle:j._coneOuterAngle,coneOuterGain:void 0!==ce.pannerAttr.coneOuterGain?ce.pannerAttr.coneOuterGain:j._coneOuterGain,distanceModel:void 0!==ce.pannerAttr.distanceModel?ce.pannerAttr.distanceModel:j._distanceModel,maxDistance:void 0!==ce.pannerAttr.maxDistance?ce.pannerAttr.maxDistance:j._maxDistance,refDistance:void 0!==ce.pannerAttr.refDistance?ce.pannerAttr.refDistance:j._refDistance,rolloffFactor:void 0!==ce.pannerAttr.rolloffFactor?ce.pannerAttr.rolloffFactor:j._rolloffFactor,panningModel:void 0!==ce.pannerAttr.panningModel?ce.pannerAttr.panningModel:j._panningModel})}else 2===le.length&&(ce=le[0],Oe=parseInt(le[1],10));for(var Ge=j._getSoundIds(Oe),Me=0;Me<Ge.length;Me++)if(Pe=j._soundById(Ge[Me])){var Se=Pe._pannerAttr;Se={coneInnerAngle:void 0!==ce.coneInnerAngle?ce.coneInnerAngle:Se.coneInnerAngle,coneOuterAngle:void 0!==ce.coneOuterAngle?ce.coneOuterAngle:Se.coneOuterAngle,coneOuterGain:void 0!==ce.coneOuterGain?ce.coneOuterGain:Se.coneOuterGain,distanceModel:void 0!==ce.distanceModel?ce.distanceModel:Se.distanceModel,maxDistance:void 0!==ce.maxDistance?ce.maxDistance:Se.maxDistance,refDistance:void 0!==ce.refDistance?ce.refDistance:Se.refDistance,rolloffFactor:void 0!==ce.rolloffFactor?ce.rolloffFactor:Se.rolloffFactor,panningModel:void 0!==ce.panningModel?ce.panningModel:Se.panningModel};var We=Pe._panner;We?(We.coneInnerAngle=Se.coneInnerAngle,We.coneOuterAngle=Se.coneOuterAngle,We.coneOuterGain=Se.coneOuterGain,We.distanceModel=Se.distanceModel,We.maxDistance=Se.maxDistance,We.refDistance=Se.refDistance,We.rolloffFactor=Se.rolloffFactor,We.panningModel=Se.panningModel):(Pe._pos||(Pe._pos=j._pos||[0,0,-.5]),b(Pe,"spatial"))}return j},Sound.prototype.init=function(j){return function(){var le=this,ce=le._parent;le._orientation=ce._orientation,le._stereo=ce._stereo,le._pos=ce._pos,le._pannerAttr=ce._pannerAttr,j.call(this),le._stereo?ce.stereo(le._stereo):le._pos&&ce.pos(le._pos[0],le._pos[1],le._pos[2],le._id)}}(Sound.prototype.init),Sound.prototype.reset=function(j){return function(){var le=this,ce=le._parent;return le._orientation=ce._orientation,le._stereo=ce._stereo,le._pos=ce._pos,le._pannerAttr=ce._pannerAttr,le._stereo?ce.stereo(le._stereo):le._pos?ce.pos(le._pos[0],le._pos[1],le._pos[2],le._id):le._panner&&(le._panner.disconnect(0),le._panner=void 0,ce._refreshBuffer(le)),j.call(this)}}(Sound.prototype.reset);var b=function(j,le){"spatial"===(le=le||"spatial")?(j._panner=Howler.ctx.createPanner(),j._panner.coneInnerAngle=j._pannerAttr.coneInnerAngle,j._panner.coneOuterAngle=j._pannerAttr.coneOuterAngle,j._panner.coneOuterGain=j._pannerAttr.coneOuterGain,j._panner.distanceModel=j._pannerAttr.distanceModel,j._panner.maxDistance=j._pannerAttr.maxDistance,j._panner.refDistance=j._pannerAttr.refDistance,j._panner.rolloffFactor=j._pannerAttr.rolloffFactor,j._panner.panningModel=j._pannerAttr.panningModel,void 0!==j._panner.positionX?(j._panner.positionX.setValueAtTime(j._pos[0],Howler.ctx.currentTime),j._panner.positionY.setValueAtTime(j._pos[1],Howler.ctx.currentTime),j._panner.positionZ.setValueAtTime(j._pos[2],Howler.ctx.currentTime)):j._panner.setPosition(j._pos[0],j._pos[1],j._pos[2]),void 0!==j._panner.orientationX?(j._panner.orientationX.setValueAtTime(j._orientation[0],Howler.ctx.currentTime),j._panner.orientationY.setValueAtTime(j._orientation[1],Howler.ctx.currentTime),j._panner.orientationZ.setValueAtTime(j._orientation[2],Howler.ctx.currentTime)):j._panner.setOrientation(j._orientation[0],j._orientation[1],j._orientation[2])):(j._panner=Howler.ctx.createStereoPanner(),j._panner.pan.setValueAtTime(j._stereo,Howler.ctx.currentTime)),j._panner.connect(j._node),j._paused||j._parent.pause(j._id,!0).play(j._id,!0)}}()},1135:(dn,dt,q)=>{"use strict";q.d(dt,{X:()=>b});var A=q(7579);class b extends A.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const ce=super._subscribe(le);return!ce.closed&&le.next(this._value),ce}getValue(){const{hasError:le,thrownError:ce,_value:Oe}=this;if(le)throw ce;return this._throwIfClosed(),Oe}next(le){super.next(this._value=le)}}},8306:(dn,dt,q)=>{"use strict";q.d(dt,{y:()=>Se});var A=q(930),b=q(727),j=q(8822),le=q(4671);var Pe=q(2416),Ge=q(576),Me=q(2806);let Se=(()=>{class J{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const ve=new J;return ve.source=this,ve.operator=Ae,ve}subscribe(Ae,ve,Ne){const Mt=function Y(J){return J&&J instanceof A.Lv||function S(J){return J&&(0,Ge.m)(J.next)&&(0,Ge.m)(J.error)&&(0,Ge.m)(J.complete)}(J)&&(0,b.Nn)(J)}(Ae)?Ae:new A.Hp(Ae,ve,Ne);return(0,Me.x)(()=>{const{operator:Dt,source:lt}=this;Mt.add(Dt?Dt.call(Mt,lt):lt?this._subscribe(Mt):this._trySubscribe(Mt))}),Mt}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(ve){Ae.error(ve)}}forEach(Ae,ve){return new(ve=We(ve))((Ne,Mt)=>{const Dt=new A.Hp({next:lt=>{try{Ae(lt)}catch(Ee){Mt(Ee),Dt.unsubscribe()}},error:Mt,complete:Ne});this.subscribe(Dt)})}_subscribe(Ae){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Ae)}[j.L](){return this}pipe(...Ae){return function Oe(J){return 0===J.length?le.y:1===J.length?J[0]:function(Ae){return J.reduce((ve,Ne)=>Ne(ve),Ae)}}(Ae)(this)}toPromise(Ae){return new(Ae=We(Ae))((ve,Ne)=>{let Mt;this.subscribe(Dt=>Mt=Dt,Dt=>Ne(Dt),()=>ve(Mt))})}}return J.create=de=>new J(de),J})();function We(J){var de;return null!==(de=null!=J?J:Pe.v.Promise)&&void 0!==de?de:Promise}},7579:(dn,dt,q)=>{"use strict";q.d(dt,{x:()=>Pe});var A=q(8306),b=q(727);const le=(0,q(3888).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=q(8737),Oe=q(2806);let Pe=(()=>{class Me extends A.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(We){const S=new Ge(this,this);return S.operator=We,S}_throwIfClosed(){if(this.closed)throw new le}next(We){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const S of this.currentObservers)S.next(We)}})}error(We){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=We;const{observers:S}=this;for(;S.length;)S.shift().error(We)}})}complete(){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:We}=this;for(;We.length;)We.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var We;return(null===(We=this.observers)||void 0===We?void 0:We.length)>0}_trySubscribe(We){return this._throwIfClosed(),super._trySubscribe(We)}_subscribe(We){return this._throwIfClosed(),this._checkFinalizedStatuses(We),this._innerSubscribe(We)}_innerSubscribe(We){const{hasError:S,isStopped:Y,observers:J}=this;return S||Y?b.Lc:(this.currentObservers=null,J.push(We),new b.w0(()=>{this.currentObservers=null,(0,ce.P)(J,We)}))}_checkFinalizedStatuses(We){const{hasError:S,thrownError:Y,isStopped:J}=this;S?We.error(Y):J&&We.complete()}asObservable(){const We=new A.y;return We.source=this,We}}return Me.create=(Se,We)=>new Ge(Se,We),Me})();class Ge extends Pe{constructor(Se,We){super(),this.destination=Se,this.source=We}next(Se){var We,S;null===(S=null===(We=this.destination)||void 0===We?void 0:We.next)||void 0===S||S.call(We,Se)}error(Se){var We,S;null===(S=null===(We=this.destination)||void 0===We?void 0:We.error)||void 0===S||S.call(We,Se)}complete(){var Se,We;null===(We=null===(Se=this.destination)||void 0===Se?void 0:Se.complete)||void 0===We||We.call(Se)}_subscribe(Se){var We,S;return null!==(S=null===(We=this.source)||void 0===We?void 0:We.subscribe(Se))&&void 0!==S?S:b.Lc}}},930:(dn,dt,q)=>{"use strict";q.d(dt,{Hp:()=>Ae,Lv:()=>S});var A=q(576),b=q(727),j=q(2416),le=q(7849),ce=q(5032);const Oe=Me("C",void 0,void 0);function Me(lt,Ee,ut){return{kind:lt,value:Ee,error:ut}}var Se=q(3410),We=q(2806);class S extends b.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,b.Nn)(Ee)&&Ee.add(this)):this.destination=Dt}static create(Ee,ut,St){return new Ae(Ee,ut,St)}next(Ee){this.isStopped?Mt(function Ge(lt){return Me("N",lt,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Mt(function Pe(lt){return Me("E",void 0,lt)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Mt(Oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Y=Function.prototype.bind;function J(lt,Ee){return Y.call(lt,Ee)}class de{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:ut}=this;if(ut.next)try{ut.next(Ee)}catch(St){ve(St)}}error(Ee){const{partialObserver:ut}=this;if(ut.error)try{ut.error(Ee)}catch(St){ve(St)}else ve(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(ut){ve(ut)}}}class Ae extends S{constructor(Ee,ut,St){let bt;if(super(),(0,A.m)(Ee)||!Ee)bt={next:null!=Ee?Ee:void 0,error:null!=ut?ut:void 0,complete:null!=St?St:void 0};else{let xt;this&&j.v.useDeprecatedNextContext?(xt=Object.create(Ee),xt.unsubscribe=()=>this.unsubscribe(),bt={next:Ee.next&&J(Ee.next,xt),error:Ee.error&&J(Ee.error,xt),complete:Ee.complete&&J(Ee.complete,xt)}):bt=Ee}this.destination=new de(bt)}}function ve(lt){j.v.useDeprecatedSynchronousErrorHandling?(0,We.O)(lt):(0,le.h)(lt)}function Mt(lt,Ee){const{onStoppedNotification:ut}=j.v;ut&&Se.z.setTimeout(()=>ut(lt,Ee))}const Dt={closed:!0,next:ce.Z,error:function Ne(lt){throw lt},complete:ce.Z}},727:(dn,dt,q)=>{"use strict";q.d(dt,{Lc:()=>Oe,w0:()=>ce,Nn:()=>Pe});var A=q(576);const j=(0,q(3888).d)(Me=>function(We){Me(this),this.message=We?`${We.length} errors occurred during unsubscription:\n${We.map((S,Y)=>`${Y+1}) ${S.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=We});var le=q(8737);class ce{constructor(Se){this.initialTeardown=Se,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Se;if(!this.closed){this.closed=!0;const{_parentage:We}=this;if(We)if(this._parentage=null,Array.isArray(We))for(const J of We)J.remove(this);else We.remove(this);const{initialTeardown:S}=this;if((0,A.m)(S))try{S()}catch(J){Se=J instanceof j?J.errors:[J]}const{_finalizers:Y}=this;if(Y){this._finalizers=null;for(const J of Y)try{Ge(J)}catch(de){Se=null!=Se?Se:[],de instanceof j?Se=[...Se,...de.errors]:Se.push(de)}}if(Se)throw new j(Se)}}add(Se){var We;if(Se&&Se!==this)if(this.closed)Ge(Se);else{if(Se instanceof ce){if(Se.closed||Se._hasParent(this))return;Se._addParent(this)}(this._finalizers=null!==(We=this._finalizers)&&void 0!==We?We:[]).push(Se)}}_hasParent(Se){const{_parentage:We}=this;return We===Se||Array.isArray(We)&&We.includes(Se)}_addParent(Se){const{_parentage:We}=this;this._parentage=Array.isArray(We)?(We.push(Se),We):We?[We,Se]:Se}_removeParent(Se){const{_parentage:We}=this;We===Se?this._parentage=null:Array.isArray(We)&&(0,le.P)(We,Se)}remove(Se){const{_finalizers:We}=this;We&&(0,le.P)(We,Se),Se instanceof ce&&Se._removeParent(this)}}ce.EMPTY=(()=>{const Me=new ce;return Me.closed=!0,Me})();const Oe=ce.EMPTY;function Pe(Me){return Me instanceof ce||Me&&"closed"in Me&&(0,A.m)(Me.remove)&&(0,A.m)(Me.add)&&(0,A.m)(Me.unsubscribe)}function Ge(Me){(0,A.m)(Me)?Me():Me.unsubscribe()}},2416:(dn,dt,q)=>{"use strict";q.d(dt,{v:()=>A});const A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(dn,dt,q)=>{"use strict";q.d(dt,{z:()=>ce});var A=q(8189),j=q(3269),le=q(2076);function ce(...Oe){return function b(){return(0,A.J)(1)}()((0,le.D)(Oe,(0,j.yG)(Oe)))}},9770:(dn,dt,q)=>{"use strict";q.d(dt,{P:()=>j});var A=q(8306),b=q(8421);function j(le){return new A.y(ce=>{(0,b.Xf)(le()).subscribe(ce)})}},515:(dn,dt,q)=>{"use strict";q.d(dt,{E:()=>b});const b=new(q(8306).y)(ce=>ce.complete())},4128:(dn,dt,q)=>{"use strict";q.d(dt,{D:()=>Ge});var A=q(8306),b=q(4742),j=q(8421),le=q(3269),ce=q(5403),Oe=q(3268),Pe=q(1810);function Ge(...Me){const Se=(0,le.jO)(Me),{args:We,keys:S}=(0,b.D)(Me),Y=new A.y(J=>{const{length:de}=We;if(!de)return void J.complete();const Ae=new Array(de);let ve=de,Ne=de;for(let Mt=0;Mt<de;Mt++){let Dt=!1;(0,j.Xf)(We[Mt]).subscribe((0,ce.x)(J,lt=>{Dt||(Dt=!0,Ne--),Ae[Mt]=lt},()=>ve--,void 0,()=>{(!ve||!Dt)&&(Ne||J.next(S?(0,Pe.n)(S,Ae):Ae),J.complete())}))}});return Se?Y.pipe((0,Oe.Z)(Se)):Y}},2076:(dn,dt,q)=>{"use strict";q.d(dt,{D:()=>St});var A=q(8421),b=q(9672),j=q(4482),le=q(5403);function ce(bt,xt=0){return(0,j.e)((qe,Qe)=>{qe.subscribe((0,le.x)(Qe,pt=>(0,b.f)(Qe,bt,()=>Qe.next(pt),xt),()=>(0,b.f)(Qe,bt,()=>Qe.complete(),xt),pt=>(0,b.f)(Qe,bt,()=>Qe.error(pt),xt)))})}function Oe(bt,xt=0){return(0,j.e)((qe,Qe)=>{Qe.add(bt.schedule(()=>qe.subscribe(Qe),xt))})}var Me=q(8306),We=q(2202),S=q(576);function J(bt,xt){if(!bt)throw new Error("Iterable cannot be null");return new Me.y(qe=>{(0,b.f)(qe,xt,()=>{const Qe=bt[Symbol.asyncIterator]();(0,b.f)(qe,xt,()=>{Qe.next().then(pt=>{pt.done?qe.complete():qe.next(pt.value)})},0,!0)})})}var de=q(3670),Ae=q(8239),ve=q(1144),Ne=q(6495),Mt=q(2206),Dt=q(4532),lt=q(3260);function St(bt,xt){return xt?function ut(bt,xt){if(null!=bt){if((0,de.c)(bt))return function Pe(bt,xt){return(0,A.Xf)(bt).pipe(Oe(xt),ce(xt))}(bt,xt);if((0,ve.z)(bt))return function Se(bt,xt){return new Me.y(qe=>{let Qe=0;return xt.schedule(function(){Qe===bt.length?qe.complete():(qe.next(bt[Qe++]),qe.closed||this.schedule())})})}(bt,xt);if((0,Ae.t)(bt))return function Ge(bt,xt){return(0,A.Xf)(bt).pipe(Oe(xt),ce(xt))}(bt,xt);if((0,Mt.D)(bt))return J(bt,xt);if((0,Ne.T)(bt))return function Y(bt,xt){return new Me.y(qe=>{let Qe;return(0,b.f)(qe,xt,()=>{Qe=bt[We.h](),(0,b.f)(qe,xt,()=>{let pt,_t;try{({value:pt,done:_t}=Qe.next())}catch(Vt){return void qe.error(Vt)}_t?qe.complete():qe.next(pt)},0,!0)}),()=>(0,S.m)(null==Qe?void 0:Qe.return)&&Qe.return()})}(bt,xt);if((0,lt.L)(bt))return function Ee(bt,xt){return J((0,lt.Q)(bt),xt)}(bt,xt)}throw(0,Dt.z)(bt)}(bt,xt):(0,A.Xf)(bt)}},4968:(dn,dt,q)=>{"use strict";q.d(dt,{R:()=>Se});var A=q(8421),b=q(8306),j=q(5577),le=q(1144),ce=q(576),Oe=q(3268);const Pe=["addListener","removeListener"],Ge=["addEventListener","removeEventListener"],Me=["on","off"];function Se(de,Ae,ve,Ne){if((0,ce.m)(ve)&&(Ne=ve,ve=void 0),Ne)return Se(de,Ae,ve).pipe((0,Oe.Z)(Ne));const[Mt,Dt]=function J(de){return(0,ce.m)(de.addEventListener)&&(0,ce.m)(de.removeEventListener)}(de)?Ge.map(lt=>Ee=>de[lt](Ae,Ee,ve)):function S(de){return(0,ce.m)(de.addListener)&&(0,ce.m)(de.removeListener)}(de)?Pe.map(We(de,Ae)):function Y(de){return(0,ce.m)(de.on)&&(0,ce.m)(de.off)}(de)?Me.map(We(de,Ae)):[];if(!Mt&&(0,le.z)(de))return(0,j.z)(lt=>Se(lt,Ae,ve))((0,A.Xf)(de));if(!Mt)throw new TypeError("Invalid event target");return new b.y(lt=>{const Ee=(...ut)=>lt.next(1<ut.length?ut:ut[0]);return Mt(Ee),()=>Dt(Ee)})}function We(de,Ae){return ve=>Ne=>de[ve](Ae,Ne)}},8421:(dn,dt,q)=>{"use strict";q.d(dt,{Xf:()=>Y});var A=q(655),b=q(1144),j=q(8239),le=q(8306),ce=q(3670),Oe=q(2206),Pe=q(4532),Ge=q(6495),Me=q(3260),Se=q(576),We=q(7849),S=q(8822);function Y(lt){if(lt instanceof le.y)return lt;if(null!=lt){if((0,ce.c)(lt))return function J(lt){return new le.y(Ee=>{const ut=lt[S.L]();if((0,Se.m)(ut.subscribe))return ut.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(lt);if((0,b.z)(lt))return function de(lt){return new le.y(Ee=>{for(let ut=0;ut<lt.length&&!Ee.closed;ut++)Ee.next(lt[ut]);Ee.complete()})}(lt);if((0,j.t)(lt))return function Ae(lt){return new le.y(Ee=>{lt.then(ut=>{Ee.closed||(Ee.next(ut),Ee.complete())},ut=>Ee.error(ut)).then(null,We.h)})}(lt);if((0,Oe.D)(lt))return Ne(lt);if((0,Ge.T)(lt))return function ve(lt){return new le.y(Ee=>{for(const ut of lt)if(Ee.next(ut),Ee.closed)return;Ee.complete()})}(lt);if((0,Me.L)(lt))return function Mt(lt){return Ne((0,Me.Q)(lt))}(lt)}throw(0,Pe.z)(lt)}function Ne(lt){return new le.y(Ee=>{(function Dt(lt,Ee){var ut,St,bt,xt;return(0,A.mG)(this,void 0,void 0,function*(){try{for(ut=(0,A.KL)(lt);!(St=yield ut.next()).done;)if(Ee.next(St.value),Ee.closed)return}catch(qe){bt={error:qe}}finally{try{St&&!St.done&&(xt=ut.return)&&(yield xt.call(ut))}finally{if(bt)throw bt.error}}Ee.complete()})})(lt,Ee).catch(ut=>Ee.error(ut))})}},6451:(dn,dt,q)=>{"use strict";q.d(dt,{T:()=>Oe});var A=q(8189),b=q(8421),j=q(515),le=q(3269),ce=q(2076);function Oe(...Pe){const Ge=(0,le.yG)(Pe),Me=(0,le._6)(Pe,1/0),Se=Pe;return Se.length?1===Se.length?(0,b.Xf)(Se[0]):(0,A.J)(Me)((0,ce.D)(Se,Ge)):j.E}},9646:(dn,dt,q)=>{"use strict";q.d(dt,{of:()=>j});var A=q(3269),b=q(2076);function j(...le){const ce=(0,A.yG)(le);return(0,b.D)(le,ce)}},2843:(dn,dt,q)=>{"use strict";q.d(dt,{_:()=>j});var A=q(8306),b=q(576);function j(le,ce){const Oe=(0,b.m)(le)?le:()=>le,Pe=Ge=>Ge.error(Oe());return new A.y(ce?Ge=>ce.schedule(Pe,0,Ge):Pe)}},5403:(dn,dt,q)=>{"use strict";q.d(dt,{x:()=>b});var A=q(930);function b(le,ce,Oe,Pe,Ge){return new j(le,ce,Oe,Pe,Ge)}class j extends A.Lv{constructor(ce,Oe,Pe,Ge,Me,Se){super(ce),this.onFinalize=Me,this.shouldUnsubscribe=Se,this._next=Oe?function(We){try{Oe(We)}catch(S){ce.error(S)}}:super._next,this._error=Ge?function(We){try{Ge(We)}catch(S){ce.error(S)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(We){ce.error(We)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Oe}=this;super.unsubscribe(),!Oe&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},262:(dn,dt,q)=>{"use strict";q.d(dt,{K:()=>le});var A=q(8421),b=q(5403),j=q(4482);function le(ce){return(0,j.e)((Oe,Pe)=>{let Se,Ge=null,Me=!1;Ge=Oe.subscribe((0,b.x)(Pe,void 0,void 0,We=>{Se=(0,A.Xf)(ce(We,le(ce)(Oe))),Ge?(Ge.unsubscribe(),Ge=null,Se.subscribe(Pe)):Me=!0})),Me&&(Ge.unsubscribe(),Ge=null,Se.subscribe(Pe))})}},4351:(dn,dt,q)=>{"use strict";q.d(dt,{b:()=>j});var A=q(5577),b=q(576);function j(le,ce){return(0,b.m)(ce)?(0,A.z)(le,ce,1):(0,A.z)(le,1)}},1884:(dn,dt,q)=>{"use strict";q.d(dt,{x:()=>le});var A=q(4671),b=q(4482),j=q(5403);function le(Oe,Pe=A.y){return Oe=null!=Oe?Oe:ce,(0,b.e)((Ge,Me)=>{let Se,We=!0;Ge.subscribe((0,j.x)(Me,S=>{const Y=Pe(S);(We||!Oe(Se,Y))&&(We=!1,Se=Y,Me.next(S))}))})}function ce(Oe,Pe){return Oe===Pe}},9300:(dn,dt,q)=>{"use strict";q.d(dt,{h:()=>j});var A=q(4482),b=q(5403);function j(le,ce){return(0,A.e)((Oe,Pe)=>{let Ge=0;Oe.subscribe((0,b.x)(Pe,Me=>le.call(ce,Me,Ge++)&&Pe.next(Me)))})}},8746:(dn,dt,q)=>{"use strict";q.d(dt,{x:()=>b});var A=q(4482);function b(j){return(0,A.e)((le,ce)=>{try{le.subscribe(ce)}finally{ce.add(j)}})}},4004:(dn,dt,q)=>{"use strict";q.d(dt,{U:()=>j});var A=q(4482),b=q(5403);function j(le,ce){return(0,A.e)((Oe,Pe)=>{let Ge=0;Oe.subscribe((0,b.x)(Pe,Me=>{Pe.next(le.call(ce,Me,Ge++))}))})}},8189:(dn,dt,q)=>{"use strict";q.d(dt,{J:()=>j});var A=q(5577),b=q(4671);function j(le=1/0){return(0,A.z)(b.y,le)}},5577:(dn,dt,q)=>{"use strict";q.d(dt,{z:()=>Ge});var A=q(4004),b=q(8421),j=q(4482),le=q(9672),ce=q(5403),Pe=q(576);function Ge(Me,Se,We=1/0){return(0,Pe.m)(Se)?Ge((S,Y)=>(0,A.U)((J,de)=>Se(S,J,Y,de))((0,b.Xf)(Me(S,Y))),We):("number"==typeof Se&&(We=Se),(0,j.e)((S,Y)=>function Oe(Me,Se,We,S,Y,J,de,Ae){const ve=[];let Ne=0,Mt=0,Dt=!1;const lt=()=>{Dt&&!ve.length&&!Ne&&Se.complete()},Ee=St=>Ne<S?ut(St):ve.push(St),ut=St=>{J&&Se.next(St),Ne++;let bt=!1;(0,b.Xf)(We(St,Mt++)).subscribe((0,ce.x)(Se,xt=>{null==Y||Y(xt),J?Ee(xt):Se.next(xt)},()=>{bt=!0},void 0,()=>{if(bt)try{for(Ne--;ve.length&&Ne<S;){const xt=ve.shift();de?(0,le.f)(Se,de,()=>ut(xt)):ut(xt)}lt()}catch(xt){Se.error(xt)}}))};return Me.subscribe((0,ce.x)(Se,Ee,()=>{Dt=!0,lt()})),()=>{null==Ae||Ae()}}(S,Y,Me,We)))}},3099:(dn,dt,q)=>{"use strict";q.d(dt,{B:()=>Oe});var A=q(2076),b=q(5698),j=q(7579),le=q(930),ce=q(4482);function Oe(Ge={}){const{connector:Me=(()=>new j.x),resetOnError:Se=!0,resetOnComplete:We=!0,resetOnRefCountZero:S=!0}=Ge;return Y=>{let J=null,de=null,Ae=null,ve=0,Ne=!1,Mt=!1;const Dt=()=>{null==de||de.unsubscribe(),de=null},lt=()=>{Dt(),J=Ae=null,Ne=Mt=!1},Ee=()=>{const ut=J;lt(),null==ut||ut.unsubscribe()};return(0,ce.e)((ut,St)=>{ve++,!Mt&&!Ne&&Dt();const bt=Ae=null!=Ae?Ae:Me();St.add(()=>{ve--,0===ve&&!Mt&&!Ne&&(de=Pe(Ee,S))}),bt.subscribe(St),J||(J=new le.Hp({next:xt=>bt.next(xt),error:xt=>{Mt=!0,Dt(),de=Pe(lt,Se,xt),bt.error(xt)},complete:()=>{Ne=!0,Dt(),de=Pe(lt,We),bt.complete()}}),(0,A.D)(ut).subscribe(J))})(Y)}}function Pe(Ge,Me,...Se){return!0===Me?(Ge(),null):!1===Me?null:Me(...Se).pipe((0,b.q)(1)).subscribe(()=>Ge())}},8675:(dn,dt,q)=>{"use strict";q.d(dt,{O:()=>le});var A=q(7272),b=q(3269),j=q(4482);function le(...ce){const Oe=(0,b.yG)(ce);return(0,j.e)((Pe,Ge)=>{(Oe?(0,A.z)(ce,Pe,Oe):(0,A.z)(ce,Pe)).subscribe(Ge)})}},5698:(dn,dt,q)=>{"use strict";q.d(dt,{q:()=>le});var A=q(515),b=q(4482),j=q(5403);function le(ce){return ce<=0?()=>A.E:(0,b.e)((Oe,Pe)=>{let Ge=0;Oe.subscribe((0,j.x)(Pe,Me=>{++Ge<=ce&&(Pe.next(Me),ce<=Ge&&Pe.complete())}))})}},2722:(dn,dt,q)=>{"use strict";q.d(dt,{R:()=>ce});var A=q(4482),b=q(5403),j=q(8421),le=q(5032);function ce(Oe){return(0,A.e)((Pe,Ge)=>{(0,j.Xf)(Oe).subscribe((0,b.x)(Ge,()=>Ge.complete(),le.Z)),!Ge.closed&&Pe.subscribe(Ge)})}},8505:(dn,dt,q)=>{"use strict";q.d(dt,{b:()=>ce});var A=q(576),b=q(4482),j=q(5403),le=q(4671);function ce(Oe,Pe,Ge){const Me=(0,A.m)(Oe)||Pe||Ge?{next:Oe,error:Pe,complete:Ge}:Oe;return Me?(0,b.e)((Se,We)=>{var S;null===(S=Me.subscribe)||void 0===S||S.call(Me);let Y=!0;Se.subscribe((0,j.x)(We,J=>{var de;null===(de=Me.next)||void 0===de||de.call(Me,J),We.next(J)},()=>{var J;Y=!1,null===(J=Me.complete)||void 0===J||J.call(Me),We.complete()},J=>{var de;Y=!1,null===(de=Me.error)||void 0===de||de.call(Me,J),We.error(J)},()=>{var J,de;Y&&(null===(J=Me.unsubscribe)||void 0===J||J.call(Me)),null===(de=Me.finalize)||void 0===de||de.call(Me)}))}):le.y}},4408:(dn,dt,q)=>{"use strict";q.d(dt,{o:()=>ce});var A=q(727);class b extends A.w0{constructor(Pe,Ge){super()}schedule(Pe,Ge=0){return this}}const j={setInterval(Oe,Pe,...Ge){const{delegate:Me}=j;return(null==Me?void 0:Me.setInterval)?Me.setInterval(Oe,Pe,...Ge):setInterval(Oe,Pe,...Ge)},clearInterval(Oe){const{delegate:Pe}=j;return((null==Pe?void 0:Pe.clearInterval)||clearInterval)(Oe)},delegate:void 0};var le=q(8737);class ce extends b{constructor(Pe,Ge){super(Pe,Ge),this.scheduler=Pe,this.work=Ge,this.pending=!1}schedule(Pe,Ge=0){if(this.closed)return this;this.state=Pe;const Me=this.id,Se=this.scheduler;return null!=Me&&(this.id=this.recycleAsyncId(Se,Me,Ge)),this.pending=!0,this.delay=Ge,this.id=this.id||this.requestAsyncId(Se,this.id,Ge),this}requestAsyncId(Pe,Ge,Me=0){return j.setInterval(Pe.flush.bind(Pe,this),Me)}recycleAsyncId(Pe,Ge,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return Ge;j.clearInterval(Ge)}execute(Pe,Ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(Pe,Ge);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Pe,Ge){let Se,Me=!1;try{this.work(Pe)}catch(We){Me=!0,Se=We||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),Se}unsubscribe(){if(!this.closed){const{id:Pe,scheduler:Ge}=this,{actions:Me}=Ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Me,this),null!=Pe&&(this.id=this.recycleAsyncId(Ge,Pe,null)),this.delay=null,super.unsubscribe()}}}},640:(dn,dt,q)=>{"use strict";q.d(dt,{v:()=>j});const A={now:()=>(A.delegate||Date).now(),delegate:void 0};class b{constructor(ce,Oe=b.now){this.schedulerActionCtor=ce,this.now=Oe}schedule(ce,Oe=0,Pe){return new this.schedulerActionCtor(this,ce).schedule(Pe,Oe)}}b.now=A.now;class j extends b{constructor(ce,Oe=b.now){super(ce,Oe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:Oe}=this;if(this._active)return void Oe.push(ce);let Pe;this._active=!0;do{if(Pe=ce.execute(ce.state,ce.delay))break}while(ce=Oe.shift());if(this._active=!1,Pe){for(;ce=Oe.shift();)ce.unsubscribe();throw Pe}}}},4986:(dn,dt,q)=>{"use strict";q.d(dt,{P:()=>le,z:()=>j});var A=q(4408);const j=new(q(640).v)(A.o),le=j},3410:(dn,dt,q)=>{"use strict";q.d(dt,{z:()=>A});const A={setTimeout(b,j,...le){const{delegate:ce}=A;return(null==ce?void 0:ce.setTimeout)?ce.setTimeout(b,j,...le):setTimeout(b,j,...le)},clearTimeout(b){const{delegate:j}=A;return((null==j?void 0:j.clearTimeout)||clearTimeout)(b)},delegate:void 0}},2202:(dn,dt,q)=>{"use strict";q.d(dt,{h:()=>b});const b=function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dn,dt,q)=>{"use strict";q.d(dt,{L:()=>A});const A="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(dn,dt,q)=>{"use strict";q.d(dt,{_6:()=>Oe,jO:()=>le,yG:()=>ce});var A=q(576),b=q(3532);function j(Pe){return Pe[Pe.length-1]}function le(Pe){return(0,A.m)(j(Pe))?Pe.pop():void 0}function ce(Pe){return(0,b.K)(j(Pe))?Pe.pop():void 0}function Oe(Pe,Ge){return"number"==typeof j(Pe)?Pe.pop():Ge}},4742:(dn,dt,q)=>{"use strict";q.d(dt,{D:()=>ce});const{isArray:A}=Array,{getPrototypeOf:b,prototype:j,keys:le}=Object;function ce(Pe){if(1===Pe.length){const Ge=Pe[0];if(A(Ge))return{args:Ge,keys:null};if(function Oe(Pe){return Pe&&"object"==typeof Pe&&b(Pe)===j}(Ge)){const Me=le(Ge);return{args:Me.map(Se=>Ge[Se]),keys:Me}}}return{args:Pe,keys:null}}},8737:(dn,dt,q)=>{"use strict";function A(b,j){if(b){const le=b.indexOf(j);0<=le&&b.splice(le,1)}}q.d(dt,{P:()=>A})},3888:(dn,dt,q)=>{"use strict";function A(b){const le=b(ce=>{Error.call(ce),ce.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}q.d(dt,{d:()=>A})},1810:(dn,dt,q)=>{"use strict";function A(b,j){return b.reduce((le,ce,Oe)=>(le[ce]=j[Oe],le),{})}q.d(dt,{n:()=>A})},2806:(dn,dt,q)=>{"use strict";q.d(dt,{O:()=>le,x:()=>j});var A=q(2416);let b=null;function j(ce){if(A.v.useDeprecatedSynchronousErrorHandling){const Oe=!b;if(Oe&&(b={errorThrown:!1,error:null}),ce(),Oe){const{errorThrown:Pe,error:Ge}=b;if(b=null,Pe)throw Ge}}else ce()}function le(ce){A.v.useDeprecatedSynchronousErrorHandling&&b&&(b.errorThrown=!0,b.error=ce)}},9672:(dn,dt,q)=>{"use strict";function A(b,j,le,ce=0,Oe=!1){const Pe=j.schedule(function(){le(),Oe?b.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(b.add(Pe),!Oe)return Pe}q.d(dt,{f:()=>A})},4671:(dn,dt,q)=>{"use strict";function A(b){return b}q.d(dt,{y:()=>A})},1144:(dn,dt,q)=>{"use strict";q.d(dt,{z:()=>A});const A=b=>b&&"number"==typeof b.length&&"function"!=typeof b},2206:(dn,dt,q)=>{"use strict";q.d(dt,{D:()=>b});var A=q(576);function b(j){return Symbol.asyncIterator&&(0,A.m)(null==j?void 0:j[Symbol.asyncIterator])}},576:(dn,dt,q)=>{"use strict";function A(b){return"function"==typeof b}q.d(dt,{m:()=>A})},3670:(dn,dt,q)=>{"use strict";q.d(dt,{c:()=>j});var A=q(8822),b=q(576);function j(le){return(0,b.m)(le[A.L])}},6495:(dn,dt,q)=>{"use strict";q.d(dt,{T:()=>j});var A=q(2202),b=q(576);function j(le){return(0,b.m)(null==le?void 0:le[A.h])}},8239:(dn,dt,q)=>{"use strict";q.d(dt,{t:()=>b});var A=q(576);function b(j){return(0,A.m)(null==j?void 0:j.then)}},3260:(dn,dt,q)=>{"use strict";q.d(dt,{L:()=>le,Q:()=>j});var A=q(655),b=q(576);function j(ce){return(0,A.FC)(this,arguments,function*(){const Pe=ce.getReader();try{for(;;){const{value:Ge,done:Me}=yield(0,A.qq)(Pe.read());if(Me)return yield(0,A.qq)(void 0);yield yield(0,A.qq)(Ge)}}finally{Pe.releaseLock()}})}function le(ce){return(0,b.m)(null==ce?void 0:ce.getReader)}},3532:(dn,dt,q)=>{"use strict";q.d(dt,{K:()=>b});var A=q(576);function b(j){return j&&(0,A.m)(j.schedule)}},4482:(dn,dt,q)=>{"use strict";q.d(dt,{A:()=>b,e:()=>j});var A=q(576);function b(le){return(0,A.m)(null==le?void 0:le.lift)}function j(le){return ce=>{if(b(ce))return ce.lift(function(Oe){try{return le(Oe,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(dn,dt,q)=>{"use strict";q.d(dt,{Z:()=>le});var A=q(4004);const{isArray:b}=Array;function le(ce){return(0,A.U)(Oe=>function j(ce,Oe){return b(Oe)?ce(...Oe):ce(Oe)}(ce,Oe))}},5032:(dn,dt,q)=>{"use strict";function A(){}q.d(dt,{Z:()=>A})},7849:(dn,dt,q)=>{"use strict";q.d(dt,{h:()=>j});var A=q(2416),b=q(3410);function j(le){b.z.setTimeout(()=>{const{onUnhandledError:ce}=A.v;if(!ce)throw le;ce(le)})}},4532:(dn,dt,q)=>{"use strict";function A(b){return new TypeError(`You provided ${null!==b&&"object"==typeof b?"an invalid object":`'${b}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}q.d(dt,{z:()=>A})},655:(dn,dt,q)=>{"use strict";function Ge(qe,Qe,pt,_t){return new(pt||(pt=Promise))(function(yt,ri){function hi(gn){try{Tn(_t.next(gn))}catch(fi){ri(fi)}}function di(gn){try{Tn(_t.throw(gn))}catch(fi){ri(fi)}}function Tn(gn){gn.done?yt(gn.value):function Vt(yt){return yt instanceof pt?yt:new pt(function(ri){ri(yt)})}(gn.value).then(hi,di)}Tn((_t=_t.apply(qe,Qe||[])).next())})}function ve(qe){return this instanceof ve?(this.v=qe,this):new ve(qe)}function Ne(qe,Qe,pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Vt,_t=pt.apply(qe,Qe||[]),yt=[];return Vt={},ri("next"),ri("throw"),ri("return"),Vt[Symbol.asyncIterator]=function(){return this},Vt;function ri(In){_t[In]&&(Vt[In]=function(Or){return new Promise(function(_i,Wr){yt.push([In,Or,_i,Wr])>1||hi(In,Or)})})}function hi(In,Or){try{!function di(In){In.value instanceof ve?Promise.resolve(In.value.v).then(Tn,gn):fi(yt[0][2],In)}(_t[In](Or))}catch(_i){fi(yt[0][3],_i)}}function Tn(In){hi("next",In)}function gn(In){hi("throw",In)}function fi(In,Or){In(Or),yt.shift(),yt.length&&hi(yt[0][0],yt[0][1])}}function Dt(qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt,Qe=qe[Symbol.asyncIterator];return Qe?Qe.call(qe):(qe=function S(qe){var Qe="function"==typeof Symbol&&Symbol.iterator,pt=Qe&&qe[Qe],_t=0;if(pt)return pt.call(qe);if(qe&&"number"==typeof qe.length)return{next:function(){return qe&&_t>=qe.length&&(qe=void 0),{value:qe&&qe[_t++],done:!qe}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(qe),pt={},_t("next"),_t("throw"),_t("return"),pt[Symbol.asyncIterator]=function(){return this},pt);function _t(yt){pt[yt]=qe[yt]&&function(ri){return new Promise(function(hi,di){!function Vt(yt,ri,hi,di){Promise.resolve(di).then(function(Tn){yt({value:Tn,done:hi})},ri)}(hi,di,(ri=qe[yt](ri)).done,ri.value)})}}}q.d(dt,{FC:()=>Ne,KL:()=>Dt,mG:()=>Ge,qq:()=>ve})},1777:(dn,dt,q)=>{"use strict";q.d(dt,{IO:()=>de,LC:()=>b,SB:()=>Me,X$:()=>le,ZE:()=>Mt,ZN:()=>Ne,_j:()=>A,eR:()=>We,jt:()=>ce,k1:()=>Dt,l3:()=>j,oB:()=>Ge,pV:()=>Y,ru:()=>Oe,vP:()=>Pe});class A{}class b{}const j="*";function le(lt,Ee){return{type:7,name:lt,definitions:Ee,options:{}}}function ce(lt,Ee=null){return{type:4,styles:Ee,timings:lt}}function Oe(lt,Ee=null){return{type:3,steps:lt,options:Ee}}function Pe(lt,Ee=null){return{type:2,steps:lt,options:Ee}}function Ge(lt){return{type:6,styles:lt,offset:null}}function Me(lt,Ee,ut){return{type:0,name:lt,styles:Ee,options:ut}}function We(lt,Ee,ut=null){return{type:1,expr:lt,animation:Ee,options:ut}}function Y(lt=null){return{type:9,options:lt}}function de(lt,Ee,ut=null){return{type:11,selector:lt,animation:Ee,options:ut}}function ve(lt){Promise.resolve(null).then(lt)}class Ne{constructor(Ee=0,ut=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ee+ut}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ee=>Ee()),this._onDoneFns=[])}onStart(Ee){this._onStartFns.push(Ee)}onDone(Ee){this._onDoneFns.push(Ee)}onDestroy(Ee){this._onDestroyFns.push(Ee)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ve(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ee=>Ee()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ee=>Ee()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Ee){this._position=this.totalTime?Ee*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ee){const ut="start"==Ee?this._onStartFns:this._onDoneFns;ut.forEach(St=>St()),ut.length=0}}class Mt{constructor(Ee){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ee;let ut=0,St=0,bt=0;const xt=this.players.length;0==xt?ve(()=>this._onFinish()):this.players.forEach(qe=>{qe.onDone(()=>{++ut==xt&&this._onFinish()}),qe.onDestroy(()=>{++St==xt&&this._onDestroy()}),qe.onStart(()=>{++bt==xt&&this._onStart()})}),this.totalTime=this.players.reduce((qe,Qe)=>Math.max(qe,Qe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ee=>Ee()),this._onDoneFns=[])}init(){this.players.forEach(Ee=>Ee.init())}onStart(Ee){this._onStartFns.push(Ee)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ee=>Ee()),this._onStartFns=[])}onDone(Ee){this._onDoneFns.push(Ee)}onDestroy(Ee){this._onDestroyFns.push(Ee)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ee=>Ee.play())}pause(){this.players.forEach(Ee=>Ee.pause())}restart(){this.players.forEach(Ee=>Ee.restart())}finish(){this._onFinish(),this.players.forEach(Ee=>Ee.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ee=>Ee.destroy()),this._onDestroyFns.forEach(Ee=>Ee()),this._onDestroyFns=[])}reset(){this.players.forEach(Ee=>Ee.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ee){const ut=Ee*this.totalTime;this.players.forEach(St=>{const bt=St.totalTime?Math.min(1,ut/St.totalTime):1;St.setPosition(bt)})}getPosition(){const Ee=this.players.reduce((ut,St)=>null===ut||St.totalTime>ut.totalTime?St:ut,null);return null!=Ee?Ee.getPosition():0}beforeDestroy(){this.players.forEach(Ee=>{Ee.beforeDestroy&&Ee.beforeDestroy()})}triggerCallback(Ee){const ut="start"==Ee?this._onStartFns:this._onDoneFns;ut.forEach(St=>St()),ut.length=0}}const Dt="!"},2494:(dn,dt,q)=>{"use strict";q.d(dt,{Em:()=>hi,tE:()=>fs,qV:()=>Br,qm:()=>Pn,ic:()=>Tn,X6:()=>Lr,yG:()=>hs});var A=q(9808),b=q(5e3),j=q(925),le=q(7579),ce=q(727),Oe=q(1135),Pe=q(9646),Ge=q(1159),Me=q(4986),Se=q(4482),We=q(5403),Y=q(9300),de=q(8505),Ae=q(4004),ve=q(5698),Ne=q(1884),Mt=q(2722),Dt=q(3191);class hi extends class yt{constructor(He){this._items=He,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new le.x,this._typeaheadSubscription=ce.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Ce=>Ce.disabled,this._pressedLetters=[],this.tabOut=new le.x,this.change=new le.x,He instanceof b.n_E&&He.changes.subscribe(Ce=>{if(this._activeItem){const mt=Ce.toArray().indexOf(this._activeItem);mt>-1&&mt!==this._activeItemIndex&&(this._activeItemIndex=mt)}})}skipPredicate(He){return this._skipPredicateFn=He,this}withWrap(He=!0){return this._wrap=He,this}withVerticalOrientation(He=!0){return this._vertical=He,this}withHorizontalOrientation(He){return this._horizontal=He,this}withAllowedModifierKeys(He){return this._allowedModifierKeys=He,this}withTypeAhead(He=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,de.b)(Ce=>this._pressedLetters.push(Ce)),function S(st,He=Me.z){return(0,Se.e)((Ce,nt)=>{let mt=null,en=null,Bn=null;const yi=()=>{if(mt){mt.unsubscribe(),mt=null;const Ye=en;en=null,nt.next(Ye)}};function Rr(){const Ye=Bn+st,Ve=He.now();if(Ve<Ye)return mt=this.schedule(void 0,Ye-Ve),void nt.add(mt);yi()}Ce.subscribe((0,We.x)(nt,Ye=>{en=Ye,Bn=He.now(),mt||(mt=He.schedule(Rr,st),nt.add(mt))},()=>{yi(),nt.complete()},void 0,()=>{en=mt=null}))})}(He),(0,Y.h)(()=>this._pressedLetters.length>0),(0,Ae.U)(()=>this._pressedLetters.join(""))).subscribe(Ce=>{const nt=this._getItemsArray();for(let mt=1;mt<nt.length+1;mt++){const en=(this._activeItemIndex+mt)%nt.length,Bn=nt[en];if(!this._skipPredicateFn(Bn)&&0===Bn.getLabel().toUpperCase().trim().indexOf(Ce)){this.setActiveItem(en);break}}this._pressedLetters=[]}),this}withHomeAndEnd(He=!0){return this._homeAndEnd=He,this}setActiveItem(He){const Ce=this._activeItem;this.updateActiveItem(He),this._activeItem!==Ce&&this.change.next(this._activeItemIndex)}onKeydown(He){const Ce=He.keyCode,mt=["altKey","ctrlKey","metaKey","shiftKey"].every(en=>!He[en]||this._allowedModifierKeys.indexOf(en)>-1);switch(Ce){case Ge.Mf:return void this.tabOut.next();case Ge.JH:if(this._vertical&&mt){this.setNextItemActive();break}return;case Ge.LH:if(this._vertical&&mt){this.setPreviousItemActive();break}return;case Ge.SV:if(this._horizontal&&mt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Ge.oh:if(this._horizontal&&mt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Ge.Sd:if(this._homeAndEnd&&mt){this.setFirstItemActive();break}return;case Ge.uR:if(this._homeAndEnd&&mt){this.setLastItemActive();break}return;default:return void((mt||(0,Ge.Vb)(He,"shiftKey"))&&(He.key&&1===He.key.length?this._letterKeyStream.next(He.key.toLocaleUpperCase()):(Ce>=Ge.A&&Ce<=Ge.Z||Ce>=Ge.xE&&Ce<=Ge.aO)&&this._letterKeyStream.next(String.fromCharCode(Ce))))}this._pressedLetters=[],He.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(He){const Ce=this._getItemsArray(),nt="number"==typeof He?He:Ce.indexOf(He),mt=Ce[nt];this._activeItem=null==mt?null:mt,this._activeItemIndex=nt}_setActiveItemByDelta(He){this._wrap?this._setActiveInWrapMode(He):this._setActiveInDefaultMode(He)}_setActiveInWrapMode(He){const Ce=this._getItemsArray();for(let nt=1;nt<=Ce.length;nt++){const mt=(this._activeItemIndex+He*nt+Ce.length)%Ce.length;if(!this._skipPredicateFn(Ce[mt]))return void this.setActiveItem(mt)}}_setActiveInDefaultMode(He){this._setActiveItemByIndex(this._activeItemIndex+He,He)}_setActiveItemByIndex(He,Ce){const nt=this._getItemsArray();if(nt[He]){for(;this._skipPredicateFn(nt[He]);)if(!nt[He+=Ce])return;this.setActiveItem(He)}}_getItemsArray(){return this._items instanceof b.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(He){return this._origin=He,this}setActiveItem(He){super.setActiveItem(He),this.activeItem&&this.activeItem.focus(this._origin)}}let Tn=(()=>{class st{constructor(Ce){this._platform=Ce}isDisabled(Ce){return Ce.hasAttribute("disabled")}isVisible(Ce){return function fi(st){return!!(st.offsetWidth||st.offsetHeight||"function"==typeof st.getClientRects&&st.getClientRects().length)}(Ce)&&"visible"===getComputedStyle(Ce).visibility}isTabbable(Ce){if(!this._platform.isBrowser)return!1;const nt=function gn(st){try{return st.frameElement}catch(He){return null}}(function _r(st){return st.ownerDocument&&st.ownerDocument.defaultView||window}(Ce));if(nt&&(-1===ds(nt)||!this.isVisible(nt)))return!1;let mt=Ce.nodeName.toLowerCase(),en=ds(Ce);return Ce.hasAttribute("contenteditable")?-1!==en:!("iframe"===mt||"object"===mt||this._platform.WEBKIT&&this._platform.IOS&&!function ms(st){let He=st.nodeName.toLowerCase(),Ce="input"===He&&st.type;return"text"===Ce||"password"===Ce||"select"===He||"textarea"===He}(Ce))&&("audio"===mt?!!Ce.hasAttribute("controls")&&-1!==en:"video"===mt?-1!==en&&(null!==en||this._platform.FIREFOX||Ce.hasAttribute("controls")):Ce.tabIndex>=0)}isFocusable(Ce,nt){return function Tr(st){return!function Or(st){return function Wr(st){return"input"==st.nodeName.toLowerCase()}(st)&&"hidden"==st.type}(st)&&(function In(st){let He=st.nodeName.toLowerCase();return"input"===He||"select"===He||"button"===He||"textarea"===He}(st)||function _i(st){return function Ai(st){return"a"==st.nodeName.toLowerCase()}(st)&&st.hasAttribute("href")}(st)||st.hasAttribute("contenteditable")||li(st))}(Ce)&&!this.isDisabled(Ce)&&((null==nt?void 0:nt.ignoreVisibility)||this.isVisible(Ce))}}return st.\u0275fac=function(Ce){return new(Ce||st)(b.LFG(j.t4))},st.\u0275prov=b.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})();function li(st){if(!st.hasAttribute("tabindex")||void 0===st.tabIndex)return!1;let He=st.getAttribute("tabindex");return!(!He||isNaN(parseInt(He,10)))}function ds(st){if(!li(st))return null;const He=parseInt(st.getAttribute("tabindex")||"",10);return isNaN(He)?-1:He}class Ni{constructor(He,Ce,nt,mt,en=!1){this._element=He,this._checker=Ce,this._ngZone=nt,this._document=mt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,en||this.attachAnchors()}get enabled(){return this._enabled}set enabled(He){this._enabled=He,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(He,this._startAnchor),this._toggleAnchorTabIndex(He,this._endAnchor))}destroy(){const He=this._startAnchor,Ce=this._endAnchor;He&&(He.removeEventListener("focus",this.startAnchorListener),He.remove()),Ce&&(Ce.removeEventListener("focus",this.endAnchorListener),Ce.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(He){return new Promise(Ce=>{this._executeOnStable(()=>Ce(this.focusInitialElement(He)))})}focusFirstTabbableElementWhenReady(He){return new Promise(Ce=>{this._executeOnStable(()=>Ce(this.focusFirstTabbableElement(He)))})}focusLastTabbableElementWhenReady(He){return new Promise(Ce=>{this._executeOnStable(()=>Ce(this.focusLastTabbableElement(He)))})}_getRegionBoundary(He){const Ce=this._element.querySelectorAll(`[cdk-focus-region-${He}], [cdkFocusRegion${He}], [cdk-focus-${He}]`);return"start"==He?Ce.length?Ce[0]:this._getFirstTabbableElement(this._element):Ce.length?Ce[Ce.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(He){const Ce=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Ce){if(!this._checker.isFocusable(Ce)){const nt=this._getFirstTabbableElement(Ce);return null==nt||nt.focus(He),!!nt}return Ce.focus(He),!0}return this.focusFirstTabbableElement(He)}focusFirstTabbableElement(He){const Ce=this._getRegionBoundary("start");return Ce&&Ce.focus(He),!!Ce}focusLastTabbableElement(He){const Ce=this._getRegionBoundary("end");return Ce&&Ce.focus(He),!!Ce}hasAttached(){return this._hasAttached}_getFirstTabbableElement(He){if(this._checker.isFocusable(He)&&this._checker.isTabbable(He))return He;const Ce=He.children;for(let nt=0;nt<Ce.length;nt++){const mt=Ce[nt].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Ce[nt]):null;if(mt)return mt}return null}_getLastTabbableElement(He){if(this._checker.isFocusable(He)&&this._checker.isTabbable(He))return He;const Ce=He.children;for(let nt=Ce.length-1;nt>=0;nt--){const mt=Ce[nt].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Ce[nt]):null;if(mt)return mt}return null}_createAnchor(){const He=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,He),He.classList.add("cdk-visually-hidden"),He.classList.add("cdk-focus-trap-anchor"),He.setAttribute("aria-hidden","true"),He}_toggleAnchorTabIndex(He,Ce){He?Ce.setAttribute("tabindex","0"):Ce.removeAttribute("tabindex")}toggleAnchors(He){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(He,this._startAnchor),this._toggleAnchorTabIndex(He,this._endAnchor))}_executeOnStable(He){this._ngZone.isStable?He():this._ngZone.onStable.pipe((0,ve.q)(1)).subscribe(He)}}let Br=(()=>{class st{constructor(Ce,nt,mt){this._checker=Ce,this._ngZone=nt,this._document=mt}create(Ce,nt=!1){return new Ni(Ce,this._checker,this._ngZone,this._document,nt)}}return st.\u0275fac=function(Ce){return new(Ce||st)(b.LFG(Tn),b.LFG(b.R0b),b.LFG(A.K0))},st.\u0275prov=b.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})();function Lr(st){return 0===st.buttons||0===st.offsetX&&0===st.offsetY}function hs(st){const He=st.touches&&st.touches[0]||st.changedTouches&&st.changedTouches[0];return!(!He||-1!==He.identifier||null!=He.radiusX&&1!==He.radiusX||null!=He.radiusY&&1!==He.radiusY)}const ki=new b.OlP("cdk-input-modality-detector-options"),lr={ignoreKeys:[Ge.zL,Ge.jx,Ge.b2,Ge.MW,Ge.JU]},cr=(0,j.i$)({passive:!0,capture:!0});let mi=(()=>{class st{constructor(Ce,nt,mt,en){this._platform=Ce,this._mostRecentTarget=null,this._modality=new Oe.X(null),this._lastTouchMs=0,this._onKeydown=Bn=>{var yi,Rr;(null===(Rr=null===(yi=this._options)||void 0===yi?void 0:yi.ignoreKeys)||void 0===Rr?void 0:Rr.some(Ye=>Ye===Bn.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,j.sA)(Bn))},this._onMousedown=Bn=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Lr(Bn)?"keyboard":"mouse"),this._mostRecentTarget=(0,j.sA)(Bn))},this._onTouchstart=Bn=>{hs(Bn)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,j.sA)(Bn))},this._options=Object.assign(Object.assign({},lr),en),this.modalityDetected=this._modality.pipe(function J(st){return(0,Y.h)((He,Ce)=>st<=Ce)}(1)),this.modalityChanged=this.modalityDetected.pipe((0,Ne.x)()),Ce.isBrowser&&nt.runOutsideAngular(()=>{mt.addEventListener("keydown",this._onKeydown,cr),mt.addEventListener("mousedown",this._onMousedown,cr),mt.addEventListener("touchstart",this._onTouchstart,cr)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,cr),document.removeEventListener("mousedown",this._onMousedown,cr),document.removeEventListener("touchstart",this._onTouchstart,cr))}}return st.\u0275fac=function(Ce){return new(Ce||st)(b.LFG(j.t4),b.LFG(b.R0b),b.LFG(A.K0),b.LFG(ki,8))},st.\u0275prov=b.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})();const Ki=new b.OlP("cdk-focus-monitor-default-options"),zi=(0,j.i$)({passive:!0,capture:!0});let fs=(()=>{class st{constructor(Ce,nt,mt,en,Bn){this._ngZone=Ce,this._platform=nt,this._inputModalityDetector=mt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new le.x,this._rootNodeFocusAndBlurListener=yi=>{const Rr=(0,j.sA)(yi),Ye="focus"===yi.type?this._onFocus:this._onBlur;for(let Ve=Rr;Ve;Ve=Ve.parentElement)Ye.call(this,yi,Ve)},this._document=en,this._detectionMode=(null==Bn?void 0:Bn.detectionMode)||0}monitor(Ce,nt=!1){const mt=(0,Dt.fI)(Ce);if(!this._platform.isBrowser||1!==mt.nodeType)return(0,Pe.of)(null);const en=(0,j.kV)(mt)||this._getDocument(),Bn=this._elementInfo.get(mt);if(Bn)return nt&&(Bn.checkChildren=!0),Bn.subject;const yi={checkChildren:nt,subject:new le.x,rootNode:en};return this._elementInfo.set(mt,yi),this._registerGlobalListeners(yi),yi.subject}stopMonitoring(Ce){const nt=(0,Dt.fI)(Ce),mt=this._elementInfo.get(nt);mt&&(mt.subject.complete(),this._setClasses(nt),this._elementInfo.delete(nt),this._removeGlobalListeners(mt))}focusVia(Ce,nt,mt){const en=(0,Dt.fI)(Ce);en===this._getDocument().activeElement?this._getClosestElementsInfo(en).forEach(([yi,Rr])=>this._originChanged(yi,nt,Rr)):(this._setOrigin(nt),"function"==typeof en.focus&&en.focus(mt))}ngOnDestroy(){this._elementInfo.forEach((Ce,nt)=>this.stopMonitoring(nt))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Ce){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Ce)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Ce){return 1===this._detectionMode||!!(null==Ce?void 0:Ce.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Ce,nt){Ce.classList.toggle("cdk-focused",!!nt),Ce.classList.toggle("cdk-touch-focused","touch"===nt),Ce.classList.toggle("cdk-keyboard-focused","keyboard"===nt),Ce.classList.toggle("cdk-mouse-focused","mouse"===nt),Ce.classList.toggle("cdk-program-focused","program"===nt)}_setOrigin(Ce,nt=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Ce,this._originFromTouchInteraction="touch"===Ce&&nt,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Ce,nt){const mt=this._elementInfo.get(nt),en=(0,j.sA)(Ce);!mt||!mt.checkChildren&&nt!==en||this._originChanged(nt,this._getFocusOrigin(en),mt)}_onBlur(Ce,nt){const mt=this._elementInfo.get(nt);!mt||mt.checkChildren&&Ce.relatedTarget instanceof Node&&nt.contains(Ce.relatedTarget)||(this._setClasses(nt),this._emitOrigin(mt.subject,null))}_emitOrigin(Ce,nt){this._ngZone.run(()=>Ce.next(nt))}_registerGlobalListeners(Ce){if(!this._platform.isBrowser)return;const nt=Ce.rootNode,mt=this._rootNodeFocusListenerCount.get(nt)||0;mt||this._ngZone.runOutsideAngular(()=>{nt.addEventListener("focus",this._rootNodeFocusAndBlurListener,zi),nt.addEventListener("blur",this._rootNodeFocusAndBlurListener,zi)}),this._rootNodeFocusListenerCount.set(nt,mt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Mt.R)(this._stopInputModalityDetector)).subscribe(en=>{this._setOrigin(en,!0)}))}_removeGlobalListeners(Ce){const nt=Ce.rootNode;if(this._rootNodeFocusListenerCount.has(nt)){const mt=this._rootNodeFocusListenerCount.get(nt);mt>1?this._rootNodeFocusListenerCount.set(nt,mt-1):(nt.removeEventListener("focus",this._rootNodeFocusAndBlurListener,zi),nt.removeEventListener("blur",this._rootNodeFocusAndBlurListener,zi),this._rootNodeFocusListenerCount.delete(nt))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Ce,nt,mt){this._setClasses(Ce,nt),this._emitOrigin(mt.subject,nt),this._lastFocusOrigin=nt}_getClosestElementsInfo(Ce){const nt=[];return this._elementInfo.forEach((mt,en)=>{(en===Ce||mt.checkChildren&&en.contains(Ce))&&nt.push([en,mt])}),nt}}return st.\u0275fac=function(Ce){return new(Ce||st)(b.LFG(b.R0b),b.LFG(j.t4),b.LFG(mi),b.LFG(A.K0,8),b.LFG(Ki,8))},st.\u0275prov=b.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})();const Ze="cdk-high-contrast-black-on-white",je="cdk-high-contrast-white-on-black",Lt="cdk-high-contrast-active";let Pn=(()=>{class st{constructor(Ce,nt){this._platform=Ce,this._document=nt}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Ce=this._document.createElement("div");Ce.style.backgroundColor="rgb(1,2,3)",Ce.style.position="absolute",this._document.body.appendChild(Ce);const nt=this._document.defaultView||window,mt=nt&&nt.getComputedStyle?nt.getComputedStyle(Ce):null,en=(mt&&mt.backgroundColor||"").replace(/ /g,"");switch(Ce.remove(),en){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Ce=this._document.body.classList;Ce.remove(Lt),Ce.remove(Ze),Ce.remove(je),this._hasCheckedHighContrastMode=!0;const nt=this.getHighContrastMode();1===nt?(Ce.add(Lt),Ce.add(Ze)):2===nt&&(Ce.add(Lt),Ce.add(je))}}}return st.\u0275fac=function(Ce){return new(Ce||st)(b.LFG(j.t4),b.LFG(A.K0))},st.\u0275prov=b.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})()},226:(dn,dt,q)=>{"use strict";q.d(dt,{Is:()=>Pe,vT:()=>Me});var A=q(5e3),b=q(9808);const j=new A.OlP("cdk-dir-doc",{providedIn:"root",factory:function le(){return(0,A.f3M)(b.K0)}}),ce=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Pe=(()=>{class Se{constructor(S){if(this.value="ltr",this.change=new A.vpe,S){const J=S.documentElement?S.documentElement.dir:null;this.value=function Oe(Se){const We=(null==Se?void 0:Se.toLowerCase())||"";return"auto"===We&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?ce.test(navigator.language)?"rtl":"ltr":"rtl"===We?"rtl":"ltr"}((S.body?S.body.dir:null)||J||"ltr")}}ngOnDestroy(){this.change.complete()}}return Se.\u0275fac=function(S){return new(S||Se)(A.LFG(j,8))},Se.\u0275prov=A.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})(),Me=(()=>{class Se{}return Se.\u0275fac=function(S){return new(S||Se)},Se.\u0275mod=A.oAB({type:Se}),Se.\u0275inj=A.cJS({}),Se})()},3191:(dn,dt,q)=>{"use strict";q.d(dt,{Eq:()=>ce,HM:()=>Oe,Ig:()=>b,fI:()=>Pe,su:()=>j});var A=q(5e3);function b(Me){return null!=Me&&"false"!=`${Me}`}function j(Me,Se=0){return function le(Me){return!isNaN(parseFloat(Me))&&!isNaN(Number(Me))}(Me)?Number(Me):Se}function ce(Me){return Array.isArray(Me)?Me:[Me]}function Oe(Me){return null==Me?"":"string"==typeof Me?Me:`${Me}px`}function Pe(Me){return Me instanceof A.SBq?Me.nativeElement:Me}},1159:(dn,dt,q)=>{"use strict";q.d(dt,{A:()=>In,JH:()=>Dt,JU:()=>Oe,K5:()=>ce,Ku:()=>Y,LH:()=>Ne,L_:()=>S,MW:()=>$t,Mf:()=>j,SV:()=>Mt,Sd:()=>Ae,VM:()=>J,Vb:()=>rr,Z:()=>Sn,aO:()=>hi,b2:()=>Ps,hY:()=>We,jx:()=>Pe,oh:()=>ve,uR:()=>de,xE:()=>bt,zL:()=>Ge});const j=9,ce=13,Oe=16,Pe=17,Ge=18,We=27,S=32,Y=33,J=34,de=35,Ae=36,ve=37,Ne=38,Mt=39,Dt=40,bt=48,hi=57,In=65,Sn=90,$t=91,Ps=224;function rr(vi,...Es){return Es.length?Es.some(Js=>vi[Js]):vi.altKey||vi.shiftKey||vi.ctrlKey||vi.metaKey}},925:(dn,dt,q)=>{"use strict";q.d(dt,{Mq:()=>J,Oy:()=>lt,ht:()=>Mt,i$:()=>We,kV:()=>Ne,sA:()=>Dt,t4:()=>le});var A=q(5e3),b=q(9808);let j;try{j="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Ee){j=!1}let Me,Y,Ae,le=(()=>{class Ee{constructor(St){this._platformId=St,this.isBrowser=this._platformId?(0,b.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!j)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Ee.\u0275fac=function(St){return new(St||Ee)(A.LFG(A.Lbi))},Ee.\u0275prov=A.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();function We(Ee){return function Se(){if(null==Me&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Me=!0}))}finally{Me=Me||!1}return Me}()?Ee:!!Ee.capture}function J(){if(null==Y){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Y=!1,Y;if("scrollBehavior"in document.documentElement.style)Y=!0;else{const Ee=Element.prototype.scrollTo;Y=!!Ee&&!/\{\s*\[native code\]\s*\}/.test(Ee.toString())}}return Y}function Ne(Ee){if(function ve(){if(null==Ae){const Ee="undefined"!=typeof document?document.head:null;Ae=!(!Ee||!Ee.createShadowRoot&&!Ee.attachShadow)}return Ae}()){const ut=Ee.getRootNode?Ee.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&ut instanceof ShadowRoot)return ut}return null}function Mt(){let Ee="undefined"!=typeof document&&document?document.activeElement:null;for(;Ee&&Ee.shadowRoot;){const ut=Ee.shadowRoot.activeElement;if(ut===Ee)break;Ee=ut}return Ee}function Dt(Ee){return Ee.composedPath?Ee.composedPath()[0]:Ee.target}function lt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},7429:(dn,dt,q)=>{"use strict";q.d(dt,{C5:()=>Se,Pl:()=>Mt,UE:()=>We,eL:()=>lt,en:()=>Y,u0:()=>de});var A=q(5e3),b=q(9808);class Me{attach(St){return this._attachedHost=St,St.attach(this)}detach(){let St=this._attachedHost;null!=St&&(this._attachedHost=null,St.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(St){this._attachedHost=St}}class Se extends Me{constructor(St,bt,xt,qe){super(),this.component=St,this.viewContainerRef=bt,this.injector=xt,this.componentFactoryResolver=qe}}class We extends Me{constructor(St,bt,xt){super(),this.templateRef=St,this.viewContainerRef=bt,this.context=xt}get origin(){return this.templateRef.elementRef}attach(St,bt=this.context){return this.context=bt,super.attach(St)}detach(){return this.context=void 0,super.detach()}}class S extends Me{constructor(St){super(),this.element=St instanceof A.SBq?St.nativeElement:St}}class Y{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(St){return St instanceof Se?(this._attachedPortal=St,this.attachComponentPortal(St)):St instanceof We?(this._attachedPortal=St,this.attachTemplatePortal(St)):this.attachDomPortal&&St instanceof S?(this._attachedPortal=St,this.attachDomPortal(St)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(St){this._disposeFn=St}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class de extends Y{constructor(St,bt,xt,qe,Qe){super(),this.outletElement=St,this._componentFactoryResolver=bt,this._appRef=xt,this._defaultInjector=qe,this.attachDomPortal=pt=>{const _t=pt.element,Vt=this._document.createComment("dom-portal");_t.parentNode.insertBefore(Vt,_t),this.outletElement.appendChild(_t),this._attachedPortal=pt,super.setDisposeFn(()=>{Vt.parentNode&&Vt.parentNode.replaceChild(_t,Vt)})},this._document=Qe}attachComponentPortal(St){const xt=(St.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(St.component);let qe;return St.viewContainerRef?(qe=St.viewContainerRef.createComponent(xt,St.viewContainerRef.length,St.injector||St.viewContainerRef.injector),this.setDisposeFn(()=>qe.destroy())):(qe=xt.create(St.injector||this._defaultInjector),this._appRef.attachView(qe.hostView),this.setDisposeFn(()=>{this._appRef.detachView(qe.hostView),qe.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(qe)),this._attachedPortal=St,qe}attachTemplatePortal(St){let bt=St.viewContainerRef,xt=bt.createEmbeddedView(St.templateRef,St.context);return xt.rootNodes.forEach(qe=>this.outletElement.appendChild(qe)),xt.detectChanges(),this.setDisposeFn(()=>{let qe=bt.indexOf(xt);-1!==qe&&bt.remove(qe)}),this._attachedPortal=St,xt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(St){return St.hostView.rootNodes[0]}}let Mt=(()=>{class ut extends Y{constructor(bt,xt,qe){super(),this._componentFactoryResolver=bt,this._viewContainerRef=xt,this._isInitialized=!1,this.attached=new A.vpe,this.attachDomPortal=Qe=>{const pt=Qe.element,_t=this._document.createComment("dom-portal");Qe.setAttachedHost(this),pt.parentNode.insertBefore(_t,pt),this._getRootNode().appendChild(pt),this._attachedPortal=Qe,super.setDisposeFn(()=>{_t.parentNode&&_t.parentNode.replaceChild(pt,_t)})},this._document=qe}get portal(){return this._attachedPortal}set portal(bt){this.hasAttached()&&!bt&&!this._isInitialized||(this.hasAttached()&&super.detach(),bt&&super.attach(bt),this._attachedPortal=bt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(bt){bt.setAttachedHost(this);const xt=null!=bt.viewContainerRef?bt.viewContainerRef:this._viewContainerRef,Qe=(bt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(bt.component),pt=xt.createComponent(Qe,xt.length,bt.injector||xt.injector);return xt!==this._viewContainerRef&&this._getRootNode().appendChild(pt.hostView.rootNodes[0]),super.setDisposeFn(()=>pt.destroy()),this._attachedPortal=bt,this._attachedRef=pt,this.attached.emit(pt),pt}attachTemplatePortal(bt){bt.setAttachedHost(this);const xt=this._viewContainerRef.createEmbeddedView(bt.templateRef,bt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=bt,this._attachedRef=xt,this.attached.emit(xt),xt}_getRootNode(){const bt=this._viewContainerRef.element.nativeElement;return bt.nodeType===bt.ELEMENT_NODE?bt:bt.parentNode}}return ut.\u0275fac=function(bt){return new(bt||ut)(A.Y36(A._Vd),A.Y36(A.s_b),A.Y36(b.K0))},ut.\u0275dir=A.lG2({type:ut,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[A.qOj]}),ut})(),lt=(()=>{class ut{}return ut.\u0275fac=function(bt){return new(bt||ut)},ut.\u0275mod=A.oAB({type:ut}),ut.\u0275inj=A.cJS({}),ut})()},9808:(dn,dt,q)=>{"use strict";q.d(dt,{Do:()=>lt,EM:()=>Vo,HT:()=>ce,JF:()=>Ir,JJ:()=>Wa,K0:()=>Pe,Mx:()=>ho,NF:()=>Ms,O5:()=>rr,PC:()=>eo,S$:()=>ve,V_:()=>Se,Ye:()=>Ee,b0:()=>Dt,bD:()=>Os,ez:()=>sa,lw:()=>Ge,mr:()=>Mt,q:()=>j,w_:()=>Oe});var A=q(5e3);let b=null;function j(){return b}function ce(U){b||(b=U)}class Oe{}const Pe=new A.OlP("DocumentToken");let Ge=(()=>{class U{historyGo(V){throw new Error("Not implemented")}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275prov=A.Yz7({token:U,factory:function(){return function Me(){return(0,A.LFG)(We)}()},providedIn:"platform"}),U})();const Se=new A.OlP("Location Initialized");let We=(()=>{class U extends Ge{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(V){const ne=j().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",V,!1),()=>ne.removeEventListener("popstate",V)}onHashChange(V){const ne=j().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",V,!1),()=>ne.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,ne,ke){S()?this._history.pushState(V,ne,ke):this.location.hash=ke}replaceState(V,ne,ke){S()?this._history.replaceState(V,ne,ke):this.location.hash=ke}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return U.\u0275fac=function(V){return new(V||U)(A.LFG(Pe))},U.\u0275prov=A.Yz7({token:U,factory:function(){return function Y(){return new We((0,A.LFG)(Pe))}()},providedIn:"platform"}),U})();function S(){return!!window.history.pushState}function J(U,ee){if(0==U.length)return ee;if(0==ee.length)return U;let V=0;return U.endsWith("/")&&V++,ee.startsWith("/")&&V++,2==V?U+ee.substring(1):1==V?U+ee:U+"/"+ee}function de(U){const ee=U.match(/#|\?|$/),V=ee&&ee.index||U.length;return U.slice(0,V-("/"===U[V-1]?1:0))+U.slice(V)}function Ae(U){return U&&"?"!==U[0]?"?"+U:U}let ve=(()=>{class U{historyGo(V){throw new Error("Not implemented")}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275prov=A.Yz7({token:U,factory:function(){return function Ne(U){const ee=(0,A.LFG)(Pe).location;return new Dt((0,A.LFG)(Ge),ee&&ee.origin||"")}()},providedIn:"root"}),U})();const Mt=new A.OlP("appBaseHref");let Dt=(()=>{class U extends ve{constructor(V,ne){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==ne&&(ne=this._platformLocation.getBaseHrefFromDOM()),null==ne)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ne}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return J(this._baseHref,V)}path(V=!1){const ne=this._platformLocation.pathname+Ae(this._platformLocation.search),ke=this._platformLocation.hash;return ke&&V?`${ne}${ke}`:ne}pushState(V,ne,ke,wt){const Pt=this.prepareExternalUrl(ke+Ae(wt));this._platformLocation.pushState(V,ne,Pt)}replaceState(V,ne,ke,wt){const Pt=this.prepareExternalUrl(ke+Ae(wt));this._platformLocation.replaceState(V,ne,Pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ne,ke;null===(ke=(ne=this._platformLocation).historyGo)||void 0===ke||ke.call(ne,V)}}return U.\u0275fac=function(V){return new(V||U)(A.LFG(Ge),A.LFG(Mt,8))},U.\u0275prov=A.Yz7({token:U,factory:U.\u0275fac}),U})(),lt=(()=>{class U extends ve{constructor(V,ne){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(V){const ne=J(this._baseHref,V);return ne.length>0?"#"+ne:ne}pushState(V,ne,ke,wt){let Pt=this.prepareExternalUrl(ke+Ae(wt));0==Pt.length&&(Pt=this._platformLocation.pathname),this._platformLocation.pushState(V,ne,Pt)}replaceState(V,ne,ke,wt){let Pt=this.prepareExternalUrl(ke+Ae(wt));0==Pt.length&&(Pt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ne,Pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ne,ke;null===(ke=(ne=this._platformLocation).historyGo)||void 0===ke||ke.call(ne,V)}}return U.\u0275fac=function(V){return new(V||U)(A.LFG(Ge),A.LFG(Mt,8))},U.\u0275prov=A.Yz7({token:U,factory:U.\u0275fac}),U})(),Ee=(()=>{class U{constructor(V,ne){this._subject=new A.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const ke=this._platformStrategy.getBaseHref();this._platformLocation=ne,this._baseHref=de(bt(ke)),this._platformStrategy.onPopState(wt=>{this._subject.emit({url:this.path(!0),pop:!0,state:wt.state,type:wt.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,ne=""){return this.path()==this.normalize(V+Ae(ne))}normalize(V){return U.stripTrailingSlash(function St(U,ee){return U&&ee.startsWith(U)?ee.substring(U.length):ee}(this._baseHref,bt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,ne="",ke=null){this._platformStrategy.pushState(ke,"",V,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ae(ne)),ke)}replaceState(V,ne="",ke=null){this._platformStrategy.replaceState(ke,"",V,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Ae(ne)),ke)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var ne,ke;null===(ke=(ne=this._platformStrategy).historyGo)||void 0===ke||ke.call(ne,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}))}_notifyUrlChangeListeners(V="",ne){this._urlChangeListeners.forEach(ke=>ke(V,ne))}subscribe(V,ne,ke){return this._subject.subscribe({next:V,error:ne,complete:ke})}}return U.normalizeQueryParams=Ae,U.joinWithSlash=J,U.stripTrailingSlash=de,U.\u0275fac=function(V){return new(V||U)(A.LFG(ve),A.LFG(Ge))},U.\u0275prov=A.Yz7({token:U,factory:function(){return function ut(){return new Ee((0,A.LFG)(ve),(0,A.LFG)(Ge))}()},providedIn:"root"}),U})();function bt(U){return U.replace(/\/index.html$/,"")}var qe=(()=>((qe=qe||{})[qe.Decimal=0]="Decimal",qe[qe.Percent=1]="Percent",qe[qe.Currency=2]="Currency",qe[qe.Scientific=3]="Scientific",qe))(),yt=(()=>((yt=yt||{})[yt.Decimal=0]="Decimal",yt[yt.Group=1]="Group",yt[yt.List=2]="List",yt[yt.PercentSign=3]="PercentSign",yt[yt.PlusSign=4]="PlusSign",yt[yt.MinusSign=5]="MinusSign",yt[yt.Exponential=6]="Exponential",yt[yt.SuperscriptingExponent=7]="SuperscriptingExponent",yt[yt.PerMille=8]="PerMille",yt[yt.Infinity=9]="Infinity",yt[yt.NaN=10]="NaN",yt[yt.TimeSeparator=11]="TimeSeparator",yt[yt.CurrencyDecimal=12]="CurrencyDecimal",yt[yt.CurrencyGroup=13]="CurrencyGroup",yt))();function li(U,ee){const V=(0,A.cg1)(U),ne=V[A.wAp.NumberSymbols][ee];if(void 0===ne){if(ee===yt.CurrencyDecimal)return V[A.wAp.NumberSymbols][yt.Decimal];if(ee===yt.CurrencyGroup)return V[A.wAp.NumberSymbols][yt.Group]}return ne}const ct=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function gs(U){const ee=parseInt(U);if(isNaN(ee))throw new Error("Invalid integer literal when parsing "+U);return ee}function ho(U,ee){ee=encodeURIComponent(ee);for(const V of U.split(";")){const ne=V.indexOf("="),[ke,wt]=-1==ne?[V,""]:[V.slice(0,ne),V.slice(ne+1)];if(ke.trim()===ee)return decodeURIComponent(wt)}return null}let rr=(()=>{class U{constructor(V,ne){this._viewContainer=V,this._context=new vi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Es("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Es("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ne){return!0}}return U.\u0275fac=function(V){return new(V||U)(A.Y36(A.s_b),A.Y36(A.Rgc))},U.\u0275dir=A.lG2({type:U,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),U})();class vi{constructor(){this.$implicit=null,this.ngIf=null}}function Es(U,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${U} must be a TemplateRef, but received '${(0,A.AaK)(ee)}'.`)}let eo=(()=>{class U{constructor(V,ne,ke){this._ngEl=V,this._differs=ne,this._renderer=ke,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,ne){const[ke,wt]=V.split(".");null!=(ne=null!=ne&&wt?`${ne}${wt}`:ne)?this._renderer.setStyle(this._ngEl.nativeElement,ke,ne):this._renderer.removeStyle(this._ngEl.nativeElement,ke)}_applyChanges(V){V.forEachRemovedItem(ne=>this._setStyle(ne.key,null)),V.forEachAddedItem(ne=>this._setStyle(ne.key,ne.currentValue)),V.forEachChangedItem(ne=>this._setStyle(ne.key,ne.currentValue))}}return U.\u0275fac=function(V){return new(V||U)(A.Y36(A.SBq),A.Y36(A.aQg),A.Y36(A.Qsj))},U.\u0275dir=A.lG2({type:U,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),U})();let Wa=(()=>{class U{constructor(V){this._locale=V}transform(V,ne,ke){if(!function Mo(U){return!(null==U||""===U||U!=U)}(V))return null;ke=ke||this._locale;try{return function Qn(U,ee,V){return function zn(U,ee,V,ne,ke,wt,Pt=!1){let cn="",ni=!1;if(isFinite(U)){let Ei=function yr(U){let ne,ke,wt,Pt,cn,ee=Math.abs(U)+"",V=0;for((ke=ee.indexOf("."))>-1&&(ee=ee.replace(".","")),(wt=ee.search(/e/i))>0?(ke<0&&(ke=wt),ke+=+ee.slice(wt+1),ee=ee.substring(0,wt)):ke<0&&(ke=ee.length),wt=0;"0"===ee.charAt(wt);wt++);if(wt===(cn=ee.length))ne=[0],ke=1;else{for(cn--;"0"===ee.charAt(cn);)cn--;for(ke-=wt,ne=[],Pt=0;wt<=cn;wt++,Pt++)ne[Pt]=Number(ee.charAt(wt))}return ke>22&&(ne=ne.splice(0,21),V=ke-1,ke=1),{digits:ne,exponent:V,integerLen:ke}}(U);Pt&&(Ei=function Zn(U){if(0===U.digits[0])return U;const ee=U.digits.length-U.integerLen;return U.exponent?U.exponent+=2:(0===ee?U.digits.push(0,0):1===ee&&U.digits.push(0),U.integerLen+=2),U}(Ei));let Mi=ee.minInt,Bi=ee.minFrac,hr=ee.maxFrac;if(wt){const Co=wt.match(ct);if(null===Co)throw new Error(`${wt} is not a valid digit info`);const aa=Co[1],$o=Co[3],la=Co[5];null!=aa&&(Mi=gs(aa)),null!=$o&&(Bi=gs($o)),null!=la?hr=gs(la):null!=$o&&Bi>hr&&(hr=Bi)}!function ur(U,ee,V){if(ee>V)throw new Error(`The minimum number of digits after fraction (${ee}) is higher than the maximum (${V}).`);let ne=U.digits,ke=ne.length-U.integerLen;const wt=Math.min(Math.max(ee,ke),V);let Pt=wt+U.integerLen,cn=ne[Pt];if(Pt>0){ne.splice(Math.max(U.integerLen,Pt));for(let Bi=Pt;Bi<ne.length;Bi++)ne[Bi]=0}else{ke=Math.max(0,ke),U.integerLen=1,ne.length=Math.max(1,Pt=wt+1),ne[0]=0;for(let Bi=1;Bi<Pt;Bi++)ne[Bi]=0}if(cn>=5)if(Pt-1<0){for(let Bi=0;Bi>Pt;Bi--)ne.unshift(0),U.integerLen++;ne.unshift(1),U.integerLen++}else ne[Pt-1]++;for(;ke<Math.max(0,wt);ke++)ne.push(0);let ni=0!==wt;const Ei=ee+U.integerLen,Mi=ne.reduceRight(function(Bi,hr,sr,Sr){return Sr[sr]=(hr+=Bi)<10?hr:hr-10,ni&&(0===Sr[sr]&&sr>=Ei?Sr.pop():ni=!1),hr>=10?1:0},0);Mi&&(ne.unshift(Mi),U.integerLen++)}(Ei,Bi,hr);let sr=Ei.digits,Sr=Ei.integerLen;const ao=Ei.exponent;let Ss=[];for(ni=sr.every(Co=>!Co);Sr<Mi;Sr++)sr.unshift(0);for(;Sr<0;Sr++)sr.unshift(0);Sr>0?Ss=sr.splice(Sr,sr.length):(Ss=sr,sr=[0]);const Wn=[];for(sr.length>=ee.lgSize&&Wn.unshift(sr.splice(-ee.lgSize,sr.length).join(""));sr.length>ee.gSize;)Wn.unshift(sr.splice(-ee.gSize,sr.length).join(""));sr.length&&Wn.unshift(sr.join("")),cn=Wn.join(li(V,ne)),Ss.length&&(cn+=li(V,ke)+Ss.join("")),ao&&(cn+=li(V,yt.Exponential)+"+"+ao)}else cn=li(V,yt.Infinity);return cn=U<0&&!ni?ee.negPre+cn+ee.negSuf:ee.posPre+cn+ee.posSuf,cn}(U,function wi(U,ee="-"){const V={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ne=U.split(";"),ke=ne[0],wt=ne[1],Pt=-1!==ke.indexOf(".")?ke.split("."):[ke.substring(0,ke.lastIndexOf("0")+1),ke.substring(ke.lastIndexOf("0")+1)],cn=Pt[0],ni=Pt[1]||"";V.posPre=cn.substr(0,cn.indexOf("#"));for(let Mi=0;Mi<ni.length;Mi++){const Bi=ni.charAt(Mi);"0"===Bi?V.minFrac=V.maxFrac=Mi+1:"#"===Bi?V.maxFrac=Mi+1:V.posSuf+=Bi}const Ei=cn.split(",");if(V.gSize=Ei[1]?Ei[1].length:0,V.lgSize=Ei[2]||Ei[1]?(Ei[2]||Ei[1]).length:0,wt){const Mi=ke.length-V.posPre.length-V.posSuf.length,Bi=wt.indexOf("#");V.negPre=wt.substr(0,Bi).replace(/'/g,""),V.negSuf=wt.substr(Bi+Mi).replace(/'/g,"")}else V.negPre=ee+V.posPre,V.negSuf=V.posSuf;return V}(function ds(U,ee){return(0,A.cg1)(U)[A.wAp.NumberFormats][ee]}(ee,qe.Decimal),li(ee,yt.MinusSign)),ee,yt.Group,yt.Decimal,V)}(function ra(U){if("string"==typeof U&&!isNaN(Number(U)-parseFloat(U)))return Number(U);if("number"!=typeof U)throw new Error(`${U} is not a number`);return U}(V),ke,ne)}catch(wt){throw function br(U,ee){return new A.vHH(2100,"")}()}}}return U.\u0275fac=function(V){return new(V||U)(A.Y36(A.soG,16))},U.\u0275pipe=A.Yjl({name:"number",type:U,pure:!0}),U})();let sa=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275mod=A.oAB({type:U}),U.\u0275inj=A.cJS({}),U})();const Os="browser";function Ms(U){return U===Os}let Vo=(()=>{class U{}return U.\u0275prov=(0,A.Yz7)({token:U,providedIn:"root",factory:()=>new po((0,A.LFG)(Pe),window)}),U})();class po{constructor(ee,V){this.document=ee,this.window=V,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const V=function Da(U,ee){const V=U.getElementById(ee)||U.getElementsByName(ee)[0];if(V)return V;if("function"==typeof U.createTreeWalker&&U.body&&(U.body.createShadowRoot||U.body.attachShadow)){const ne=U.createTreeWalker(U.body,NodeFilter.SHOW_ELEMENT);let ke=ne.currentNode;for(;ke;){const wt=ke.shadowRoot;if(wt){const Pt=wt.getElementById(ee)||wt.querySelector(`[name="${ee}"]`);if(Pt)return Pt}ke=ne.nextNode()}}return null}(this.document,ee);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=ee)}}scrollToElement(ee){const V=ee.getBoundingClientRect(),ne=V.left+this.window.pageXOffset,ke=V.top+this.window.pageYOffset,wt=this.offset();this.window.scrollTo(ne-wt[0],ke-wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=jo(this.window.history)||jo(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch(ee){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ee){return!1}}}function jo(U){return Object.getOwnPropertyDescriptor(U,"scrollRestoration")}class Ir{}},5e3:(dn,dt,q)=>{"use strict";q.d(dt,{$8M:()=>qs,$Z:()=>lc,AFp:()=>ex,ALo:()=>Ah,AaK:()=>Ge,CRH:()=>Pb,CZH:()=>Nv,CqO:()=>Xf,EJc:()=>Sw,EiD:()=>Up,F$t:()=>ch,F4k:()=>qf,FYo:()=>$n,FiY:()=>Oa,G48:()=>jw,Gf:()=>Rb,GfV:()=>Hn,Gpc:()=>We,Hsn:()=>Jf,Ikx:()=>xh,JOm:()=>el,JVY:()=>i_,L6k:()=>r_,LAX:()=>o_,LFG:()=>vs,LSH:()=>Vh,Lbi:()=>ix,MAs:()=>Uf,NdJ:()=>ah,O4$:()=>E,OlP:()=>Fr,Oqu:()=>ap,PXZ:()=>Vw,Q6J:()=>$u,QGY:()=>oh,Qsj:()=>Je,R0b:()=>pl,RDi:()=>jo,Rgc:()=>bp,SBq:()=>Ut,Sil:()=>Dw,Suo:()=>Ib,TTD:()=>Mo,TgZ:()=>ta,Udp:()=>rp,VLi:()=>Nw,W1O:()=>Nb,WFA:()=>Yu,XFs:()=>Un,Xpm:()=>Ce,Y36:()=>ju,YKP:()=>xe,YNc:()=>Ba,Yjl:()=>ye,Yz7:()=>_i,ZZ4:()=>Xv,_Bn:()=>pi,_UZ:()=>sg,_Vd:()=>Cn,_c5:()=>aE,_uU:()=>bg,aQg:()=>Kv,c2e:()=>sx,cJS:()=>Ai,cg1:()=>wh,d8E:()=>qc,dDg:()=>lx,deG:()=>Ns,dqk:()=>Yn,eBb:()=>s_,eFA:()=>dx,ekj:()=>ul,f3M:()=>cd,g9A:()=>nx,h0i:()=>Zc,hGG:()=>lE,hij:()=>_h,iGM:()=>Tb,ifc:()=>mi,ip1:()=>Qb,kL8:()=>hp,kcU:()=>it,lG2:()=>Ve,lcZ:()=>wb,mCW:()=>hu,n5z:()=>fr,n_E:()=>Rg,oAB:()=>yi,oxw:()=>lh,pB0:()=>a_,q3G:()=>Ts,qLn:()=>Gh,qOj:()=>al,qZA:()=>na,qzn:()=>bc,s9C:()=>uh,sBO:()=>$w,sIi:()=>Qo,s_b:()=>Pg,soG:()=>Bv,tBr:()=>Ko,tb:()=>rx,tp0:()=>Dl,uIk:()=>Bf,vHH:()=>de,vpe:()=>Bl,wAp:()=>oi,xi3:()=>Eb,xp6:()=>hm,yhl:()=>Op,z2F:()=>Gv,z3N:()=>Ja,zSh:()=>Vd,zs3:()=>No});var A=q(7579),b=q(727),j=q(8306),le=q(6451),ce=q(3099);function Oe(n){for(let i in n)if(n[i]===Oe)return i;throw Error("Could not find renamed property on target object.")}function Pe(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Me(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Se=Oe({__forward_ref__:Oe});function We(n){return n.__forward_ref__=We,n.toString=function(){return Ge(this())},n}function S(n){return Y(n)?n():n}function Y(n){return"function"==typeof n&&n.hasOwnProperty(Se)&&n.__forward_ref__===We}class de extends Error{constructor(i,s){super(function Ae(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,s)),this.code=i}}function ve(n){return"string"==typeof n?n:null==n?"":String(n)}function Ne(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ve(n)}function Ee(n,i){const s=i?` in ${i}`:"";throw new de(-201,`No provider for ${Ne(n)} found${s}`)}function Tn(n,i){null==n&&function gn(n,i,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${i} <=Actual]`))}(i,n,null,"!=")}function _i(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ai(n){return{providers:n.providers||[],imports:n.imports||[]}}function li(n){return ds(n,Ni)||ds(n,ns)}function ds(n,i){return n.hasOwnProperty(i)?n[i]:null}function _r(n){return n&&(n.hasOwnProperty(Br)||n.hasOwnProperty(Kr))?n[Br]:null}const Ni=Oe({\u0275prov:Oe}),Br=Oe({\u0275inj:Oe}),ns=Oe({ngInjectableDef:Oe}),Kr=Oe({ngInjectorDef:Oe});var Un=(()=>((Un=Un||{})[Un.Default=0]="Default",Un[Un.Host=1]="Host",Un[Un.Self=2]="Self",Un[Un.SkipSelf=4]="SkipSelf",Un[Un.Optional=8]="Optional",Un))();let Us;function $r(n){const i=Us;return Us=n,i}function Lr(n,i,s){const a=li(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Un.Optional?null:void 0!==i?i:void Ee(Ge(n),"Injector")}function ki(n){return{toString:n}.toString()}var lr=(()=>((lr=lr||{})[lr.OnPush=0]="OnPush",lr[lr.Default=1]="Default",lr))(),mi=(()=>{return(n=mi||(mi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",mi;var n})();const Sn="undefined"!=typeof globalThis&&globalThis,$t="undefined"!=typeof window&&window,ws="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yn=Sn||"undefined"!=typeof global&&global||$t||ws,fs={},at=[],Ze=Oe({\u0275cmp:Oe}),je=Oe({\u0275dir:Oe}),Lt=Oe({\u0275pipe:Oe}),Pn=Oe({\u0275mod:Oe}),si=Oe({\u0275fac:Oe}),st=Oe({__NG_ELEMENT_ID__:Oe});let He=0;function Ce(n){return ki(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===lr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||at,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||mi.Emulated,id:"c",styles:n.styles||at,_:null,setInput:null,schemas:n.schemas||null,tView:null},u=n.directives,f=n.features,_=n.pipes;return a.id+=He++,a.inputs=Ye(n.inputs,s),a.outputs=Ye(n.outputs),f&&f.forEach(C=>C(a)),a.directiveDefs=u?()=>("function"==typeof u?u():u).map(mt):null,a.pipeDefs=_?()=>("function"==typeof _?_():_).map(en):null,a})}function mt(n){return Ue(n)||function ct(n){return n[je]||null}(n)}function en(n){return function et(n){return n[Lt]||null}(n)}const Bn={};function yi(n){return ki(()=>{const i={type:n.type,bootstrap:n.bootstrap||at,declarations:n.declarations||at,imports:n.imports||at,exports:n.exports||at,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Bn[n.id]=n.type),i})}function Ye(n,i){if(null==n)return fs;const s={};for(const a in n)if(n.hasOwnProperty(a)){let u=n[a],f=u;Array.isArray(u)&&(f=u[1],u=u[0]),s[u]=a,i&&(i[u]=f)}return s}const Ve=Ce;function ye(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ue(n){return n[Ze]||null}function me(n,i){const s=n[Pn]||null;if(!s&&!0===i)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return s}function vr(n){return Array.isArray(n)&&"object"==typeof n[1]}function mr(n){return Array.isArray(n)&&!0===n[1]}function Qs(n){return 0!=(8&n.flags)}function fo(n){return 2==(2&n.flags)}function zs(n){return 1==(1&n.flags)}function Zr(n){return null!==n.template}function eo(n){return 0!=(512&n[2])}function Oo(n,i){return n.hasOwnProperty(si)?n[si]:null}class ja{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Mo(){return ra}function ra(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ya),$a}function $a(){const n=Os(this),i=null==n?void 0:n.current;if(i){const s=n.previous;if(s===fs)n.previous=i;else for(let a in i)s[a]=i[a];n.current=null,this.ngOnChanges(i)}}function Ya(n,i,s,a){const u=Os(n)||function _l(n,i){return n[sa]=i}(n,{previous:fs,current:null}),f=u.current||(u.current={}),_=u.previous,C=this.declaredInputs[s],P=_[C];f[C]=new ja(P&&P.currentValue,i,_===fs),n[a]=i}Mo.ngInherit=!0;const sa="__ngSimpleChanges__";function Os(n){return n[sa]||null}let po;function jo(n){po=n}function Ir(n){return!!n.listen}const U={createRenderer:(n,i)=>function Da(){return void 0!==po?po:"undefined"!=typeof document?document:void 0}()};function V(n){for(;Array.isArray(n);)n=n[0];return n}function wt(n,i){return V(i[n])}function Pt(n,i){return V(i[n.index])}function ni(n,i){return n.data[i]}function Ei(n,i){return n[i]}function Mi(n,i){const s=i[n];return vr(s)?s:s[0]}function Bi(n){return 4==(4&n[2])}function hr(n){return 128==(128&n[2])}function Sr(n,i){return null==i?null:n[i]}function ao(n){n[18]=0}function Ss(n,i){n[5]+=i;let s=n,a=n[3];for(;null!==a&&(1===i&&1===s[5]||-1===i&&0===s[5]);)a[5]+=i,s=a,a=a[3]}const Wn={lFrame:jn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function vl(){return Wn.bindingsEnabled}function Wt(){return Wn.lFrame.lView}function Ui(){return Wn.lFrame.tView}function as(){let n=Vl();for(;null!==n&&64===n.type;)n=n.parent;return n}function Vl(){return Wn.lFrame.currentTNode}function xr(n,i){const s=Wn.lFrame;s.currentTNode=n,s.isParent=i}function Ho(){return Wn.lFrame.isParent}function bl(){Wn.lFrame.isParent=!1}function lo(){return Wn.isInCheckNoChangesMode}function Fo(n){Wn.isInCheckNoChangesMode=n}function _s(){const n=Wn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function X(){return Wn.lFrame.bindingIndex++}function K(n,i){const s=Wn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Te(i)}function Te(n){Wn.lFrame.currentDirectiveIndex=n}function Ie(n){const i=Wn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function rt(){return Wn.lFrame.currentQueryIndex}function It(n){Wn.lFrame.currentQueryIndex=n}function _n(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function yn(n,i,s){if(s&Un.SkipSelf){let u=i,f=n;for(;!(u=u.parent,null!==u||s&Un.Host||(u=_n(f),null===u||(f=f[15],10&u.type))););if(null===u)return!1;i=u,n=f}const a=Wn.lFrame=Jn();return a.currentTNode=i,a.lView=n,!0}function fn(n){const i=Jn(),s=n[1];Wn.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function Jn(){const n=Wn.lFrame,i=null===n?null:n.child;return null===i?jn(n):i}function jn(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function gi(){const n=Wn.lFrame;return Wn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Zi=gi;function Hr(){const n=gi();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ue(){return Wn.lFrame.selectedIndex}function L(n){Wn.lFrame.selectedIndex=n}function I(){const n=Wn.lFrame;return ni(n.tView,n.selectedIndex)}function E(){Wn.lFrame.currentNamespace="svg"}function it(){!function sn(){Wn.lFrame.currentNamespace=null}()}function Cr(n,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const f=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:$,ngOnDestroy:Q}=f;_&&(n.contentHooks||(n.contentHooks=[])).push(-s,_),C&&((n.contentHooks||(n.contentHooks=[])).push(s,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,C)),P&&(n.viewHooks||(n.viewHooks=[])).push(-s,P),$&&((n.viewHooks||(n.viewHooks=[])).push(s,$),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,$)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Q)}}function Qr(n,i,s){On(n,i,3,s)}function Qi(n,i,s,a){(3&n[2])===s&&On(n,i,s,a)}function mn(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function On(n,i,s,a){const f=null!=a?a:-1,_=i.length-1;let C=0;for(let P=void 0!==a?65535&n[18]:0;P<_;P++)if("number"==typeof i[P+1]){if(C=i[P],null!=a&&C>=a)break}else i[P]<0&&(n[18]+=65536),(C<f||-1==f)&&(ii(n,s,i,P),n[18]=(4294901760&n[18])+P+2),P++}function ii(n,i,s,a){const u=s[a]<0,f=s[a+1],C=n[u?-s[a]:s[a]];if(u){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class wr{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Ys(n,i,s){const a=Ir(n);let u=0;for(;u<s.length;){const f=s[u];if("number"==typeof f){if(0!==f)break;u++;const _=s[u++],C=s[u++],P=s[u++];a?n.setAttribute(i,C,P,_):i.setAttributeNS(_,C,P)}else{const _=f,C=s[++u];Uo(_)?a&&n.setProperty(i,_,C):a?n.setAttribute(i,_,C):i.setAttribute(_,C),u++}}return u}function Ls(n){return 3===n||4===n||6===n}function Uo(n){return 64===n.charCodeAt(0)}function wl(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const u=i[a];"number"==typeof u?s=u:0===s||qo(n,s,u,null,-1===s||2===s?i[++a]:null)}}return n}function qo(n,i,s,a,u){let f=0,_=n.length;if(-1===i)_=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===i){_=-1;break}if(C>i){_=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==u&&(n[f+1]=u));if(a===n[f+1])return void(n[f+2]=u)}f++,null!==a&&f++,null!==u&&f++}-1!==_&&(n.splice(_,0,i),f=_+1),n.splice(f++,0,s),null!==a&&n.splice(f++,0,a),null!==u&&n.splice(f++,0,u)}function da(n){return-1!==n}function Fn(n){return 32767&n}function io(n,i){let s=function El(n){return n>>16}(n),a=i;for(;s>0;)a=a[15],s--;return a}let iu=!0;function fc(n){const i=iu;return iu=n,i}let td=0;function Do(n,i){const s=ru(n,i);if(-1!==s)return s;const a=i[1];a.firstCreatePass&&(n.injectorIndex=i.length,Hl(a.data,n),Hl(i,null),Hl(a.blueprint,null));const u=Sl(n,i),f=n.injectorIndex;if(da(u)){const _=Fn(u),C=io(u,i),P=C[1].data;for(let $=0;$<8;$++)i[f+$]=C[_+$]|P[_+$]}return i[f+8]=u,f}function Hl(n,i){n.push(0,0,0,0,0,0,0,0,i)}function ru(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Sl(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,u=i;for(;null!==u;){const f=u[1],_=f.type;if(a=2===_?f.declTNode:1===_?u[6]:null,null===a)return-1;if(s++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ha(n,i,s){!function nd(n,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(st)&&(a=s[st]),null==a&&(a=s[st]=td++);const u=255&a;i.data[n+(u>>5)]|=1<<u}(n,i,s)}function T(n,i,s){if(s&Un.Optional)return n;Ee(i,"NodeInjector")}function w(n,i,s,a){if(s&Un.Optional&&void 0===a&&(a=null),0==(s&(Un.Self|Un.Host))){const u=n[9],f=$r(void 0);try{return u?u.get(i,a,s&Un.Optional):Lr(i,a,s&Un.Optional)}finally{$r(f)}}return T(a,i,s)}function y(n,i,s,a=Un.Default,u){if(null!==n){const f=function Ct(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(st)?n[st]:void 0;return"number"==typeof i?i>=0?255&i:G:i}(s);if("function"==typeof f){if(!yn(i,n,a))return a&Un.Host?T(u,s,a):w(i,s,a,u);try{const _=f(a);if(null!=_||a&Un.Optional)return _;Ee(s)}finally{Zi()}}else if("number"==typeof f){let _=null,C=ru(n,i),P=-1,$=a&Un.Host?i[16][6]:null;for((-1===C||a&Un.SkipSelf)&&(P=-1===C?Sl(n,i):i[C+8],-1!==P&&Kn(a,!1)?(_=i[1],C=Fn(P),i=io(P,i)):C=-1);-1!==C;){const Q=i[1];if(Jt(f,C,Q.data)){const _e=se(C,i,s,_,a,$);if(_e!==k)return _e}P=i[C+8],-1!==P&&Kn(a,i[1].data[C+8]===$)&&Jt(f,C,i)?(_=Q,C=Fn(P),i=io(P,i)):C=-1}}}return w(i,s,a,u)}const k={};function G(){return new vn(as(),Wt())}function se(n,i,s,a,u,f){const _=i[1],C=_.data[n+8],Q=be(C,_,s,null==a?fo(C)&&iu:a!=_&&0!=(3&C.type),u&Un.Host&&f===C);return null!==Q?Le(i,_,Q,C):k}function be(n,i,s,a,u){const f=n.providerIndexes,_=i.data,C=1048575&f,P=n.directiveStart,Q=f>>20,ze=u?C+Q:n.directiveEnd;for(let ot=a?C:C+Q;ot<ze;ot++){const Bt=_[ot];if(ot<P&&s===Bt||ot>=P&&Bt.type===s)return ot}if(u){const ot=_[P];if(ot&&Zr(ot)&&ot.type===s)return P}return null}function Le(n,i,s,a){let u=n[s];const f=i.data;if(function co(n){return n instanceof wr}(u)){const _=u;_.resolving&&function Mt(n,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${s}`)}(Ne(f[s]));const C=fc(_.canSeeViewProviders);_.resolving=!0;const P=_.injectImpl?$r(_.injectImpl):null;yn(n,a,Un.Default);try{u=n[s]=_.factory(void 0,f,n,a),i.firstCreatePass&&s>=a.directiveStart&&function or(n,i,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:f}=i.type.prototype;if(a){const _=ra(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,u),f&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,f),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,f))}(s,f[s],i)}finally{null!==P&&$r(P),fc(C),_.resolving=!1,Zi()}}return u}function Jt(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function Kn(n,i){return!(n&Un.Self||n&Un.Host&&i)}class vn{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return y(this._tNode,this._lView,i,a,s)}}function fr(n){return ki(()=>{const i=n.prototype.constructor,s=i[si]||Vi(i),a=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==a;){const f=u[si]||Vi(u);if(f&&f!==s)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function Vi(n){return Y(n)?()=>{const i=Vi(S(n));return i&&i()}:Oo(n)}function qs(n){return function Ra(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const f=s[u];if(Ls(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(f===i)return s[u+1];u+=2}}}return null}(as(),n)}const fa="__parameters__";function cs(n,i,s){return ki(()=>{const a=function Ul(n){return function(...s){if(n){const a=n(...s);for(const u in a)this[u]=a[u]}}}(i);function u(...f){if(this instanceof u)return a.apply(this,f),this;const _=new u(...f);return C.annotation=_,C;function C(P,$,Q){const _e=P.hasOwnProperty(fa)?P[fa]:Object.defineProperty(P,fa,{value:[]})[fa];for(;_e.length<=Q;)_e.push(null);return(_e[Q]=_e[Q]||[]).push(_),P}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}class Fr{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=_i({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ns=new Fr("AnalyzeForEntryComponents");function ys(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(i===n&&(i=n.slice(0,s)),ys(a,i)):i!==n&&i.push(a)}return i}function Xo(n,i){n.forEach(s=>Array.isArray(s)?Xo(s,i):i(s))}function zl(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function go(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Ka(n,i){const s=[];for(let a=0;a<n;a++)s.push(i);return s}function Bs(n,i,s){let a=Cl(n,i);return a>=0?n[1|a]=s:(a=~a,function wp(n,i,s,a){let u=n.length;if(u==i)n.push(s,a);else if(1===u)n.push(a,n[0]),n[0]=s;else{for(u--,n.push(n[u-1],n[u]);u>i;)n[u]=n[u-2],u--;n[i]=s,n[i+1]=a}}(n,a,i,s)),a}function Pa(n,i){const s=Cl(n,i);if(s>=0)return n[1|s]}function Cl(n,i){return function id(n,i,s){let a=0,u=n.length>>s;for(;u!==a;){const f=a+(u-a>>1),_=n[f<<s];if(i===_)return f<<s;_>i?u=f:a=f+1}return~(u<<s)}(n,i,1)}const lu={},mc="__NG_DI_FLAG__",ma="ngTempTokenPath",_o=/\n/gm,Sp="__source",Hg=Oe({provide:String,useValue:Oe});let Ao;function cu(n){const i=Ao;return Ao=n,i}function so(n,i=Un.Default){if(void 0===Ao)throw new de(203,"");return null===Ao?Lr(n,void 0,i):Ao.get(n,i&Un.Optional?null:void 0,i)}function vs(n,i=Un.Default){return(function jr(){return Us}()||so)(S(n),i)}const cd=vs;function jl(n){const i=[];for(let s=0;s<n.length;s++){const a=S(n[s]);if(Array.isArray(a)){if(0===a.length)throw new de(900,"");let u,f=Un.Default;for(let _=0;_<a.length;_++){const C=a[_],P=Ph(C);"number"==typeof P?-1===P?u=C.token:f|=P:u=C}i.push(vs(u,f))}else i.push(vs(a))}return i}function _c(n,i){return n[mc]=i,n.prototype[mc]=i,n}function Ph(n){return n[mc]}const Ko=_c(cs("Inject",n=>({token:n})),-1),Oa=_c(cs("Optional"),8),Dl=_c(cs("SkipSelf"),4);let dd;function vc(n){var i;return(null===(i=function Oh(){if(void 0===dd&&(dd=null,Yn.trustedTypes))try{dd=Yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return dd}())||void 0===i?void 0:i.createHTML(n))||n}class Yl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Jg extends Yl{getTypeName(){return"HTML"}}class Qg extends Yl{getTypeName(){return"Style"}}class e_ extends Yl{getTypeName(){return"Script"}}class t_ extends Yl{getTypeName(){return"URL"}}class n_ extends Yl{getTypeName(){return"ResourceURL"}}function Ja(n){return n instanceof Yl?n.changingThisBreaksApplicationSecurity:n}function bc(n,i){const s=Op(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Op(n){return n instanceof Yl&&n.getTypeName()||null}function i_(n){return new Jg(n)}function r_(n){return new Qg(n)}function s_(n){return new e_(n)}function o_(n){return new t_(n)}function a_(n){return new n_(n)}class l_{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(vc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class c_{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=vc(i),s;const a=this.inertDocument.createElement("body");return a.innerHTML=vc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(i){const s=i.attributes;for(let u=s.length-1;0<u;u--){const _=s.item(u).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&i.removeAttribute(_)}let a=i.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const d_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,h_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function hu(n){return(n=String(n)).match(d_)||n.match(h_)?n:"unsafe:"+n}function La(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function fu(...n){const i={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(i[a]=!0);return i}const Np=La("area,br,col,hr,img,wbr"),kp=La("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Bp=La("rp,rt"),Fh=fu(Np,fu(kp,La("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fu(Bp,La("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fu(Bp,kp)),Nh=La("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kh=La("srcset"),Vp=fu(Nh,kh,La("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),La("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),f_=La("script,style,template");class p_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let u=this.checkClobberedElement(s,s.nextSibling);if(u){s=u;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!Fh.hasOwnProperty(s))return this.sanitizedSomething=!0,!f_.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=i.attributes;for(let u=0;u<a.length;u++){const f=a.item(u),_=f.name,C=_.toLowerCase();if(!Vp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let P=f.value;Nh[C]&&(P=hu(P)),kh[C]&&(n=P,P=(n=String(n)).split(",").map(i=>hu(i.trim())).join(", ")),this.buf.push(" ",_,'="',Hp(P),'"')}var n;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();Fh.hasOwnProperty(s)&&!Np.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Hp(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const m_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g_=/([^\#-~ |!])/g;function Hp(n){return n.replace(/&/g,"&amp;").replace(m_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(g_,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fd;function Up(n,i){let s=null;try{fd=fd||function Lp(n){const i=new c_(n);return function u_(){try{return!!(new window.DOMParser).parseFromString(vc(""),"text/html")}catch(n){return!1}}()?new l_(i):i}(n);let a=i?String(i):"";s=fd.getInertBodyElement(a);let u=5,f=a;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,a=f,f=s.innerHTML,s=fd.getInertBodyElement(a)}while(a!==f);return vc((new p_).sanitizeChildren(Bh(s)||s))}finally{if(s){const a=Bh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Bh(n){return"content"in n&&function __(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ts=(()=>((Ts=Ts||{})[Ts.NONE=0]="NONE",Ts[Ts.HTML=1]="HTML",Ts[Ts.STYLE=2]="STYLE",Ts[Ts.SCRIPT=3]="SCRIPT",Ts[Ts.URL=4]="URL",Ts[Ts.RESOURCE_URL=5]="RESOURCE_URL",Ts))();function Vh(n){const i=function pu(){const n=Wt();return n&&n[12]}();return i?i.sanitize(Ts.URL,n)||"":bc(n,"URL")?Ja(n):hu(ve(n))}const Wp="__ngContext__";function yo(n,i){n[Wp]=i}function Uh(n){const i=function mu(n){return n[Wp]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function qp(n){return n.ngOriginalError}function b0(n,...i){n.error(...i)}class Gh{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),a=function v0(n){return n&&n.ngErrorLogger||b0}(i);a(this._console,"ERROR",i),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&qp(i);for(;s&&qp(s);)s=qp(s);return s||null}}const R0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yn))();function Qa(n){return n instanceof Function?n():n}var el=(()=>((el=el||{})[el.Important=1]="Important",el[el.DashCase=2]="DashCase",el))();function Kp(n,i){return undefined(n,i)}function pd(n){const i=n[3];return mr(i)?i[3]:i}function Yi(n){return ga(n[13])}function wn(n){return ga(n[4])}function ga(n){for(;null!==n&&!mr(n);)n=n[4];return n}function xc(n,i,s,a,u){if(null!=a){let f,_=!1;mr(a)?f=a:vr(a)&&(_=!0,a=a[0]);const C=V(a);0===n&&null!==s?null==u?qh(i,s,C):Kl(i,s,C,u||null,!0):1===n&&null!==s?Kl(i,s,C,u||null,!0):2===n?function Jh(n,i,s){const a=yd(n,i);a&&function Kh(n,i,s,a){Ir(n)?n.removeChild(i,s,a):i.removeChild(s)}(n,a,i,s)}(i,C,_):3===n&&i.destroyNode(C),null!=f&&function am(n,i,s,a,u){const f=s[7];f!==V(s)&&xc(i,n,a,f,u);for(let C=10;C<s.length;C++){const P=s[C];Mc(P[1],P,n,i,a,f)}}(i,n,f,s,u)}}function jh(n,i,s){if(Ir(n))return n.createElement(i,s);{const a=null!==s?function Vo(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(i):n.createElementNS(a,i)}}function gd(n,i){const s=n[9],a=s.indexOf(i),u=i[3];1024&i[2]&&(i[2]&=-1025,Ss(u,-1)),s.splice(a,1)}function tl(n,i){if(n.length<=10)return;const s=10+i,a=n[s];if(a){const u=a[17];null!==u&&u!==n&&gd(u,a),i>0&&(n[s-1][4]=a[4]);const f=go(n,10+i);!function md(n,i){Mc(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(a[1],a);const _=f[19];null!==_&&_.detachView(f[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Xl(n,i){if(!(256&i[2])){const s=i[11];Ir(s)&&s.destroyNode&&Mc(n,i,s,3,null,null),function ql(n){let i=n[13];if(!i)return _d(n[1],n);for(;i;){let s=null;if(vr(i))s=i[13];else{const a=i[10];a&&(s=a)}if(!s){for(;i&&!i[4]&&i!==n;)vr(i)&&_d(i[1],i),i=i[3];null===i&&(i=n),vr(i)&&_d(i[1],i),s=i&&i[4]}i=s}}(i)}}function _d(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function V_(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const u=i[s[a]];if(!(u instanceof wr)){const f=s[a+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const C=u[f[_]],P=f[_+1];try{P.call(C)}finally{}}else try{f.call(u)}finally{}}}}(n,i),function em(n,i){const s=n.cleanup,a=i[7];let u=-1;if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const _=s[f+1],C="function"==typeof _?_(i):V(i[_]),P=a[u=s[f+2]],$=s[f+3];"boolean"==typeof $?C.removeEventListener(s[f],P,$):$>=0?a[u=$]():a[u=-$].unsubscribe(),f+=2}else{const _=a[u=s[f+1]];s[f].call(_)}if(null!==a){for(let f=u+1;f<a.length;f++)a[f]();i[7]=null}}(n,i),1===i[1].type&&Ir(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&mr(i[3])){s!==i[3]&&gd(s,i);const a=i[19];null!==a&&a.detachView(n)}}}function Yh(n,i,s){return function _u(n,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[0];if(2&a.flags){const u=n.data[a.directiveStart].encapsulation;if(u===mi.None||u===mi.Emulated)return null}return Pt(a,s)}(n,i.parent,s)}function Kl(n,i,s,a,u){Ir(n)?n.insertBefore(i,s,a,u):i.insertBefore(s,a,u)}function qh(n,i,s){Ir(n)?n.appendChild(i,s):i.appendChild(s)}function Xh(n,i,s,a,u){null!==a?Kl(n,i,s,a,u):qh(n,i,s)}function yd(n,i){return Ir(n)?n.parentNode(i):i.parentNode}function tm(n,i,s){return im(n,i,s)}let im=function nm(n,i,s){return 40&n.type?Pt(n,s):null};function Ec(n,i,s,a){const u=Yh(n,a,i),f=i[11],C=tm(a.parent||i[6],a,i);if(null!=u)if(Array.isArray(s))for(let P=0;P<s.length;P++)Xh(f,u,s[P],C,!1);else Xh(f,u,s,C,!1)}function vd(n,i){if(null!==i){const s=i.type;if(3&s)return Pt(i,n);if(4&s)return bd(-1,n[i.index]);if(8&s){const a=i.child;if(null!==a)return vd(n,a);{const u=n[i.index];return mr(u)?bd(-1,u):V(u)}}if(32&s)return Kp(i,n)()||V(n[i.index]);{const a=sm(n,i);return null!==a?Array.isArray(a)?a[0]:vd(pd(n[16]),a):vd(n,i.next)}}return null}function sm(n,i){return null!==i?n[16][6].projection[i.projection]:null}function bd(n,i){const s=10+n+1;if(s<i.length){const a=i[s],u=a[1].firstChild;if(null!==u)return vd(a,u)}return i[7]}function xd(n,i,s,a,u,f,_){for(;null!=s;){const C=a[s.index],P=s.type;if(_&&0===i&&(C&&yo(V(C),a),s.flags|=4),64!=(64&s.flags))if(8&P)xd(n,i,s.child,a,u,f,!1),xc(i,n,u,C,f);else if(32&P){const $=Kp(s,a);let Q;for(;Q=$();)xc(i,n,u,Q,f);xc(i,n,u,C,f)}else 16&P?Qh(n,i,a,s,u,f):xc(i,n,u,C,f);s=_?s.projectionNext:s.next}}function Mc(n,i,s,a,u,f){xd(s,a,n.firstChild,i,u,f,!1)}function Qh(n,i,s,a,u,f){const _=s[16],P=_[6].projection[a.projection];if(Array.isArray(P))for(let $=0;$<P.length;$++)xc(i,n,u,P[$],f);else xd(n,i,P,_[3],u,f,!0)}function ef(n,i,s){Ir(n)?n.setAttribute(i,"style",s):i.style.cssText=s}function Al(n,i,s){Ir(n)?""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s):i.className=s}function vo(n,i,s){let a=n.length;for(;;){const u=n.indexOf(i,s);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const f=i.length;if(u+f===a||n.charCodeAt(u+f)<=32)return u}s=u+1}}const yu="ng-template";function U_(n,i,s){let a=0;for(;a<n.length;){let u=n[a++];if(s&&"class"===u){if(u=n[a],-1!==vo(u.toLowerCase(),i,0))return!0}else if(1===u){for(;a<n.length&&"string"==typeof(u=n[a++]);)if(u.toLowerCase()===i)return!0;return!1}}return!1}function cm(n){return 4===n.type&&n.value!==yu}function z_(n,i,s){return i===(4!==n.type||s?n.value:yu)}function G_(n,i,s){let a=4;const u=n.attrs||[],f=function $_(n){for(let i=0;i<n.length;i++)if(Ls(n[i]))return i;return n.length}(u);let _=!1;for(let C=0;C<i.length;C++){const P=i[C];if("number"!=typeof P){if(!_)if(4&a){if(a=2|1&a,""!==P&&!z_(n,P,s)||""===P&&1===i.length){if(_a(a))return!1;_=!0}}else{const $=8&a?P:i[++C];if(8&a&&null!==n.attrs){if(!U_(n.attrs,$,s)){if(_a(a))return!1;_=!0}continue}const _e=W_(8&a?"class":P,u,cm(n),s);if(-1===_e){if(_a(a))return!1;_=!0;continue}if(""!==$){let ze;ze=_e>f?"":u[_e+1].toLowerCase();const ot=8&a?ze:null;if(ot&&-1!==vo(ot,$,0)||2&a&&$!==ze){if(_a(a))return!1;_=!0}}}}else{if(!_&&!_a(a)&&!_a(P))return!1;if(_&&_a(P))continue;_=!1,a=P|1&a}}return _a(a)||_}function _a(n){return 0==(1&n)}function W_(n,i,s,a){if(null===i)return-1;let u=0;if(a||!s){let f=!1;for(;u<i.length;){const _=i[u];if(_===n)return u;if(3===_||6===_)f=!0;else{if(1===_||2===_){let C=i[++u];for(;"string"==typeof C;)C=i[++u];continue}if(4===_)break;if(0===_){u+=4;continue}}u+=f?1:2}return-1}return function Y_(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,n)}function um(n,i,s=!1){for(let a=0;a<i.length;a++)if(G_(n,i[a],s))return!0;return!1}function q_(n,i){e:for(let s=0;s<i.length;s++){const a=i[s];if(n.length===a.length){for(let u=0;u<n.length;u++)if(n[u]!==a[u])continue e;return!0}}return!1}function dm(n,i){return n?":not("+i.trim()+")":i}function X_(n){let i=n[0],s=1,a=2,u="",f=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&a){const C=n[++s];u+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?u+="."+_:4&a&&(u+=" "+_);else""!==u&&!_a(_)&&(i+=dm(f,u),u=""),a=_,f=f||!_a(a);s++}return""!==u&&(i+=dm(f,u)),i}const Ri={};function hm(n){fm(Ui(),Wt(),ue()+n,lo())}function fm(n,i,s,a){if(!a)if(3==(3&i[2])){const f=n.preOrderCheckHooks;null!==f&&Qr(i,f,s)}else{const f=n.preOrderHooks;null!==f&&Qi(i,f,0,s)}L(s)}function wd(n,i){return n<<17|i<<2}function ya(n){return n>>17&32767}function tf(n){return 2|n}function nl(n){return(131068&n)>>2}function nf(n,i){return-131069&n|i<<2}function rf(n){return 1|n}function wm(n,i){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const u=s[a],f=s[a+1];if(-1!==f){const _=n.data[f];It(u),_.contentQueries(2,i[f],f)}}}function vu(n,i,s,a,u,f,_,C,P,$){const Q=i.blueprint.slice();return Q[0]=u,Q[2]=140|a,ao(Q),Q[3]=Q[15]=n,Q[8]=s,Q[10]=_||n&&n[10],Q[11]=C||n&&n[11],Q[12]=P||n&&n[12]||null,Q[9]=$||n&&n[9]||null,Q[6]=f,Q[16]=2==i.type?n[16]:Q,Q}function Sc(n,i,s,a,u){let f=n.data[i];if(null===f)f=function _f(n,i,s,a,u){const f=Vl(),_=Ho(),P=n.data[i]=function fy(n,i,s,a,u,f){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,s,i,a,u);return null===n.firstChild&&(n.firstChild=P),null!==f&&(_?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P)),P}(n,i,s,a,u),function v(){return Wn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=s,f.value=a,f.attrs=u;const _=function Gt(){const n=Wn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return xr(f,!0),f}function Cc(n,i,s,a){if(0===s)return-1;const u=i.length;for(let f=0;f<s;f++)i.push(a),n.blueprint.push(a),n.data.push(null);return u}function bu(n,i,s){fn(i);try{const a=n.viewQuery;null!==a&&Nd(1,a,s);const u=n.template;null!==u&&yf(n,i,u,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wm(n,i),n.staticViewQueries&&Nd(2,n.viewQuery,s);const f=n.components;null!==f&&function dy(n,i){for(let s=0;s<i.length;s++)Im(n,i[s])}(i,f)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{i[2]&=-5,Hr()}}function Dc(n,i,s,a){const u=i[2];if(256==(256&u))return;fn(i);const f=lo();try{ao(i),function Ws(n){return Wn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&yf(n,i,s,2,a);const _=3==(3&u);if(!f)if(_){const $=n.preOrderCheckHooks;null!==$&&Qr(i,$,null)}else{const $=n.preOrderHooks;null!==$&&Qi(i,$,0,null),mn(i,0)}if(function Ld(n){for(let i=Yi(n);null!==i;i=wn(i)){if(!i[2])continue;const s=i[9];for(let a=0;a<s.length;a++){const u=s[a],f=u[3];0==(1024&u[2])&&Ss(f,1),u[2]|=1024}}}(i),function Su(n){for(let i=Yi(n);null!==i;i=wn(i))for(let s=10;s<i.length;s++){const a=i[s],u=a[1];hr(a)&&Dc(u,a,u.template,a[8])}}(i),null!==n.contentQueries&&wm(n,i),!f)if(_){const $=n.contentCheckHooks;null!==$&&Qr(i,$)}else{const $=n.contentHooks;null!==$&&Qi(i,$,1),mn(i,1)}!function cy(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)L(~u);else{const f=u,_=s[++a],C=s[++a];K(_,f),C(2,i[f])}}}finally{L(-1)}}(n,i);const C=n.components;null!==C&&function uy(n,i){for(let s=0;s<i.length;s++)Rm(n,i[s])}(i,C);const P=n.viewQuery;if(null!==P&&Nd(2,P,a),!f)if(_){const $=n.viewCheckHooks;null!==$&&Qr(i,$)}else{const $=n.viewHooks;null!==$&&Qi(i,$,2),mn(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),f||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Ss(i[3],-1))}finally{Hr()}}function Em(n,i,s,a){const u=i[10],f=!lo(),_=Bi(i);try{f&&!_&&u.begin&&u.begin(),_&&bu(n,i,a),Dc(n,i,s,a)}finally{f&&!_&&u.end&&u.end()}}function yf(n,i,s,a,u){const f=ue(),_=2&a;try{L(-1),_&&i.length>20&&fm(n,i,20,lo()),s(a,u)}finally{L(f)}}function vf(n,i,s){!vl()||(function yy(n,i,s,a){const u=s.directiveStart,f=s.directiveEnd;n.firstCreatePass||Do(s,i),yo(a,i);const _=s.initialInputs;for(let C=u;C<f;C++){const P=n.data[C],$=Zr(P);$&&wu(i,s,P);const Q=Le(i,n,C,s);yo(Q,i),null!==_&&Tc(0,C-u,Q,P,0,_),$&&(Mi(s.index,i)[8]=Q)}}(n,i,s,Pt(s,i)),128==(128&s.flags)&&function Id(n,i,s){const a=s.directiveStart,u=s.directiveEnd,_=s.index,C=function te(){return Wn.lFrame.currentDirectiveIndex}();try{L(_);for(let P=a;P<u;P++){const $=n.data[P],Q=i[P];Te(P),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&xu($,Q)}}finally{L(-1),Te(C)}}(n,i,s))}function bf(n,i,s=Pt){const a=i.localNames;if(null!==a){let u=i.index+1;for(let f=0;f<a.length;f+=2){const _=a[f+1],C=-1===_?s(i,n):n[_];n[u++]=C}}}function Sm(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Dd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Dd(n,i,s,a,u,f,_,C,P,$){const Q=20+a,_e=Q+u,ze=function hy(n,i){const s=[];for(let a=0;a<i;a++)s.push(a<n?null:Ri);return s}(Q,_e),ot="function"==typeof $?$():$;return ze[1]={type:n,blueprint:ze,template:s,queries:null,viewQuery:C,declTNode:i,data:ze.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:P,consts:ot,incompleteFirstPass:!1}}function Td(n,i,s,a){const u=tc(i);null===s?u.push(a):(u.push(s),n.firstCreatePass&&Cf(n).push(a,u.length-1))}function Cm(n,i,s){for(let a in n)if(n.hasOwnProperty(a)){const u=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(i,u):s[a]=[i,u]}return s}function zo(n,i,s,a,u,f,_,C){const P=Pt(i,s);let Q,$=i.inputs;!C&&null!=$&&(Q=$[a])?(nc(n,s,Q,a,u),fo(i)&&function my(n,i){const s=Mi(i,n);16&s[2]||(s[2]|=64)}(s,i.index)):3&i.type&&(a=function py(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),u=null!=_?_(u,i.value||"",a):u,Ir(f)?f.setProperty(P,a,u):Uo(a)||(P.setProperty?P.setProperty(a,u):P[a]=u))}function wf(n,i,s,a){let u=!1;if(vl()){const f=function Pd(n,i,s){const a=n.directiveRegistry;let u=null;if(a)for(let f=0;f<a.length;f++){const _=a[f];um(s,_.selectors,!1)&&(u||(u=[]),ha(Do(s,i),n,_.type),Zr(_)?(Zl(n,s),u.unshift(_)):u.push(_))}return u}(n,i,s),_=null===a?null:{"":-1};if(null!==f){u=!0,Od(s,n.data.length,f.length);for(let Q=0;Q<f.length;Q++){const _e=f[Q];_e.providersResolver&&_e.providersResolver(_e)}let C=!1,P=!1,$=Cc(n,i,f.length,null);for(let Q=0;Q<f.length;Q++){const _e=f[Q];s.mergedAttrs=wl(s.mergedAttrs,_e.hostAttrs),Ql(n,s,i,$,_e),Jl($,_e,_),null!==_e.contentQueries&&(s.flags|=8),(null!==_e.hostBindings||null!==_e.hostAttrs||0!==_e.hostVars)&&(s.flags|=128);const ze=_e.type.prototype;!C&&(ze.ngOnChanges||ze.ngOnInit||ze.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),C=!0),!P&&(ze.ngOnChanges||ze.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),P=!0),$++}!function Dm(n,i){const a=i.directiveEnd,u=n.data,f=i.attrs,_=[];let C=null,P=null;for(let $=i.directiveStart;$<a;$++){const Q=u[$],_e=Q.inputs,ze=null===f||cm(i)?null:Eu(_e,f);_.push(ze),C=Cm(_e,$,C),P=Cm(Q.outputs,$,P)}null!==C&&(C.hasOwnProperty("class")&&(i.flags|=16),C.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=_,i.inputs=C,i.outputs=P}(n,s)}_&&function Io(n,i,s){if(i){const a=n.localNames=[];for(let u=0;u<i.length;u+=2){const f=s[i[u+1]];if(null==f)throw new de(-301,!1);a.push(i[u],f)}}}(s,a,_)}return s.mergedAttrs=wl(s.mergedAttrs,s.attrs),u}function Tm(n,i,s,a,u,f){const _=f.hostBindings;if(_){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const P=~i.index;(function Nr(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(C)!=P&&C.push(P),C.push(a,u,_)}}function xu(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Zl(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Jl(n,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=n;Zr(i)&&(s[""]=n)}}function Od(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function Ql(n,i,s,a,u){n.data[a]=u;const f=u.factory||(u.factory=Oo(u.type)),_=new wr(f,Zr(u),null);n.blueprint[a]=_,s[a]=_,Tm(n,i,0,a,Cc(n,s,u.hostVars,Ri),u)}function wu(n,i,s){const a=Pt(i,n),u=Sm(s),f=n[10],_=ec(n,vu(n,u,null,s.onPush?64:16,a,i,f,f.createRenderer(a,s),null,null));n[i.index]=_}function Po(n,i,s,a,u,f){const _=Pt(n,i);!function Tl(n,i,s,a,u,f,_){if(null==f)Ir(n)?n.removeAttribute(i,u,s):i.removeAttribute(u);else{const C=null==_?ve(f):_(f,a||"",u);Ir(n)?n.setAttribute(i,u,C,s):s?i.setAttributeNS(s,u,C):i.setAttribute(u,C)}}(i[11],_,f,n.value,s,a,u)}function Tc(n,i,s,a,u,f){const _=f[i];if(null!==_){const C=a.setInput;for(let P=0;P<_.length;){const $=_[P++],Q=_[P++],_e=_[P++];null!==C?a.setInput(s,_e,$,Q):s[Q]=_e}}}function Eu(n,i){let s=null,a=0;for(;a<i.length;){const u=i[a];if(0!==u)if(5!==u){if("number"==typeof u)break;n.hasOwnProperty(u)&&(null===s&&(s=[]),s.push(u,n[u],i[a+1])),a+=2}else a+=2;else a+=4}return s}function Mu(n,i,s,a){return new Array(n,!0,!1,i,null,0,a,s,null,null)}function Rm(n,i){const s=Mi(i,n);if(hr(s)){const a=s[1];80&s[2]?Dc(a,s,a.template,s[8]):s[5]>0&&Cu(s)}}function Cu(n){for(let a=Yi(n);null!==a;a=wn(a))for(let u=10;u<a.length;u++){const f=a[u];if(1024&f[2]){const _=f[1];Dc(_,f,_.template,f[8])}else f[5]>0&&Cu(f)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Mi(s[a],n);hr(u)&&u[5]>0&&Cu(u)}}function Im(n,i){const s=Mi(i,n),a=s[1];(function Pm(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(a,s),bu(a,s,s[8])}function ec(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Rc(n){for(;n;){n[2]|=64;const i=pd(n);if(eo(n)&&!i)return n;n=i}return null}function Fd(n,i,s){const a=i[10];a.begin&&a.begin();try{Dc(n,i,n.template,s)}catch(u){throw kd(i,u),u}finally{a.end&&a.end()}}function Mf(n){!function Ef(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],a=Uh(s),u=a[1];Em(u,a,u.template,s)}}(n[8])}function Nd(n,i,s){It(0),i(n,s)}const Sf=(()=>Promise.resolve(null))();function tc(n){return n[7]||(n[7]=[])}function Cf(n){return n.cleanup||(n.cleanup=[])}function Nm(n,i,s){return(null===n||Zr(n))&&(s=function ne(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[i.index])),s[11]}function kd(n,i){const s=n[9],a=s?s.get(Gh,null):null;a&&a.handleError(i)}function nc(n,i,s,a,u){for(let f=0;f<s.length;){const _=s[f++],C=s[f++],P=i[_],$=n.data[_];null!==$.setInput?$.setInput(P,u,a,C):P[C]=u}}function Fa(n,i,s){const a=wt(i,n);!function Zp(n,i,s){Ir(n)?n.setValue(i,s):i.textContent=s}(n[11],a,s)}function Du(n,i,s){let a=s?n.styles:null,u=s?n.classes:null,f=0;if(null!==i)for(let _=0;_<i.length;_++){const C=i[_];"number"==typeof C?f=C:1==f?u=Me(u,C):2==f&&(a=Me(a,C+": "+i[++_]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=u:n.classesWithoutHost=u}const Zs=new Fr("INJECTOR",-1);class Df{get(i,s=lu){if(s===lu){const a=new Error(`NullInjectorError: No provider for ${Ge(i)}!`);throw a.name="NullInjectorError",a}return s}}const Vd=new Fr("Set Injector scope."),Ic={},Af={};let Pc;function Rl(){return void 0===Pc&&(Pc=new Df),Pc}function Tf(n,i=null,s=null,a){const u=Rf(n,i,s,a);return u._resolveInjectorDefTypes(),u}function Rf(n,i=null,s=null,a){return new Il(n,s,i||Rl(),a)}class Il{constructor(i,s,a,u=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];s&&Xo(s,C=>this.processProvider(C,i,s)),Xo([i],C=>this.processInjectorType(C,[],f)),this.records.set(Zs,ol(void 0,this));const _=this.records.get(Vd);this.scope=null!=_?_.value:null,this.source=u||("object"==typeof i?null:Ge(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=lu,a=Un.Default){this.assertNotDestroyed();const u=cu(this),f=$r(void 0);try{if(!(a&Un.SkipSelf)){let C=this.records.get(i);if(void 0===C){const P=function Zo(n){return"function"==typeof n||"object"==typeof n&&n instanceof Fr}(i)&&li(i);C=P&&this.injectableDefInScope(P)?ol(Hd(i),Ic):null,this.records.set(i,C)}if(null!=C)return this.hydrate(i,C)}return(a&Un.Self?Rl():this.parent).get(i,s=a&Un.Optional&&s===lu?null:s)}catch(_){if("NullInjectorError"===_.name){if((_[ma]=_[ma]||[]).unshift(Ge(i)),u)throw _;return function Ug(n,i,s,a){const u=n[ma];throw i[Sp]&&u.unshift(i[Sp]),n.message=function zg(n,i,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let u=Ge(i);if(Array.isArray(i))u=i.map(Ge).join(" -> ");else if("object"==typeof i){let f=[];for(let _ in i)if(i.hasOwnProperty(_)){let C=i[_];f.push(_+":"+("string"==typeof C?JSON.stringify(C):Ge(C)))}u=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${n.replace(_o,"\n  ")}`}("\n"+n.message,u,s,a),n.ngTokenPath=u,n[ma]=null,n}(_,i,"R3InjectorError",this.source)}throw _}finally{$r(f),cu(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((a,u)=>i.push(Ge(u))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processInjectorType(i,s,a){if(!(i=S(i)))return!1;let u=_r(i);const f=null==u&&i.ngModule||void 0,_=void 0===f?i:f,C=-1!==a.indexOf(_);if(void 0!==f&&(u=_r(f)),null==u)return!1;if(null!=u.imports&&!C){let Q;a.push(_);try{Xo(u.imports,_e=>{this.processInjectorType(_e,s,a)&&(void 0===Q&&(Q=[]),Q.push(_e))})}finally{}if(void 0!==Q)for(let _e=0;_e<Q.length;_e++){const{ngModule:ze,providers:ot}=Q[_e];Xo(ot,Bt=>this.processProvider(Bt,ze,ot||at))}}this.injectorDefTypes.add(_);const P=Oo(_)||(()=>new _);this.records.set(_,ol(P,Ic));const $=u.providers;if(null!=$&&!C){const Q=i;Xo($,_e=>this.processProvider(_e,Q,$))}return void 0!==f&&void 0!==i.providers}processProvider(i,s,a){let u=Oc(i=S(i))?i:S(i&&i.provide);const f=function km(n,i,s){return Tu(n)?ol(void 0,n.useValue):ol(zd(n),Ic)}(i);if(Oc(i)||!0!==i.multi)this.records.get(u);else{let _=this.records.get(u);_||(_=ol(void 0,Ic,!0),_.factory=()=>jl(_.multi),this.records.set(u,_)),u=i,_.multi.push(i)}this.records.set(u,f)}hydrate(i,s){return s.value===Ic&&(s.value=Af,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ey(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=S(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Hd(n){const i=li(n),s=null!==i?i.factory:Oo(n);if(null!==s)return s;if(n instanceof Fr)throw new de(204,!1);if(n instanceof Function)return function Ud(n){const i=n.length;if(i>0)throw Ka(i,"?"),new de(204,!1);const s=function ms(n){const i=n&&(n[Ni]||n[ns]);if(i){const s=function Tr(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new de(204,!1)}function zd(n,i,s){let a;if(Oc(n)){const u=S(n);return Oo(u)||Hd(u)}if(Tu(n))a=()=>S(n.useValue);else if(function Bm(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...jl(n.deps||[]));else if(function If(n){return!(!n||!n.useExisting)}(n))a=()=>vs(S(n.useExisting));else{const u=S(n&&(n.useClass||n.provide));if(!function Vm(n){return!!n.deps}(n))return Oo(u)||Hd(u);a=()=>new u(...jl(n.deps))}return a}function ol(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function Tu(n){return null!==n&&"object"==typeof n&&Hg in n}function Oc(n){return"function"==typeof n}let No=(()=>{class n{static create(s,a){var u;if(Array.isArray(s))return Tf({name:""},a,s,"");{const f=null!==(u=s.name)&&void 0!==u?u:"";return Tf({name:f},s.parent,s.providers,f)}}}return n.THROW_IF_NOT_FOUND=lu,n.NULL=new Df,n.\u0275prov=_i({token:n,providedIn:"any",factory:()=>vs(Zs)}),n.__NG_ELEMENT_ID__=-1,n})();function Pu(n,i){Cr(Uh(n)[1],as())}function al(n){let i=function Ou(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;i;){let u;if(Zr(n))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new de(903,"");u=i.\u0275dir}if(u){if(s){a.push(u);const _=n;_.inputs=Na(n.inputs),_.declaredInputs=Na(n.declaredInputs),_.outputs=Na(n.outputs);const C=u.hostBindings;C&&Zd(n,C);const P=u.viewQuery,$=u.contentQueries;if(P&&Xd(n,P),$&&Kd(n,$),Pe(n.inputs,u.inputs),Pe(n.declaredInputs,u.declaredInputs),Pe(n.outputs,u.outputs),Zr(u)&&u.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let _=0;_<f.length;_++){const C=f[_];C&&C.ngInherit&&C(n),C===al&&(s=!1)}}i=Object.getPrototypeOf(i)}!function qd(n){let i=0,s=null;for(let a=n.length-1;a>=0;a--){const u=n[a];u.hostVars=i+=u.hostVars,u.hostAttrs=wl(u.hostAttrs,s=wl(s,u.hostAttrs))}}(a)}function Na(n){return n===fs?{}:n===at?[]:n}function Xd(n,i){const s=n.viewQuery;n.viewQuery=s?(a,u)=>{i(a,u),s(a,u)}:i}function Kd(n,i){const s=n.contentQueries;n.contentQueries=s?(a,u,f)=>{i(a,u,f),s(a,u,f)}:i}function Zd(n,i){const s=n.hostBindings;n.hostBindings=s?(a,u)=>{i(a,u),s(a,u)}:i}let Jo=null;function Nc(){if(!Jo){const n=Yn.Symbol;if(n&&n.iterator)Jo=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const a=i[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Jo=a)}}}return Jo}function Qo(n){return!!kf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Nc()in n)}function kf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ka(n,i,s){return n[i]=s}function bo(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function Bf(n,i,s,a){const u=Wt();return bo(u,X(),i)&&(Ui(),Po(I(),u,n,i,s,a)),Bf}function Bc(n,i,s,a){return bo(n,X(),s)?i+ve(s)+a:Ri}function Ba(n,i,s,a,u,f,_,C){const P=Wt(),$=Ui(),Q=n+20,_e=$.firstCreatePass?function Ay(n,i,s,a,u,f,_,C,P){const $=i.consts,Q=Sc(i,n,4,_||null,Sr($,C));wf(i,s,Q,Sr($,P)),Cr(i,Q);const _e=Q.tViews=Dd(2,Q,a,u,f,i.directiveRegistry,i.pipeRegistry,null,i.schemas,$);return null!==i.queries&&(i.queries.template(i,Q),_e.queries=i.queries.embeddedTView(Q)),Q}(Q,$,P,i,s,a,u,f,_):$.data[Q];xr(_e,!1);const ze=P[11].createComment("");Ec($,P,ze,_e),yo(ze,P),ec(P,P[Q]=Mu(ze,P,ze,_e)),zs(_e)&&vf($,P,_e),null!=_&&bf(P,_e,C)}function Uf(n){return Ei(function no(){return Wn.lFrame.contextLView}(),20+n)}function ju(n,i=Un.Default){const s=Wt();return null===s?vs(n,i):y(as(),s,S(n),i)}function lc(){throw new Error("invalid")}function $u(n,i,s){const a=Wt();return bo(a,X(),i)&&zo(Ui(),I(),a,n,i,a[11],s,!1),$u}function jf(n,i,s,a,u){const _=u?"class":"style";nc(n,s,i.inputs[_],_,a)}function ta(n,i,s,a){const u=Wt(),f=Ui(),_=20+n,C=u[11],P=u[_]=jh(C,i,function Li(){return Wn.lFrame.currentNamespace}()),$=f.firstCreatePass?function cl(n,i,s,a,u,f,_){const C=i.consts,$=Sc(i,n,2,u,Sr(C,f));return wf(i,s,$,Sr(C,_)),null!==$.attrs&&Du($,$.attrs,!1),null!==$.mergedAttrs&&Du($,$.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,$),$}(_,f,u,0,i,s,a):f.data[_];xr($,!0);const Q=$.mergedAttrs;null!==Q&&Ys(C,P,Q);const _e=$.classes;null!==_e&&Al(C,P,_e);const ze=$.styles;return null!==ze&&ef(C,P,ze),64!=(64&$.flags)&&Ec(f,u,P,$),0===function aa(){return Wn.lFrame.elementDepthCount}()&&yo(P,u),function $o(){Wn.lFrame.elementDepthCount++}(),zs($)&&(vf(f,u,$),function Mm(n,i,s){if(Qs(i)){const u=i.directiveEnd;for(let f=i.directiveStart;f<u;f++){const _=n.data[f];_.contentQueries&&_.contentQueries(1,s[f],f)}}}(f,$,u)),null!==a&&bf(u,$),ta}function na(){let n=as();Ho()?bl():(n=n.parent,xr(n,!1));const i=n;!function la(){Wn.lFrame.elementDepthCount--}();const s=Ui();return s.firstCreatePass&&(Cr(s,n),Qs(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function xl(n){return 0!=(16&n.flags)}(i)&&jf(s,i,Wt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ua(n){return 0!=(32&n.flags)}(i)&&jf(s,i,Wt(),i.stylesWithoutHost,!1),na}function sg(n,i,s,a){return ta(n,i,s,a),na(),sg}function oh(n){return!!n&&"function"==typeof n.then}function qf(n){return!!n&&"function"==typeof n.subscribe}const Xf=qf;function ah(n,i,s,a){const u=Wt(),f=Ui(),_=as();return Kf(f,u,u[11],_,n,i,!!s,a),ah}function Yu(n,i){const s=as(),a=Wt(),u=Ui();return Kf(u,a,Nm(Ie(u.data),s,a),s,n,i,!1),Yu}function Kf(n,i,s,a,u,f,_,C){const P=zs(a),Q=n.firstCreatePass&&Cf(n),_e=i[8],ze=tc(i);let ot=!0;if(3&a.type||C){const xn=Pt(a,i),Vn=C?C(xn):xn,qt=ze.length,ui=C?ar=>C(V(ar[a.index])):a.index;if(Ir(s)){let ar=null;if(!C&&P&&(ar=function ag(n,i,s,a){const u=n.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const _=u[f];if(_===s&&u[f+1]===a){const C=i[7],P=u[f+2];return C.length>P?C[P]:null}"string"==typeof _&&(f+=2)}return null}(n,i,u,a.index)),null!==ar)(ar.__ngLastListenerFn__||ar).__ngNextListenerFn__=f,ar.__ngLastListenerFn__=f,ot=!1;else{f=cc(a,i,_e,f,!1);const Gr=s.listen(Vn,u,f);ze.push(f,Gr),Q&&Q.push(u,ui,qt,qt+1)}}else f=cc(a,i,_e,f,!0),Vn.addEventListener(u,f,_),ze.push(f),Q&&Q.push(u,ui,qt,_)}else f=cc(a,i,_e,f,!1);const Bt=a.outputs;let ln;if(ot&&null!==Bt&&(ln=Bt[u])){const xn=ln.length;if(xn)for(let Vn=0;Vn<xn;Vn+=2){const Ca=i[ln[Vn]][ln[Vn+1]].subscribe(f),ed=ze.length;ze.push(f,Ca),Q&&Q.push(u,a.index,ed,-(ed+1))}}}function Zf(n,i,s,a){try{return!1!==s(a)}catch(u){return kd(n,u),!1}}function cc(n,i,s,a,u){return function f(_){if(_===Function)return a;const C=2&n.flags?Mi(n.index,i):i;0==(32&i[2])&&Rc(C);let P=Zf(i,0,a,_),$=f.__ngNextListenerFn__;for(;$;)P=Zf(i,0,$,_)&&P,$=$.__ngNextListenerFn__;return u&&!1===P&&(_.preventDefault(),_.returnValue=!1),P}}function lh(n=1){return function ps(n){return(Wn.lFrame.contextLView=function Ji(n,i){for(;n>0;)i=i[15],n--;return i}(n,Wn.lFrame.contextLView))[8]}(n)}function lg(n,i){let s=null;const a=function j_(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(n);for(let u=0;u<i.length;u++){const f=i[u];if("*"!==f){if(null===a?um(n,f,!0):q_(a,f))return u}else s=u}return s}function ch(n){const i=Wt()[16][6];if(!i.projection){const a=i.projection=Ka(n?n.length:1,null),u=a.slice();let f=i.child;for(;null!==f;){const _=n?lg(f,n):0;null!==_&&(u[_]?u[_].projectionNext=f:a[_]=f,u[_]=f),f=f.next}}}function Jf(n,i=0,s){const a=Wt(),u=Ui(),f=Sc(u,20+n,16,null,s||null);null===f.projection&&(f.projection=i),bl(),64!=(64&f.flags)&&function om(n,i,s){Qh(i[11],0,i,s,Yh(n,s,i),tm(s.parent||i[6],s,i))}(u,a,f)}function uh(n,i,s){return dh(n,"",i,"",s),uh}function dh(n,i,s,a,u){const f=Wt(),_=Bc(f,i,s,a);return _!==Ri&&zo(Ui(),I(),f,n,_,f[11],u,!1),dh}function fg(n,i,s,a,u){const f=n[s+1],_=null===i;let C=a?ya(f):nl(f),P=!1;for(;0!==C&&(!1===P||_);){const Q=n[C+1];fh(n[C],i)&&(P=!0,n[C+1]=a?rf(Q):tf(Q)),C=a?ya(Q):nl(Q)}P&&(n[s+1]=a?tf(f):rf(f))}function fh(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Cl(n,i)>=0}function rp(n,i,s){return xa(n,i,s,!1),rp}function ul(n,i){return xa(n,i,null,!0),ul}function xa(n,i,s,a){const u=Wt(),f=Ui(),_=function g(n){const i=Wn.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}(2);f.firstUpdatePass&&function _g(n,i,s,a){const u=n.data;if(null===u[s+1]){const f=u[ue()],_=function ph(n,i){return i>=n.expandoStartIndex}(n,s);(function gh(n,i){return 0!=(n.flags&(i?16:32))})(f,a)&&null===i&&!_&&(i=!1),i=function sp(n,i,s,a){const u=Ie(n);let f=a?i.residualClasses:i.residualStyles;if(null===u)0===(a?i.classBindings:i.styleBindings)&&(s=Xu(s=op(null,n,i,s,a),i.attrs,a),f=null);else{const _=i.directiveStylingLast;if(-1===_||n[_]!==u)if(s=op(u,n,i,s,a),null===f){let P=function Wy(n,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==nl(a))return n[ya(a)]}(n,i,a);void 0!==P&&Array.isArray(P)&&(P=op(null,n,i,P[1],a),P=Xu(P,i.attrs,a),function jy(n,i,s,a){n[ya(s?i.classBindings:i.styleBindings)]=a}(n,i,a,P))}else f=function $y(n,i,s){let a;const u=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<u;f++)a=Xu(a,n[f].hostAttrs,s);return Xu(a,i.attrs,s)}(n,i,a)}return void 0!==f&&(a?i.residualClasses=f:i.residualStyles=f),s}(u,f,i,a),function dg(n,i,s,a,u,f){let _=f?i.classBindings:i.styleBindings,C=ya(_),P=nl(_);n[a]=s;let Q,$=!1;if(Array.isArray(s)){const _e=s;Q=_e[1],(null===Q||Cl(_e,Q)>0)&&($=!0)}else Q=s;if(u)if(0!==P){const ze=ya(n[C+1]);n[a+1]=wd(ze,C),0!==ze&&(n[ze+1]=nf(n[ze+1],a)),n[C+1]=function J_(n,i){return 131071&n|i<<17}(n[C+1],a)}else n[a+1]=wd(C,0),0!==C&&(n[C+1]=nf(n[C+1],a)),C=a;else n[a+1]=wd(P,0),0===C?C=a:n[P+1]=nf(n[P+1],a),P=a;$&&(n[a+1]=tf(n[a+1])),fg(n,Q,a,!0),fg(n,Q,a,!1),function hg(n,i,s,a,u){const f=u?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof i&&Cl(f,i)>=0&&(s[a+1]=rf(s[a+1]))}(i,Q,n,a,f),_=wd(C,P),f?i.classBindings=_:i.styleBindings=_}(u,f,i,s,_,a)}}(f,n,_,a),i!==Ri&&bo(u,_,i)&&function ts(n,i,s,a,u,f,_,C){if(!(3&i.type))return;const P=n.data,$=P[C+1];mh(function gm(n){return 1==(1&n)}($)?vg(P,i,s,u,nl($),_):void 0)||(mh(f)||function mm(n){return 2==(2&n)}($)&&(f=vg(P,null,s,u,C,_)),function lm(n,i,s,a,u){const f=Ir(n);if(i)u?f?n.addClass(s,a):s.classList.add(a):f?n.removeClass(s,a):s.classList.remove(a);else{let _=-1===a.indexOf("-")?void 0:el.DashCase;if(null==u)f?n.removeStyle(s,a,_):s.style.removeProperty(a);else{const C="string"==typeof u&&u.endsWith("!important");C&&(u=u.slice(0,-10),_|=el.Important),f?n.setStyle(s,a,u,_):s.style.setProperty(a,u,C?"important":"")}}}(a,_,wt(ue(),s),u,f))}(f,f.data[ue()],u,u[11],n,u[_+1]=function Xy(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ge(Ja(n)))),n}(i,s),a,_)}function op(n,i,s,a,u){let f=null;const _=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<_&&(f=i[C],a=Xu(a,f.hostAttrs,u),f!==n);)C++;return null!==n&&(s.directiveStylingLast=C),a}function Xu(n,i,s){const a=s?1:2;let u=-1;if(null!==i)for(let f=0;f<i.length;f++){const _=i[f];"number"==typeof _?u=_:u===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Bs(n,_,!!s||i[++f]))}return void 0===n?null:n}function vg(n,i,s,a,u,f){const _=null===i;let C;for(;u>0;){const P=n[u],$=Array.isArray(P),Q=$?P[1]:P,_e=null===Q;let ze=s[u+1];ze===Ri&&(ze=_e?at:void 0);let ot=_e?Pa(ze,a):Q===a?ze:void 0;if($&&!mh(ot)&&(ot=Pa(P,a)),mh(ot)&&(C=ot,_))return C;const Bt=n[u+1];u=_?ya(Bt):nl(Bt)}if(null!==i){let P=f?i.residualClasses:i.residualStyles;null!=P&&(C=Pa(P,a))}return C}function mh(n){return void 0!==n}function bg(n,i=""){const s=Wt(),a=Ui(),u=n+20,f=a.firstCreatePass?Sc(a,u,1,i,null):a.data[u],_=s[u]=function Wh(n,i){return Ir(n)?n.createText(i):n.createTextNode(i)}(s[11],i);Ec(a,s,_,f),xr(f,!1)}function ap(n){return _h("",n,""),ap}function _h(n,i,s){const a=Wt(),u=Bc(a,n,i,s);return u!==Ri&&Fa(a,ue(),u),_h}function xh(n,i,s){const a=Wt();return bo(a,X(),i)&&zo(Ui(),I(),a,n,i,a[11],s,!0),xh}function qc(n,i,s){const a=Wt();if(bo(a,X(),i)){const f=Ui(),_=I();zo(f,_,a,n,i,Nm(Ie(f.data),_,a),s,!0)}return qc}const hl=void 0;var sv=["en",[["a","p"],["AM","PM"],hl],[["AM","PM"],hl,hl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hl,"{1} 'at' {0}",hl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rb(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Xc={};function wh(n){const i=function Kc(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=ia(i);if(s)return s;const a=i.split("-")[0];if(s=ia(a),s)return s;if("en"===a)return sv;throw new Error(`Missing locale data for the locale "${n}".`)}function hp(n){return wh(n)[oi.PluralCase]}function ia(n){return n in Xc||(Xc[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),Xc[n]}var oi=(()=>((oi=oi||{})[oi.LocaleId=0]="LocaleId",oi[oi.DayPeriodsFormat=1]="DayPeriodsFormat",oi[oi.DayPeriodsStandalone=2]="DayPeriodsStandalone",oi[oi.DaysFormat=3]="DaysFormat",oi[oi.DaysStandalone=4]="DaysStandalone",oi[oi.MonthsFormat=5]="MonthsFormat",oi[oi.MonthsStandalone=6]="MonthsStandalone",oi[oi.Eras=7]="Eras",oi[oi.FirstDayOfWeek=8]="FirstDayOfWeek",oi[oi.WeekendRange=9]="WeekendRange",oi[oi.DateFormat=10]="DateFormat",oi[oi.TimeFormat=11]="TimeFormat",oi[oi.DateTimeFormat=12]="DateTimeFormat",oi[oi.NumberSymbols=13]="NumberSymbols",oi[oi.NumberFormats=14]="NumberFormats",oi[oi.CurrencyCode=15]="CurrencyCode",oi[oi.CurrencySymbol=16]="CurrencySymbol",oi[oi.CurrencyName=17]="CurrencyName",oi[oi.Currencies=18]="Currencies",oi[oi.Directionality=19]="Directionality",oi[oi.PluralCase=20]="PluralCase",oi[oi.ExtraData=21]="ExtraData",oi))();const fp="en-US";let av=fp;function Xi(n,i,s,a,u){if(n=S(n),Array.isArray(n))for(let f=0;f<n.length;f++)Xi(n[f],i,s,a,u);else{const f=Ui(),_=Wt();let C=Oc(n)?n:S(n.provide),P=zd(n);const $=as(),Q=1048575&$.providerIndexes,_e=$.directiveStart,ze=$.providerIndexes>>20;if(Oc(n)||!n.multi){const ot=new wr(P,u,ju),Bt=un(C,i,u?Q:Q+ze,_e);-1===Bt?(ha(Do($,_),f,C),jt(f,n,i.length),i.push(C),$.directiveStart++,$.directiveEnd++,u&&($.providerIndexes+=1048576),s.push(ot),_.push(ot)):(s[Bt]=ot,_[Bt]=ot)}else{const ot=un(C,i,Q+ze,_e),Bt=un(C,i,Q,Q+ze),ln=ot>=0&&s[ot],xn=Bt>=0&&s[Bt];if(u&&!xn||!u&&!ln){ha(Do($,_),f,C);const Vn=function xi(n,i,s,a,u){const f=new wr(n,s,ju);return f.multi=[],f.index=i,f.componentProviders=0,Xt(f,u,a&&!s),f}(u?Rn:Xn,s.length,u,a,P);!u&&xn&&(s[Bt].providerFactory=Vn),jt(f,n,i.length,0),i.push(C),$.directiveStart++,$.directiveEnd++,u&&($.providerIndexes+=1048576),s.push(Vn),_.push(Vn)}else jt(f,n,ot>-1?ot:Bt,Xt(s[u?Bt:ot],P,!u&&a));!u&&a&&xn&&s[Bt].componentProviders++}}}function jt(n,i,s,a){const u=Oc(i),f=function wy(n){return!!n.useClass}(i);if(u||f){const P=(f?S(i.useClass):i).prototype.ngOnDestroy;if(P){const $=n.destroyHooks||(n.destroyHooks=[]);if(!u&&i.multi){const Q=$.indexOf(s);-1===Q?$.push(s,[a,P]):$[Q+1].push(a,P)}else $.push(s,P)}}}function Xt(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function un(n,i,s,a){for(let u=s;u<a;u++)if(i[u]===n)return u;return-1}function Xn(n,i,s,a){return Fi(this.multi,[])}function Rn(n,i,s,a){const u=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=Le(s,s[1],this.providerFactory.index,a);f=C.slice(0,_),Fi(u,f);for(let P=_;P<C.length;P++)f.push(C[P])}else f=[],Fi(u,f);return f}function Fi(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function pi(n,i=[]){return s=>{s.providersResolver=(a,u)=>function En(n,i,s){const a=Ui();if(a.firstCreatePass){const u=Zr(n);Xi(s,a.data,a.blueprint,u,!0),Xi(i,a.data,a.blueprint,u,!1)}}(a,u?u(n):n,i)}}class zr{}class an{resolveComponentFactory(i){throw function Re(n){const i=Error(`No component factory found for ${Ge(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Cn=(()=>{class n{}return n.NULL=new an,n})();function kn(){return ci(as(),Wt())}function ci(n,i){return new Ut(Pt(n,i))}let Ut=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=kn,n})();function ji(n){return n instanceof Ut?n.nativeElement:n}class $n{}let Je=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Mn(){const n=Wt(),s=Mi(as().index,n);return function Dn(n){return n[11]}(vr(s)?s:n)}(),n})(),Si=(()=>{class n{}return n.\u0275prov=_i({token:n,providedIn:"root",factory:()=>null}),n})();class Hn{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Ci=new Hn("13.3.0"),bn={};function Di(n,i,s,a,u=!1){for(;null!==s;){const f=i[s.index];if(null!==f&&a.push(V(f)),mr(f))for(let C=10;C<f.length;C++){const P=f[C],$=P[1].firstChild;null!==$&&Di(P[1],P,$,a)}const _=s.type;if(8&_)Di(n,i,s.child,a);else if(32&_){const C=Kp(s,i);let P;for(;P=C();)a.push(P)}else if(16&_){const C=sm(i,s);if(Array.isArray(C))a.push(...C);else{const P=pd(i[16]);Di(P[1],P,C,a,!0)}}s=u?s.projectionNext:s.next}return a}class kr{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return Di(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(mr(i)){const s=i[8],a=s?s.indexOf(this):-1;a>-1&&(tl(i,a),go(s,a))}this._attachedToViewContainer=!1}Xl(this._lView[1],this._lView)}onDestroy(i){Td(this._lView[1],this._lView,null,i)}markForCheck(){Rc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Lm(n,i,s){Fo(!0);try{Fd(n,i,s)}finally{Fo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new de(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Jp(n,i){Mc(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new de(902,"");this._appRef=i}}class pr extends kr{constructor(i){super(i),this._view=i}detectChanges(){Mf(this._view)}checkNoChanges(){!function by(n){Fo(!0);try{Mf(n)}finally{Fo(!1)}}(this._view)}get context(){return null}}class Ea extends Cn{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Ue(i);return new _p(s,this.ngModule)}}function Ma(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}class _p extends zr{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function K_(n){return n.map(X_).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Ma(this.componentDef.inputs)}get outputs(){return Ma(this.componentDef.outputs)}create(i,s,a,u){const f=(u=u||this.ngModule)?function Ch(n,i){return{get:(s,a,u)=>{const f=n.get(s,bn,u);return f!==bn||a===bn?f:i.get(s,a,u)}}}(i,u.injector):i,_=f.get($n,U),C=f.get(Si,null),P=_.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",Q=a?function Ad(n,i,s){if(Ir(n))return n.selectRootElement(i,s===mi.ShadowDom);let a="string"==typeof i?n.querySelector(i):i;return a.textContent="",a}(P,a,this.componentDef.encapsulation):jh(_.createRenderer(null,this.componentDef),$,function bv(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}($)),_e=this.componentDef.onPush?576:528,ze=function Fc(n,i){return{components:[],scheduler:n||R0,clean:Sf,playerHandler:i||null,flags:0}}(),ot=Dd(0,null,null,1,0,null,null,null,null,null),Bt=vu(null,ot,ze,_e,null,null,_,P,C,f);let ln,xn;fn(Bt);try{const Vn=function Yd(n,i,s,a,u,f){const _=s[1];s[20]=n;const P=Sc(_,20,2,"#host",null),$=P.mergedAttrs=i.hostAttrs;null!==$&&(Du(P,$,!0),null!==n&&(Ys(u,n,$),null!==P.classes&&Al(u,n,P.classes),null!==P.styles&&ef(u,n,P.styles)));const Q=a.createRenderer(n,i),_e=vu(s,Sm(i),null,i.onPush?64:16,s[20],P,a,Q,f||null,null);return _.firstCreatePass&&(ha(Do(P,s),_,i.type),Zl(_,P),Od(P,s.length,1)),ec(s,_e),s[20]=_e}(Q,this.componentDef,Bt,_,P);if(Q)if(a)Ys(P,Q,["ng-version",Ci.full]);else{const{attrs:qt,classes:ui}=function Z_(n){const i=[],s=[];let a=1,u=2;for(;a<n.length;){let f=n[a];if("string"==typeof f)2===u?""!==f&&i.push(f,n[++a]):8===u&&s.push(f);else{if(!_a(u))break;u=f}a++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);qt&&Ys(P,Q,qt),ui&&ui.length>0&&Al(P,Q,ui.join(" "))}if(xn=ni(ot,20),void 0!==s){const qt=xn.projection=[];for(let ui=0;ui<this.ngContentSelectors.length;ui++){const ar=s[ui];qt.push(null!=ar?Array.from(ar):null)}}ln=function jm(n,i,s,a,u){const f=s[1],_=function _y(n,i,s){const a=as();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Ql(n,a,i,Cc(n,i,1,null),s));const u=Le(i,n,a.directiveStart,a);yo(u,i);const f=Pt(a,i);return f&&yo(f,i),u}(f,s,i);if(a.components.push(_),n[8]=_,u&&u.forEach(P=>P(_,i)),i.contentQueries){const P=as();i.contentQueries(1,_,P.directiveStart)}const C=as();return!f.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(L(C.index),Tm(s[1],C,0,C.directiveStart,C.directiveEnd,i),xu(i,_)),_}(Vn,this.componentDef,Bt,ze,[Pu]),bu(ot,Bt,null)}finally{Hr()}return new wv(this.componentType,ln,ci(xn,Bt),Bt,xn)}}class wv extends class xs{}{constructor(i,s,a,u,f){super(),this.location=a,this._rootLView=u,this._tNode=f,this.instance=s,this.hostView=this.changeDetectorRef=new pr(u),this.componentType=i}get injector(){return new vn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Zc{}class xe{}const vt=new Map;class $i extends Zc{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ea(this);const a=me(i);this._bootstrapComponents=Qa(a.bootstrap),this._r3Injector=Rf(i,s,[{provide:Zc,useValue:this},{provide:Cn,useValue:this.componentFactoryResolver}],Ge(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=No.THROW_IF_NOT_FOUND,a=Un.Default){return i===No||i===Zc||i===Zs?this:this._r3Injector.get(i,s,a)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ar extends xe{constructor(i){super(),this.moduleType=i,null!==me(i)&&function Kt(n){const i=new Set;!function s(a){const u=me(a,!0),f=u.id;null!==f&&(function At(n,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${n} - ${Ge(i)} vs ${Ge(i.name)}`)}(f,vt.get(f),a),vt.set(f,a));const _=Qa(u.imports);for(const C of _)i.has(C)||(i.add(C),s(C))}(n)}(i)}create(i){return new $i(this.moduleType,i)}}function ko(n,i){const s=n[i];return s===Ri?void 0:s}function tu(n,i,s,a,u,f,_){const C=i+s;return function rc(n,i,s,a){const u=bo(n,i,s);return bo(n,i+1,a)||u}(n,C,u,f)?ka(n,C+2,_?a.call(_,u,f):a(u,f)):ko(n,C+2)}function Ah(n,i){const s=Ui();let a;const u=n+20;s.firstCreatePass?(a=function Sa(n,i){if(i)for(let s=i.length-1;s>=0;s--){const a=i[s];if(n===a.name)return a}}(i,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(u,a.onDestroy)):a=s.data[u];const f=a.factory||(a.factory=Oo(a.type)),_=$r(ju);try{const C=fc(!1),P=f();return fc(C),function Km(n,i,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),i[s]=a}(s,Wt(),u,P),P}finally{$r(_)}}function wb(n,i,s){const a=n+20,u=Wt(),f=Ei(u,a);return vp(u,a)?function fl(n,i,s,a,u,f){const _=i+s;return bo(n,_,u)?ka(n,_+1,f?a.call(f,u):a(u)):ko(n,_+1)}(u,_s(),i,f.transform,s,f):f.transform(s)}function Eb(n,i,s,a){const u=n+20,f=Wt(),_=Ei(f,u);return vp(f,u)?tu(f,_s(),i,_.transform,s,a,_):_.transform(s,a)}function vp(n,i){return n[1].data[i].pure}function Mv(n){return i=>{setTimeout(n,void 0,i)}}const Bl=class Yx extends A.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,a){var u,f,_;let C=i,P=s||(()=>null),$=a;if(i&&"object"==typeof i){const _e=i;C=null===(u=_e.next)||void 0===u?void 0:u.bind(_e),P=null===(f=_e.error)||void 0===f?void 0:f.bind(_e),$=null===(_=_e.complete)||void 0===_?void 0:_.bind(_e)}this.__isAsync&&(P=Mv(P),C&&(C=Mv(C)),$&&($=Mv($)));const Q=super.subscribe({next:C,error:P,complete:$});return i instanceof b.w0&&i.add(Q),Q}};function qx(){return this._results[Nc()]()}class Rg{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Nc(),a=Rg.prototype;a[s]||(a[s]=qx)}get changes(){return this._changes||(this._changes=new Bl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const a=this;a.dirty=!1;const u=ys(i);(this._changesDetected=!function Bg(n,i,s){if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let u=n[a],f=i[a];if(s&&(u=s(u),f=s(f)),f!==u)return!1}return!0}(a._results,u,s))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let bp=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zx,n})();const Xx=bp,Kx=class extends Xx{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(i){const s=this._declarationTContainer.tViews,a=vu(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(a[19]=f.createEmbeddedView(s)),bu(s,a,i),new kr(a)}};function Zx(){return Ig(as(),Wt())}function Ig(n,i){return 4&n.type?new Kx(i,n,ci(n,i)):null}let Pg=(()=>{class n{}return n.__NG_ELEMENT_ID__=Jx,n})();function Jx(){return Cb(as(),Wt())}const Qx=Pg,Mb=class extends Qx{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return ci(this._hostTNode,this._hostLView)}get injector(){return new vn(this._hostTNode,this._hostLView)}get parentInjector(){const i=Sl(this._hostTNode,this._hostLView);if(da(i)){const s=io(i,this._hostLView),a=Fn(i);return new vn(s[1].data[a+8],s)}return new vn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Sb(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,a){const u=i.createEmbeddedView(s||{});return this.insert(u,a),u}createComponent(i,s,a,u,f){const _=i&&!function Nn(n){return"function"==typeof n}(i);let C;if(_)C=s;else{const _e=s||{};C=_e.index,a=_e.injector,u=_e.projectableNodes,f=_e.ngModuleRef}const P=_?i:new _p(Ue(i)),$=a||this.parentInjector;if(!f&&null==P.ngModule){const ze=(_?$:this.parentInjector).get(Zc,null);ze&&(f=ze)}const Q=P.create($,u,void 0,f);return this.insert(Q.hostView,C),Q}insert(i,s){const a=i._lView,u=a[1];if(function sr(n){return mr(n[3])}(a)){const Q=this.indexOf(i);if(-1!==Q)this.detach(Q);else{const _e=a[3],ze=new Mb(_e,_e[6],_e[3]);ze.detach(ze.indexOf(i))}}const f=this._adjustIndex(s),_=this._lContainer;!function $h(n,i,s,a){const u=10+a,f=s.length;a>0&&(s[u-1][4]=i),a<f-10?(i[4]=s[u],zl(s,10+a,i)):(s.push(i),i[4]=null),i[3]=s;const _=i[17];null!==_&&s!==_&&function Qp(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(_,i);const C=i[19];null!==C&&C.insertView(n),i[2]|=128}(u,a,_,f);const C=bd(f,_),P=a[11],$=yd(P,_[7]);return null!==$&&function wc(n,i,s,a,u,f){a[0]=u,a[6]=i,Mc(n,a,s,1,u,f)}(u,_[6],P,a,$,C),i.attachToViewContainerRef(),zl(Sv(_),f,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Sb(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=tl(this._lContainer,s);a&&(go(Sv(this._lContainer),s),Xl(a[1],a))}detach(i){const s=this._adjustIndex(i,-1),a=tl(this._lContainer,s);return a&&null!=go(Sv(this._lContainer),s)?new kr(a):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Sb(n){return n[8]}function Sv(n){return n[8]||(n[8]=[])}function Cb(n,i){let s;const a=i[n.index];if(mr(a))s=a;else{let u;if(8&n.type)u=V(a);else{const f=i[11];u=f.createComment("");const _=Pt(n,i);Kl(f,yd(f,_),u,function H_(n,i){return Ir(n)?n.nextSibling(i):i.nextSibling}(f,_),!1)}i[n.index]=s=Mu(a,i,u,n),ec(i,s)}return new Mb(s,n,i)}class Cv{constructor(i){this.queryList=i,this.matches=null}clone(){return new Cv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const a=null!==i.contentQueries?i.contentQueries[0]:s.length,u=[];for(let f=0;f<a;f++){const _=s.getByIndex(f);u.push(this.queries[_.indexInDeclarationView].clone())}return new Dv(u)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Fb(i,s).matches&&this.queries[s].setDirty()}}class Db{constructor(i,s,a=null){this.predicate=i,this.flags=s,this.read=a}}class Av{constructor(i=[]){this.queries=i}elementStart(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(i,u);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new Av(s):null}template(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Tv{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Tv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const f=a[u];this.matchTNodeWithReadOption(i,s,nw(s,f)),this.matchTNodeWithReadOption(i,s,be(s,i,f,!1,!1))}else a===bp?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,be(s,i,a,!1,!1))}matchTNodeWithReadOption(i,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===Ut||u===Pg||u===bp&&4&s.type)this.addMatch(s.index,-2);else{const f=be(s,i,u,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function nw(n,i){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===i)return s[a+1];return null}function rw(n,i,s,a){return-1===s?function iw(n,i){return 11&n.type?ci(n,i):4&n.type?Ig(n,i):null}(i,n):-2===s?function sw(n,i,s){return s===Ut?ci(i,n):s===bp?Ig(i,n):s===Pg?Cb(i,n):void 0}(n,i,a):Le(n,n[1],s,i)}function Ab(n,i,s,a){const u=i[19].queries[a];if(null===u.matches){const f=n.data,_=s.matches,C=[];for(let P=0;P<_.length;P+=2){const $=_[P];C.push($<0?null:rw(i,f[$],_[P+1],s.metadata.read))}u.matches=C}return u.matches}function Rv(n,i,s,a){const u=n.queries.getByIndex(s),f=u.matches;if(null!==f){const _=Ab(n,i,u,s);for(let C=0;C<f.length;C+=2){const P=f[C];if(P>0)a.push(_[C/2]);else{const $=f[C+1],Q=i[-P];for(let _e=10;_e<Q.length;_e++){const ze=Q[_e];ze[17]===ze[3]&&Rv(ze[1],ze,$,a)}if(null!==Q[9]){const _e=Q[9];for(let ze=0;ze<_e.length;ze++){const ot=_e[ze];Rv(ot[1],ot,$,a)}}}}}return a}function Tb(n){const i=Wt(),s=Ui(),a=rt();It(a+1);const u=Fb(s,a);if(n.dirty&&Bi(i)===(2==(2&u.metadata.flags))){if(null===u.matches)n.reset([]);else{const f=u.crossesNgTemplate?Rv(s,i,a,[]):Ab(s,i,u,a);n.reset(f,ji),n.notifyOnChanges()}return!0}return!1}function Rb(n,i,s){const a=Ui();a.firstCreatePass&&(Lb(a,new Db(n,i,s),-1),2==(2&i)&&(a.staticViewQueries=!0)),Ob(a,Wt(),i)}function Ib(n,i,s,a){const u=Ui();if(u.firstCreatePass){const f=as();Lb(u,new Db(i,s,a),f.index),function aw(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(u,n),2==(2&s)&&(u.staticContentQueries=!0)}Ob(u,Wt(),s)}function Pb(){return function ow(n,i){return n[19].queries[i].queryList}(Wt(),rt())}function Ob(n,i,s){const a=new Rg(4==(4&s));Td(n,i,a,a.destroy),null===i[19]&&(i[19]=new Dv),i[19].queries.push(new Cv(a))}function Lb(n,i,s){null===n.queries&&(n.queries=new Av),n.queries.track(new Tv(i,s))}function Fb(n,i){return n.queries.getByIndex(i)}function Nb(n,i){return Ig(n,i)}function Fg(...n){}const Qb=new Fr("Application Initializer");let Nv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Fg,this.reject=Fg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const f=this.appInits[u]();if(oh(f))s.push(f);else if(Xf(f)){const _=new Promise((C,P)=>{f.subscribe({complete:C,error:P})});s.push(_)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(vs(Qb,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ex=new Fr("AppId",{providedIn:"root",factory:function tx(){return`${kv()}${kv()}${kv()}`}});function kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nx=new Fr("Platform Initializer"),ix=new Fr("Platform ID"),rx=new Fr("appBootstrapListener");let sx=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const Bv=new Fr("LocaleId",{providedIn:"root",factory:()=>cd(Bv,Un.Optional|Un.SkipSelf)||function Mw(){return"undefined"!=typeof $localize&&$localize.locale||fp}()}),Sw=new Fr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cw{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let Dw=(()=>{class n{compileModuleSync(s){return new Ar(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=Qa(me(s).declarations).reduce((_,C)=>{const P=Ue(C);return P&&_.push(new _p(P)),_},[]);return new Cw(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tw=(()=>Promise.resolve(0))();function Vv(n){"undefined"==typeof Zone?Tw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class pl{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bl(!1),this.onMicrotaskEmpty=new Bl(!1),this.onStable=new Bl(!1),this.onError=new Bl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function Rw(){let n=Yn.requestAnimationFrame,i=Yn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Ow(n){const i=()=>{!function Pw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Uv(n),n.isCheckStableRunning=!0,Hv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Uv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,f,_,C)=>{try{return ox(n),s.invokeTask(u,f,_,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&i(),ax(n)}},onInvoke:(s,a,u,f,_,C,P)=>{try{return ox(n),s.invoke(u,f,_,C,P)}finally{n.shouldCoalesceRunChangeDetection&&i(),ax(n)}},onHasTask:(s,a,u,f)=>{s.hasTask(u,f),a===u&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,Uv(n),Hv(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,u,f)=>(s.handleError(u,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,u){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+u,i,Iw,Fg,Fg);try{return f.runTask(_,s,a)}finally{f.cancelTask(_)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const Iw={};function Hv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Uv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ox(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ax(n){n._nesting--,Hv(n)}class Lw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bl,this.onMicrotaskEmpty=new Bl,this.onStable=new Bl,this.onError=new Bl}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,u){return i.apply(s,a)}}let lx=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pl.assertNotInAngularZone(),Vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,u){return[]}}return n.\u0275fac=function(s){return new(s||n)(vs(pl))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),cx=(()=>{class n{constructor(){this._applications=new Map,zv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return zv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();class Fw{addToWindow(i){}findTestabilityInTree(i,s,a){return null}}function Nw(n){zv=n}let ml,zv=new Fw;const ux=new Fr("AllowMultipleToken");class Vw{constructor(i,s){this.name=i,this.token=s}}function dx(n,i,s=[]){const a=`Platform: ${i}`,u=new Fr(a);return(f=[])=>{let _=hx();if(!_||_.injector.get(ux,!1))if(n)n(s.concat(f).concat({provide:u,useValue:!0}));else{const C=s.concat(f).concat({provide:u,useValue:!0},{provide:Vd,useValue:"platform"});!function Hw(n){if(ml&&!ml.destroyed&&!ml.injector.get(ux,!1))throw new de(400,"");ml=n.get(fx);const i=n.get(nx,null);i&&i.forEach(s=>s())}(No.create({providers:C,name:a}))}return function Uw(n){const i=hx();if(!i)throw new de(401,"");return i}()}}function hx(){return ml&&!ml.destroyed?ml:null}let fx=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const C=function zw(n,i){let s;return s="noop"===n?new Lw:("zone.js"===n?void 0:n)||new pl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),P=[{provide:pl,useValue:C}];return C.run(()=>{const $=No.create({providers:P,parent:this.injector,name:s.moduleType.name}),Q=s.create($),_e=Q.injector.get(Gh,null);if(!_e)throw new de(402,"");return C.runOutsideAngular(()=>{const ze=C.onError.subscribe({next:ot=>{_e.handleError(ot)}});Q.onDestroy(()=>{Wv(this._modules,Q),ze.unsubscribe()})}),function Gw(n,i,s){try{const a=s();return oh(a)?a.catch(u=>{throw i.runOutsideAngular(()=>n.handleError(u)),u}):a}catch(a){throw i.runOutsideAngular(()=>n.handleError(a)),a}}(_e,C,()=>{const ze=Q.injector.get(Nv);return ze.runInitializers(),ze.donePromise.then(()=>(function ab(n){Tn(n,"Expected localeId to be defined"),"string"==typeof n&&(av=n.toLowerCase().replace(/_/g,"-"))}(Q.injector.get(Bv,fp)||fp),this._moduleDoBootstrap(Q),Q))})})}bootstrapModule(s,a=[]){const u=px({},a);return function kw(n,i,s){const a=new Ar(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,u))}_moduleDoBootstrap(s){const a=s.injector.get(Gv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new de(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(vs(No))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();function px(n,i){return Array.isArray(i)?i.reduce(px,n):Object.assign(Object.assign({},n),i)}let Gv=(()=>{class n{constructor(s,a,u,f,_){this._zone=s,this._injector=a,this._exceptionHandler=u,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new j.y($=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{$.next(this._stable),$.complete()})}),P=new j.y($=>{let Q;this._zone.runOutsideAngular(()=>{Q=this._zone.onStable.subscribe(()=>{pl.assertNotInAngularZone(),Vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,$.next(!0))})})});const _e=this._zone.onUnstable.subscribe(()=>{pl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{$.next(!1)}))});return()=>{Q.unsubscribe(),_e.unsubscribe()}});this.isStable=(0,le.T)(C,P.pipe((0,ce.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new de(405,"");let u;u=s instanceof zr?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(u.componentType);const f=function Bw(n){return n.isBoundToModule}(u)?void 0:this._injector.get(Zc),C=u.create(No.NULL,[],a||u.selector,f),P=C.location.nativeElement,$=C.injector.get(lx,null),Q=$&&C.injector.get(cx);return $&&Q&&Q.registerApplication(P,$),C.onDestroy(()=>{this.detachView(C.hostView),Wv(this.components,C),Q&&Q.unregisterApplication(P)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new de(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Wv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(rx,[]).concat(this._bootstrapListeners).forEach(u=>u(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(vs(pl),vs(No),vs(Gh),vs(Cn),vs(Nv))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wv(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}let gx=!0;function jw(){gx=!1}let $w=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yw,n})();function Yw(n){return function qw(n,i,s){if(fo(n)&&!s){const a=Mi(n.index,i);return new kr(a,a)}return 47&n.type?new kr(i[16],i):null}(as(),Wt(),16==(16&n))}class xx{constructor(){}supports(i){return Qo(i)}create(i){return new eE(i)}}const Qw=(n,i)=>i;class eE{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Qw}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,u=0,f=null;for(;s||a;){const _=!a||s&&s.currentIndex<Ex(a,u,f)?s:a,C=Ex(_,u,f),P=_.currentIndex;if(_===a)u--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)u++;else{f||(f=[]);const $=C-u,Q=P-u;if($!=Q){for(let ze=0;ze<$;ze++){const ot=ze<f.length?f[ze]:f[ze]=0,Bt=ot+ze;Q<=Bt&&Bt<$&&(f[ze]=ot+1)}f[_.previousIndex]=Q-$}}C!==P&&i(_,C,P)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Qo(i))throw new de(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,f,_,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let C=0;C<this.length;C++)f=i[C],_=this._trackByFn(C,f),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,f,_,C)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,_,C),a=!0),s=s._next}else u=0,function Dy(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[Nc()]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,C=>{_=this._trackByFn(u,C),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,C,_,u)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,_,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,u){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,f,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,f,u)):i=this._addAfter(new tE(s,a),f,u),i}_verifyReinsertion(i,s,a,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?i=this._reinsertAfter(f,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,f=i._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const u=null===s?this._itHead:s._next;return i._next=u,i._prev=s,null===u?this._itTail=i:u._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new wx),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wx),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class tE{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nE{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class wx{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new nE,this.map.set(s,a)),a.add(i)}get(i,s){const u=this.map.get(i);return u?u.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ex(n,i,s){const a=n.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+i+u}class Mx{constructor(){}supports(i){return i instanceof Map||kf(i)}create(){return new iE}}class iE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||kf(i)))throw new de(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,s);const f=u._prev,_=u._next;return f&&(f._next=_),_&&(_._prev=f),u._next=null,u._prev=null,u}const a=new rE(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class rE{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sx(){return new Xv([new xx])}let Xv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Sx()),deps:[[n,new Dl,new Oa]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new de(901,"")}}return n.\u0275prov=_i({token:n,providedIn:"root",factory:Sx}),n})();function Cx(){return new Kv([new Mx])}let Kv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Cx()),deps:[[n,new Dl,new Oa]]}}find(s){const a=this.factories.find(f=>f.supports(s));if(a)return a;throw new de(901,"")}}return n.\u0275prov=_i({token:n,providedIn:"root",factory:Cx}),n})();const aE=dx(null,"core",[{provide:ix,useValue:"unknown"},{provide:fx,deps:[No]},{provide:cx,deps:[]},{provide:sx,deps:[]}]);let lE=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(vs(Gv))},n.\u0275mod=yi({type:n}),n.\u0275inj=Ai({}),n})()},7423:(dn,dt,q)=>{"use strict";q.d(dt,{lW:()=>We,ot:()=>Y});var A=q(5e3),b=q(508),j=q(6360),le=q(2494);const ce=["mat-button",""],Oe=["*"],Me=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Se=(0,b.pj)((0,b.Id)((0,b.Kr)(class{constructor(J){this._elementRef=J}})));let We=(()=>{class J extends Se{constructor(Ae,ve,Ne){super(Ae),this._focusMonitor=ve,this._animationMode=Ne,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Mt of Me)this._hasHostAttributes(Mt)&&this._getHostElement().classList.add(Mt);Ae.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Ae,ve){Ae?this._focusMonitor.focusVia(this._getHostElement(),Ae,ve):this._getHostElement().focus(ve)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Ae){return Ae.some(ve=>this._getHostElement().hasAttribute(ve))}}return J.\u0275fac=function(Ae){return new(Ae||J)(A.Y36(A.SBq),A.Y36(le.tE),A.Y36(j.Qb,8))},J.\u0275cmp=A.Xpm({type:J,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Ae,ve){if(1&Ae&&A.Gf(b.wG,5),2&Ae){let Ne;A.iGM(Ne=A.CRH())&&(ve.ripple=Ne.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Ae,ve){2&Ae&&(A.uIk("disabled",ve.disabled||null),A.ekj("_mat-animation-noopable","NoopAnimations"===ve._animationMode)("mat-button-disabled",ve.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[A.qOj],attrs:ce,ngContentSelectors:Oe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ae,ve){1&Ae&&(A.F$t(),A.TgZ(0,"span",0),A.Hsn(1),A.qZA(),A._UZ(2,"span",1)(3,"span",2)),2&Ae&&(A.xp6(2),A.ekj("mat-button-ripple-round",ve.isRoundButton||ve.isIconButton),A.Q6J("matRippleDisabled",ve._isRippleDisabled())("matRippleCentered",ve.isIconButton)("matRippleTrigger",ve._getHostElement()))},directives:[b.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),J})(),Y=(()=>{class J{}return J.\u0275fac=function(Ae){return new(Ae||J)},J.\u0275mod=A.oAB({type:J}),J.\u0275inj=A.cJS({imports:[[b.si,b.BQ],b.BQ]}),J})()},508:(dn,dt,q)=>{"use strict";q.d(dt,{BQ:()=>Mt,wG:()=>jr,si:()=>$r,pj:()=>St,Kr:()=>bt,Id:()=>ut,sb:()=>xt});var A=q(5e3),b=q(226),le=q(9808),ce=q(925),Oe=q(2494),Pe=q(3191),Ge=q(6360);const Ne=new A.OlP("mat-sanity-checks",{providedIn:"root",factory:function ve(){return!0}});let Mt=(()=>{class at{constructor(je,Lt,Pn){this._sanityChecks=Lt,this._document=Pn,this._hasDoneGlobalChecks=!1,je._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(je){return!(0,ce.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[je])}}return at.\u0275fac=function(je){return new(je||at)(A.LFG(Oe.qm),A.LFG(Ne,8),A.LFG(le.K0))},at.\u0275mod=A.oAB({type:at}),at.\u0275inj=A.cJS({imports:[[b.vT],b.vT]}),at})();function ut(at){return class extends at{constructor(...Ze){super(...Ze),this._disabled=!1}get disabled(){return this._disabled}set disabled(Ze){this._disabled=(0,Pe.Ig)(Ze)}}}function St(at,Ze){return class extends at{constructor(...je){super(...je),this.defaultColor=Ze,this.color=Ze}get color(){return this._color}set color(je){const Lt=je||this.defaultColor;Lt!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Lt&&this._elementRef.nativeElement.classList.add(`mat-${Lt}`),this._color=Lt)}}}function bt(at){return class extends at{constructor(...Ze){super(...Ze),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Ze){this._disableRipple=(0,Pe.Ig)(Ze)}}}function xt(at,Ze=0){return class extends at{constructor(...je){super(...je),this._tabIndex=Ze,this.defaultTabIndex=Ze}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(je){this._tabIndex=null!=je?(0,Pe.su)(je):this.defaultTabIndex}}}class ds{constructor(Ze,je,Lt){this._renderer=Ze,this.element=je,this.config=Lt,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ms={enterDuration:225,exitDuration:150},_r=(0,ce.i$)({passive:!0}),Ni=["mousedown","touchstart"],Br=["mouseup","mouseleave","touchend","touchcancel"];class ns{constructor(Ze,je,Lt,Pn){this._target=Ze,this._ngZone=je,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Pn.isBrowser&&(this._containerElement=(0,Pe.fI)(Lt))}fadeInRipple(Ze,je,Lt={}){const Pn=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),si=Object.assign(Object.assign({},ms),Lt.animation);Lt.centered&&(Ze=Pn.left+Pn.width/2,je=Pn.top+Pn.height/2);const st=Lt.radius||function Un(at,Ze,je){const Lt=Math.max(Math.abs(at-je.left),Math.abs(at-je.right)),Pn=Math.max(Math.abs(Ze-je.top),Math.abs(Ze-je.bottom));return Math.sqrt(Lt*Lt+Pn*Pn)}(Ze,je,Pn),He=Ze-Pn.left,Ce=je-Pn.top,nt=si.enterDuration,mt=document.createElement("div");mt.classList.add("mat-ripple-element"),mt.style.left=He-st+"px",mt.style.top=Ce-st+"px",mt.style.height=2*st+"px",mt.style.width=2*st+"px",null!=Lt.color&&(mt.style.backgroundColor=Lt.color),mt.style.transitionDuration=`${nt}ms`,this._containerElement.appendChild(mt),function Kr(at){window.getComputedStyle(at).getPropertyValue("opacity")}(mt),mt.style.transform="scale(1)";const en=new ds(this,mt,Lt);return en.state=0,this._activeRipples.add(en),Lt.persistent||(this._mostRecentTransientRipple=en),this._runTimeoutOutsideZone(()=>{const Bn=en===this._mostRecentTransientRipple;en.state=1,!Lt.persistent&&(!Bn||!this._isPointerDown)&&en.fadeOut()},nt),en}fadeOutRipple(Ze){const je=this._activeRipples.delete(Ze);if(Ze===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!je)return;const Lt=Ze.element,Pn=Object.assign(Object.assign({},ms),Ze.config.animation);Lt.style.transitionDuration=`${Pn.exitDuration}ms`,Lt.style.opacity="0",Ze.state=2,this._runTimeoutOutsideZone(()=>{Ze.state=3,Lt.remove()},Pn.exitDuration)}fadeOutAll(){this._activeRipples.forEach(Ze=>Ze.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(Ze=>{Ze.config.persistent||Ze.fadeOut()})}setupTriggerEvents(Ze){const je=(0,Pe.fI)(Ze);!je||je===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=je,this._registerEvents(Ni))}handleEvent(Ze){"mousedown"===Ze.type?this._onMousedown(Ze):"touchstart"===Ze.type?this._onTouchStart(Ze):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Br),this._pointerUpEventsRegistered=!0)}_onMousedown(Ze){const je=(0,Oe.X6)(Ze),Lt=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!je&&!Lt&&(this._isPointerDown=!0,this.fadeInRipple(Ze.clientX,Ze.clientY,this._target.rippleConfig))}_onTouchStart(Ze){if(!this._target.rippleDisabled&&!(0,Oe.yG)(Ze)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const je=Ze.changedTouches;for(let Lt=0;Lt<je.length;Lt++)this.fadeInRipple(je[Lt].clientX,je[Lt].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(Ze=>{!Ze.config.persistent&&(1===Ze.state||Ze.config.terminateOnPointerUp&&0===Ze.state)&&Ze.fadeOut()}))}_runTimeoutOutsideZone(Ze,je=0){this._ngZone.runOutsideAngular(()=>setTimeout(Ze,je))}_registerEvents(Ze){this._ngZone.runOutsideAngular(()=>{Ze.forEach(je=>{this._triggerElement.addEventListener(je,this,_r)})})}_removeTriggerEvents(){this._triggerElement&&(Ni.forEach(Ze=>{this._triggerElement.removeEventListener(Ze,this,_r)}),this._pointerUpEventsRegistered&&Br.forEach(Ze=>{this._triggerElement.removeEventListener(Ze,this,_r)}))}}const Us=new A.OlP("mat-ripple-global-options");let jr=(()=>{class at{constructor(je,Lt,Pn,si,st){this._elementRef=je,this._animationMode=st,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=si||{},this._rippleRenderer=new ns(this,Lt,je,Pn)}get disabled(){return this._disabled}set disabled(je){je&&this.fadeOutAllNonPersistent(),this._disabled=je,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(je){this._trigger=je,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(je,Lt=0,Pn){return"number"==typeof je?this._rippleRenderer.fadeInRipple(je,Lt,Object.assign(Object.assign({},this.rippleConfig),Pn)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),je))}}return at.\u0275fac=function(je){return new(je||at)(A.Y36(A.SBq),A.Y36(A.R0b),A.Y36(ce.t4),A.Y36(Us,8),A.Y36(Ge.Qb,8))},at.\u0275dir=A.lG2({type:at,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(je,Lt){2&je&&A.ekj("mat-ripple-unbounded",Lt.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),at})(),$r=(()=>{class at{}return at.\u0275fac=function(je){return new(je||at)},at.\u0275mod=A.oAB({type:at}),at.\u0275inj=A.cJS({imports:[[Mt],Mt]}),at})()},5512:(dn,dt,q)=>{"use strict";q.d(dt,{WI:()=>ss,uw:()=>mr,H8:()=>xo,ZT:()=>zs,xY:()=>eo,Is:()=>br,so:()=>rs,uh:()=>Zr});var A=q(3191),b=q(5e3),j=q(7579),le=q(9646),ce=q(8306),Oe=q(4968),Pe=q(4408),Ge=q(727);const Me={schedule(we){let z=requestAnimationFrame,H=cancelAnimationFrame;const{delegate:re}=Me;re&&(z=re.requestAnimationFrame,H=re.cancelAnimationFrame);const De=z(Ke=>{H=void 0,we(Ke)});return new Ge.w0(()=>null==H?void 0:H(De))},requestAnimationFrame(...we){const{delegate:z}=Me;return((null==z?void 0:z.requestAnimationFrame)||requestAnimationFrame)(...we)},cancelAnimationFrame(...we){const{delegate:z}=Me;return((null==z?void 0:z.cancelAnimationFrame)||cancelAnimationFrame)(...we)},delegate:void 0};var We=q(640);new class S extends We.v{flush(z){this._active=!0;const H=this._scheduled;this._scheduled=void 0;const{actions:re}=this;let De;z=z||re.shift();do{if(De=z.execute(z.state,z.delay))break}while((z=re[0])&&z.id===H&&re.shift());if(this._active=!1,De){for(;(z=re[0])&&z.id===H&&re.shift();)z.unsubscribe();throw De}}}(class Se extends Pe.o{constructor(z,H){super(z,H),this.scheduler=z,this.work=H}requestAsyncId(z,H,re=0){return null!==re&&re>0?super.requestAsyncId(z,H,re):(z.actions.push(this),z._scheduled||(z._scheduled=Me.requestAnimationFrame(()=>z.flush(void 0))))}recycleAsyncId(z,H,re=0){if(null!=re&&re>0||null==re&&this.delay>0)return super.recycleAsyncId(z,H,re);z.actions.some(De=>De.id===H)||(Me.cancelAnimationFrame(H),z._scheduled=void 0)}});let Ae,de=1;const ve={};function Ne(we){return we in ve&&(delete ve[we],!0)}const Mt={setImmediate(we){const z=de++;return ve[z]=!0,Ae||(Ae=Promise.resolve()),Ae.then(()=>Ne(z)&&we()),z},clearImmediate(we){Ne(we)}},{setImmediate:lt,clearImmediate:Ee}=Mt,ut={setImmediate(...we){const{delegate:z}=ut;return((null==z?void 0:z.setImmediate)||lt)(...we)},clearImmediate(we){const{delegate:z}=ut;return((null==z?void 0:z.clearImmediate)||Ee)(we)},delegate:void 0};new class bt extends We.v{flush(z){this._active=!0;const H=this._scheduled;this._scheduled=void 0;const{actions:re}=this;let De;z=z||re.shift();do{if(De=z.execute(z.state,z.delay))break}while((z=re[0])&&z.id===H&&re.shift());if(this._active=!1,De){for(;(z=re[0])&&z.id===H&&re.shift();)z.unsubscribe();throw De}}}(class St extends Pe.o{constructor(z,H){super(z,H),this.scheduler=z,this.work=H}requestAsyncId(z,H,re=0){return null!==re&&re>0?super.requestAsyncId(z,H,re):(z.actions.push(this),z._scheduled||(z._scheduled=ut.setImmediate(z.flush.bind(z,void 0))))}recycleAsyncId(z,H,re=0){if(null!=re&&re>0||null==re&&this.delay>0)return super.recycleAsyncId(z,H,re);z.actions.some(De=>De.id===H)||(ut.clearImmediate(H),z._scheduled=void 0)}});var Qe=q(4986),pt=q(4482),_t=q(8421),Vt=q(5403),ri=q(3532);function Tn(we,z=Qe.z){return function yt(we){return(0,pt.e)((z,H)=>{let re=!1,De=null,Ke=null,Tt=!1;const nn=()=>{if(null==Ke||Ke.unsubscribe(),Ke=null,re){re=!1;const Gn=De;De=null,H.next(Gn)}Tt&&H.complete()},Ln=()=>{Ke=null,Tt&&H.complete()};z.subscribe((0,Vt.x)(H,Gn=>{re=!0,De=Gn,Ke||(0,_t.Xf)(we(Gn)).subscribe(Ke=(0,Vt.x)(H,nn,Ln))},()=>{Tt=!0,(!re||!Ke||Ke.closed)&&H.complete()}))})}(()=>function di(we=0,z,H=Qe.P){let re=-1;return null!=z&&((0,ri.K)(z)?H=z:re=z),new ce.y(De=>{let Ke=function hi(we){return we instanceof Date&&!isNaN(we)}(we)?+we-H.now():we;Ke<0&&(Ke=0);let Tt=0;return H.schedule(function(){De.closed||(De.next(Tt++),0<=re?this.schedule(void 0,re):De.complete())},Ke)})}(we,z))}var gn=q(9300),fi=q(9808),In=q(925),Or=q(226);let _r=(()=>{class we{constructor(H,re,De){this._ngZone=H,this._platform=re,this._scrolled=new j.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=De}register(H){this.scrollContainers.has(H)||this.scrollContainers.set(H,H.elementScrolled().subscribe(()=>this._scrolled.next(H)))}deregister(H){const re=this.scrollContainers.get(H);re&&(re.unsubscribe(),this.scrollContainers.delete(H))}scrolled(H=20){return this._platform.isBrowser?new ce.y(re=>{this._globalSubscription||this._addGlobalListener();const De=H>0?this._scrolled.pipe(Tn(H)).subscribe(re):this._scrolled.subscribe(re);return this._scrolledCount++,()=>{De.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,le.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((H,re)=>this.deregister(re)),this._scrolled.complete()}ancestorScrolled(H,re){const De=this.getAncestorScrollContainers(H);return this.scrolled(re).pipe((0,gn.h)(Ke=>!Ke||De.indexOf(Ke)>-1))}getAncestorScrollContainers(H){const re=[];return this.scrollContainers.forEach((De,Ke)=>{this._scrollableContainsElement(Ke,H)&&re.push(Ke)}),re}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(H,re){let De=(0,A.fI)(re),Ke=H.getElementRef().nativeElement;do{if(De==Ke)return!0}while(De=De.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const H=this._getWindow();return(0,Oe.R)(H.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(b.R0b),b.LFG(In.t4),b.LFG(fi.K0,8))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),ns=(()=>{class we{constructor(H,re,De){this._platform=H,this._change=new j.x,this._changeListener=Ke=>{this._change.next(Ke)},this._document=De,re.runOutsideAngular(()=>{if(H.isBrowser){const Ke=this._getWindow();Ke.addEventListener("resize",this._changeListener),Ke.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const H=this._getWindow();H.removeEventListener("resize",this._changeListener),H.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const H={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),H}getViewportRect(){const H=this.getViewportScrollPosition(),{width:re,height:De}=this.getViewportSize();return{top:H.top,left:H.left,bottom:H.top+De,right:H.left+re,height:De,width:re}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const H=this._document,re=this._getWindow(),De=H.documentElement,Ke=De.getBoundingClientRect();return{top:-Ke.top||H.body.scrollTop||re.scrollY||De.scrollTop||0,left:-Ke.left||H.body.scrollLeft||re.scrollX||De.scrollLeft||0}}change(H=20){return H>0?this._change.pipe(Tn(H)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const H=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:H.innerWidth,height:H.innerHeight}:{width:0,height:0}}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(In.t4),b.LFG(b.R0b),b.LFG(fi.K0,8))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Lr=(()=>{class we{}return we.\u0275fac=function(H){return new(H||we)},we.\u0275mod=b.oAB({type:we}),we.\u0275inj=b.cJS({}),we})(),hs=(()=>{class we{}return we.\u0275fac=function(H){return new(H||we)},we.\u0275mod=b.oAB({type:we}),we.\u0275inj=b.cJS({imports:[[Or.vT,Lr],Or.vT,Lr]}),we})();var ki=q(7429),lr=q(6451),Mr=q(5698),cr=q(2722);const mi=(0,In.Mq)();class Sn{constructor(z,H){this._viewportRuler=z,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=H}attach(){}enable(){if(this._canBeEnabled()){const z=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=z.style.left||"",this._previousHTMLStyles.top=z.style.top||"",z.style.left=(0,A.HM)(-this._previousScrollPosition.left),z.style.top=(0,A.HM)(-this._previousScrollPosition.top),z.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const z=this._document.documentElement,re=z.style,De=this._document.body.style,Ke=re.scrollBehavior||"",Tt=De.scrollBehavior||"";this._isEnabled=!1,re.left=this._previousHTMLStyles.left,re.top=this._previousHTMLStyles.top,z.classList.remove("cdk-global-scrollblock"),mi&&(re.scrollBehavior=De.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mi&&(re.scrollBehavior=Ke,De.scrollBehavior=Tt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const H=this._document.body,re=this._viewportRuler.getViewportSize();return H.scrollHeight>re.height||H.scrollWidth>re.width}}class ws{constructor(z,H,re,De){this._scrollDispatcher=z,this._ngZone=H,this._viewportRuler=re,this._config=De,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(z){this._overlayRef=z}enable(){if(this._scrollSubscription)return;const z=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=z.subscribe(()=>{const H=this._viewportRuler.getViewportScrollPosition().top;Math.abs(H-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=z.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Ti{enable(){}disable(){}attach(){}}function Yn(we,z){return z.some(H=>we.bottom<H.top||we.top>H.bottom||we.right<H.left||we.left>H.right)}function Ki(we,z){return z.some(H=>we.top<H.top||we.bottom>H.bottom||we.left<H.left||we.right>H.right)}class zi{constructor(z,H,re,De){this._scrollDispatcher=z,this._viewportRuler=H,this._ngZone=re,this._config=De,this._scrollSubscription=null}attach(z){this._overlayRef=z}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const H=this._overlayRef.overlayElement.getBoundingClientRect(),{width:re,height:De}=this._viewportRuler.getViewportSize();Yn(H,[{width:re,height:De,bottom:De,right:re,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let fs=(()=>{class we{constructor(H,re,De,Ke){this._scrollDispatcher=H,this._viewportRuler=re,this._ngZone=De,this.noop=()=>new Ti,this.close=Tt=>new ws(this._scrollDispatcher,this._ngZone,this._viewportRuler,Tt),this.block=()=>new Sn(this._viewportRuler,this._document),this.reposition=Tt=>new zi(this._scrollDispatcher,this._viewportRuler,this._ngZone,Tt),this._document=Ke}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(_r),b.LFG(ns),b.LFG(b.R0b),b.LFG(fi.K0))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();class at{constructor(z){if(this.scrollStrategy=new Ti,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,z){const H=Object.keys(z);for(const re of H)void 0!==z[re]&&(this[re]=z[re])}}}class Lt{constructor(z,H){this.connectionPair=z,this.scrollableViewProperties=H}}class st{constructor(z,H,re,De,Ke,Tt,nn,Ln,Gn){this._portalOutlet=z,this._host=H,this._pane=re,this._config=De,this._ngZone=Ke,this._keyboardDispatcher=Tt,this._document=nn,this._location=Ln,this._outsideClickDispatcher=Gn,this._backdropElement=null,this._backdropClick=new j.x,this._attachments=new j.x,this._detachments=new j.x,this._locationChanges=Ge.w0.EMPTY,this._backdropClickHandler=ti=>this._backdropClick.next(ti),this._backdropTransitionendHandler=ti=>{this._disposeBackdrop(ti.target)},this._keydownEvents=new j.x,this._outsidePointerEvents=new j.x,De.scrollStrategy&&(this._scrollStrategy=De.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=De.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(z){let H=this._portalOutlet.attach(z);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Mr.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),H}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const z=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),z}dispose(){var z;const H=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(z=this._host)||void 0===z||z.remove(),this._previousHostParent=this._pane=this._host=null,H&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(z){z!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=z,this.hasAttached()&&(z.attach(this),this.updatePosition()))}updateSize(z){this._config=Object.assign(Object.assign({},this._config),z),this._updateElementSize()}setDirection(z){this._config=Object.assign(Object.assign({},this._config),{direction:z}),this._updateElementDirection()}addPanelClass(z){this._pane&&this._toggleClasses(this._pane,z,!0)}removePanelClass(z){this._pane&&this._toggleClasses(this._pane,z,!1)}getDirection(){const z=this._config.direction;return z?"string"==typeof z?z:z.value:"ltr"}updateScrollStrategy(z){z!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=z,this.hasAttached()&&(z.attach(this),z.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const z=this._pane.style;z.width=(0,A.HM)(this._config.width),z.height=(0,A.HM)(this._config.height),z.minWidth=(0,A.HM)(this._config.minWidth),z.minHeight=(0,A.HM)(this._config.minHeight),z.maxWidth=(0,A.HM)(this._config.maxWidth),z.maxHeight=(0,A.HM)(this._config.maxHeight)}_togglePointerEvents(z){this._pane.style.pointerEvents=z?"":"none"}_attachBackdrop(){const z="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(z)})}):this._backdropElement.classList.add(z)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const z=this._backdropElement;!z||(z.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{z.addEventListener("transitionend",this._backdropTransitionendHandler)}),z.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(z)},500)))}_toggleClasses(z,H,re){const De=(0,A.Eq)(H||[]).filter(Ke=>!!Ke);De.length&&(re?z.classList.add(...De):z.classList.remove(...De))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const z=this._ngZone.onStable.pipe((0,cr.R)((0,lr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),z.unsubscribe())})})}_disposeScrollStrategy(){const z=this._scrollStrategy;z&&(z.disable(),z.detach&&z.detach())}_disposeBackdrop(z){z&&(z.removeEventListener("click",this._backdropClickHandler),z.removeEventListener("transitionend",this._backdropTransitionendHandler),z.remove(),this._backdropElement===z&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let He=(()=>{class we{constructor(H,re){this._platform=re,this._document=H}ngOnDestroy(){var H;null===(H=this._containerElement)||void 0===H||H.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const H="cdk-overlay-container";if(this._platform.isBrowser||(0,In.Oy)()){const De=this._document.querySelectorAll(`.${H}[platform="server"], .${H}[platform="test"]`);for(let Ke=0;Ke<De.length;Ke++)De[Ke].remove()}const re=this._document.createElement("div");re.classList.add(H),(0,In.Oy)()?re.setAttribute("platform","test"):this._platform.isBrowser||re.setAttribute("platform","server"),this._document.body.appendChild(re),this._containerElement=re}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(fi.K0),b.LFG(In.t4))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const Ce="cdk-overlay-connected-position-bounding-box",nt=/([A-Za-z%]+)$/;class mt{constructor(z,H,re,De,Ke){this._viewportRuler=H,this._document=re,this._platform=De,this._overlayContainer=Ke,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new j.x,this._resizeSubscription=Ge.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(z)}get positions(){return this._preferredPositions}attach(z){this._validatePositions(),z.hostElement.classList.add(Ce),this._overlayRef=z,this._boundingBox=z.hostElement,this._pane=z.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const z=this._originRect,H=this._overlayRect,re=this._viewportRect,De=this._containerRect,Ke=[];let Tt;for(let nn of this._preferredPositions){let Ln=this._getOriginPoint(z,De,nn),Gn=this._getOverlayPoint(Ln,H,nn),ti=this._getOverlayFit(Gn,H,re,nn);if(ti.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(nn,Ln);this._canFitWithFlexibleDimensions(ti,Gn,re)?Ke.push({position:nn,origin:Ln,overlayRect:H,boundingBoxRect:this._calculateBoundingBoxRect(Ln,nn)}):(!Tt||Tt.overlayFit.visibleArea<ti.visibleArea)&&(Tt={overlayFit:ti,overlayPoint:Gn,originPoint:Ln,position:nn,overlayRect:H})}if(Ke.length){let nn=null,Ln=-1;for(const Gn of Ke){const ti=Gn.boundingBoxRect.width*Gn.boundingBoxRect.height*(Gn.position.weight||1);ti>Ln&&(Ln=ti,nn=Gn)}return this._isPushed=!1,void this._applyPosition(nn.position,nn.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Tt.position,Tt.originPoint);this._applyPosition(Tt.position,Tt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&en(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ce),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const z=this._lastPosition;if(z){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const H=this._getOriginPoint(this._originRect,this._containerRect,z);this._applyPosition(z,H)}else this.apply()}withScrollableContainers(z){return this._scrollables=z,this}withPositions(z){return this._preferredPositions=z,-1===z.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(z){return this._viewportMargin=z,this}withFlexibleDimensions(z=!0){return this._hasFlexibleDimensions=z,this}withGrowAfterOpen(z=!0){return this._growAfterOpen=z,this}withPush(z=!0){return this._canPush=z,this}withLockedPosition(z=!0){return this._positionLocked=z,this}setOrigin(z){return this._origin=z,this}withDefaultOffsetX(z){return this._offsetX=z,this}withDefaultOffsetY(z){return this._offsetY=z,this}withTransformOriginOn(z){return this._transformOriginSelector=z,this}_getOriginPoint(z,H,re){let De,Ke;if("center"==re.originX)De=z.left+z.width/2;else{const Tt=this._isRtl()?z.right:z.left,nn=this._isRtl()?z.left:z.right;De="start"==re.originX?Tt:nn}return H.left<0&&(De-=H.left),Ke="center"==re.originY?z.top+z.height/2:"top"==re.originY?z.top:z.bottom,H.top<0&&(Ke-=H.top),{x:De,y:Ke}}_getOverlayPoint(z,H,re){let De,Ke;return De="center"==re.overlayX?-H.width/2:"start"===re.overlayX?this._isRtl()?-H.width:0:this._isRtl()?0:-H.width,Ke="center"==re.overlayY?-H.height/2:"top"==re.overlayY?0:-H.height,{x:z.x+De,y:z.y+Ke}}_getOverlayFit(z,H,re,De){const Ke=yi(H);let{x:Tt,y:nn}=z,Ln=this._getOffset(De,"x"),Gn=this._getOffset(De,"y");Ln&&(Tt+=Ln),Gn&&(nn+=Gn);let wo=0-nn,Jr=nn+Ke.height-re.height,qr=this._subtractOverflows(Ke.width,0-Tt,Tt+Ke.width-re.width),Eo=this._subtractOverflows(Ke.height,wo,Jr),oo=qr*Eo;return{visibleArea:oo,isCompletelyWithinViewport:Ke.width*Ke.height===oo,fitsInViewportVertically:Eo===Ke.height,fitsInViewportHorizontally:qr==Ke.width}}_canFitWithFlexibleDimensions(z,H,re){if(this._hasFlexibleDimensions){const De=re.bottom-H.y,Ke=re.right-H.x,Tt=Bn(this._overlayRef.getConfig().minHeight),nn=Bn(this._overlayRef.getConfig().minWidth),Gn=z.fitsInViewportHorizontally||null!=nn&&nn<=Ke;return(z.fitsInViewportVertically||null!=Tt&&Tt<=De)&&Gn}return!1}_pushOverlayOnScreen(z,H,re){if(this._previousPushAmount&&this._positionLocked)return{x:z.x+this._previousPushAmount.x,y:z.y+this._previousPushAmount.y};const De=yi(H),Ke=this._viewportRect,Tt=Math.max(z.x+De.width-Ke.width,0),nn=Math.max(z.y+De.height-Ke.height,0),Ln=Math.max(Ke.top-re.top-z.y,0),Gn=Math.max(Ke.left-re.left-z.x,0);let ti=0,Vr=0;return ti=De.width<=Ke.width?Gn||-Tt:z.x<this._viewportMargin?Ke.left-re.left-z.x:0,Vr=De.height<=Ke.height?Ln||-nn:z.y<this._viewportMargin?Ke.top-re.top-z.y:0,this._previousPushAmount={x:ti,y:Vr},{x:z.x+ti,y:z.y+Vr}}_applyPosition(z,H){if(this._setTransformOrigin(z),this._setOverlayElementStyles(H,z),this._setBoundingBoxStyles(H,z),z.panelClass&&this._addPanelClasses(z.panelClass),this._lastPosition=z,this._positionChanges.observers.length){const re=this._getScrollVisibility(),De=new Lt(z,re);this._positionChanges.next(De)}this._isInitialRender=!1}_setTransformOrigin(z){if(!this._transformOriginSelector)return;const H=this._boundingBox.querySelectorAll(this._transformOriginSelector);let re,De=z.overlayY;re="center"===z.overlayX?"center":this._isRtl()?"start"===z.overlayX?"right":"left":"start"===z.overlayX?"left":"right";for(let Ke=0;Ke<H.length;Ke++)H[Ke].style.transformOrigin=`${re} ${De}`}_calculateBoundingBoxRect(z,H){const re=this._viewportRect,De=this._isRtl();let Ke,Tt,nn,ti,Vr,wo;if("top"===H.overlayY)Tt=z.y,Ke=re.height-Tt+this._viewportMargin;else if("bottom"===H.overlayY)nn=re.height-z.y+2*this._viewportMargin,Ke=re.height-nn+this._viewportMargin;else{const Jr=Math.min(re.bottom-z.y+re.top,z.y),qr=this._lastBoundingBoxSize.height;Ke=2*Jr,Tt=z.y-Jr,Ke>qr&&!this._isInitialRender&&!this._growAfterOpen&&(Tt=z.y-qr/2)}if("end"===H.overlayX&&!De||"start"===H.overlayX&&De)wo=re.width-z.x+this._viewportMargin,ti=z.x-this._viewportMargin;else if("start"===H.overlayX&&!De||"end"===H.overlayX&&De)Vr=z.x,ti=re.right-z.x;else{const Jr=Math.min(re.right-z.x+re.left,z.x),qr=this._lastBoundingBoxSize.width;ti=2*Jr,Vr=z.x-Jr,ti>qr&&!this._isInitialRender&&!this._growAfterOpen&&(Vr=z.x-qr/2)}return{top:Tt,left:Vr,bottom:nn,right:wo,width:ti,height:Ke}}_setBoundingBoxStyles(z,H){const re=this._calculateBoundingBoxRect(z,H);!this._isInitialRender&&!this._growAfterOpen&&(re.height=Math.min(re.height,this._lastBoundingBoxSize.height),re.width=Math.min(re.width,this._lastBoundingBoxSize.width));const De={};if(this._hasExactPosition())De.top=De.left="0",De.bottom=De.right=De.maxHeight=De.maxWidth="",De.width=De.height="100%";else{const Ke=this._overlayRef.getConfig().maxHeight,Tt=this._overlayRef.getConfig().maxWidth;De.height=(0,A.HM)(re.height),De.top=(0,A.HM)(re.top),De.bottom=(0,A.HM)(re.bottom),De.width=(0,A.HM)(re.width),De.left=(0,A.HM)(re.left),De.right=(0,A.HM)(re.right),De.alignItems="center"===H.overlayX?"center":"end"===H.overlayX?"flex-end":"flex-start",De.justifyContent="center"===H.overlayY?"center":"bottom"===H.overlayY?"flex-end":"flex-start",Ke&&(De.maxHeight=(0,A.HM)(Ke)),Tt&&(De.maxWidth=(0,A.HM)(Tt))}this._lastBoundingBoxSize=re,en(this._boundingBox.style,De)}_resetBoundingBoxStyles(){en(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){en(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(z,H){const re={},De=this._hasExactPosition(),Ke=this._hasFlexibleDimensions,Tt=this._overlayRef.getConfig();if(De){const ti=this._viewportRuler.getViewportScrollPosition();en(re,this._getExactOverlayY(H,z,ti)),en(re,this._getExactOverlayX(H,z,ti))}else re.position="static";let nn="",Ln=this._getOffset(H,"x"),Gn=this._getOffset(H,"y");Ln&&(nn+=`translateX(${Ln}px) `),Gn&&(nn+=`translateY(${Gn}px)`),re.transform=nn.trim(),Tt.maxHeight&&(De?re.maxHeight=(0,A.HM)(Tt.maxHeight):Ke&&(re.maxHeight="")),Tt.maxWidth&&(De?re.maxWidth=(0,A.HM)(Tt.maxWidth):Ke&&(re.maxWidth="")),en(this._pane.style,re)}_getExactOverlayY(z,H,re){let De={top:"",bottom:""},Ke=this._getOverlayPoint(H,this._overlayRect,z);return this._isPushed&&(Ke=this._pushOverlayOnScreen(Ke,this._overlayRect,re)),"bottom"===z.overlayY?De.bottom=this._document.documentElement.clientHeight-(Ke.y+this._overlayRect.height)+"px":De.top=(0,A.HM)(Ke.y),De}_getExactOverlayX(z,H,re){let Tt,De={left:"",right:""},Ke=this._getOverlayPoint(H,this._overlayRect,z);return this._isPushed&&(Ke=this._pushOverlayOnScreen(Ke,this._overlayRect,re)),Tt=this._isRtl()?"end"===z.overlayX?"left":"right":"end"===z.overlayX?"right":"left","right"===Tt?De.right=this._document.documentElement.clientWidth-(Ke.x+this._overlayRect.width)+"px":De.left=(0,A.HM)(Ke.x),De}_getScrollVisibility(){const z=this._getOriginRect(),H=this._pane.getBoundingClientRect(),re=this._scrollables.map(De=>De.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ki(z,re),isOriginOutsideView:Yn(z,re),isOverlayClipped:Ki(H,re),isOverlayOutsideView:Yn(H,re)}}_subtractOverflows(z,...H){return H.reduce((re,De)=>re-Math.max(De,0),z)}_getNarrowedViewportRect(){const z=this._document.documentElement.clientWidth,H=this._document.documentElement.clientHeight,re=this._viewportRuler.getViewportScrollPosition();return{top:re.top+this._viewportMargin,left:re.left+this._viewportMargin,right:re.left+z-this._viewportMargin,bottom:re.top+H-this._viewportMargin,width:z-2*this._viewportMargin,height:H-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(z,H){return"x"===H?null==z.offsetX?this._offsetX:z.offsetX:null==z.offsetY?this._offsetY:z.offsetY}_validatePositions(){}_addPanelClasses(z){this._pane&&(0,A.Eq)(z).forEach(H=>{""!==H&&-1===this._appliedPanelClasses.indexOf(H)&&(this._appliedPanelClasses.push(H),this._pane.classList.add(H))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(z=>{this._pane.classList.remove(z)}),this._appliedPanelClasses=[])}_getOriginRect(){const z=this._origin;if(z instanceof b.SBq)return z.nativeElement.getBoundingClientRect();if(z instanceof Element)return z.getBoundingClientRect();const H=z.width||0,re=z.height||0;return{top:z.y,bottom:z.y+re,left:z.x,right:z.x+H,height:re,width:H}}}function en(we,z){for(let H in z)z.hasOwnProperty(H)&&(we[H]=z[H]);return we}function Bn(we){if("number"!=typeof we&&null!=we){const[z,H]=we.split(nt);return H&&"px"!==H?null:parseFloat(z)}return we||null}function yi(we){return{top:Math.floor(we.top),right:Math.floor(we.right),bottom:Math.floor(we.bottom),left:Math.floor(we.left),width:Math.floor(we.width),height:Math.floor(we.height)}}const Rr="cdk-global-overlay-wrapper";class Ye{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(z){const H=z.getConfig();this._overlayRef=z,this._width&&!H.width&&z.updateSize({width:this._width}),this._height&&!H.height&&z.updateSize({height:this._height}),z.hostElement.classList.add(Rr),this._isDisposed=!1}top(z=""){return this._bottomOffset="",this._topOffset=z,this._alignItems="flex-start",this}left(z=""){return this._rightOffset="",this._leftOffset=z,this._justifyContent="flex-start",this}bottom(z=""){return this._topOffset="",this._bottomOffset=z,this._alignItems="flex-end",this}right(z=""){return this._leftOffset="",this._rightOffset=z,this._justifyContent="flex-end",this}width(z=""){return this._overlayRef?this._overlayRef.updateSize({width:z}):this._width=z,this}height(z=""){return this._overlayRef?this._overlayRef.updateSize({height:z}):this._height=z,this}centerHorizontally(z=""){return this.left(z),this._justifyContent="center",this}centerVertically(z=""){return this.top(z),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const z=this._overlayRef.overlayElement.style,H=this._overlayRef.hostElement.style,re=this._overlayRef.getConfig(),{width:De,height:Ke,maxWidth:Tt,maxHeight:nn}=re,Ln=!("100%"!==De&&"100vw"!==De||Tt&&"100%"!==Tt&&"100vw"!==Tt),Gn=!("100%"!==Ke&&"100vh"!==Ke||nn&&"100%"!==nn&&"100vh"!==nn);z.position=this._cssPosition,z.marginLeft=Ln?"0":this._leftOffset,z.marginTop=Gn?"0":this._topOffset,z.marginBottom=this._bottomOffset,z.marginRight=this._rightOffset,Ln?H.justifyContent="flex-start":"center"===this._justifyContent?H.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?H.justifyContent="flex-end":"flex-end"===this._justifyContent&&(H.justifyContent="flex-start"):H.justifyContent=this._justifyContent,H.alignItems=Gn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const z=this._overlayRef.overlayElement.style,H=this._overlayRef.hostElement,re=H.style;H.classList.remove(Rr),re.justifyContent=re.alignItems=z.marginTop=z.marginBottom=z.marginLeft=z.marginRight=z.position="",this._overlayRef=null,this._isDisposed=!0}}let Ve=(()=>{class we{constructor(H,re,De,Ke){this._viewportRuler=H,this._document=re,this._platform=De,this._overlayContainer=Ke}global(){return new Ye}flexibleConnectedTo(H){return new mt(H,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(ns),b.LFG(fi.K0),b.LFG(In.t4),b.LFG(He))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),ye=(()=>{class we{constructor(H){this._attachedOverlays=[],this._document=H}ngOnDestroy(){this.detach()}add(H){this.remove(H),this._attachedOverlays.push(H)}remove(H){const re=this._attachedOverlays.indexOf(H);re>-1&&this._attachedOverlays.splice(re,1),0===this._attachedOverlays.length&&this.detach()}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(fi.K0))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Ue=(()=>{class we extends ye{constructor(H,re){super(H),this._ngZone=re,this._keydownListener=De=>{const Ke=this._attachedOverlays;for(let Tt=Ke.length-1;Tt>-1;Tt--)if(Ke[Tt]._keydownEvents.observers.length>0){const nn=Ke[Tt]._keydownEvents;this._ngZone?this._ngZone.run(()=>nn.next(De)):nn.next(De);break}}}add(H){super.add(H),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(fi.K0),b.LFG(b.R0b,8))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),ct=(()=>{class we extends ye{constructor(H,re,De){super(H),this._platform=re,this._ngZone=De,this._cursorStyleIsSet=!1,this._pointerDownListener=Ke=>{this._pointerDownEventTarget=(0,In.sA)(Ke)},this._clickListener=Ke=>{const Tt=(0,In.sA)(Ke),nn="click"===Ke.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Tt;this._pointerDownEventTarget=null;const Ln=this._attachedOverlays.slice();for(let Gn=Ln.length-1;Gn>-1;Gn--){const ti=Ln[Gn];if(ti._outsidePointerEvents.observers.length<1||!ti.hasAttached())continue;if(ti.overlayElement.contains(Tt)||ti.overlayElement.contains(nn))break;const Vr=ti._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Vr.next(Ke)):Vr.next(Ke)}}}add(H){if(super.add(H),!this._isAttached){const re=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(re)):this._addEventListeners(re),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=re.style.cursor,re.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const H=this._document.body;H.removeEventListener("pointerdown",this._pointerDownListener,!0),H.removeEventListener("click",this._clickListener,!0),H.removeEventListener("auxclick",this._clickListener,!0),H.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(H.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(H){H.addEventListener("pointerdown",this._pointerDownListener,!0),H.addEventListener("click",this._clickListener,!0),H.addEventListener("auxclick",this._clickListener,!0),H.addEventListener("contextmenu",this._clickListener,!0)}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(fi.K0),b.LFG(In.t4),b.LFG(b.R0b,8))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),et=0,me=(()=>{class we{constructor(H,re,De,Ke,Tt,nn,Ln,Gn,ti,Vr,wo){this.scrollStrategies=H,this._overlayContainer=re,this._componentFactoryResolver=De,this._positionBuilder=Ke,this._keyboardDispatcher=Tt,this._injector=nn,this._ngZone=Ln,this._document=Gn,this._directionality=ti,this._location=Vr,this._outsideClickDispatcher=wo}create(H){const re=this._createHostElement(),De=this._createPaneElement(re),Ke=this._createPortalOutlet(De),Tt=new at(H);return Tt.direction=Tt.direction||this._directionality.value,new st(Ke,re,De,Tt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(H){const re=this._document.createElement("div");return re.id="cdk-overlay-"+et++,re.classList.add("cdk-overlay-pane"),H.appendChild(re),re}_createHostElement(){const H=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(H),H}_createPortalOutlet(H){return this._appRef||(this._appRef=this._injector.get(b.z2F)),new ki.u0(H,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(fs),b.LFG(He),b.LFG(b._Vd),b.LFG(Ve),b.LFG(Ue),b.LFG(b.zs3),b.LFG(b.R0b),b.LFG(fi.K0),b.LFG(Or.Is),b.LFG(fi.Ye),b.LFG(ct))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac}),we})();const An={provide:new b.OlP("cdk-connected-overlay-scroll-strategy"),deps:[me],useFactory:function hn(we){return()=>we.scrollStrategies.reposition()}};let zn=(()=>{class we{}return we.\u0275fac=function(H){return new(H||we)},we.\u0275mod=b.oAB({type:we}),we.\u0275inj=b.cJS({providers:[me,An],imports:[[Or.vT,ki.eL,hs],hs]}),we})();var Qt=q(508),Qn=q(9770),wi=q(8675),Zn=q(1777),yr=q(2494),ur=q(1159),gs=q(6360);function ir(we,z){}class is{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Yr={dialogContainer:(0,Zn.X$)("dialogContainer",[(0,Zn.SB)("void, exit",(0,Zn.oB)({opacity:0,transform:"scale(0.7)"})),(0,Zn.SB)("enter",(0,Zn.oB)({transform:"none"})),(0,Zn.eR)("* => enter",(0,Zn.ru)([(0,Zn.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Zn.oB)({transform:"none",opacity:1})),(0,Zn.IO)("@*",(0,Zn.pV)(),{optional:!0})])),(0,Zn.eR)("* => void, * => exit",(0,Zn.ru)([(0,Zn.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Zn.oB)({opacity:0})),(0,Zn.IO)("@*",(0,Zn.pV)(),{optional:!0})]))])};let ho=(()=>{class we extends ki.en{constructor(H,re,De,Ke,Tt,nn,Ln,Gn){super(),this._elementRef=H,this._focusTrapFactory=re,this._changeDetectorRef=De,this._config=Tt,this._interactivityChecker=nn,this._ngZone=Ln,this._focusMonitor=Gn,this._animationStateChanged=new b.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=ti=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(ti)),this._ariaLabelledBy=Tt.ariaLabelledBy||null,this._document=Ke}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,In.ht)())}attachComponentPortal(H){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(H)}attachTemplatePortal(H){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(H)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(H,re){this._interactivityChecker.isFocusable(H)||(H.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const De=()=>{H.removeEventListener("blur",De),H.removeEventListener("mousedown",De),H.removeAttribute("tabindex")};H.addEventListener("blur",De),H.addEventListener("mousedown",De)})),H.focus(re)}_focusByCssSelector(H,re){let De=this._elementRef.nativeElement.querySelector(H);De&&this._forceFocus(De,re)}_trapFocus(){const H=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||H.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(re=>{re||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const H=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&H&&"function"==typeof H.focus){const re=(0,In.ht)(),De=this._elementRef.nativeElement;(!re||re===this._document.body||re===De||De.contains(re))&&(this._focusMonitor?(this._focusMonitor.focusVia(H,this._closeInteractionType),this._closeInteractionType=null):H.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const H=this._elementRef.nativeElement,re=(0,In.ht)();return H===re||H.contains(re)}}return we.\u0275fac=function(H){return new(H||we)(b.Y36(b.SBq),b.Y36(yr.qV),b.Y36(b.sBO),b.Y36(fi.K0,8),b.Y36(is),b.Y36(yr.ic),b.Y36(b.R0b),b.Y36(yr.tE))},we.\u0275dir=b.lG2({type:we,viewQuery:function(H,re){if(1&H&&b.Gf(ki.Pl,7),2&H){let De;b.iGM(De=b.CRH())&&(re._portalOutlet=De.first)}},features:[b.qOj]}),we})(),Is=(()=>{class we extends ho{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:H,totalTime:re}){"enter"===H?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:re})):"exit"===H&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:re}))}_onAnimationStart({toState:H,totalTime:re}){"enter"===H?this._animationStateChanged.next({state:"opening",totalTime:re}):("exit"===H||"void"===H)&&this._animationStateChanged.next({state:"closing",totalTime:re})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return we.\u0275fac=function(){let z;return function(re){return(z||(z=b.n5z(we)))(re||we)}}(),we.\u0275cmp=b.Xpm({type:we,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(H,re){1&H&&b.WFA("@dialogContainer.start",function(Ke){return re._onAnimationStart(Ke)})("@dialogContainer.done",function(Ke){return re._onAnimationDone(Ke)}),2&H&&(b.Ikx("id",re._id),b.uIk("role",re._config.role)("aria-labelledby",re._config.ariaLabel?null:re._ariaLabelledBy)("aria-label",re._config.ariaLabel)("aria-describedby",re._config.ariaDescribedBy||null),b.d8E("@dialogContainer",re._state))},features:[b.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(H,re){1&H&&b.YNc(0,ir,0,0,"ng-template",0)},directives:[ki.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Yr.dialogContainer]}}),we})(),As=0;class rs{constructor(z,H,re="mat-dialog-"+As++){this._overlayRef=z,this._containerInstance=H,this.id=re,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new j.x,this._afterClosed=new j.x,this._beforeClosed=new j.x,this._state=0,H._id=re,H._animationStateChanged.pipe((0,gn.h)(De=>"opened"===De.state),(0,Mr.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),H._animationStateChanged.pipe((0,gn.h)(De=>"closed"===De.state),(0,Mr.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),z.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),z.keydownEvents().pipe((0,gn.h)(De=>De.keyCode===ur.hY&&!this.disableClose&&!(0,ur.Vb)(De))).subscribe(De=>{De.preventDefault(),dr(this,"keyboard")}),z.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():dr(this,"mouse")})}close(z){this._result=z,this._containerInstance._animationStateChanged.pipe((0,gn.h)(H=>"closing"===H.state),(0,Mr.q)(1)).subscribe(H=>{this._beforeClosed.next(z),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),H.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(z){let H=this._getPositionStrategy();return z&&(z.left||z.right)?z.left?H.left(z.left):H.right(z.right):H.centerHorizontally(),z&&(z.top||z.bottom)?z.top?H.top(z.top):H.bottom(z.bottom):H.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(z="",H=""){return this._overlayRef.updateSize({width:z,height:H}),this._overlayRef.updatePosition(),this}addPanelClass(z){return this._overlayRef.addPanelClass(z),this}removePanelClass(z){return this._overlayRef.removePanelClass(z),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function dr(we,z,H){return void 0!==we._containerInstance&&(we._containerInstance._closeInteractionType=z),we.close(H)}const ss=new b.OlP("MatDialogData"),Ps=new b.OlP("mat-dialog-default-options"),rr=new b.OlP("mat-dialog-scroll-strategy"),Js={provide:rr,deps:[me],useFactory:function Es(we){return()=>we.scrollStrategies.block()}};let vr=(()=>{class we{constructor(H,re,De,Ke,Tt,nn,Ln,Gn,ti,Vr){this._overlay=H,this._injector=re,this._defaultOptions=De,this._parentDialog=Ke,this._overlayContainer=Tt,this._dialogRefConstructor=Ln,this._dialogContainerType=Gn,this._dialogDataToken=ti,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new j.x,this._afterOpenedAtThisLevel=new j.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Qn.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,wi.O)(void 0))),this._scrollStrategy=nn}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const H=this._parentDialog;return H?H._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(H,re){re=function Qs(we,z){return Object.assign(Object.assign({},z),we)}(re,this._defaultOptions||new is),re.id&&this.getDialogById(re.id);const De=this._createOverlay(re),Ke=this._attachDialogContainer(De,re),Tt=this._attachDialogContent(H,Ke,De,re);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Tt),Tt.afterClosed().subscribe(()=>this._removeOpenDialog(Tt)),this.afterOpened.next(Tt),Ke._initializeWithAttachedContent(),Tt}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(H){return this.openDialogs.find(re=>re.id===H)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(H){const re=this._getOverlayConfig(H);return this._overlay.create(re)}_getOverlayConfig(H){const re=new at({positionStrategy:this._overlay.position().global(),scrollStrategy:H.scrollStrategy||this._scrollStrategy(),panelClass:H.panelClass,hasBackdrop:H.hasBackdrop,direction:H.direction,minWidth:H.minWidth,minHeight:H.minHeight,maxWidth:H.maxWidth,maxHeight:H.maxHeight,disposeOnNavigation:H.closeOnNavigation});return H.backdropClass&&(re.backdropClass=H.backdropClass),re}_attachDialogContainer(H,re){const Ke=b.zs3.create({parent:re&&re.viewContainerRef&&re.viewContainerRef.injector||this._injector,providers:[{provide:is,useValue:re}]}),Tt=new ki.C5(this._dialogContainerType,re.viewContainerRef,Ke,re.componentFactoryResolver);return H.attach(Tt).instance}_attachDialogContent(H,re,De,Ke){const Tt=new this._dialogRefConstructor(De,re,Ke.id);if(H instanceof b.Rgc)re.attachTemplatePortal(new ki.UE(H,null,{$implicit:Ke.data,dialogRef:Tt}));else{const nn=this._createInjector(Ke,Tt,re),Ln=re.attachComponentPortal(new ki.C5(H,Ke.viewContainerRef,nn,Ke.componentFactoryResolver));Tt.componentInstance=Ln.instance}return Tt.updateSize(Ke.width,Ke.height).updatePosition(Ke.position),Tt}_createInjector(H,re,De){const Ke=H&&H.viewContainerRef&&H.viewContainerRef.injector,Tt=[{provide:this._dialogContainerType,useValue:De},{provide:this._dialogDataToken,useValue:H.data},{provide:this._dialogRefConstructor,useValue:re}];return H.direction&&(!Ke||!Ke.get(Or.Is,null,b.XFs.Optional))&&Tt.push({provide:Or.Is,useValue:{value:H.direction,change:(0,le.of)()}}),b.zs3.create({parent:Ke||this._injector,providers:Tt})}_removeOpenDialog(H){const re=this.openDialogs.indexOf(H);re>-1&&(this.openDialogs.splice(re,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((De,Ke)=>{De?Ke.setAttribute("aria-hidden",De):Ke.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const H=this._overlayContainer.getContainerElement();if(H.parentElement){const re=H.parentElement.children;for(let De=re.length-1;De>-1;De--){let Ke=re[De];Ke!==H&&"SCRIPT"!==Ke.nodeName&&"STYLE"!==Ke.nodeName&&!Ke.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Ke,Ke.getAttribute("aria-hidden")),Ke.setAttribute("aria-hidden","true"))}}}_closeDialogs(H){let re=H.length;for(;re--;)H[re].close()}}return we.\u0275fac=function(H){b.$Z()},we.\u0275dir=b.lG2({type:we}),we})(),mr=(()=>{class we extends vr{constructor(H,re,De,Ke,Tt,nn,Ln,Gn){super(H,re,Ke,nn,Ln,Tt,rs,Is,ss,Gn)}}return we.\u0275fac=function(H){return new(H||we)(b.LFG(me),b.LFG(b.zs3),b.LFG(fi.Ye,8),b.LFG(Ps,8),b.LFG(rr),b.LFG(we,12),b.LFG(He),b.LFG(gs.Qb,8))},we.\u0275prov=b.Yz7({token:we,factory:we.\u0275fac}),we})(),fo=0,zs=(()=>{class we{constructor(H,re,De){this.dialogRef=H,this._elementRef=re,this._dialog=De,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=Gs(this._elementRef,this._dialog.openDialogs))}ngOnChanges(H){const re=H._matDialogClose||H._matDialogCloseResult;re&&(this.dialogResult=re.currentValue)}_onButtonClick(H){dr(this.dialogRef,0===H.screenX&&0===H.screenY?"keyboard":"mouse",this.dialogResult)}}return we.\u0275fac=function(H){return new(H||we)(b.Y36(rs,8),b.Y36(b.SBq),b.Y36(mr))},we.\u0275dir=b.lG2({type:we,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(H,re){1&H&&b.NdJ("click",function(Ke){return re._onButtonClick(Ke)}),2&H&&b.uIk("aria-label",re.ariaLabel||null)("type",re.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[b.TTD]}),we})(),Zr=(()=>{class we{constructor(H,re,De){this._dialogRef=H,this._elementRef=re,this._dialog=De,this.id="mat-dialog-title-"+fo++}ngOnInit(){this._dialogRef||(this._dialogRef=Gs(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const H=this._dialogRef._containerInstance;H&&!H._ariaLabelledBy&&(H._ariaLabelledBy=this.id)})}}return we.\u0275fac=function(H){return new(H||we)(b.Y36(rs,8),b.Y36(b.SBq),b.Y36(mr))},we.\u0275dir=b.lG2({type:we,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(H,re){2&H&&b.Ikx("id",re.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),we})(),eo=(()=>{class we{}return we.\u0275fac=function(H){return new(H||we)},we.\u0275dir=b.lG2({type:we,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),we})(),xo=(()=>{class we{}return we.\u0275fac=function(H){return new(H||we)},we.\u0275dir=b.lG2({type:we,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),we})();function Gs(we,z){let H=we.nativeElement.parentElement;for(;H&&!H.classList.contains("mat-dialog-container");)H=H.parentElement;return H?z.find(re=>re.id===H.id):null}let br=(()=>{class we{}return we.\u0275fac=function(H){return new(H||we)},we.\u0275mod=b.oAB({type:we}),we.\u0275inj=b.cJS({providers:[mr,Js],imports:[[zn,ki.eL,Qt.BQ],Qt.BQ]}),we})()},8099:(dn,dt,q)=>{"use strict";q.d(dt,{Hw:()=>Ue,Ps:()=>ct});var A=q(5e3),b=q(508),j=q(3191),le=q(9808),ce=q(9646),Oe=q(2843),Pe=q(4128),Ge=q(727),Me=q(8505),Se=q(4004),We=q(262),S=q(8746),Y=q(3099),J=q(5698),de=q(4351),Ae=q(9300);class ve{}class Mt{constructor(me){this.normalizedNames=new Map,this.lazyUpdate=null,me?this.lazyInit="string"==typeof me?()=>{this.headers=new Map,me.split("\n").forEach(ae=>{const Be=ae.indexOf(":");if(Be>0){const Et=ae.slice(0,Be),Ot=Et.toLowerCase(),hn=ae.slice(Be+1).trim();this.maybeSetNormalizedName(Et,Ot),this.headers.has(Ot)?this.headers.get(Ot).push(hn):this.headers.set(Ot,[hn])}})}:()=>{this.headers=new Map,Object.keys(me).forEach(ae=>{let Be=me[ae];const Et=ae.toLowerCase();"string"==typeof Be&&(Be=[Be]),Be.length>0&&(this.headers.set(Et,Be),this.maybeSetNormalizedName(ae,Et))})}:this.headers=new Map}has(me){return this.init(),this.headers.has(me.toLowerCase())}get(me){this.init();const ae=this.headers.get(me.toLowerCase());return ae&&ae.length>0?ae[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(me){return this.init(),this.headers.get(me.toLowerCase())||null}append(me,ae){return this.clone({name:me,value:ae,op:"a"})}set(me,ae){return this.clone({name:me,value:ae,op:"s"})}delete(me,ae){return this.clone({name:me,value:ae,op:"d"})}maybeSetNormalizedName(me,ae){this.normalizedNames.has(ae)||this.normalizedNames.set(ae,me)}init(){this.lazyInit&&(this.lazyInit instanceof Mt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(me=>this.applyUpdate(me)),this.lazyUpdate=null))}copyFrom(me){me.init(),Array.from(me.headers.keys()).forEach(ae=>{this.headers.set(ae,me.headers.get(ae)),this.normalizedNames.set(ae,me.normalizedNames.get(ae))})}clone(me){const ae=new Mt;return ae.lazyInit=this.lazyInit&&this.lazyInit instanceof Mt?this.lazyInit:this,ae.lazyUpdate=(this.lazyUpdate||[]).concat([me]),ae}applyUpdate(me){const ae=me.name.toLowerCase();switch(me.op){case"a":case"s":let Be=me.value;if("string"==typeof Be&&(Be=[Be]),0===Be.length)return;this.maybeSetNormalizedName(me.name,ae);const Et=("a"===me.op?this.headers.get(ae):void 0)||[];Et.push(...Be),this.headers.set(ae,Et);break;case"d":const Ot=me.value;if(Ot){let hn=this.headers.get(ae);if(!hn)return;hn=hn.filter(An=>-1===Ot.indexOf(An)),0===hn.length?(this.headers.delete(ae),this.normalizedNames.delete(ae)):this.headers.set(ae,hn)}else this.headers.delete(ae),this.normalizedNames.delete(ae)}}forEach(me){this.init(),Array.from(this.normalizedNames.keys()).forEach(ae=>me(this.normalizedNames.get(ae),this.headers.get(ae)))}}class Dt{encodeKey(me){return St(me)}encodeValue(me){return St(me)}decodeKey(me){return decodeURIComponent(me)}decodeValue(me){return decodeURIComponent(me)}}const Ee=/%(\d[a-f0-9])/gi,ut={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function St(et){return encodeURIComponent(et).replace(Ee,(me,ae)=>{var Be;return null!==(Be=ut[ae])&&void 0!==Be?Be:me})}function bt(et){return`${et}`}class xt{constructor(me={}){if(this.updates=null,this.cloneFrom=null,this.encoder=me.encoder||new Dt,me.fromString){if(me.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lt(et,me){const ae=new Map;return et.length>0&&et.replace(/^\?/,"").split("&").forEach(Et=>{const Ot=Et.indexOf("="),[hn,An]=-1==Ot?[me.decodeKey(Et),""]:[me.decodeKey(Et.slice(0,Ot)),me.decodeValue(Et.slice(Ot+1))],zn=ae.get(hn)||[];zn.push(An),ae.set(hn,zn)}),ae}(me.fromString,this.encoder)}else me.fromObject?(this.map=new Map,Object.keys(me.fromObject).forEach(ae=>{const Be=me.fromObject[ae];this.map.set(ae,Array.isArray(Be)?Be:[Be])})):this.map=null}has(me){return this.init(),this.map.has(me)}get(me){this.init();const ae=this.map.get(me);return ae?ae[0]:null}getAll(me){return this.init(),this.map.get(me)||null}keys(){return this.init(),Array.from(this.map.keys())}append(me,ae){return this.clone({param:me,value:ae,op:"a"})}appendAll(me){const ae=[];return Object.keys(me).forEach(Be=>{const Et=me[Be];Array.isArray(Et)?Et.forEach(Ot=>{ae.push({param:Be,value:Ot,op:"a"})}):ae.push({param:Be,value:Et,op:"a"})}),this.clone(ae)}set(me,ae){return this.clone({param:me,value:ae,op:"s"})}delete(me,ae){return this.clone({param:me,value:ae,op:"d"})}toString(){return this.init(),this.keys().map(me=>{const ae=this.encoder.encodeKey(me);return this.map.get(me).map(Be=>ae+"="+this.encoder.encodeValue(Be)).join("&")}).filter(me=>""!==me).join("&")}clone(me){const ae=new xt({encoder:this.encoder});return ae.cloneFrom=this.cloneFrom||this,ae.updates=(this.updates||[]).concat(me),ae}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(me=>this.map.set(me,this.cloneFrom.map.get(me))),this.updates.forEach(me=>{switch(me.op){case"a":case"s":const ae=("a"===me.op?this.map.get(me.param):void 0)||[];ae.push(bt(me.value)),this.map.set(me.param,ae);break;case"d":if(void 0===me.value){this.map.delete(me.param);break}{let Be=this.map.get(me.param)||[];const Et=Be.indexOf(bt(me.value));-1!==Et&&Be.splice(Et,1),Be.length>0?this.map.set(me.param,Be):this.map.delete(me.param)}}}),this.cloneFrom=this.updates=null)}}class Qe{constructor(){this.map=new Map}set(me,ae){return this.map.set(me,ae),this}get(me){return this.map.has(me)||this.map.set(me,me.defaultValue()),this.map.get(me)}delete(me){return this.map.delete(me),this}has(me){return this.map.has(me)}keys(){return this.map.keys()}}function _t(et){return"undefined"!=typeof ArrayBuffer&&et instanceof ArrayBuffer}function Vt(et){return"undefined"!=typeof Blob&&et instanceof Blob}function yt(et){return"undefined"!=typeof FormData&&et instanceof FormData}class hi{constructor(me,ae,Be,Et){let Ot;if(this.url=ae,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=me.toUpperCase(),function pt(et){switch(et){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Et?(this.body=void 0!==Be?Be:null,Ot=Et):Ot=Be,Ot&&(this.reportProgress=!!Ot.reportProgress,this.withCredentials=!!Ot.withCredentials,Ot.responseType&&(this.responseType=Ot.responseType),Ot.headers&&(this.headers=Ot.headers),Ot.context&&(this.context=Ot.context),Ot.params&&(this.params=Ot.params)),this.headers||(this.headers=new Mt),this.context||(this.context=new Qe),this.params){const hn=this.params.toString();if(0===hn.length)this.urlWithParams=ae;else{const An=ae.indexOf("?");this.urlWithParams=ae+(-1===An?"?":An<ae.length-1?"&":"")+hn}}else this.params=new xt,this.urlWithParams=ae}serializeBody(){return null===this.body?null:_t(this.body)||Vt(this.body)||yt(this.body)||function ri(et){return"undefined"!=typeof URLSearchParams&&et instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||yt(this.body)?null:Vt(this.body)?this.body.type||null:_t(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(me={}){var ae;const Be=me.method||this.method,Et=me.url||this.url,Ot=me.responseType||this.responseType,hn=void 0!==me.body?me.body:this.body,An=void 0!==me.withCredentials?me.withCredentials:this.withCredentials,zn=void 0!==me.reportProgress?me.reportProgress:this.reportProgress;let Oi=me.headers||this.headers,Qt=me.params||this.params;const Qn=null!==(ae=me.context)&&void 0!==ae?ae:this.context;return void 0!==me.setHeaders&&(Oi=Object.keys(me.setHeaders).reduce((wi,Zn)=>wi.set(Zn,me.setHeaders[Zn]),Oi)),me.setParams&&(Qt=Object.keys(me.setParams).reduce((wi,Zn)=>wi.set(Zn,me.setParams[Zn]),Qt)),new hi(Be,Et,hn,{params:Qt,headers:Oi,context:Qn,reportProgress:zn,responseType:Ot,withCredentials:An})}}var di=(()=>((di=di||{})[di.Sent=0]="Sent",di[di.UploadProgress=1]="UploadProgress",di[di.ResponseHeader=2]="ResponseHeader",di[di.DownloadProgress=3]="DownloadProgress",di[di.Response=4]="Response",di[di.User=5]="User",di))();class fi extends class Tn{constructor(me,ae=200,Be="OK"){this.headers=me.headers||new Mt,this.status=void 0!==me.status?me.status:ae,this.statusText=me.statusText||Be,this.url=me.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(me={}){super(me),this.type=di.Response,this.body=void 0!==me.body?me.body:null}clone(me={}){return new fi({body:void 0!==me.body?me.body:this.body,headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}function Or(et,me){return{body:me,headers:et.headers,context:et.context,observe:et.observe,params:et.params,reportProgress:et.reportProgress,responseType:et.responseType,withCredentials:et.withCredentials}}let _i=(()=>{class et{constructor(ae){this.handler=ae}request(ae,Be,Et={}){let Ot;if(ae instanceof hi)Ot=ae;else{let zn,Oi;zn=Et.headers instanceof Mt?Et.headers:new Mt(Et.headers),Et.params&&(Oi=Et.params instanceof xt?Et.params:new xt({fromObject:Et.params})),Ot=new hi(ae,Be,void 0!==Et.body?Et.body:null,{headers:zn,context:Et.context,params:Oi,reportProgress:Et.reportProgress,responseType:Et.responseType||"json",withCredentials:Et.withCredentials})}const hn=(0,ce.of)(Ot).pipe((0,de.b)(zn=>this.handler.handle(zn)));if(ae instanceof hi||"events"===Et.observe)return hn;const An=hn.pipe((0,Ae.h)(zn=>zn instanceof fi));switch(Et.observe||"body"){case"body":switch(Ot.responseType){case"arraybuffer":return An.pipe((0,Se.U)(zn=>{if(null!==zn.body&&!(zn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return zn.body}));case"blob":return An.pipe((0,Se.U)(zn=>{if(null!==zn.body&&!(zn.body instanceof Blob))throw new Error("Response is not a Blob.");return zn.body}));case"text":return An.pipe((0,Se.U)(zn=>{if(null!==zn.body&&"string"!=typeof zn.body)throw new Error("Response is not a string.");return zn.body}));default:return An.pipe((0,Se.U)(zn=>zn.body))}case"response":return An;default:throw new Error(`Unreachable: unhandled observe type ${Et.observe}}`)}}delete(ae,Be={}){return this.request("DELETE",ae,Be)}get(ae,Be={}){return this.request("GET",ae,Be)}head(ae,Be={}){return this.request("HEAD",ae,Be)}jsonp(ae,Be){return this.request("JSONP",ae,{params:(new xt).append(Be,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ae,Be={}){return this.request("OPTIONS",ae,Be)}patch(ae,Be,Et={}){return this.request("PATCH",ae,Or(Et,Be))}post(ae,Be,Et={}){return this.request("POST",ae,Or(Et,Be))}put(ae,Be,Et={}){return this.request("PUT",ae,Or(Et,Be))}}return et.\u0275fac=function(ae){return new(ae||et)(A.LFG(ve))},et.\u0275prov=A.Yz7({token:et,factory:et.\u0275fac}),et})();var Yn=q(2313);const Ki=["*"];let zi;function at(et){var me;return(null===(me=function fs(){if(void 0===zi&&(zi=null,"undefined"!=typeof window)){const et=window;void 0!==et.trustedTypes&&(zi=et.trustedTypes.createPolicy("angular#components",{createHTML:me=>me}))}return zi}())||void 0===me?void 0:me.createHTML(et))||et}function Ze(et){return Error(`Unable to find icon with the name "${et}"`)}function Lt(et){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${et}".`)}function Pn(et){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${et}".`)}class si{constructor(me,ae,Be){this.url=me,this.svgText=ae,this.options=Be}}let st=(()=>{class et{constructor(ae,Be,Et,Ot){this._httpClient=ae,this._sanitizer=Be,this._errorHandler=Ot,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Et}addSvgIcon(ae,Be,Et){return this.addSvgIconInNamespace("",ae,Be,Et)}addSvgIconLiteral(ae,Be,Et){return this.addSvgIconLiteralInNamespace("",ae,Be,Et)}addSvgIconInNamespace(ae,Be,Et,Ot){return this._addSvgIconConfig(ae,Be,new si(Et,null,Ot))}addSvgIconResolver(ae){return this._resolvers.push(ae),this}addSvgIconLiteralInNamespace(ae,Be,Et,Ot){const hn=this._sanitizer.sanitize(A.q3G.HTML,Et);if(!hn)throw Pn(Et);const An=at(hn);return this._addSvgIconConfig(ae,Be,new si("",An,Ot))}addSvgIconSet(ae,Be){return this.addSvgIconSetInNamespace("",ae,Be)}addSvgIconSetLiteral(ae,Be){return this.addSvgIconSetLiteralInNamespace("",ae,Be)}addSvgIconSetInNamespace(ae,Be,Et){return this._addSvgIconSetConfig(ae,new si(Be,null,Et))}addSvgIconSetLiteralInNamespace(ae,Be,Et){const Ot=this._sanitizer.sanitize(A.q3G.HTML,Be);if(!Ot)throw Pn(Be);const hn=at(Ot);return this._addSvgIconSetConfig(ae,new si("",hn,Et))}registerFontClassAlias(ae,Be=ae){return this._fontCssClassesByAlias.set(ae,Be),this}classNameForFontAlias(ae){return this._fontCssClassesByAlias.get(ae)||ae}setDefaultFontSetClass(ae){return this._defaultFontSetClass=ae,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(ae){const Be=this._sanitizer.sanitize(A.q3G.RESOURCE_URL,ae);if(!Be)throw Lt(ae);const Et=this._cachedIconsByUrl.get(Be);return Et?(0,ce.of)(nt(Et)):this._loadSvgIconFromConfig(new si(ae,null)).pipe((0,Me.b)(Ot=>this._cachedIconsByUrl.set(Be,Ot)),(0,Se.U)(Ot=>nt(Ot)))}getNamedSvgIcon(ae,Be=""){const Et=mt(Be,ae);let Ot=this._svgIconConfigs.get(Et);if(Ot)return this._getSvgFromConfig(Ot);if(Ot=this._getIconConfigFromResolvers(Be,ae),Ot)return this._svgIconConfigs.set(Et,Ot),this._getSvgFromConfig(Ot);const hn=this._iconSetConfigs.get(Be);return hn?this._getSvgFromIconSetConfigs(ae,hn):(0,Oe._)(Ze(Et))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(ae){return ae.svgText?(0,ce.of)(nt(this._svgElementFromConfig(ae))):this._loadSvgIconFromConfig(ae).pipe((0,Se.U)(Be=>nt(Be)))}_getSvgFromIconSetConfigs(ae,Be){const Et=this._extractIconWithNameFromAnySet(ae,Be);if(Et)return(0,ce.of)(Et);const Ot=Be.filter(hn=>!hn.svgText).map(hn=>this._loadSvgIconSetFromConfig(hn).pipe((0,We.K)(An=>{const Oi=`Loading icon set URL: ${this._sanitizer.sanitize(A.q3G.RESOURCE_URL,hn.url)} failed: ${An.message}`;return this._errorHandler.handleError(new Error(Oi)),(0,ce.of)(null)})));return(0,Pe.D)(Ot).pipe((0,Se.U)(()=>{const hn=this._extractIconWithNameFromAnySet(ae,Be);if(!hn)throw Ze(ae);return hn}))}_extractIconWithNameFromAnySet(ae,Be){for(let Et=Be.length-1;Et>=0;Et--){const Ot=Be[Et];if(Ot.svgText&&Ot.svgText.toString().indexOf(ae)>-1){const hn=this._svgElementFromConfig(Ot),An=this._extractSvgIconFromSet(hn,ae,Ot.options);if(An)return An}}return null}_loadSvgIconFromConfig(ae){return this._fetchIcon(ae).pipe((0,Me.b)(Be=>ae.svgText=Be),(0,Se.U)(()=>this._svgElementFromConfig(ae)))}_loadSvgIconSetFromConfig(ae){return ae.svgText?(0,ce.of)(null):this._fetchIcon(ae).pipe((0,Me.b)(Be=>ae.svgText=Be))}_extractSvgIconFromSet(ae,Be,Et){const Ot=ae.querySelector(`[id="${Be}"]`);if(!Ot)return null;const hn=Ot.cloneNode(!0);if(hn.removeAttribute("id"),"svg"===hn.nodeName.toLowerCase())return this._setSvgAttributes(hn,Et);if("symbol"===hn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(hn),Et);const An=this._svgElementFromString(at("<svg></svg>"));return An.appendChild(hn),this._setSvgAttributes(An,Et)}_svgElementFromString(ae){const Be=this._document.createElement("DIV");Be.innerHTML=ae;const Et=Be.querySelector("svg");if(!Et)throw Error("<svg> tag not found");return Et}_toSvgElement(ae){const Be=this._svgElementFromString(at("<svg></svg>")),Et=ae.attributes;for(let Ot=0;Ot<Et.length;Ot++){const{name:hn,value:An}=Et[Ot];"id"!==hn&&Be.setAttribute(hn,An)}for(let Ot=0;Ot<ae.childNodes.length;Ot++)ae.childNodes[Ot].nodeType===this._document.ELEMENT_NODE&&Be.appendChild(ae.childNodes[Ot].cloneNode(!0));return Be}_setSvgAttributes(ae,Be){return ae.setAttribute("fit",""),ae.setAttribute("height","100%"),ae.setAttribute("width","100%"),ae.setAttribute("preserveAspectRatio","xMidYMid meet"),ae.setAttribute("focusable","false"),Be&&Be.viewBox&&ae.setAttribute("viewBox",Be.viewBox),ae}_fetchIcon(ae){var Be;const{url:Et,options:Ot}=ae,hn=null!==(Be=null==Ot?void 0:Ot.withCredentials)&&void 0!==Be&&Be;if(!this._httpClient)throw function je(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==Et)throw Error(`Cannot fetch icon from URL "${Et}".`);const An=this._sanitizer.sanitize(A.q3G.RESOURCE_URL,Et);if(!An)throw Lt(Et);const zn=this._inProgressUrlFetches.get(An);if(zn)return zn;const Oi=this._httpClient.get(An,{responseType:"text",withCredentials:hn}).pipe((0,Se.U)(Qt=>at(Qt)),(0,S.x)(()=>this._inProgressUrlFetches.delete(An)),(0,Y.B)());return this._inProgressUrlFetches.set(An,Oi),Oi}_addSvgIconConfig(ae,Be,Et){return this._svgIconConfigs.set(mt(ae,Be),Et),this}_addSvgIconSetConfig(ae,Be){const Et=this._iconSetConfigs.get(ae);return Et?Et.push(Be):this._iconSetConfigs.set(ae,[Be]),this}_svgElementFromConfig(ae){if(!ae.svgElement){const Be=this._svgElementFromString(ae.svgText);this._setSvgAttributes(Be,ae.options),ae.svgElement=Be}return ae.svgElement}_getIconConfigFromResolvers(ae,Be){for(let Et=0;Et<this._resolvers.length;Et++){const Ot=this._resolvers[Et](Be,ae);if(Ot)return en(Ot)?new si(Ot.url,null,Ot.options):new si(Ot,null)}}}return et.\u0275fac=function(ae){return new(ae||et)(A.LFG(_i,8),A.LFG(Yn.H7),A.LFG(le.K0,8),A.LFG(A.qLn))},et.\u0275prov=A.Yz7({token:et,factory:et.\u0275fac,providedIn:"root"}),et})();function nt(et){return et.cloneNode(!0)}function mt(et,me){return et+":"+me}function en(et){return!(!et.url||!et.options)}const Bn=(0,b.pj)(class{constructor(et){this._elementRef=et}}),yi=new A.OlP("mat-icon-location",{providedIn:"root",factory:function Rr(){const et=(0,A.f3M)(le.K0),me=et?et.location:null;return{getPathname:()=>me?me.pathname+me.search:""}}}),Ye=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ve=Ye.map(et=>`[${et}]`).join(", "),ye=/^url\(['"]?#(.*?)['"]?\)$/;let Ue=(()=>{class et extends Bn{constructor(ae,Be,Et,Ot,hn){super(ae),this._iconRegistry=Be,this._location=Ot,this._errorHandler=hn,this._inline=!1,this._currentIconFetch=Ge.w0.EMPTY,Et||ae.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(ae){this._inline=(0,j.Ig)(ae)}get svgIcon(){return this._svgIcon}set svgIcon(ae){ae!==this._svgIcon&&(ae?this._updateSvgIcon(ae):this._svgIcon&&this._clearSvgElement(),this._svgIcon=ae)}get fontSet(){return this._fontSet}set fontSet(ae){const Be=this._cleanupFontValue(ae);Be!==this._fontSet&&(this._fontSet=Be,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(ae){const Be=this._cleanupFontValue(ae);Be!==this._fontIcon&&(this._fontIcon=Be,this._updateFontIconClasses())}_splitIconName(ae){if(!ae)return["",""];const Be=ae.split(":");switch(Be.length){case 1:return["",Be[0]];case 2:return Be;default:throw Error(`Invalid icon name: "${ae}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const ae=this._elementsWithExternalReferences;if(ae&&ae.size){const Be=this._location.getPathname();Be!==this._previousPath&&(this._previousPath=Be,this._prependPathToReferences(Be))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(ae){this._clearSvgElement();const Be=this._location.getPathname();this._previousPath=Be,this._cacheChildrenWithExternalReferences(ae),this._prependPathToReferences(Be),this._elementRef.nativeElement.appendChild(ae)}_clearSvgElement(){const ae=this._elementRef.nativeElement;let Be=ae.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Be--;){const Et=ae.childNodes[Be];(1!==Et.nodeType||"svg"===Et.nodeName.toLowerCase())&&Et.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const ae=this._elementRef.nativeElement,Be=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Be!=this._previousFontSetClass&&(this._previousFontSetClass&&ae.classList.remove(this._previousFontSetClass),Be&&ae.classList.add(Be),this._previousFontSetClass=Be),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&ae.classList.remove(this._previousFontIconClass),this.fontIcon&&ae.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(ae){return"string"==typeof ae?ae.trim().split(" ")[0]:ae}_prependPathToReferences(ae){const Be=this._elementsWithExternalReferences;Be&&Be.forEach((Et,Ot)=>{Et.forEach(hn=>{Ot.setAttribute(hn.name,`url('${ae}#${hn.value}')`)})})}_cacheChildrenWithExternalReferences(ae){const Be=ae.querySelectorAll(Ve),Et=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Ot=0;Ot<Be.length;Ot++)Ye.forEach(hn=>{const An=Be[Ot],zn=An.getAttribute(hn),Oi=zn?zn.match(ye):null;if(Oi){let Qt=Et.get(An);Qt||(Qt=[],Et.set(An,Qt)),Qt.push({name:hn,value:Oi[1]})}})}_updateSvgIcon(ae){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),ae){const[Be,Et]=this._splitIconName(ae);Be&&(this._svgNamespace=Be),Et&&(this._svgName=Et),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Et,Be).pipe((0,J.q)(1)).subscribe(Ot=>this._setSvgElement(Ot),Ot=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Be}:${Et}! ${Ot.message}`))})}}}return et.\u0275fac=function(ae){return new(ae||et)(A.Y36(A.SBq),A.Y36(st),A.$8M("aria-hidden"),A.Y36(yi),A.Y36(A.qLn))},et.\u0275cmp=A.Xpm({type:et,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(ae,Be){2&ae&&(A.uIk("data-mat-icon-type",Be._usingFontIcon()?"font":"svg")("data-mat-icon-name",Be._svgName||Be.fontIcon)("data-mat-icon-namespace",Be._svgNamespace||Be.fontSet),A.ekj("mat-icon-inline",Be.inline)("mat-icon-no-color","primary"!==Be.color&&"accent"!==Be.color&&"warn"!==Be.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[A.qOj],ngContentSelectors:Ki,decls:1,vars:0,template:function(ae,Be){1&ae&&(A.F$t(),A.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),et})(),ct=(()=>{class et{}return et.\u0275fac=function(ae){return new(ae||et)},et.\u0275mod=A.oAB({type:et}),et.\u0275inj=A.cJS({imports:[[b.BQ],b.BQ]}),et})()},6360:(dn,dt,q)=>{"use strict";q.d(dt,{Qb:()=>no,PW:()=>ls});var A=q(5e3),b=q(2313),j=q(1777);const le=!1;function Oe(X){return new A.vHH(3e3,le)}function Wr(){return"undefined"!=typeof window&&void 0!==window.document}function Ai(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function li(X){switch(X.length){case 0:return new j.ZN;case 1:return X[0];default:return new j.ZE(X)}}function ds(X,g,v,N,K={},te={}){const Te=[],Ie=[];let rt=-1,It=null;if(N.forEach(_n=>{const yn=_n.offset,fn=yn==rt,Jn=fn&&It||{};Object.keys(_n).forEach(jn=>{let gi=jn,Zi=_n[jn];if("offset"!==jn)switch(gi=g.normalizePropertyName(gi,Te),Zi){case j.k1:Zi=K[jn];break;case j.l3:Zi=te[jn];break;default:Zi=g.normalizeStyleValue(jn,gi,Zi,Te)}Jn[gi]=Zi}),fn||Ie.push(Jn),It=Jn,rt=yn}),Te.length)throw function _t(X){return new A.vHH(3502,le)}();return Ie}function ms(X,g,v,N){switch(g){case"start":X.onStart(()=>N(v&&Tr(v,"start",X)));break;case"done":X.onDone(()=>N(v&&Tr(v,"done",X)));break;case"destroy":X.onDestroy(()=>N(v&&Tr(v,"destroy",X)))}}function Tr(X,g,v){const N=v.totalTime,te=_r(X.element,X.triggerName,X.fromState,X.toState,g||X.phaseName,null==N?X.totalTime:N,!!v.disabled),Te=X._data;return null!=Te&&(te._data=Te),te}function _r(X,g,v,N,K="",te=0,Te){return{element:X,triggerName:g,fromState:v,toState:N,phaseName:K,totalTime:te,disabled:!!Te}}function Ni(X,g,v){let N;return X instanceof Map?(N=X.get(g),N||X.set(g,N=v)):(N=X[g],N||(N=X[g]=v)),N}function Br(X){const g=X.indexOf(":");return[X.substring(1,g),X.substr(g+1)]}let ns=(X,g)=>!1,Kr=(X,g,v)=>[],Un=null;function Us(X){const g=X.parentNode||X.host;return g===Un?null:g}(Ai()||"undefined"!=typeof Element)&&(Wr()?(Un=(()=>document.documentElement)(),ns=(X,g)=>{for(;g;){if(g===X)return!0;g=Us(g)}return!1}):ns=(X,g)=>X.contains(g),Kr=(X,g,v)=>{if(v)return Array.from(X.querySelectorAll(g));const N=X.querySelector(g);return N?[N]:[]});let Lr=null,hs=!1;function ki(X){Lr||(Lr=function lr(){return"undefined"!=typeof document?document.body:null}()||{},hs=!!Lr.style&&"WebkitAppearance"in Lr.style);let g=!0;return Lr.style&&!function $r(X){return"ebkit"==X.substring(1,6)}(X)&&(g=X in Lr.style,!g&&hs&&(g="Webkit"+X.charAt(0).toUpperCase()+X.substr(1)in Lr.style)),g}const Mr=ns,cr=Kr;let Sn=(()=>{class X{validateStyleProperty(v){return ki(v)}matchesElement(v,N){return!1}containsElement(v,N){return Mr(v,N)}getParentElement(v){return Us(v)}query(v,N,K){return cr(v,N,K)}computeStyle(v,N,K){return K||""}animate(v,N,K,te,Te,Ie=[],rt){return new j.ZN(K,te)}}return X.\u0275fac=function(v){return new(v||X)},X.\u0275prov=A.Yz7({token:X,factory:X.\u0275fac}),X})(),$t=(()=>{class X{}return X.NOOP=new Sn,X})();const Ki="ng-enter",zi="ng-leave",fs="ng-trigger",at=".ng-trigger",Ze="ng-animating",je=".ng-animating";function Lt(X){if("number"==typeof X)return X;const g=X.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:Pn(parseFloat(g[1]),g[2])}function Pn(X,g){return"s"===g?1e3*X:X}function si(X,g,v){return X.hasOwnProperty("duration")?X:function st(X,g,v){let K,te=0,Te="";if("string"==typeof X){const Ie=X.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ie)return g.push(Oe()),{duration:0,delay:0,easing:""};K=Pn(parseFloat(Ie[1]),Ie[2]);const rt=Ie[3];null!=rt&&(te=Pn(parseFloat(rt),Ie[4]));const It=Ie[5];It&&(Te=It)}else K=X;if(!v){let Ie=!1,rt=g.length;K<0&&(g.push(function Pe(){return new A.vHH(3100,le)}()),Ie=!0),te<0&&(g.push(function Ge(){return new A.vHH(3101,le)}()),Ie=!0),Ie&&g.splice(rt,0,Oe())}return{duration:K,delay:te,easing:Te}}(X,g,v)}function He(X,g={}){return Object.keys(X).forEach(v=>{g[v]=X[v]}),g}function nt(X,g,v={}){if(g)for(let N in X)v[N]=X[N];else He(X,v);return v}function mt(X,g,v){return v?g+":"+v+";":""}function en(X){let g="";for(let v=0;v<X.style.length;v++){const N=X.style.item(v);g+=mt(0,N,X.style.getPropertyValue(N))}for(const v in X.style)X.style.hasOwnProperty(v)&&!v.startsWith("_")&&(g+=mt(0,ae(v),X.style[v]));X.setAttribute("style",g)}function Bn(X,g,v){X.style&&(Object.keys(g).forEach(N=>{const K=me(N);v&&!v.hasOwnProperty(N)&&(v[N]=X.style[K]),X.style[K]=g[N]}),Ai()&&en(X))}function yi(X,g){X.style&&(Object.keys(g).forEach(v=>{const N=me(v);X.style[N]=""}),Ai()&&en(X))}function Rr(X){return Array.isArray(X)?1==X.length?X[0]:(0,j.vP)(X):X}const Ve=new RegExp("{{\\s*(.+?)\\s*}}","g");function ye(X){let g=[];if("string"==typeof X){let v;for(;v=Ve.exec(X);)g.push(v[1]);Ve.lastIndex=0}return g}function Ue(X,g,v){const N=X.toString(),K=N.replace(Ve,(te,Te)=>{let Ie=g[Te];return g.hasOwnProperty(Te)||(v.push(function Se(X){return new A.vHH(3003,le)}()),Ie=""),Ie.toString()});return K==N?X:K}function ct(X){const g=[];let v=X.next();for(;!v.done;)g.push(v.value),v=X.next();return g}const et=/-+([a-z0-9])/g;function me(X){return X.replace(et,(...g)=>g[1].toUpperCase())}function ae(X){return X.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ot(X,g,v){switch(g.type){case 7:return X.visitTrigger(g,v);case 0:return X.visitState(g,v);case 1:return X.visitTransition(g,v);case 2:return X.visitSequence(g,v);case 3:return X.visitGroup(g,v);case 4:return X.visitAnimate(g,v);case 5:return X.visitKeyframes(g,v);case 6:return X.visitStyle(g,v);case 8:return X.visitReference(g,v);case 9:return X.visitAnimateChild(g,v);case 10:return X.visitAnimateRef(g,v);case 11:return X.visitQuery(g,v);case 12:return X.visitStagger(g,v);default:throw function We(X){return new A.vHH(3004,le)}()}}function hn(X,g){return window.getComputedStyle(X)[g]}function ur(X,g){const v=[];return"string"==typeof X?X.split(/\s*,\s*/).forEach(N=>function gs(X,g,v){if(":"==X[0]){const rt=function ir(X,g){switch(X){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(v,N)=>parseFloat(N)>parseFloat(v);case":decrement":return(v,N)=>parseFloat(N)<parseFloat(v);default:return g.push(function xt(X){return new A.vHH(3016,le)}()),"* => *"}}(X,v);if("function"==typeof rt)return void g.push(rt);X=rt}const N=X.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==N||N.length<4)return v.push(function bt(X){return new A.vHH(3015,le)}()),g;const K=N[1],te=N[2],Te=N[3];g.push(ei(K,Te));"<"==te[0]&&!("*"==K&&"*"==Te)&&g.push(ei(Te,K))}(N,v,g)):v.push(X),v}const is=new Set(["true","1"]),Yr=new Set(["false","0"]);function ei(X,g){const v=is.has(X)||Yr.has(X),N=is.has(g)||Yr.has(g);return(K,te)=>{let Te="*"==X||X==K,Ie="*"==g||g==te;return!Te&&v&&"boolean"==typeof K&&(Te=K?is.has(X):Yr.has(X)),!Ie&&N&&"boolean"==typeof te&&(Ie=te?is.has(g):Yr.has(g)),Te&&Ie}}const Is=new RegExp("s*:selfs*,?","g");function As(X,g,v,N){return new dr(X).build(g,v,N)}class dr{constructor(g){this._driver=g}build(g,v,N){const K=new rr(v);this._resetContextStyleTimingState(K);const te=Ot(this,Rr(g),K);return K.unsupportedCSSPropertiesFound.size&&K.unsupportedCSSPropertiesFound.keys(),te}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles={},g.collectedStyles[""]={},g.currentTime=0}visitTrigger(g,v){let N=v.queryCount=0,K=v.depCount=0;const te=[],Te=[];return"@"==g.name.charAt(0)&&v.errors.push(function Y(){return new A.vHH(3006,le)}()),g.definitions.forEach(Ie=>{if(this._resetContextStyleTimingState(v),0==Ie.type){const rt=Ie,It=rt.name;It.toString().split(/\s*,\s*/).forEach(_n=>{rt.name=_n,te.push(this.visitState(rt,v))}),rt.name=It}else if(1==Ie.type){const rt=this.visitTransition(Ie,v);N+=rt.queryCount,K+=rt.depCount,Te.push(rt)}else v.errors.push(function J(){return new A.vHH(3007,le)}())}),{type:7,name:g.name,states:te,transitions:Te,queryCount:N,depCount:K,options:null}}visitState(g,v){const N=this.visitStyle(g.styles,v),K=g.options&&g.options.params||null;if(N.containsDynamicStyles){const te=new Set,Te=K||{};N.styles.forEach(Ie=>{if(Es(Ie)){const rt=Ie;Object.keys(rt).forEach(It=>{ye(rt[It]).forEach(_n=>{Te.hasOwnProperty(_n)||te.add(_n)})})}}),te.size&&(ct(te.values()),v.errors.push(function de(X,g){return new A.vHH(3008,le)}()))}return{type:0,name:g.name,style:N,options:K?{params:K}:null}}visitTransition(g,v){v.queryCount=0,v.depCount=0;const N=Ot(this,Rr(g.animation),v);return{type:1,matchers:ur(g.expr,v.errors),animation:N,queryCount:v.queryCount,depCount:v.depCount,options:vr(g.options)}}visitSequence(g,v){return{type:2,steps:g.steps.map(N=>Ot(this,N,v)),options:vr(g.options)}}visitGroup(g,v){const N=v.currentTime;let K=0;const te=g.steps.map(Te=>{v.currentTime=N;const Ie=Ot(this,Te,v);return K=Math.max(K,v.currentTime),Ie});return v.currentTime=K,{type:3,steps:te,options:vr(g.options)}}visitAnimate(g,v){const N=function Js(X,g){let v=null;if(X.hasOwnProperty("duration"))v=X;else if("number"==typeof X)return mr(si(X,g).duration,0,"");const N=X;if(N.split(/\s+/).some(te=>"{"==te.charAt(0)&&"{"==te.charAt(1))){const te=mr(0,0,"");return te.dynamic=!0,te.strValue=N,te}return v=v||si(N,g),mr(v.duration,v.delay,v.easing)}(g.timings,v.errors);v.currentAnimateTimings=N;let K,te=g.styles?g.styles:(0,j.oB)({});if(5==te.type)K=this.visitKeyframes(te,v);else{let Te=g.styles,Ie=!1;if(!Te){Ie=!0;const It={};N.easing&&(It.easing=N.easing),Te=(0,j.oB)(It)}v.currentTime+=N.duration+N.delay;const rt=this.visitStyle(Te,v);rt.isEmptyStep=Ie,K=rt}return v.currentAnimateTimings=null,{type:4,timings:N,style:K,options:null}}visitStyle(g,v){const N=this._makeStyleAst(g,v);return this._validateStyleAst(N,v),N}_makeStyleAst(g,v){const N=[];Array.isArray(g.styles)?g.styles.forEach(Te=>{"string"==typeof Te?Te==j.l3?N.push(Te):v.errors.push(function Ae(X){return new A.vHH(3002,le)}()):N.push(Te)}):N.push(g.styles);let K=!1,te=null;return N.forEach(Te=>{if(Es(Te)){const Ie=Te,rt=Ie.easing;if(rt&&(te=rt,delete Ie.easing),!K)for(let It in Ie)if(Ie[It].toString().indexOf("{{")>=0){K=!0;break}}}),{type:6,styles:N,easing:te,offset:g.offset,containsDynamicStyles:K,options:null}}_validateStyleAst(g,v){const N=v.currentAnimateTimings;let K=v.currentTime,te=v.currentTime;N&&te>0&&(te-=N.duration+N.delay),g.styles.forEach(Te=>{"string"!=typeof Te&&Object.keys(Te).forEach(Ie=>{if(!this._driver.validateStyleProperty(Ie))return delete Te[Ie],void v.unsupportedCSSPropertiesFound.add(Ie);const rt=v.collectedStyles[v.currentQuerySelector],It=rt[Ie];let _n=!0;It&&(te!=K&&te>=It.startTime&&K<=It.endTime&&(v.errors.push(function Ne(X,g,v,N,K){return new A.vHH(3010,le)}()),_n=!1),te=It.startTime),_n&&(rt[Ie]={startTime:te,endTime:K}),v.options&&function Ye(X,g,v){const N=g.params||{},K=ye(X);K.length&&K.forEach(te=>{N.hasOwnProperty(te)||v.push(function Me(X){return new A.vHH(3001,le)}())})}(Te[Ie],v.options,v.errors)})})}visitKeyframes(g,v){const N={type:5,styles:[],options:null};if(!v.currentAnimateTimings)return v.errors.push(function Mt(){return new A.vHH(3011,le)}()),N;let te=0;const Te=[];let Ie=!1,rt=!1,It=0;const _n=g.steps.map(Hr=>{const ps=this._makeStyleAst(Hr,v);let Ji=null!=ps.offset?ps.offset:function vi(X){if("string"==typeof X)return null;let g=null;if(Array.isArray(X))X.forEach(v=>{if(Es(v)&&v.hasOwnProperty("offset")){const N=v;g=parseFloat(N.offset),delete N.offset}});else if(Es(X)&&X.hasOwnProperty("offset")){const v=X;g=parseFloat(v.offset),delete v.offset}return g}(ps.styles),ue=0;return null!=Ji&&(te++,ue=ps.offset=Ji),rt=rt||ue<0||ue>1,Ie=Ie||ue<It,It=ue,Te.push(ue),ps});rt&&v.errors.push(function Dt(){return new A.vHH(3012,le)}()),Ie&&v.errors.push(function lt(){return new A.vHH(3200,le)}());const yn=g.steps.length;let fn=0;te>0&&te<yn?v.errors.push(function Ee(){return new A.vHH(3202,le)}()):0==te&&(fn=1/(yn-1));const Jn=yn-1,jn=v.currentTime,gi=v.currentAnimateTimings,Zi=gi.duration;return _n.forEach((Hr,ps)=>{const Ji=fn>0?ps==Jn?1:fn*ps:Te[ps],ue=Ji*Zi;v.currentTime=jn+gi.delay+ue,gi.duration=ue,this._validateStyleAst(Hr,v),Hr.offset=Ji,N.styles.push(Hr)}),N}visitReference(g,v){return{type:8,animation:Ot(this,Rr(g.animation),v),options:vr(g.options)}}visitAnimateChild(g,v){return v.depCount++,{type:9,options:vr(g.options)}}visitAnimateRef(g,v){return{type:10,animation:this.visitReference(g.animation,v),options:vr(g.options)}}visitQuery(g,v){const N=v.currentQuerySelector,K=g.options||{};v.queryCount++,v.currentQuery=g;const[te,Te]=function ss(X){const g=!!X.split(/\s*,\s*/).find(v=>":self"==v);return g&&(X=X.replace(Is,"")),X=X.replace(/@\*/g,at).replace(/@\w+/g,v=>at+"-"+v.substr(1)).replace(/:animating/g,je),[X,g]}(g.selector);v.currentQuerySelector=N.length?N+" "+te:te,Ni(v.collectedStyles,v.currentQuerySelector,{});const Ie=Ot(this,Rr(g.animation),v);return v.currentQuery=null,v.currentQuerySelector=N,{type:11,selector:te,limit:K.limit||0,optional:!!K.optional,includeSelf:Te,animation:Ie,originalSelector:g.selector,options:vr(g.options)}}visitStagger(g,v){v.currentQuery||v.errors.push(function ut(){return new A.vHH(3013,le)}());const N="full"===g.timings?{duration:0,delay:0,easing:"full"}:si(g.timings,v.errors,!0);return{type:12,animation:Ot(this,Rr(g.animation),v),timings:N,options:null}}}class rr{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Es(X){return!Array.isArray(X)&&"object"==typeof X}function vr(X){return X?(X=He(X)).params&&(X.params=function Ps(X){return X?He(X):null}(X.params)):X={},X}function mr(X,g,v){return{duration:X,delay:g,easing:v}}function Qs(X,g,v,N,K,te,Te=null,Ie=!1){return{type:1,element:X,keyframes:g,preStyleProps:v,postStyleProps:N,duration:K,delay:te,totalTime:K+te,easing:Te,subTimeline:Ie}}class fo{constructor(){this._map=new Map}get(g){return this._map.get(g)||[]}append(g,v){let N=this._map.get(g);N||this._map.set(g,N=[]),N.push(...v)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const eo=new RegExp(":enter","g"),Gs=new RegExp(":leave","g");function br(X,g,v,N,K,te={},Te={},Ie,rt,It=[]){return(new we).buildKeyframes(X,g,v,N,K,te,Te,Ie,rt,It)}class we{buildKeyframes(g,v,N,K,te,Te,Ie,rt,It,_n=[]){It=It||new fo;const yn=new H(g,v,It,K,te,_n,[]);yn.options=rt,yn.currentTimeline.setStyles([Te],null,yn.errors,rt),Ot(this,N,yn);const fn=yn.timelines.filter(Jn=>Jn.containsAnimation());if(Object.keys(Ie).length){let Jn;for(let jn=fn.length-1;jn>=0;jn--){const gi=fn[jn];if(gi.element===v){Jn=gi;break}}Jn&&!Jn.allowOnlyTimelineStyles()&&Jn.setStyles([Ie],null,yn.errors,rt)}return fn.length?fn.map(Jn=>Jn.buildKeyframes()):[Qs(v,[],[],[],0,0,"",!1)]}visitTrigger(g,v){}visitState(g,v){}visitTransition(g,v){}visitAnimateChild(g,v){const N=v.subInstructions.get(v.element);if(N){const K=v.createSubContext(g.options),te=v.currentTimeline.currentTime,Te=this._visitSubInstructions(N,K,K.options);te!=Te&&v.transformIntoNewTimeline(Te)}v.previousNode=g}visitAnimateRef(g,v){const N=v.createSubContext(g.options);N.transformIntoNewTimeline(),this.visitReference(g.animation,N),v.transformIntoNewTimeline(N.currentTimeline.currentTime),v.previousNode=g}_visitSubInstructions(g,v,N){let te=v.currentTimeline.currentTime;const Te=null!=N.duration?Lt(N.duration):null,Ie=null!=N.delay?Lt(N.delay):null;return 0!==Te&&g.forEach(rt=>{const It=v.appendInstructionToTimeline(rt,Te,Ie);te=Math.max(te,It.duration+It.delay)}),te}visitReference(g,v){v.updateOptions(g.options,!0),Ot(this,g.animation,v),v.previousNode=g}visitSequence(g,v){const N=v.subContextCount;let K=v;const te=g.options;if(te&&(te.params||te.delay)&&(K=v.createSubContext(te),K.transformIntoNewTimeline(),null!=te.delay)){6==K.previousNode.type&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=z);const Te=Lt(te.delay);K.delayNextStep(Te)}g.steps.length&&(g.steps.forEach(Te=>Ot(this,Te,K)),K.currentTimeline.applyStylesToKeyframe(),K.subContextCount>N&&K.transformIntoNewTimeline()),v.previousNode=g}visitGroup(g,v){const N=[];let K=v.currentTimeline.currentTime;const te=g.options&&g.options.delay?Lt(g.options.delay):0;g.steps.forEach(Te=>{const Ie=v.createSubContext(g.options);te&&Ie.delayNextStep(te),Ot(this,Te,Ie),K=Math.max(K,Ie.currentTimeline.currentTime),N.push(Ie.currentTimeline)}),N.forEach(Te=>v.currentTimeline.mergeTimelineCollectedStyles(Te)),v.transformIntoNewTimeline(K),v.previousNode=g}_visitTiming(g,v){if(g.dynamic){const N=g.strValue;return si(v.params?Ue(N,v.params,v.errors):N,v.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,v){const N=v.currentAnimateTimings=this._visitTiming(g.timings,v),K=v.currentTimeline;N.delay&&(v.incrementTime(N.delay),K.snapshotCurrentStyles());const te=g.style;5==te.type?this.visitKeyframes(te,v):(v.incrementTime(N.duration),this.visitStyle(te,v),K.applyStylesToKeyframe()),v.currentAnimateTimings=null,v.previousNode=g}visitStyle(g,v){const N=v.currentTimeline,K=v.currentAnimateTimings;!K&&N.getCurrentStyleProperties().length&&N.forwardFrame();const te=K&&K.easing||g.easing;g.isEmptyStep?N.applyEmptyStep(te):N.setStyles(g.styles,te,v.errors,v.options),v.previousNode=g}visitKeyframes(g,v){const N=v.currentAnimateTimings,K=v.currentTimeline.duration,te=N.duration,Ie=v.createSubContext().currentTimeline;Ie.easing=N.easing,g.styles.forEach(rt=>{Ie.forwardTime((rt.offset||0)*te),Ie.setStyles(rt.styles,rt.easing,v.errors,v.options),Ie.applyStylesToKeyframe()}),v.currentTimeline.mergeTimelineCollectedStyles(Ie),v.transformIntoNewTimeline(K+te),v.previousNode=g}visitQuery(g,v){const N=v.currentTimeline.currentTime,K=g.options||{},te=K.delay?Lt(K.delay):0;te&&(6===v.previousNode.type||0==N&&v.currentTimeline.getCurrentStyleProperties().length)&&(v.currentTimeline.snapshotCurrentStyles(),v.previousNode=z);let Te=N;const Ie=v.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!K.optional,v.errors);v.currentQueryTotal=Ie.length;let rt=null;Ie.forEach((It,_n)=>{v.currentQueryIndex=_n;const yn=v.createSubContext(g.options,It);te&&yn.delayNextStep(te),It===v.element&&(rt=yn.currentTimeline),Ot(this,g.animation,yn),yn.currentTimeline.applyStylesToKeyframe(),Te=Math.max(Te,yn.currentTimeline.currentTime)}),v.currentQueryIndex=0,v.currentQueryTotal=0,v.transformIntoNewTimeline(Te),rt&&(v.currentTimeline.mergeTimelineCollectedStyles(rt),v.currentTimeline.snapshotCurrentStyles()),v.previousNode=g}visitStagger(g,v){const N=v.parentContext,K=v.currentTimeline,te=g.timings,Te=Math.abs(te.duration),Ie=Te*(v.currentQueryTotal-1);let rt=Te*v.currentQueryIndex;switch(te.duration<0?"reverse":te.easing){case"reverse":rt=Ie-rt;break;case"full":rt=N.currentStaggerTime}const _n=v.currentTimeline;rt&&_n.delayNextStep(rt);const yn=_n.currentTime;Ot(this,g.animation,v),v.previousNode=g,N.currentStaggerTime=K.currentTime-yn+(K.startTime-N.currentTimeline.startTime)}}const z={};class H{constructor(g,v,N,K,te,Te,Ie,rt){this._driver=g,this.element=v,this.subInstructions=N,this._enterClassName=K,this._leaveClassName=te,this.errors=Te,this.timelines=Ie,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=z,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=rt||new re(this._driver,v,0),Ie.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,v){if(!g)return;const N=g;let K=this.options;null!=N.duration&&(K.duration=Lt(N.duration)),null!=N.delay&&(K.delay=Lt(N.delay));const te=N.params;if(te){let Te=K.params;Te||(Te=this.options.params={}),Object.keys(te).forEach(Ie=>{(!v||!Te.hasOwnProperty(Ie))&&(Te[Ie]=Ue(te[Ie],Te,this.errors))})}}_copyOptions(){const g={};if(this.options){const v=this.options.params;if(v){const N=g.params={};Object.keys(v).forEach(K=>{N[K]=v[K]})}}return g}createSubContext(g=null,v,N){const K=v||this.element,te=new H(this._driver,K,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(K,N||0));return te.previousNode=this.previousNode,te.currentAnimateTimings=this.currentAnimateTimings,te.options=this._copyOptions(),te.updateOptions(g),te.currentQueryIndex=this.currentQueryIndex,te.currentQueryTotal=this.currentQueryTotal,te.parentContext=this,this.subContextCount++,te}transformIntoNewTimeline(g){return this.previousNode=z,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,v,N){const K={duration:null!=v?v:g.duration,delay:this.currentTimeline.currentTime+(null!=N?N:0)+g.delay,easing:""},te=new De(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,K,g.stretchStartingKeyframe);return this.timelines.push(te),K}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,v,N,K,te,Te){let Ie=[];if(K&&Ie.push(this.element),g.length>0){g=(g=g.replace(eo,"."+this._enterClassName)).replace(Gs,"."+this._leaveClassName);let It=this._driver.query(this.element,g,1!=N);0!==N&&(It=N<0?It.slice(It.length+N,It.length):It.slice(0,N)),Ie.push(...It)}return!te&&0==Ie.length&&Te.push(function St(X){return new A.vHH(3014,le)}()),Ie}}class re{constructor(g,v,N,K){this._driver=g,this.element=v,this.startTime=N,this._elementTimelineStylesLookup=K,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(v),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(v,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const v=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||v?(this.forwardTime(this.currentTime+g),v&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,v){return this.applyStylesToKeyframe(),new re(this._driver,g,v||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,v){this._localTimelineStyles[g]=v,this._globalTimelineStyles[g]=v,this._styleSummary[g]={time:this.currentTime,value:v}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&(this._previousKeyframe.easing=g),Object.keys(this._globalTimelineStyles).forEach(v=>{this._backFill[v]=this._globalTimelineStyles[v]||j.l3,this._currentKeyframe[v]=j.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,v,N,K){v&&(this._previousKeyframe.easing=v);const te=K&&K.params||{},Te=function Tt(X,g){const v={};let N;return X.forEach(K=>{"*"===K?(N=N||Object.keys(g),N.forEach(te=>{v[te]=j.l3})):nt(K,!1,v)}),v}(g,this._globalTimelineStyles);Object.keys(Te).forEach(Ie=>{const rt=Ue(Te[Ie],te,N);this._pendingStyles[Ie]=rt,this._localTimelineStyles.hasOwnProperty(Ie)||(this._backFill[Ie]=this._globalTimelineStyles.hasOwnProperty(Ie)?this._globalTimelineStyles[Ie]:j.l3),this._updateStyle(Ie,rt)})}applyStylesToKeyframe(){const g=this._pendingStyles,v=Object.keys(g);0!=v.length&&(this._pendingStyles={},v.forEach(N=>{this._currentKeyframe[N]=g[N]}),Object.keys(this._localTimelineStyles).forEach(N=>{this._currentKeyframe.hasOwnProperty(N)||(this._currentKeyframe[N]=this._localTimelineStyles[N])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(g=>{const v=this._localTimelineStyles[g];this._pendingStyles[g]=v,this._updateStyle(g,v)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let v in this._currentKeyframe)g.push(v);return g}mergeTimelineCollectedStyles(g){Object.keys(g._styleSummary).forEach(v=>{const N=this._styleSummary[v],K=g._styleSummary[v];(!N||K.time>N.time)&&this._updateStyle(v,K.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,v=new Set,N=1===this._keyframes.size&&0===this.duration;let K=[];this._keyframes.forEach((Ie,rt)=>{const It=nt(Ie,!0);Object.keys(It).forEach(_n=>{const yn=It[_n];yn==j.k1?g.add(_n):yn==j.l3&&v.add(_n)}),N||(It.offset=rt/this.duration),K.push(It)});const te=g.size?ct(g.values()):[],Te=v.size?ct(v.values()):[];if(N){const Ie=K[0],rt=He(Ie);Ie.offset=0,rt.offset=1,K=[Ie,rt]}return Qs(this.element,K,te,Te,this.duration,this.startTime,this.easing,!1)}}class De extends re{constructor(g,v,N,K,te,Te,Ie=!1){super(g,v,Te.delay),this.keyframes=N,this.preStyleProps=K,this.postStyleProps=te,this._stretchStartingKeyframe=Ie,this.timings={duration:Te.duration,delay:Te.delay,easing:Te.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:v,duration:N,easing:K}=this.timings;if(this._stretchStartingKeyframe&&v){const te=[],Te=N+v,Ie=v/Te,rt=nt(g[0],!1);rt.offset=0,te.push(rt);const It=nt(g[0],!1);It.offset=Ke(Ie),te.push(It);const _n=g.length-1;for(let yn=1;yn<=_n;yn++){let fn=nt(g[yn],!1);fn.offset=Ke((v+fn.offset*N)/Te),te.push(fn)}N=Te,v=0,K="",g=te}return Qs(this.element,g,this.preStyleProps,this.postStyleProps,N,v,K,!0)}}function Ke(X,g=3){const v=Math.pow(10,g-1);return Math.round(X*v)/v}class Ln{}class ti extends Ln{normalizePropertyName(g,v){return me(g)}normalizeStyleValue(g,v,N,K){let te="";const Te=N.toString().trim();if(Vr[v]&&0!==N&&"0"!==N)if("number"==typeof N)te="px";else{const Ie=N.match(/^[+-]?[\d\.]+([a-z]*)$/);Ie&&0==Ie[1].length&&K.push(function S(X,g){return new A.vHH(3005,le)}())}return Te+te}}const Vr=(()=>function wo(X){const g={};return X.forEach(v=>g[v]=!0),g}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Jr(X,g,v,N,K,te,Te,Ie,rt,It,_n,yn,fn){return{type:0,element:X,triggerName:g,isRemovalTransition:K,fromState:v,fromStyles:te,toState:N,toStyles:Te,timelines:Ie,queriedElements:rt,preStyleProps:It,postStyleProps:_n,totalTime:yn,errors:fn}}const qr={};class Eo{constructor(g,v,N){this._triggerName=g,this.ast=v,this._stateStyles=N}match(g,v,N,K){return function oo(X,g,v,N,K){return X.some(te=>te(g,v,N,K))}(this.ast.matchers,g,v,N,K)}buildStyles(g,v,N){const K=this._stateStyles["*"],te=this._stateStyles[g],Te=K?K.buildStyles(v,N):{};return te?te.buildStyles(v,N):Te}build(g,v,N,K,te,Te,Ie,rt,It,_n){const yn=[],fn=this.ast.options&&this.ast.options.params||qr,jn=this.buildStyles(N,Ie&&Ie.params||qr,yn),gi=rt&&rt.params||qr,Zi=this.buildStyles(K,gi,yn),Hr=new Set,ps=new Map,Ji=new Map,ue="void"===K,L={params:Object.assign(Object.assign({},fn),gi)},I=_n?[]:br(g,v,this.ast.animation,te,Te,jn,Zi,L,It,yn);let E=0;if(I.forEach(it=>{E=Math.max(it.duration+it.delay,E)}),yn.length)return Jr(v,this._triggerName,N,K,ue,jn,Zi,[],[],ps,Ji,E,yn);I.forEach(it=>{const sn=it.element,Li=Ni(ps,sn,{});it.preStyleProps.forEach(Cr=>Li[Cr]=!0);const or=Ni(Ji,sn,{});it.postStyleProps.forEach(Cr=>or[Cr]=!0),sn!==v&&Hr.add(sn)});const W=ct(Hr.values());return Jr(v,this._triggerName,N,K,ue,jn,Zi,I,W,ps,Ji,E)}}class gl{constructor(g,v,N){this.styles=g,this.defaultParams=v,this.normalizer=N}buildStyles(g,v){const N={},K=He(this.defaultParams);return Object.keys(g).forEach(te=>{const Te=g[te];null!=Te&&(K[te]=Te)}),this.styles.styles.forEach(te=>{if("string"!=typeof te){const Te=te;Object.keys(Te).forEach(Ie=>{let rt=Te[Ie];rt.length>1&&(rt=Ue(rt,K,v));const It=this.normalizer.normalizePropertyName(Ie,v);rt=this.normalizer.normalizeStyleValue(Ie,It,rt,v),N[It]=rt})}}),N}}class Oo{constructor(g,v,N){this.name=g,this.ast=v,this._normalizer=N,this.transitionFactories=[],this.states={},v.states.forEach(K=>{this.states[K.name]=new gl(K.style,K.options&&K.options.params||{},N)}),Mo(this.states,"true","1"),Mo(this.states,"false","0"),v.transitions.forEach(K=>{this.transitionFactories.push(new Eo(g,K,this.states))}),this.fallbackTransition=function ja(X,g,v){return new Eo(X,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Te,Ie)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,v,N,K){return this.transitionFactories.find(Te=>Te.match(g,v,N,K))||null}matchStyles(g,v,N){return this.fallbackTransition.buildStyles(g,v,N)}}function Mo(X,g,v){X.hasOwnProperty(g)?X.hasOwnProperty(v)||(X[v]=X[g]):X.hasOwnProperty(v)&&(X[g]=X[v])}const ra=new fo;class $a{constructor(g,v,N){this.bodyNode=g,this._driver=v,this._normalizer=N,this._animations={},this._playersById={},this.players=[]}register(g,v){const N=[],te=As(this._driver,v,N,[]);if(N.length)throw function Vt(X){return new A.vHH(3503,le)}();this._animations[g]=te}_buildPlayer(g,v,N){const K=g.element,te=ds(0,this._normalizer,0,g.keyframes,v,N);return this._driver.animate(K,te,g.duration,g.delay,g.easing,[],!0)}create(g,v,N={}){const K=[],te=this._animations[g];let Te;const Ie=new Map;if(te?(Te=br(this._driver,v,te,Ki,zi,{},{},N,ra,K),Te.forEach(_n=>{const yn=Ni(Ie,_n.element,{});_n.postStyleProps.forEach(fn=>yn[fn]=null)})):(K.push(function yt(){return new A.vHH(3300,le)}()),Te=[]),K.length)throw function ri(X){return new A.vHH(3504,le)}();Ie.forEach((_n,yn)=>{Object.keys(_n).forEach(fn=>{_n[fn]=this._driver.computeStyle(yn,fn,j.l3)})});const It=li(Te.map(_n=>{const yn=Ie.get(_n.element);return this._buildPlayer(_n,{},yn)}));return this._playersById[g]=It,It.onDestroy(()=>this.destroy(g)),this.players.push(It),It}destroy(g){const v=this._getPlayer(g);v.destroy(),delete this._playersById[g];const N=this.players.indexOf(v);N>=0&&this.players.splice(N,1)}_getPlayer(g){const v=this._playersById[g];if(!v)throw function hi(X){return new A.vHH(3301,le)}();return v}listen(g,v,N,K){const te=_r(v,"","","");return ms(this._getPlayer(g),N,te,K),()=>{}}command(g,v,N,K){if("register"==N)return void this.register(g,K[0]);if("create"==N)return void this.create(g,v,K[0]||{});const te=this._getPlayer(g);switch(N){case"play":te.play();break;case"pause":te.pause();break;case"reset":te.reset();break;case"restart":te.restart();break;case"finish":te.finish();break;case"init":te.init();break;case"setPosition":te.setPosition(parseFloat(K[0]));break;case"destroy":this.destroy(g)}}}const Ya="ng-animate-queued",Os="ng-animate-disabled",Ms=[],So={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},os="__ng_removed";class Bo{constructor(g,v=""){this.namespaceId=v;const N=g&&g.hasOwnProperty("value");if(this.value=function U(X){return null!=X?X:null}(N?g.value:g),N){const te=He(g);delete te.value,this.options=te}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(g){const v=g.params;if(v){const N=this.options.params;Object.keys(v).forEach(K=>{null==N[K]&&(N[K]=v[K])})}}}const Vo="void",po=new Bo(Vo);class jo{constructor(g,v,N){this.id=g,this.hostElement=v,this._engine=N,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,Pt(v,this._hostClassName)}listen(g,v,N,K){if(!this._triggers.hasOwnProperty(v))throw function di(X,g){return new A.vHH(3302,le)}();if(null==N||0==N.length)throw function Tn(X){return new A.vHH(3303,le)}();if(!function V(X){return"start"==X||"done"==X}(N))throw function gn(X,g){return new A.vHH(3400,le)}();const te=Ni(this._elementListeners,g,[]),Te={name:v,phase:N,callback:K};te.push(Te);const Ie=Ni(this._engine.statesByElement,g,{});return Ie.hasOwnProperty(v)||(Pt(g,fs),Pt(g,fs+"-"+v),Ie[v]=po),()=>{this._engine.afterFlush(()=>{const rt=te.indexOf(Te);rt>=0&&te.splice(rt,1),this._triggers[v]||delete Ie[v]})}}register(g,v){return!this._triggers[g]&&(this._triggers[g]=v,!0)}_getTrigger(g){const v=this._triggers[g];if(!v)throw function fi(X){return new A.vHH(3401,le)}();return v}trigger(g,v,N,K=!0){const te=this._getTrigger(v),Te=new oa(this.id,v,g);let Ie=this._engine.statesByElement.get(g);Ie||(Pt(g,fs),Pt(g,fs+"-"+v),this._engine.statesByElement.set(g,Ie={}));let rt=Ie[v];const It=new Bo(N,this.id);if(!(N&&N.hasOwnProperty("value"))&&rt&&It.absorbOptions(rt.options),Ie[v]=It,rt||(rt=po),It.value!==Vo&&rt.value===It.value){if(!function Bi(X,g){const v=Object.keys(X),N=Object.keys(g);if(v.length!=N.length)return!1;for(let K=0;K<v.length;K++){const te=v[K];if(!g.hasOwnProperty(te)||X[te]!==g[te])return!1}return!0}(rt.params,It.params)){const gi=[],Zi=te.matchStyles(rt.value,rt.params,gi),Hr=te.matchStyles(It.value,It.params,gi);gi.length?this._engine.reportError(gi):this._engine.afterFlush(()=>{yi(g,Zi),Bn(g,Hr)})}return}const fn=Ni(this._engine.playersByElement,g,[]);fn.forEach(gi=>{gi.namespaceId==this.id&&gi.triggerName==v&&gi.queued&&gi.destroy()});let Jn=te.matchTransition(rt.value,It.value,g,It.params),jn=!1;if(!Jn){if(!K)return;Jn=te.fallbackTransition,jn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:v,transition:Jn,fromState:rt,toState:It,player:Te,isFallbackTransition:jn}),jn||(Pt(g,Ya),Te.onStart(()=>{cn(g,Ya)})),Te.onDone(()=>{let gi=this.players.indexOf(Te);gi>=0&&this.players.splice(gi,1);const Zi=this._engine.playersByElement.get(g);if(Zi){let Hr=Zi.indexOf(Te);Hr>=0&&Zi.splice(Hr,1)}}),this.players.push(Te),fn.push(Te),Te}deregister(g){delete this._triggers[g],this._engine.statesByElement.forEach((v,N)=>{delete v[g]}),this._elementListeners.forEach((v,N)=>{this._elementListeners.set(N,v.filter(K=>K.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const v=this._engine.playersByElement.get(g);v&&(v.forEach(N=>N.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,v){const N=this._engine.driver.query(g,at,!0);N.forEach(K=>{if(K[os])return;const te=this._engine.fetchNamespacesByElement(K);te.size?te.forEach(Te=>Te.triggerLeaveAnimation(K,v,!1,!0)):this.clearElementCache(K)}),this._engine.afterFlushAnimationsDone(()=>N.forEach(K=>this.clearElementCache(K)))}triggerLeaveAnimation(g,v,N,K){const te=this._engine.statesByElement.get(g),Te=new Map;if(te){const Ie=[];if(Object.keys(te).forEach(rt=>{if(Te.set(rt,te[rt].value),this._triggers[rt]){const It=this.trigger(g,rt,Vo,K);It&&Ie.push(It)}}),Ie.length)return this._engine.markElementAsRemoved(this.id,g,!0,v,Te),N&&li(Ie).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const v=this._elementListeners.get(g),N=this._engine.statesByElement.get(g);if(v&&N){const K=new Set;v.forEach(te=>{const Te=te.name;if(K.has(Te))return;K.add(Te);const rt=this._triggers[Te].fallbackTransition,It=N[Te]||po,_n=new Bo(Vo),yn=new oa(this.id,Te,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:Te,transition:rt,fromState:It,toState:_n,player:yn,isFallbackTransition:!0})})}}removeNode(g,v){const N=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,v),this.triggerLeaveAnimation(g,v,!0))return;let K=!1;if(N.totalAnimations){const te=N.players.length?N.playersByQueriedElement.get(g):[];if(te&&te.length)K=!0;else{let Te=g;for(;Te=Te.parentNode;)if(N.statesByElement.get(Te)){K=!0;break}}}if(this.prepareLeaveAnimationListeners(g),K)N.markElementAsRemoved(this.id,g,!1,v);else{const te=g[os];(!te||te===So)&&(N.afterFlush(()=>this.clearElementCache(g)),N.destroyInnerAnimations(g),N._onRemovalComplete(g,v))}}insertNode(g,v){Pt(g,this._hostClassName)}drainQueuedTransitions(g){const v=[];return this._queue.forEach(N=>{const K=N.player;if(K.destroyed)return;const te=N.element,Te=this._elementListeners.get(te);Te&&Te.forEach(Ie=>{if(Ie.name==N.triggerName){const rt=_r(te,N.triggerName,N.fromState.value,N.toState.value);rt._data=g,ms(N.player,Ie.phase,rt,Ie.callback)}}),K.markedForDestroy?this._engine.afterFlush(()=>{K.destroy()}):v.push(N)}),this._queue=[],v.sort((N,K)=>{const te=N.transition.ast.depCount,Te=K.transition.ast.depCount;return 0==te||0==Te?te-Te:this._engine.driver.containsElement(N.element,K.element)?1:-1})}destroy(g){this.players.forEach(v=>v.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}elementContainsData(g){let v=!1;return this._elementListeners.has(g)&&(v=!0),v=!!this._queue.find(N=>N.element===g)||v,v}}class Da{constructor(g,v,N){this.bodyNode=g,this.driver=v,this._normalizer=N,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(K,te)=>{}}_onRemovalComplete(g,v){this.onRemovalComplete(g,v)}get queuedPlayers(){const g=[];return this._namespaceList.forEach(v=>{v.players.forEach(N=>{N.queued&&g.push(N)})}),g}createNamespace(g,v){const N=new jo(g,v,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,v)?this._balanceNamespaceList(N,v):(this.newHostElements.set(v,N),this.collectEnterElement(v)),this._namespaceLookup[g]=N}_balanceNamespaceList(g,v){const N=this._namespaceList,K=this.namespacesByHostElement,te=N.length-1;if(te>=0){let Te=!1;if(void 0!==this.driver.getParentElement){let Ie=this.driver.getParentElement(v);for(;Ie;){const rt=K.get(Ie);if(rt){const It=N.indexOf(rt);N.splice(It+1,0,g),Te=!0;break}Ie=this.driver.getParentElement(Ie)}}else for(let Ie=te;Ie>=0;Ie--)if(this.driver.containsElement(N[Ie].hostElement,v)){N.splice(Ie+1,0,g),Te=!0;break}Te||N.unshift(g)}else N.push(g);return K.set(v,g),g}register(g,v){let N=this._namespaceLookup[g];return N||(N=this.createNamespace(g,v)),N}registerTrigger(g,v,N){let K=this._namespaceLookup[g];K&&K.register(v,N)&&this.totalAnimations++}destroy(g,v){if(!g)return;const N=this._fetchNamespace(g);this.afterFlush(()=>{this.namespacesByHostElement.delete(N.hostElement),delete this._namespaceLookup[g];const K=this._namespaceList.indexOf(N);K>=0&&this._namespaceList.splice(K,1)}),this.afterFlushAnimationsDone(()=>N.destroy(v))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const v=new Set,N=this.statesByElement.get(g);if(N){const K=Object.keys(N);for(let te=0;te<K.length;te++){const Te=N[K[te]].namespaceId;if(Te){const Ie=this._fetchNamespace(Te);Ie&&v.add(Ie)}}}return v}trigger(g,v,N,K){if(ee(v)){const te=this._fetchNamespace(g);if(te)return te.trigger(v,N,K),!0}return!1}insertNode(g,v,N,K){if(!ee(v))return;const te=v[os];if(te&&te.setForRemoval){te.setForRemoval=!1,te.setForMove=!0;const Te=this.collectedLeaveElements.indexOf(v);Te>=0&&this.collectedLeaveElements.splice(Te,1)}if(g){const Te=this._fetchNamespace(g);Te&&Te.insertNode(v,N)}K&&this.collectEnterElement(v)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,v){v?this.disabledNodes.has(g)||(this.disabledNodes.add(g),Pt(g,Os)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),cn(g,Os))}removeNode(g,v,N,K){if(ee(v)){const te=g?this._fetchNamespace(g):null;if(te?te.removeNode(v,K):this.markElementAsRemoved(g,v,!1,K),N){const Te=this.namespacesByHostElement.get(v);Te&&Te.id!==g&&Te.removeNode(v,K)}}else this._onRemovalComplete(v,K)}markElementAsRemoved(g,v,N,K,te){this.collectedLeaveElements.push(v),v[os]={namespaceId:g,setForRemoval:K,hasAnimation:N,removedBeforeQueried:!1,previousTriggersValues:te}}listen(g,v,N,K,te){return ee(v)?this._fetchNamespace(g).listen(v,N,K,te):()=>{}}_buildInstruction(g,v,N,K,te){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,N,K,g.fromState.options,g.toState.options,v,te)}destroyInnerAnimations(g){let v=this.driver.query(g,at,!0);v.forEach(N=>this.destroyActiveAnimationsForElement(N)),0!=this.playersByQueriedElement.size&&(v=this.driver.query(g,je,!0),v.forEach(N=>this.finishActiveQueriedAnimationOnElement(N)))}destroyActiveAnimationsForElement(g){const v=this.playersByElement.get(g);v&&v.forEach(N=>{N.queued?N.markedForDestroy=!0:N.destroy()})}finishActiveQueriedAnimationOnElement(g){const v=this.playersByQueriedElement.get(g);v&&v.forEach(N=>N.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return li(this.players).onDone(()=>g());g()})}processLeaveNode(g){var v;const N=g[os];if(N&&N.setForRemoval){if(g[os]=So,N.namespaceId){this.destroyInnerAnimations(g);const K=this._fetchNamespace(N.namespaceId);K&&K.clearElementCache(g)}this._onRemovalComplete(g,N.setForRemoval)}(null===(v=g.classList)||void 0===v?void 0:v.contains(Os))&&this.markElementAsDisabled(g,!1),this.driver.query(g,".ng-animate-disabled",!0).forEach(K=>{this.markElementAsDisabled(K,!1)})}flush(g=-1){let v=[];if(this.newHostElements.size&&(this.newHostElements.forEach((N,K)=>this._balanceNamespaceList(N,K)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let N=0;N<this.collectedEnterElements.length;N++)Pt(this.collectedEnterElements[N],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const N=[];try{v=this._flushAnimations(N,g)}finally{for(let K=0;K<N.length;K++)N[K]()}}else for(let N=0;N<this.collectedLeaveElements.length;N++)this.processLeaveNode(this.collectedLeaveElements[N]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(N=>N()),this._flushFns=[],this._whenQuietFns.length){const N=this._whenQuietFns;this._whenQuietFns=[],v.length?li(v).onDone(()=>{N.forEach(K=>K())}):N.forEach(K=>K())}}reportError(g){throw function In(X){return new A.vHH(3402,le)}()}_flushAnimations(g,v){const N=new fo,K=[],te=new Map,Te=[],Ie=new Map,rt=new Map,It=new Map,_n=new Set;this.disabledNodes.forEach(mn=>{_n.add(mn);const On=this.driver.query(mn,".ng-animate-queued",!0);for(let ii=0;ii<On.length;ii++)_n.add(On[ii])});const yn=this.bodyNode,fn=Array.from(this.statesByElement.keys()),Jn=wt(fn,this.collectedEnterElements),jn=new Map;let gi=0;Jn.forEach((mn,On)=>{const ii=Ki+gi++;jn.set(On,ii),mn.forEach(qn=>Pt(qn,ii))});const Zi=[],Hr=new Set,ps=new Set;for(let mn=0;mn<this.collectedLeaveElements.length;mn++){const On=this.collectedLeaveElements[mn],ii=On[os];ii&&ii.setForRemoval&&(Zi.push(On),Hr.add(On),ii.hasAnimation?this.driver.query(On,".ng-star-inserted",!0).forEach(qn=>Hr.add(qn)):ps.add(On))}const Ji=new Map,ue=wt(fn,Array.from(Hr));ue.forEach((mn,On)=>{const ii=zi+gi++;Ji.set(On,ii),mn.forEach(qn=>Pt(qn,ii))}),g.push(()=>{Jn.forEach((mn,On)=>{const ii=jn.get(On);mn.forEach(qn=>cn(qn,ii))}),ue.forEach((mn,On)=>{const ii=Ji.get(On);mn.forEach(qn=>cn(qn,ii))}),Zi.forEach(mn=>{this.processLeaveNode(mn)})});const L=[],I=[];for(let mn=this._namespaceList.length-1;mn>=0;mn--)this._namespaceList[mn].drainQueuedTransitions(v).forEach(ii=>{const qn=ii.player,wr=ii.element;if(L.push(qn),this.collectedEnterElements.length){const Xr=wr[os];if(Xr&&Xr.setForMove){if(Xr.previousTriggersValues&&Xr.previousTriggersValues.has(ii.triggerName)){const Yo=Xr.previousTriggersValues.get(ii.triggerName),Ys=this.statesByElement.get(ii.element);Ys&&Ys[ii.triggerName]&&(Ys[ii.triggerName].value=Yo)}return void qn.destroy()}}const co=!yn||!this.driver.containsElement(yn,wr),js=Ji.get(wr),$s=jn.get(wr),er=this._buildInstruction(ii,N,$s,js,co);if(er.errors&&er.errors.length)return void I.push(er);if(co)return qn.onStart(()=>yi(wr,er.fromStyles)),qn.onDestroy(()=>Bn(wr,er.toStyles)),void K.push(qn);if(ii.isFallbackTransition)return qn.onStart(()=>yi(wr,er.fromStyles)),qn.onDestroy(()=>Bn(wr,er.toStyles)),void K.push(qn);const xl=[];er.timelines.forEach(Xr=>{Xr.stretchStartingKeyframe=!0,this.disabledNodes.has(Xr.element)||xl.push(Xr)}),er.timelines=xl,N.append(wr,er.timelines),Te.push({instruction:er,player:qn,element:wr}),er.queriedElements.forEach(Xr=>Ni(Ie,Xr,[]).push(qn)),er.preStyleProps.forEach((Xr,Yo)=>{const Ys=Object.keys(Xr);if(Ys.length){let Ls=rt.get(Yo);Ls||rt.set(Yo,Ls=new Set),Ys.forEach(Uo=>Ls.add(Uo))}}),er.postStyleProps.forEach((Xr,Yo)=>{const Ys=Object.keys(Xr);let Ls=It.get(Yo);Ls||It.set(Yo,Ls=new Set),Ys.forEach(Uo=>Ls.add(Uo))})});if(I.length){const mn=[];I.forEach(On=>{mn.push(function _i(X,g){return new A.vHH(3505,le)}())}),L.forEach(On=>On.destroy()),this.reportError(mn)}const E=new Map,W=new Map;Te.forEach(mn=>{const On=mn.element;N.has(On)&&(W.set(On,On),this._beforeAnimationBuild(mn.player.namespaceId,mn.instruction,E))}),K.forEach(mn=>{const On=mn.element;this._getPreviousPlayers(On,!1,mn.namespaceId,mn.triggerName,null).forEach(qn=>{Ni(E,On,[]).push(qn),qn.destroy()})});const it=Zi.filter(mn=>hr(mn,rt,It)),sn=new Map;ke(sn,this.driver,ps,It,j.l3).forEach(mn=>{hr(mn,rt,It)&&it.push(mn)});const or=new Map;Jn.forEach((mn,On)=>{ke(or,this.driver,new Set(mn),rt,j.k1)}),it.forEach(mn=>{const On=sn.get(mn),ii=or.get(mn);sn.set(mn,Object.assign(Object.assign({},On),ii))});const Cr=[],Qr=[],Qi={};Te.forEach(mn=>{const{element:On,player:ii,instruction:qn}=mn;if(N.has(On)){if(_n.has(On))return ii.onDestroy(()=>Bn(On,qn.toStyles)),ii.disabled=!0,ii.overrideTotalTime(qn.totalTime),void K.push(ii);let wr=Qi;if(W.size>1){let js=On;const $s=[];for(;js=js.parentNode;){const er=W.get(js);if(er){wr=er;break}$s.push(js)}$s.forEach(er=>W.set(er,wr))}const co=this._buildAnimation(ii.namespaceId,qn,E,te,or,sn);if(ii.setRealPlayer(co),wr===Qi)Cr.push(ii);else{const js=this.playersByElement.get(wr);js&&js.length&&(ii.parentPlayer=li(js)),K.push(ii)}}else yi(On,qn.fromStyles),ii.onDestroy(()=>Bn(On,qn.toStyles)),Qr.push(ii),_n.has(On)&&K.push(ii)}),Qr.forEach(mn=>{const On=te.get(mn.element);if(On&&On.length){const ii=li(On);mn.setRealPlayer(ii)}}),K.forEach(mn=>{mn.parentPlayer?mn.syncPlayerEvents(mn.parentPlayer):mn.destroy()});for(let mn=0;mn<Zi.length;mn++){const On=Zi[mn],ii=On[os];if(cn(On,zi),ii&&ii.hasAnimation)continue;let qn=[];if(Ie.size){let co=Ie.get(On);co&&co.length&&qn.push(...co);let js=this.driver.query(On,je,!0);for(let $s=0;$s<js.length;$s++){let er=Ie.get(js[$s]);er&&er.length&&qn.push(...er)}}const wr=qn.filter(co=>!co.destroyed);wr.length?ni(this,On,wr):this.processLeaveNode(On)}return Zi.length=0,Cr.forEach(mn=>{this.players.push(mn),mn.onDone(()=>{mn.destroy();const On=this.players.indexOf(mn);this.players.splice(On,1)}),mn.play()}),Cr}elementContainsData(g,v){let N=!1;const K=v[os];return K&&K.setForRemoval&&(N=!0),this.playersByElement.has(v)&&(N=!0),this.playersByQueriedElement.has(v)&&(N=!0),this.statesByElement.has(v)&&(N=!0),this._fetchNamespace(g).elementContainsData(v)||N}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,v,N,K,te){let Te=[];if(v){const Ie=this.playersByQueriedElement.get(g);Ie&&(Te=Ie)}else{const Ie=this.playersByElement.get(g);if(Ie){const rt=!te||te==Vo;Ie.forEach(It=>{It.queued||!rt&&It.triggerName!=K||Te.push(It)})}}return(N||K)&&(Te=Te.filter(Ie=>!(N&&N!=Ie.namespaceId||K&&K!=Ie.triggerName))),Te}_beforeAnimationBuild(g,v,N){const te=v.element,Te=v.isRemovalTransition?void 0:g,Ie=v.isRemovalTransition?void 0:v.triggerName;for(const rt of v.timelines){const It=rt.element,_n=It!==te,yn=Ni(N,It,[]);this._getPreviousPlayers(It,_n,Te,Ie,v.toState).forEach(Jn=>{const jn=Jn.getRealPlayer();jn.beforeDestroy&&jn.beforeDestroy(),Jn.destroy(),yn.push(Jn)})}yi(te,v.fromStyles)}_buildAnimation(g,v,N,K,te,Te){const Ie=v.triggerName,rt=v.element,It=[],_n=new Set,yn=new Set,fn=v.timelines.map(jn=>{const gi=jn.element;_n.add(gi);const Zi=gi[os];if(Zi&&Zi.removedBeforeQueried)return new j.ZN(jn.duration,jn.delay);const Hr=gi!==rt,ps=function Ei(X){const g=[];return Mi(X,g),g}((N.get(gi)||Ms).map(E=>E.getRealPlayer())).filter(E=>!!E.element&&E.element===gi),Ji=te.get(gi),ue=Te.get(gi),L=ds(0,this._normalizer,0,jn.keyframes,Ji,ue),I=this._buildPlayer(jn,L,ps);if(jn.subTimeline&&K&&yn.add(gi),Hr){const E=new oa(g,Ie,gi);E.setRealPlayer(I),It.push(E)}return I});It.forEach(jn=>{Ni(this.playersByQueriedElement,jn.element,[]).push(jn),jn.onDone(()=>function Ir(X,g,v){let N;if(X instanceof Map){if(N=X.get(g),N){if(N.length){const K=N.indexOf(v);N.splice(K,1)}0==N.length&&X.delete(g)}}else if(N=X[g],N){if(N.length){const K=N.indexOf(v);N.splice(K,1)}0==N.length&&delete X[g]}return N}(this.playersByQueriedElement,jn.element,jn))}),_n.forEach(jn=>Pt(jn,Ze));const Jn=li(fn);return Jn.onDestroy(()=>{_n.forEach(jn=>cn(jn,Ze)),Bn(rt,v.toStyles)}),yn.forEach(jn=>{Ni(K,jn,[]).push(Jn)}),Jn}_buildPlayer(g,v,N){return v.length>0?this.driver.animate(g.element,v,g.duration,g.delay,g.easing,N):new j.ZN(g.duration,g.delay)}}class oa{constructor(g,v,N){this.namespaceId=g,this.triggerName=v,this.element=N,this._player=new j.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,Object.keys(this._queuedCallbacks).forEach(v=>{this._queuedCallbacks[v].forEach(N=>ms(g,v,void 0,N))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const v=this._player;v.triggerCallback&&g.onStart(()=>v.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,v){Ni(this._queuedCallbacks,g,[]).push(v)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const v=this._player;v.triggerCallback&&v.triggerCallback(g)}}function ee(X){return X&&1===X.nodeType}function ne(X,g){const v=X.style.display;return X.style.display=null!=g?g:"none",v}function ke(X,g,v,N,K){const te=[];v.forEach(rt=>te.push(ne(rt)));const Te=[];N.forEach((rt,It)=>{const _n={};rt.forEach(yn=>{const fn=_n[yn]=g.computeStyle(It,yn,K);(!fn||0==fn.length)&&(It[os]=Lo,Te.push(It))}),X.set(It,_n)});let Ie=0;return v.forEach(rt=>ne(rt,te[Ie++])),Te}function wt(X,g){const v=new Map;if(X.forEach(Ie=>v.set(Ie,[])),0==g.length)return v;const K=new Set(g),te=new Map;function Te(Ie){if(!Ie)return 1;let rt=te.get(Ie);if(rt)return rt;const It=Ie.parentNode;return rt=v.has(It)?It:K.has(It)?1:Te(It),te.set(Ie,rt),rt}return g.forEach(Ie=>{const rt=Te(Ie);1!==rt&&v.get(rt).push(Ie)}),v}function Pt(X,g){var v;null===(v=X.classList)||void 0===v||v.add(g)}function cn(X,g){var v;null===(v=X.classList)||void 0===v||v.remove(g)}function ni(X,g,v){li(v).onDone(()=>X.processLeaveNode(g))}function Mi(X,g){for(let v=0;v<X.length;v++){const N=X[v];N instanceof j.ZE?Mi(N.players,g):g.push(N)}}function hr(X,g,v){const N=v.get(X);if(!N)return!1;let K=g.get(X);return K?N.forEach(te=>K.add(te)):g.set(X,N),v.delete(X),!0}class sr{constructor(g,v,N){this.bodyNode=g,this._driver=v,this._normalizer=N,this._triggerCache={},this.onRemovalComplete=(K,te)=>{},this._transitionEngine=new Da(g,v,N),this._timelineEngine=new $a(g,v,N),this._transitionEngine.onRemovalComplete=(K,te)=>this.onRemovalComplete(K,te)}registerTrigger(g,v,N,K,te){const Te=g+"-"+K;let Ie=this._triggerCache[Te];if(!Ie){const rt=[],_n=As(this._driver,te,rt,[]);if(rt.length)throw function pt(X,g){return new A.vHH(3404,le)}();Ie=function Wa(X,g,v){return new Oo(X,g,v)}(K,_n,this._normalizer),this._triggerCache[Te]=Ie}this._transitionEngine.registerTrigger(v,K,Ie)}register(g,v){this._transitionEngine.register(g,v)}destroy(g,v){this._transitionEngine.destroy(g,v)}onInsert(g,v,N,K){this._transitionEngine.insertNode(g,v,N,K)}onRemove(g,v,N,K){this._transitionEngine.removeNode(g,v,K||!1,N)}disableAnimations(g,v){this._transitionEngine.markElementAsDisabled(g,v)}process(g,v,N,K){if("@"==N.charAt(0)){const[te,Te]=Br(N);this._timelineEngine.command(te,v,Te,K)}else this._transitionEngine.trigger(g,v,N,K)}listen(g,v,N,K,te){if("@"==N.charAt(0)){const[Te,Ie]=Br(N);return this._timelineEngine.listen(Te,v,Ie,te)}return this._transitionEngine.listen(g,v,N,K,te)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ao=(()=>{class X{constructor(v,N,K){this._element=v,this._startStyles=N,this._endStyles=K,this._state=0;let te=X.initialStylesByElement.get(v);te||X.initialStylesByElement.set(v,te={}),this._initialStyles=te}start(){this._state<1&&(this._startStyles&&Bn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bn(this._element,this._initialStyles),this._endStyles&&(Bn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(X.initialStylesByElement.delete(this._element),this._startStyles&&(yi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yi(this._element,this._endStyles),this._endStyles=null),Bn(this._element,this._initialStyles),this._state=3)}}return X.initialStylesByElement=new WeakMap,X})();function Ss(X){let g=null;const v=Object.keys(X);for(let N=0;N<v.length;N++){const K=v[N];Wn(K)&&(g=g||{},g[K]=X[K])}return g}function Wn(X){return"display"===X||"position"===X}class Co{constructor(g,v,N,K){this.element=g,this.keyframes=v,this.options=N,this._specialStyles=K,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=N.duration,this._delay=N.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(g,v,N){return g.animate(v,N)}onStart(g){this._onStartFns.push(g)}onDone(g){this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g={};if(this.hasStarted()){const v=this._finalKeyframe;Object.keys(v).forEach(N=>{"offset"!=N&&(g[N]=this._finished?v[N]:hn(this.element,N))})}this.currentSnapshot=g}triggerCallback(g){const v="start"==g?this._onStartFns:this._onDoneFns;v.forEach(N=>N()),v.length=0}}class aa{validateStyleProperty(g){return ki(g)}matchesElement(g,v){return!1}containsElement(g,v){return Mr(g,v)}getParentElement(g){return Us(g)}query(g,v,N){return cr(g,v,N)}computeStyle(g,v,N){return window.getComputedStyle(g)[v]}animate(g,v,N,K,te,Te=[]){const rt={duration:N,delay:K,fill:0==K?"both":"forwards"};te&&(rt.easing=te);const It={},_n=Te.filter(fn=>fn instanceof Co);(function Be(X,g){return 0===X||0===g})(N,K)&&_n.forEach(fn=>{let Jn=fn.currentSnapshot;Object.keys(Jn).forEach(jn=>It[jn]=Jn[jn])}),v=function Et(X,g,v){const N=Object.keys(v);if(N.length&&g.length){let te=g[0],Te=[];if(N.forEach(Ie=>{te.hasOwnProperty(Ie)||Te.push(Ie),te[Ie]=v[Ie]}),Te.length)for(var K=1;K<g.length;K++){let Ie=g[K];Te.forEach(function(rt){Ie[rt]=hn(X,rt)})}}return g}(g,v=v.map(fn=>nt(fn,!1)),It);const yn=function Sr(X,g){let v=null,N=null;return Array.isArray(g)&&g.length?(v=Ss(g[0]),g.length>1&&(N=Ss(g[g.length-1]))):g&&(v=Ss(g)),v||N?new ao(X,v,N):null}(g,v);return new Co(g,v,rt,yn)}}var $o=q(9808);let la=(()=>{class X extends j._j{constructor(v,N){super(),this._nextAnimationId=0,this._renderer=v.createRenderer(N.body,{id:"0",encapsulation:A.ifc.None,styles:[],data:{animation:[]}})}build(v){const N=this._nextAnimationId.toString();this._nextAnimationId++;const K=Array.isArray(v)?(0,j.vP)(v):v;return ca(this._renderer,null,N,"register",[K]),new vl(N,this._renderer)}}return X.\u0275fac=function(v){return new(v||X)(A.LFG(A.FYo),A.LFG($o.K0))},X.\u0275prov=A.Yz7({token:X,factory:X.\u0275fac}),X})();class vl extends j.LC{constructor(g,v){super(),this._id=g,this._renderer=v}create(g,v){return new Aa(this._id,g,v||{},this._renderer)}}class Aa{constructor(g,v,N,K){this.id=g,this.element=v,this._renderer=K,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",N)}_listen(g,v){return this._renderer.listen(this.element,`@@${this.id}:${g}`,v)}_command(g,...v){return ca(this._renderer,this.element,this.id,g,v)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){var g,v;return null!==(v=null===(g=this._renderer.engine.players[+this.id])||void 0===g?void 0:g.getPosition())&&void 0!==v?v:0}}function ca(X,g,v,N,K){return X.setProperty(g,`@@${v}:${N}`,K)}const Ui="@.disabled";let qa=(()=>{class X{constructor(v,N,K){this.delegate=v,this.engine=N,this._zone=K,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),N.onRemovalComplete=(te,Te)=>{const Ie=null==Te?void 0:Te.parentNode(te);Ie&&Te.removeChild(Ie,te)}}createRenderer(v,N){const te=this.delegate.createRenderer(v,N);if(!(v&&N&&N.data&&N.data.animation)){let _n=this._rendererCache.get(te);return _n||(_n=new as("",te,this.engine),this._rendererCache.set(te,_n)),_n}const Te=N.id,Ie=N.id+"-"+this._currentId;this._currentId++,this.engine.register(Ie,v);const rt=_n=>{Array.isArray(_n)?_n.forEach(rt):this.engine.registerTrigger(Te,Ie,v,_n.name,_n)};return N.data.animation.forEach(rt),new Vl(this,Ie,te,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(v,N,K){v>=0&&v<this._microtaskId?this._zone.run(()=>N(K)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(te=>{const[Te,Ie]=te;Te(Ie)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([N,K]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return X.\u0275fac=function(v){return new(v||X)(A.LFG(A.FYo),A.LFG(sr),A.LFG(A.R0b))},X.\u0275prov=A.Yz7({token:X,factory:X.\u0275fac}),X})();class as{constructor(g,v,N){this.namespaceId=g,this.delegate=v,this.engine=N,this.destroyNode=this.delegate.destroyNode?K=>v.destroyNode(K):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(g,v){return this.delegate.createElement(g,v)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,v){this.delegate.appendChild(g,v),this.engine.onInsert(this.namespaceId,v,g,!1)}insertBefore(g,v,N,K=!0){this.delegate.insertBefore(g,v,N),this.engine.onInsert(this.namespaceId,v,g,K)}removeChild(g,v,N){this.engine.onRemove(this.namespaceId,v,this.delegate,N)}selectRootElement(g,v){return this.delegate.selectRootElement(g,v)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,v,N,K){this.delegate.setAttribute(g,v,N,K)}removeAttribute(g,v,N){this.delegate.removeAttribute(g,v,N)}addClass(g,v){this.delegate.addClass(g,v)}removeClass(g,v){this.delegate.removeClass(g,v)}setStyle(g,v,N,K){this.delegate.setStyle(g,v,N,K)}removeStyle(g,v,N){this.delegate.removeStyle(g,v,N)}setProperty(g,v,N){"@"==v.charAt(0)&&v==Ui?this.disableAnimations(g,!!N):this.delegate.setProperty(g,v,N)}setValue(g,v){this.delegate.setValue(g,v)}listen(g,v,N){return this.delegate.listen(g,v,N)}disableAnimations(g,v){this.engine.disableAnimations(g,v)}}class Vl extends as{constructor(g,v,N,K){super(v,N,K),this.factory=g,this.namespaceId=v}setProperty(g,v,N){"@"==v.charAt(0)?"."==v.charAt(1)&&v==Ui?this.disableAnimations(g,N=void 0===N||!!N):this.engine.process(this.namespaceId,g,v.substr(1),N):this.delegate.setProperty(g,v,N)}listen(g,v,N){if("@"==v.charAt(0)){const K=function Gt(X){switch(X){case"body":return document.body;case"document":return document;case"window":return window;default:return X}}(g);let te=v.substr(1),Te="";return"@"!=te.charAt(0)&&([te,Te]=function xr(X){const g=X.indexOf(".");return[X.substring(0,g),X.substr(g+1)]}(te)),this.engine.listen(this.namespaceId,K,te,Te,Ie=>{this.factory.scheduleListenerCallback(Ie._data||-1,N,Ie)})}return this.delegate.listen(g,v,N)}}let Ho=(()=>{class X extends sr{constructor(v,N,K){super(v.body,N,K)}ngOnDestroy(){this.flush()}}return X.\u0275fac=function(v){return new(v||X)(A.LFG($o.K0),A.LFG($t),A.LFG(Ln))},X.\u0275prov=A.Yz7({token:X,factory:X.\u0275fac}),X})();const no=new A.OlP("AnimationModuleType"),lo=[{provide:j._j,useClass:la},{provide:Ln,useFactory:function bl(){return new ti}},{provide:sr,useClass:Ho},{provide:A.FYo,useFactory:function Ta(X,g,v){return new qa(X,g,v)},deps:[b.se,sr,A.R0b]}],Fo=[{provide:$t,useFactory:()=>new aa},{provide:no,useValue:"BrowserAnimations"},...lo],_s=[{provide:$t,useClass:Sn},{provide:no,useValue:"NoopAnimations"},...lo];let ls=(()=>{class X{static withConfig(v){return{ngModule:X,providers:v.disableAnimations?_s:Fo}}}return X.\u0275fac=function(v){return new(v||X)},X.\u0275mod=A.oAB({type:X}),X.\u0275inj=A.cJS({providers:Fo,imports:[b.b2]}),X})()},2313:(dn,dt,q)=>{"use strict";q.d(dt,{H7:()=>en,b2:()=>ns,q6:()=>Ni,se:()=>Vt,t6:()=>mt});var A=q(9808),b=q(5e3);class j extends A.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends j{static makeCurrent(){(0,A.HT)(new le)}onAndCancel(Ve,ye,Ue){return Ve.addEventListener(ye,Ue,!1),()=>{Ve.removeEventListener(ye,Ue,!1)}}dispatchEvent(Ve,ye){Ve.dispatchEvent(ye)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,ye){return(ye=ye||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,ye){return"window"===ye?window:"document"===ye?Ve:"body"===ye?Ve.body:null}getBaseHref(Ve){const ye=function Oe(){return ce=ce||document.querySelector("base"),ce?ce.getAttribute("href"):null}();return null==ye?null:function Ge(Ye){Pe=Pe||document.createElement("a"),Pe.setAttribute("href",Ye);const Ve=Pe.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(ye)}resetBaseElement(){ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,A.Mx)(document.cookie,Ve)}}let Pe,ce=null;const Me=new b.OlP("TRANSITION_ID"),We=[{provide:b.ip1,useFactory:function Se(Ye,Ve,ye){return()=>{ye.get(b.CZH).donePromise.then(()=>{const Ue=(0,A.q)(),ct=Ve.querySelectorAll(`style[ng-transition="${Ye}"]`);for(let et=0;et<ct.length;et++)Ue.remove(ct[et])})}},deps:[Me,A.K0,b.zs3],multi:!0}];class S{static init(){(0,b.VLi)(new S)}addToWindow(Ve){b.dqk.getAngularTestability=(Ue,ct=!0)=>{const et=Ve.findTestabilityInTree(Ue,ct);if(null==et)throw new Error("Could not find testability for element.");return et},b.dqk.getAllAngularTestabilities=()=>Ve.getAllTestabilities(),b.dqk.getAllAngularRootElements=()=>Ve.getAllRootElements(),b.dqk.frameworkStabilizers||(b.dqk.frameworkStabilizers=[]),b.dqk.frameworkStabilizers.push(Ue=>{const ct=b.dqk.getAllAngularTestabilities();let et=ct.length,me=!1;const ae=function(Be){me=me||Be,et--,0==et&&Ue(me)};ct.forEach(function(Be){Be.whenStable(ae)})})}findTestabilityInTree(Ve,ye,Ue){if(null==ye)return null;const ct=Ve.getTestability(ye);return null!=ct?ct:Ue?(0,A.q)().isShadowRoot(ye)?this.findTestabilityInTree(Ve,ye.host,!0):this.findTestabilityInTree(Ve,ye.parentElement,!0):null}}let Y=(()=>{class Ye{build(){return new XMLHttpRequest}}return Ye.\u0275fac=function(ye){return new(ye||Ye)},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const J=new b.OlP("EventManagerPlugins");let de=(()=>{class Ye{constructor(ye,Ue){this._zone=Ue,this._eventNameToPlugin=new Map,ye.forEach(ct=>ct.manager=this),this._plugins=ye.slice().reverse()}addEventListener(ye,Ue,ct){return this._findPluginFor(Ue).addEventListener(ye,Ue,ct)}addGlobalEventListener(ye,Ue,ct){return this._findPluginFor(Ue).addGlobalEventListener(ye,Ue,ct)}getZone(){return this._zone}_findPluginFor(ye){const Ue=this._eventNameToPlugin.get(ye);if(Ue)return Ue;const ct=this._plugins;for(let et=0;et<ct.length;et++){const me=ct[et];if(me.supports(ye))return this._eventNameToPlugin.set(ye,me),me}throw new Error(`No event manager plugin found for event ${ye}`)}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(J),b.LFG(b.R0b))},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();class Ae{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,ye,Ue){const ct=(0,A.q)().getGlobalEventTarget(this._doc,Ve);if(!ct)throw new Error(`Unsupported event target ${ct} for event ${ye}`);return this.addEventListener(ct,ye,Ue)}}let ve=(()=>{class Ye{constructor(){this._stylesSet=new Set}addStyles(ye){const Ue=new Set;ye.forEach(ct=>{this._stylesSet.has(ct)||(this._stylesSet.add(ct),Ue.add(ct))}),this.onStylesAdded(Ue)}onStylesAdded(ye){}getAllStyles(){return Array.from(this._stylesSet)}}return Ye.\u0275fac=function(ye){return new(ye||Ye)},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),Ne=(()=>{class Ye extends ve{constructor(ye){super(),this._doc=ye,this._hostNodes=new Map,this._hostNodes.set(ye.head,[])}_addStylesToHost(ye,Ue,ct){ye.forEach(et=>{const me=this._doc.createElement("style");me.textContent=et,ct.push(Ue.appendChild(me))})}addHost(ye){const Ue=[];this._addStylesToHost(this._stylesSet,ye,Ue),this._hostNodes.set(ye,Ue)}removeHost(ye){const Ue=this._hostNodes.get(ye);Ue&&Ue.forEach(Mt),this._hostNodes.delete(ye)}onStylesAdded(ye){this._hostNodes.forEach((Ue,ct)=>{this._addStylesToHost(ye,ct,Ue)})}ngOnDestroy(){this._hostNodes.forEach(ye=>ye.forEach(Mt))}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(A.K0))},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();function Mt(Ye){(0,A.q)().remove(Ye)}const Dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lt=/%COMP%/g;function Qe(Ye,Ve,ye){for(let Ue=0;Ue<Ve.length;Ue++){let ct=Ve[Ue];Array.isArray(ct)?Qe(Ye,ct,ye):(ct=ct.replace(lt,Ye),ye.push(ct))}return ye}function pt(Ye){return Ve=>{if("__ngUnwrap__"===Ve)return Ye;!1===Ye(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let Vt=(()=>{class Ye{constructor(ye,Ue,ct){this.eventManager=ye,this.sharedStylesHost=Ue,this.appId=ct,this.rendererByCompId=new Map,this.defaultRenderer=new yt(ye)}createRenderer(ye,Ue){if(!ye||!Ue)return this.defaultRenderer;switch(Ue.encapsulation){case b.ifc.Emulated:{let ct=this.rendererByCompId.get(Ue.id);return ct||(ct=new di(this.eventManager,this.sharedStylesHost,Ue,this.appId),this.rendererByCompId.set(Ue.id,ct)),ct.applyToHost(ye),ct}case 1:case b.ifc.ShadowDom:return new Tn(this.eventManager,this.sharedStylesHost,ye,Ue);default:if(!this.rendererByCompId.has(Ue.id)){const ct=Qe(Ue.id,Ue.styles,[]);this.sharedStylesHost.addStyles(ct),this.rendererByCompId.set(Ue.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(de),b.LFG(Ne),b.LFG(b.AFp))},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();class yt{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,ye){return ye?document.createElementNS(Dt[ye]||ye,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,ye){Ve.appendChild(ye)}insertBefore(Ve,ye,Ue){Ve&&Ve.insertBefore(ye,Ue)}removeChild(Ve,ye){Ve&&Ve.removeChild(ye)}selectRootElement(Ve,ye){let Ue="string"==typeof Ve?document.querySelector(Ve):Ve;if(!Ue)throw new Error(`The selector "${Ve}" did not match any elements`);return ye||(Ue.textContent=""),Ue}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,ye,Ue,ct){if(ct){ye=ct+":"+ye;const et=Dt[ct];et?Ve.setAttributeNS(et,ye,Ue):Ve.setAttribute(ye,Ue)}else Ve.setAttribute(ye,Ue)}removeAttribute(Ve,ye,Ue){if(Ue){const ct=Dt[Ue];ct?Ve.removeAttributeNS(ct,ye):Ve.removeAttribute(`${Ue}:${ye}`)}else Ve.removeAttribute(ye)}addClass(Ve,ye){Ve.classList.add(ye)}removeClass(Ve,ye){Ve.classList.remove(ye)}setStyle(Ve,ye,Ue,ct){ct&(b.JOm.DashCase|b.JOm.Important)?Ve.style.setProperty(ye,Ue,ct&b.JOm.Important?"important":""):Ve.style[ye]=Ue}removeStyle(Ve,ye,Ue){Ue&b.JOm.DashCase?Ve.style.removeProperty(ye):Ve.style[ye]=""}setProperty(Ve,ye,Ue){Ve[ye]=Ue}setValue(Ve,ye){Ve.nodeValue=ye}listen(Ve,ye,Ue){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,ye,pt(Ue)):this.eventManager.addEventListener(Ve,ye,pt(Ue))}}class di extends yt{constructor(Ve,ye,Ue,ct){super(Ve),this.component=Ue;const et=Qe(ct+"-"+Ue.id,Ue.styles,[]);ye.addStyles(et),this.contentAttr=function xt(Ye){return"_ngcontent-%COMP%".replace(lt,Ye)}(ct+"-"+Ue.id),this.hostAttr=function qe(Ye){return"_nghost-%COMP%".replace(lt,Ye)}(ct+"-"+Ue.id)}applyToHost(Ve){super.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,ye){const Ue=super.createElement(Ve,ye);return super.setAttribute(Ue,this.contentAttr,""),Ue}}class Tn extends yt{constructor(Ve,ye,Ue,ct){super(Ve),this.sharedStylesHost=ye,this.hostEl=Ue,this.shadowRoot=Ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const et=Qe(ct.id,ct.styles,[]);for(let me=0;me<et.length;me++){const ae=document.createElement("style");ae.textContent=et[me],this.shadowRoot.appendChild(ae)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ve,ye){return super.appendChild(this.nodeOrShadowRoot(Ve),ye)}insertBefore(Ve,ye,Ue){return super.insertBefore(this.nodeOrShadowRoot(Ve),ye,Ue)}removeChild(Ve,ye){return super.removeChild(this.nodeOrShadowRoot(Ve),ye)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}}let gn=(()=>{class Ye extends Ae{constructor(ye){super(ye)}supports(ye){return!0}addEventListener(ye,Ue,ct){return ye.addEventListener(Ue,ct,!1),()=>this.removeEventListener(ye,Ue,ct)}removeEventListener(ye,Ue,ct){return ye.removeEventListener(Ue,ct)}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(A.K0))},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const fi=["alt","control","meta","shift"],Or={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_i={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wr={alt:Ye=>Ye.altKey,control:Ye=>Ye.ctrlKey,meta:Ye=>Ye.metaKey,shift:Ye=>Ye.shiftKey};let Ai=(()=>{class Ye extends Ae{constructor(ye){super(ye)}supports(ye){return null!=Ye.parseEventName(ye)}addEventListener(ye,Ue,ct){const et=Ye.parseEventName(Ue),me=Ye.eventCallback(et.fullKey,ct,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,A.q)().onAndCancel(ye,et.domEventName,me))}static parseEventName(ye){const Ue=ye.toLowerCase().split("."),ct=Ue.shift();if(0===Ue.length||"keydown"!==ct&&"keyup"!==ct)return null;const et=Ye._normalizeKey(Ue.pop());let me="";if(fi.forEach(Be=>{const Et=Ue.indexOf(Be);Et>-1&&(Ue.splice(Et,1),me+=Be+".")}),me+=et,0!=Ue.length||0===et.length)return null;const ae={};return ae.domEventName=ct,ae.fullKey=me,ae}static getEventFullKey(ye){let Ue="",ct=function li(Ye){let Ve=Ye.key;if(null==Ve){if(Ve=Ye.keyIdentifier,null==Ve)return"Unidentified";Ve.startsWith("U+")&&(Ve=String.fromCharCode(parseInt(Ve.substring(2),16)),3===Ye.location&&_i.hasOwnProperty(Ve)&&(Ve=_i[Ve]))}return Or[Ve]||Ve}(ye);return ct=ct.toLowerCase()," "===ct?ct="space":"."===ct&&(ct="dot"),fi.forEach(et=>{et!=ct&&Wr[et](ye)&&(Ue+=et+".")}),Ue+=ct,Ue}static eventCallback(ye,Ue,ct){return et=>{Ye.getEventFullKey(et)===ye&&ct.runGuarded(()=>Ue(et))}}static _normalizeKey(ye){return"esc"===ye?"escape":ye}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(A.K0))},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})();const Ni=(0,b.eFA)(b._c5,"browser",[{provide:b.Lbi,useValue:A.bD},{provide:b.g9A,useValue:function ds(){le.makeCurrent(),S.init()},multi:!0},{provide:A.K0,useFactory:function Tr(){return(0,b.RDi)(document),document},deps:[]}]),Br=[{provide:b.zSh,useValue:"root"},{provide:b.qLn,useFactory:function ms(){return new b.qLn},deps:[]},{provide:J,useClass:gn,multi:!0,deps:[A.K0,b.R0b,b.Lbi]},{provide:J,useClass:Ai,multi:!0,deps:[A.K0]},{provide:Vt,useClass:Vt,deps:[de,Ne,b.AFp]},{provide:b.FYo,useExisting:Vt},{provide:ve,useExisting:Ne},{provide:Ne,useClass:Ne,deps:[A.K0]},{provide:b.dDg,useClass:b.dDg,deps:[b.R0b]},{provide:de,useClass:de,deps:[J,b.R0b]},{provide:A.JF,useClass:Y,deps:[]}];let ns=(()=>{class Ye{constructor(ye){if(ye)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ye){return{ngModule:Ye,providers:[{provide:b.AFp,useValue:ye.appId},{provide:Me,useExisting:b.AFp},We]}}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(Ye,12))},Ye.\u0275mod=b.oAB({type:Ye}),Ye.\u0275inj=b.cJS({providers:Br,imports:[A.ez,b.hGG]}),Ye})();"undefined"!=typeof window&&window;const si={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},st=new b.OlP("HammerGestureConfig"),He=new b.OlP("HammerLoader");let Ce=(()=>{class Ye{constructor(){this.events=[],this.overrides={}}buildHammer(ye){const Ue=new Hammer(ye,this.options);Ue.get("pinch").set({enable:!0}),Ue.get("rotate").set({enable:!0});for(const ct in this.overrides)Ue.get(ct).set(this.overrides[ct]);return Ue}}return Ye.\u0275fac=function(ye){return new(ye||Ye)},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),nt=(()=>{class Ye extends Ae{constructor(ye,Ue,ct,et){super(ye),this._config=Ue,this.console=ct,this.loader=et,this._loaderPromise=null}supports(ye){return!(!si.hasOwnProperty(ye.toLowerCase())&&!this.isCustomEvent(ye)||!window.Hammer&&!this.loader)}addEventListener(ye,Ue,ct){const et=this.manager.getZone();if(Ue=Ue.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let me=!1,ae=()=>{me=!0};return this._loaderPromise.then(()=>{window.Hammer?me||(ae=this.addEventListener(ye,Ue,ct)):ae=()=>{}}).catch(()=>{ae=()=>{}}),()=>{ae()}}return et.runOutsideAngular(()=>{const me=this._config.buildHammer(ye),ae=function(Be){et.runGuarded(function(){ct(Be)})};return me.on(Ue,ae),()=>{me.off(Ue,ae),"function"==typeof me.destroy&&me.destroy()}})}isCustomEvent(ye){return this._config.events.indexOf(ye)>-1}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(A.K0),b.LFG(st),b.LFG(b.c2e),b.LFG(He,8))},Ye.\u0275prov=b.Yz7({token:Ye,factory:Ye.\u0275fac}),Ye})(),mt=(()=>{class Ye{}return Ye.\u0275fac=function(ye){return new(ye||Ye)},Ye.\u0275mod=b.oAB({type:Ye}),Ye.\u0275inj=b.cJS({providers:[{provide:J,useClass:nt,multi:!0,deps:[A.K0,st,b.c2e,[new b.FiY,He]]},{provide:st,useClass:Ce,deps:[]}]}),Ye})(),en=(()=>{class Ye{}return Ye.\u0275fac=function(ye){return new(ye||Ye)},Ye.\u0275prov=b.Yz7({token:Ye,factory:function(ye){let Ue=null;return Ue=ye?new(ye||Ye):b.LFG(yi),Ue},providedIn:"root"}),Ye})(),yi=(()=>{class Ye extends en{constructor(ye){super(),this._doc=ye}sanitize(ye,Ue){if(null==Ue)return null;switch(ye){case b.q3G.NONE:return Ue;case b.q3G.HTML:return(0,b.qzn)(Ue,"HTML")?(0,b.z3N)(Ue):(0,b.EiD)(this._doc,String(Ue)).toString();case b.q3G.STYLE:return(0,b.qzn)(Ue,"Style")?(0,b.z3N)(Ue):Ue;case b.q3G.SCRIPT:if((0,b.qzn)(Ue,"Script"))return(0,b.z3N)(Ue);throw new Error("unsafe value used in a script context");case b.q3G.URL:return(0,b.yhl)(Ue),(0,b.qzn)(Ue,"URL")?(0,b.z3N)(Ue):(0,b.mCW)(String(Ue));case b.q3G.RESOURCE_URL:if((0,b.qzn)(Ue,"ResourceURL"))return(0,b.z3N)(Ue);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ye} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ye){return(0,b.JVY)(ye)}bypassSecurityTrustStyle(ye){return(0,b.L6k)(ye)}bypassSecurityTrustScript(ye){return(0,b.eBb)(ye)}bypassSecurityTrustUrl(ye){return(0,b.LAX)(ye)}bypassSecurityTrustResourceUrl(ye){return(0,b.pB0)(ye)}}return Ye.\u0275fac=function(ye){return new(ye||Ye)(b.LFG(A.K0))},Ye.\u0275prov=b.Yz7({token:Ye,factory:function(ye){let Ue=null;return Ue=ye?new ye:function Bn(Ye){return new yi(Ye.get(A.K0))}(b.LFG(b.zs3)),Ue},providedIn:"root"}),Ye})()},843:(dn,dt,q)=>{"use strict";q.d(dt,{Bz:()=>io,lC:()=>jo});var A=q(5e3),b=q(8306),j=q(4742),le=q(2076),ce=q(4671),Oe=q(3268),Pe=q(3269),Ge=q(1810),Me=q(5403),Se=q(9672);function Y(T,w,y){T?(0,Se.f)(y,T,w):w()}const de=(0,q(3888).d)(T=>function(){T(this),this.name="EmptyError",this.message="no elements in sequence"});var Ae=q(727),ve=q(4482);function Ne(){return(0,ve.e)((T,w)=>{let y=null;T._refCount++;const k=(0,Me.x)(w,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(y=null);const G=T._connection,se=y;y=null,G&&(!se||G===se)&&G.unsubscribe(),w.unsubscribe()});T.subscribe(k),k.closed||(y=T.connect())})}class Mt extends b.y{constructor(w,y){super(),this.source=w,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,ve.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,null==w||w.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Ae.w0;const y=this.getSubject();w.add(this.source.subscribe((0,Me.x)(y,void 0,()=>{this._teardown(),y.complete()},k=>{this._teardown(),y.error(k)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Ae.w0.EMPTY)}return w}refCount(){return Ne()(this)}}var Dt=q(9646),lt=q(1135),Ee=q(2843),ut=q(7272),St=q(9770),bt=q(515),xt=q(7579),qe=q(8421);function Qe(T,w){return(0,ve.e)((y,k)=>{let G=null,se=0,be=!1;const Le=()=>be&&!G&&k.complete();y.subscribe((0,Me.x)(k,Ct=>{null==G||G.unsubscribe();let Jt=0;const Kn=se++;(0,qe.Xf)(T(Ct,Kn)).subscribe(G=(0,Me.x)(k,vn=>k.next(w?w(Ct,vn,Kn,Jt++):vn),()=>{G=null,Le()}))},()=>{be=!0,Le()}))})}function pt(T,w,y,k,G){return(se,be)=>{let Le=y,Ct=w,Jt=0;se.subscribe((0,Me.x)(be,Kn=>{const vn=Jt++;Ct=Le?T(Ct,Kn,vn):(Le=!0,Kn),k&&be.next(Ct)},G&&(()=>{Le&&be.next(Ct),be.complete()})))}}function _t(T,w){return(0,ve.e)(pt(T,w,arguments.length>=2,!0))}var Vt=q(9300);function yt(T){return T<=0?()=>bt.E:(0,ve.e)((w,y)=>{let k=[];w.subscribe((0,Me.x)(y,G=>{k.push(G),T<k.length&&k.shift()},()=>{for(const G of k)y.next(G);y.complete()},void 0,()=>{k=null}))})}function ri(T=hi){return(0,ve.e)((w,y)=>{let k=!1;w.subscribe((0,Me.x)(y,G=>{k=!0,y.next(G)},()=>k?y.complete():y.error(T())))})}function hi(){return new de}function di(T){return(0,ve.e)((w,y)=>{let k=!1;w.subscribe((0,Me.x)(y,G=>{k=!0,y.next(G)},()=>{k||y.next(T),y.complete()}))})}var gn=q(5698);function fi(T,w){const y=arguments.length>=2;return k=>k.pipe(T?(0,Vt.h)((G,se)=>T(G,se,k)):ce.y,(0,gn.q)(1),y?di(w):ri(()=>new de))}var In=q(4004),Or=q(8675),_i=q(262),Wr=q(4351),Ai=q(5577),li=q(8505),ds=q(8746),ms=q(8189),Tr=q(9808);class _r{constructor(w,y){this.id=w,this.url=y}}class Ni extends _r{constructor(w,y,k="imperative",G=null){super(w,y),this.navigationTrigger=k,this.restoredState=G}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Br extends _r{constructor(w,y,k){super(w,y),this.urlAfterRedirects=k}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ns extends _r{constructor(w,y,k){super(w,y),this.reason=k}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kr extends _r{constructor(w,y,k){super(w,y),this.error=k}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Un extends _r{constructor(w,y,k,G){super(w,y),this.urlAfterRedirects=k,this.state=G}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Us extends _r{constructor(w,y,k,G){super(w,y),this.urlAfterRedirects=k,this.state=G}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jr extends _r{constructor(w,y,k,G,se){super(w,y),this.urlAfterRedirects=k,this.state=G,this.shouldActivate=se}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $r extends _r{constructor(w,y,k,G){super(w,y),this.urlAfterRedirects=k,this.state=G}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends _r{constructor(w,y,k,G){super(w,y),this.urlAfterRedirects=k,this.state=G}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hs{constructor(w){this.route=w}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ki{constructor(w){this.route=w}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lr{constructor(w){this.snapshot=w}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mr{constructor(w){this.snapshot=w}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cr{constructor(w){this.snapshot=w}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mi{constructor(w){this.snapshot=w}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(w,y,k){this.routerEvent=w,this.position=y,this.anchor=k}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class ws{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y[0]:y}return null}getAll(w){if(this.has(w)){const y=this.params[w];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Ti(T){return new ws(T)}const Yn="ngNavigationCancelingError";function Ki(T){const w=Error("NavigationCancelingError: "+T);return w[Yn]=!0,w}function fs(T,w,y){const k=y.path.split("/");if(k.length>T.length||"full"===y.pathMatch&&(w.hasChildren()||k.length<T.length))return null;const G={};for(let se=0;se<k.length;se++){const be=k[se],Le=T[se];if(be.startsWith(":"))G[be.substring(1)]=Le;else if(be!==Le.path)return null}return{consumed:T.slice(0,k.length),posParams:G}}function Ze(T,w){const y=T?Object.keys(T):void 0,k=w?Object.keys(w):void 0;if(!y||!k||y.length!=k.length)return!1;let G;for(let se=0;se<y.length;se++)if(G=y[se],!je(T[G],w[G]))return!1;return!0}function je(T,w){if(Array.isArray(T)&&Array.isArray(w)){if(T.length!==w.length)return!1;const y=[...T].sort(),k=[...w].sort();return y.every((G,se)=>k[se]===G)}return T===w}function Lt(T){return Array.prototype.concat.apply([],T)}function Pn(T){return T.length>0?T[T.length-1]:null}function st(T,w){for(const y in T)T.hasOwnProperty(y)&&w(T[y],y)}function He(T){return(0,A.CqO)(T)?T:(0,A.QGY)(T)?(0,le.D)(Promise.resolve(T)):(0,Dt.of)(T)}const nt={exact:function yi(T,w,y){if(!ae(T.segments,w.segments)||!ye(T.segments,w.segments,y)||T.numberOfChildren!==w.numberOfChildren)return!1;for(const k in w.children)if(!T.children[k]||!yi(T.children[k],w.children[k],y))return!1;return!0},subset:Ye},mt={exact:function Bn(T,w){return Ze(T,w)},subset:function Rr(T,w){return Object.keys(w).length<=Object.keys(T).length&&Object.keys(w).every(y=>je(T[y],w[y]))},ignored:()=>!0};function en(T,w,y){return nt[y.paths](T.root,w.root,y.matrixParams)&&mt[y.queryParams](T.queryParams,w.queryParams)&&!("exact"===y.fragment&&T.fragment!==w.fragment)}function Ye(T,w,y){return Ve(T,w,w.segments,y)}function Ve(T,w,y,k){if(T.segments.length>y.length){const G=T.segments.slice(0,y.length);return!(!ae(G,y)||w.hasChildren()||!ye(G,y,k))}if(T.segments.length===y.length){if(!ae(T.segments,y)||!ye(T.segments,y,k))return!1;for(const G in w.children)if(!T.children[G]||!Ye(T.children[G],w.children[G],k))return!1;return!0}{const G=y.slice(0,T.segments.length),se=y.slice(T.segments.length);return!!(ae(T.segments,G)&&ye(T.segments,G,k)&&T.children[$t])&&Ve(T.children[$t],w,se,k)}}function ye(T,w,y){return w.every((k,G)=>mt[y](T[G].parameters,k.parameters))}class Ue{constructor(w,y,k){this.root=w,this.queryParams=y,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return hn.serialize(this)}}class ct{constructor(w,y){this.segments=w,this.children=y,this.parent=null,st(y,(k,G)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return An(this)}}class et{constructor(w,y){this.path=w,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Ti(this.parameters)),this._parameterMap}toString(){return ur(this)}}function ae(T,w){return T.length===w.length&&T.every((y,k)=>y.path===w[k].path)}class Et{}class Ot{parse(w){const y=new rs(w);return new Ue(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(w){const y=`/${zn(w.root,!0)}`,k=function ir(T){const w=Object.keys(T).map(y=>{const k=T[y];return Array.isArray(k)?k.map(G=>`${Qt(y)}=${Qt(G)}`).join("&"):`${Qt(y)}=${Qt(k)}`}).filter(y=>!!y);return w.length?`?${w.join("&")}`:""}(w.queryParams);return`${y}${k}${"string"==typeof w.fragment?`#${function Qn(T){return encodeURI(T)}(w.fragment)}`:""}`}}const hn=new Ot;function An(T){return T.segments.map(w=>ur(w)).join("/")}function zn(T,w){if(!T.hasChildren())return An(T);if(w){const y=T.children[$t]?zn(T.children[$t],!1):"",k=[];return st(T.children,(G,se)=>{se!==$t&&k.push(`${se}:${zn(G,!1)}`)}),k.length>0?`${y}(${k.join("//")})`:y}{const y=function Be(T,w){let y=[];return st(T.children,(k,G)=>{G===$t&&(y=y.concat(w(k,G)))}),st(T.children,(k,G)=>{G!==$t&&(y=y.concat(w(k,G)))}),y}(T,(k,G)=>G===$t?[zn(T.children[$t],!1)]:[`${G}:${zn(k,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[$t]?`${An(T)}/${y[0]}`:`${An(T)}/(${y.join("//")})`}}function Oi(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qt(T){return Oi(T).replace(/%3B/gi,";")}function wi(T){return Oi(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zn(T){return decodeURIComponent(T)}function yr(T){return Zn(T.replace(/\+/g,"%20"))}function ur(T){return`${wi(T.path)}${function gs(T){return Object.keys(T).map(w=>`;${wi(w)}=${wi(T[w])}`).join("")}(T.parameters)}`}const is=/^[^\/()?;=#]+/;function Yr(T){const w=T.match(is);return w?w[0]:""}const ei=/^[^=?&#]+/,Is=/^[^&#]+/;class rs{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(w.length>0||Object.keys(y).length>0)&&(k[$t]=new ct(w,y)),k}parseSegment(){const w=Yr(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(w),new et(Zn(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const y=Yr(this.remaining);if(!y)return;this.capture(y);let k="";if(this.consumeOptional("=")){const G=Yr(this.remaining);G&&(k=G,this.capture(k))}w[Zn(y)]=Zn(k)}parseQueryParam(w){const y=function ho(T){const w=T.match(ei);return w?w[0]:""}(this.remaining);if(!y)return;this.capture(y);let k="";if(this.consumeOptional("=")){const be=function As(T){const w=T.match(Is);return w?w[0]:""}(this.remaining);be&&(k=be,this.capture(k))}const G=yr(y),se=yr(k);if(w.hasOwnProperty(G)){let be=w[G];Array.isArray(be)||(be=[be],w[G]=be),be.push(se)}else w[G]=se}parseParens(w){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=Yr(this.remaining),G=this.remaining[k.length];if("/"!==G&&")"!==G&&";"!==G)throw new Error(`Cannot parse url '${this.url}'`);let se;k.indexOf(":")>-1?(se=k.substr(0,k.indexOf(":")),this.capture(se),this.capture(":")):w&&(se=$t);const be=this.parseChildren();y[se]=1===Object.keys(be).length?be[$t]:new ct([],be),this.consumeOptional("//")}return y}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new Error(`Expected "${w}".`)}}class dr{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const y=this.pathFromRoot(w);return y.length>1?y[y.length-2]:null}children(w){const y=ss(w,this._root);return y?y.children.map(k=>k.value):[]}firstChild(w){const y=ss(w,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(w){const y=Ps(w,this._root);return y.length<2?[]:y[y.length-2].children.map(G=>G.value).filter(G=>G!==w)}pathFromRoot(w){return Ps(w,this._root).map(y=>y.value)}}function ss(T,w){if(T===w.value)return w;for(const y of w.children){const k=ss(T,y);if(k)return k}return null}function Ps(T,w){if(T===w.value)return[w];for(const y of w.children){const k=Ps(T,y);if(k.length)return k.unshift(w),k}return[]}class rr{constructor(w,y){this.value=w,this.children=y}toString(){return`TreeNode(${this.value})`}}function vi(T){const w={};return T&&T.children.forEach(y=>w[y.value.outlet]=y),w}class Es extends dr{constructor(w,y){super(w),this.snapshot=y,eo(this,w)}toString(){return this.snapshot.toString()}}function Js(T,w){const y=function vr(T,w){const be=new zs([],{},{},"",{},$t,w,null,T.root,-1,{});return new Zr("",new rr(be,[]))}(T,w),k=new lt.X([new et("",{})]),G=new lt.X({}),se=new lt.X({}),be=new lt.X({}),Le=new lt.X(""),Ct=new mr(k,G,be,Le,se,$t,w,y.root);return Ct.snapshot=y.root,new Es(new rr(Ct,[]),y)}class mr{constructor(w,y,k,G,se,be,Le,Ct){this.url=w,this.params=y,this.queryParams=k,this.fragment=G,this.data=se,this.outlet=be,this.component=Le,this._futureSnapshot=Ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,In.U)(w=>Ti(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,In.U)(w=>Ti(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qs(T,w="emptyOnly"){const y=T.pathFromRoot;let k=0;if("always"!==w)for(k=y.length-1;k>=1;){const G=y[k],se=y[k-1];if(G.routeConfig&&""===G.routeConfig.path)k--;else{if(se.component)break;k--}}return function fo(T){return T.reduce((w,y)=>({params:Object.assign(Object.assign({},w.params),y.params),data:Object.assign(Object.assign({},w.data),y.data),resolve:Object.assign(Object.assign({},w.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(k))}class zs{constructor(w,y,k,G,se,be,Le,Ct,Jt,Kn,vn){this.url=w,this.params=y,this.queryParams=k,this.fragment=G,this.data=se,this.outlet=be,this.component=Le,this.routeConfig=Ct,this._urlSegment=Jt,this._lastPathIndex=Kn,this._resolve=vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zr extends dr{constructor(w,y){super(y),this.url=w,eo(this,y)}toString(){return xo(this._root)}}function eo(T,w){w.value._routerState=T,w.children.forEach(y=>eo(T,y))}function xo(T){const w=T.children.length>0?` { ${T.children.map(xo).join(", ")} } `:"";return`${T.value}${w}`}function Gs(T){if(T.snapshot){const w=T.snapshot,y=T._futureSnapshot;T.snapshot=y,Ze(w.queryParams,y.queryParams)||T.queryParams.next(y.queryParams),w.fragment!==y.fragment&&T.fragment.next(y.fragment),Ze(w.params,y.params)||T.params.next(y.params),function at(T,w){if(T.length!==w.length)return!1;for(let y=0;y<T.length;++y)if(!Ze(T[y],w[y]))return!1;return!0}(w.url,y.url)||T.url.next(y.url),Ze(w.data,y.data)||T.data.next(y.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function br(T,w){const y=Ze(T.params,w.params)&&function me(T,w){return ae(T,w)&&T.every((y,k)=>Ze(y.parameters,w[k].parameters))}(T.url,w.url);return y&&!(!T.parent!=!w.parent)&&(!T.parent||br(T.parent,w.parent))}function z(T,w,y){if(y&&T.shouldReuseRoute(w.value,y.value.snapshot)){const k=y.value;k._futureSnapshot=w.value;const G=function H(T,w,y){return w.children.map(k=>{for(const G of y.children)if(T.shouldReuseRoute(k.value,G.value.snapshot))return z(T,k,G);return z(T,k)})}(T,w,y);return new rr(k,G)}{if(T.shouldAttach(w.value)){const se=T.retrieve(w.value);if(null!==se){const be=se.route;return be.value._futureSnapshot=w.value,be.children=w.children.map(Le=>z(T,Le)),be}}const k=function re(T){return new mr(new lt.X(T.url),new lt.X(T.params),new lt.X(T.queryParams),new lt.X(T.fragment),new lt.X(T.data),T.outlet,T.component,T)}(w.value),G=w.children.map(se=>z(T,se));return new rr(k,G)}}function Ke(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Tt(T){return"object"==typeof T&&null!=T&&T.outlets}function nn(T,w,y,k,G){let se={};if(k&&st(k,(Le,Ct)=>{se[Ct]=Array.isArray(Le)?Le.map(Jt=>`${Jt}`):`${Le}`}),T===w)return new Ue(y,se,G);const be=Ln(T,w,y);return new Ue(be,se,G)}function Ln(T,w,y){const k={};return st(T.children,(G,se)=>{k[se]=G===w?y:Ln(G,w,y)}),new ct(T.segments,k)}class Gn{constructor(w,y,k){if(this.isAbsolute=w,this.numberOfDoubleDots=y,this.commands=k,w&&k.length>0&&Ke(k[0]))throw new Error("Root segment cannot have matrix parameters");const G=k.find(Tt);if(G&&G!==Pn(k))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vr{constructor(w,y,k){this.segmentGroup=w,this.processChildren=y,this.index=k}}function Eo(T,w,y){if(T||(T=new ct([],{})),0===T.segments.length&&T.hasChildren())return oo(T,w,y);const k=function gl(T,w,y){let k=0,G=w;const se={match:!1,pathIndex:0,commandIndex:0};for(;G<T.segments.length;){if(k>=y.length)return se;const be=T.segments[G],Le=y[k];if(Tt(Le))break;const Ct=`${Le}`,Jt=k<y.length-1?y[k+1]:null;if(G>0&&void 0===Ct)break;if(Ct&&Jt&&"object"==typeof Jt&&void 0===Jt.outlets){if(!Mo(Ct,Jt,be))return se;k+=2}else{if(!Mo(Ct,{},be))return se;k++}G++}return{match:!0,pathIndex:G,commandIndex:k}}(T,w,y),G=y.slice(k.commandIndex);if(k.match&&k.pathIndex<T.segments.length){const se=new ct(T.segments.slice(0,k.pathIndex),{});return se.children[$t]=new ct(T.segments.slice(k.pathIndex),T.children),oo(se,0,G)}return k.match&&0===G.length?new ct(T.segments,{}):k.match&&!T.hasChildren()?Wa(T,w,y):k.match?oo(T,0,G):Wa(T,w,y)}function oo(T,w,y){if(0===y.length)return new ct(T.segments,{});{const k=function qr(T){return Tt(T[0])?T[0].outlets:{[$t]:T}}(y),G={};return st(k,(se,be)=>{"string"==typeof se&&(se=[se]),null!==se&&(G[be]=Eo(T.children[be],w,se))}),st(T.children,(se,be)=>{void 0===k[be]&&(G[be]=se)}),new ct(T.segments,G)}}function Wa(T,w,y){const k=T.segments.slice(0,w);let G=0;for(;G<y.length;){const se=y[G];if(Tt(se)){const Ct=Oo(se.outlets);return new ct(k,Ct)}if(0===G&&Ke(y[0])){k.push(new et(T.segments[w].path,ja(y[0]))),G++;continue}const be=Tt(se)?se.outlets[$t]:`${se}`,Le=G<y.length-1?y[G+1]:null;be&&Le&&Ke(Le)?(k.push(new et(be,ja(Le))),G+=2):(k.push(new et(be,{})),G++)}return new ct(k,{})}function Oo(T){const w={};return st(T,(y,k)=>{"string"==typeof y&&(y=[y]),null!==y&&(w[k]=Wa(new ct([],{}),0,y))}),w}function ja(T){const w={};return st(T,(y,k)=>w[k]=`${y}`),w}function Mo(T,w,y){return T==y.path&&Ze(w,y.parameters)}class $a{constructor(w,y,k,G){this.routeReuseStrategy=w,this.futureState=y,this.currState=k,this.forwardEvent=G}activate(w){const y=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,k,w),Gs(this.futureState.root),this.activateChildRoutes(y,k,w)}deactivateChildRoutes(w,y,k){const G=vi(y);w.children.forEach(se=>{const be=se.value.outlet;this.deactivateRoutes(se,G[be],k),delete G[be]}),st(G,(se,be)=>{this.deactivateRouteAndItsChildren(se,k)})}deactivateRoutes(w,y,k){const G=w.value,se=y?y.value:null;if(G===se)if(G.component){const be=k.getContext(G.outlet);be&&this.deactivateChildRoutes(w,y,be.children)}else this.deactivateChildRoutes(w,y,k);else se&&this.deactivateRouteAndItsChildren(y,k)}deactivateRouteAndItsChildren(w,y){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,y):this.deactivateRouteAndOutlet(w,y)}detachAndStoreRouteSubtree(w,y){const k=y.getContext(w.value.outlet),G=k&&w.value.component?k.children:y,se=vi(w);for(const be of Object.keys(se))this.deactivateRouteAndItsChildren(se[be],G);if(k&&k.outlet){const be=k.outlet.detach(),Le=k.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:be,route:w,contexts:Le})}}deactivateRouteAndOutlet(w,y){const k=y.getContext(w.value.outlet),G=k&&w.value.component?k.children:y,se=vi(w);for(const be of Object.keys(se))this.deactivateRouteAndItsChildren(se[be],G);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(w,y,k){const G=vi(y);w.children.forEach(se=>{this.activateRoutes(se,G[se.value.outlet],k),this.forwardEvent(new mi(se.value.snapshot))}),w.children.length&&this.forwardEvent(new Mr(w.value.snapshot))}activateRoutes(w,y,k){const G=w.value,se=y?y.value:null;if(Gs(G),G===se)if(G.component){const be=k.getOrCreateContext(G.outlet);this.activateChildRoutes(w,y,be.children)}else this.activateChildRoutes(w,y,k);else if(G.component){const be=k.getOrCreateContext(G.outlet);if(this.routeReuseStrategy.shouldAttach(G.snapshot)){const Le=this.routeReuseStrategy.retrieve(G.snapshot);this.routeReuseStrategy.store(G.snapshot,null),be.children.onOutletReAttached(Le.contexts),be.attachRef=Le.componentRef,be.route=Le.route.value,be.outlet&&be.outlet.attach(Le.componentRef,Le.route.value),Gs(Le.route.value),this.activateChildRoutes(w,null,be.children)}else{const Le=function Ya(T){for(let w=T.parent;w;w=w.parent){const y=w.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(G.snapshot),Ct=Le?Le.module.componentFactoryResolver:null;be.attachRef=null,be.route=G,be.resolver=Ct,be.outlet&&be.outlet.activateWith(G,Ct),this.activateChildRoutes(w,null,be.children)}}else this.activateChildRoutes(w,null,k)}}class sa{constructor(w,y){this.routes=w,this.module=y}}function Os(T){return"function"==typeof T}function to(T){return T instanceof Ue}const os=Symbol("INITIAL_VALUE");function Bo(){return Qe(T=>function We(...T){const w=(0,Pe.yG)(T),y=(0,Pe.jO)(T),{args:k,keys:G}=(0,j.D)(T);if(0===k.length)return(0,le.D)([],w);const se=new b.y(function S(T,w,y=ce.y){return k=>{Y(w,()=>{const{length:G}=T,se=new Array(G);let be=G,Le=G;for(let Ct=0;Ct<G;Ct++)Y(w,()=>{const Jt=(0,le.D)(T[Ct],w);let Kn=!1;Jt.subscribe((0,Me.x)(k,vn=>{se[Ct]=vn,Kn||(Kn=!0,Le--),Le||k.next(y(se.slice()))},()=>{--be||k.complete()}))},k)},k)}}(k,w,G?be=>(0,Ge.n)(G,be):ce.y));return y?se.pipe((0,Oe.Z)(y)):se}(T.map(w=>w.pipe((0,gn.q)(1),(0,Or.O)(os)))).pipe(_t((w,y)=>{let k=!1;return y.reduce((G,se,be)=>G!==os?G:(se===os&&(k=!0),k||!1!==se&&be!==y.length-1&&!to(se)?G:se),w)},os),(0,Vt.h)(w=>w!==os),(0,In.U)(w=>to(w)?w:!0===w),(0,gn.q)(1)))}class Vo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new po,this.attachRef=null}}class po{constructor(){this.contexts=new Map}onChildOutletCreated(w,y){const k=this.getOrCreateContext(w);k.outlet=y,this.contexts.set(w,k)}onChildOutletDestroyed(w){const y=this.getContext(w);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let y=this.getContext(w);return y||(y=new Vo,this.contexts.set(w,y)),y}getContext(w){return this.contexts.get(w)||null}}let jo=(()=>{class T{constructor(y,k,G,se,be){this.parentContexts=y,this.location=k,this.resolver=G,this.changeDetector=be,this.activated=null,this._activatedRoute=null,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.attachEvents=new A.vpe,this.detachEvents=new A.vpe,this.name=se||$t,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,k){this.activated=y,this._activatedRoute=k,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,k){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const be=(k=k||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),Le=this.parentContexts.getOrCreateContext(this.name).children,Ct=new Da(y,Le,this.location.injector);this.activated=this.location.createComponent(be,this.location.length,Ct),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(y){return new(y||T)(A.Y36(po),A.Y36(A.s_b),A.Y36(A._Vd),A.$8M("name"),A.Y36(A.sBO))},T.\u0275dir=A.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class Da{constructor(w,y,k){this.route=w,this.childContexts=y,this.parent=k}get(w,y){return w===mr?this.route:w===po?this.childContexts:this.parent.get(w,y)}}let oa=(()=>{class T{}return T.\u0275fac=function(y){return new(y||T)},T.\u0275cmp=A.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,k){1&y&&A._UZ(0,"router-outlet")},directives:[jo],encapsulation:2}),T})();function Ir(T,w=""){for(let y=0;y<T.length;y++){const k=T[y];U(k,ee(w,k))}}function U(T,w){T.children&&Ir(T.children,w)}function ee(T,w){return w?T||w.path?T&&!w.path?`${T}/`:!T&&w.path?w.path:`${T}/${w.path}`:"":T}function V(T){const w=T.children&&T.children.map(V),y=w?Object.assign(Object.assign({},T),{children:w}):Object.assign({},T);return!y.component&&(w||y.loadChildren)&&y.outlet&&y.outlet!==$t&&(y.component=oa),y}function ne(T){return T.outlet||$t}function ke(T,w){const y=T.filter(k=>ne(k)===w);return y.push(...T.filter(k=>ne(k)!==w)),y}const wt={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pt(T,w,y){var k;if(""===w.path)return"full"===w.pathMatch&&(T.hasChildren()||y.length>0)?Object.assign({},wt):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const se=(w.matcher||fs)(y,T,w);if(!se)return Object.assign({},wt);const be={};st(se.posParams,(Ct,Jt)=>{be[Jt]=Ct.path});const Le=se.consumed.length>0?Object.assign(Object.assign({},be),se.consumed[se.consumed.length-1].parameters):be;return{matched:!0,consumedSegments:se.consumed,remainingSegments:y.slice(se.consumed.length),parameters:Le,positionalParamSegments:null!==(k=se.posParams)&&void 0!==k?k:{}}}function cn(T,w,y,k,G="corrected"){if(y.length>0&&function Mi(T,w,y){return y.some(k=>hr(T,w,k)&&ne(k)!==$t)}(T,y,k)){const be=new ct(w,function Ei(T,w,y,k){const G={};G[$t]=k,k._sourceSegment=T,k._segmentIndexShift=w.length;for(const se of y)if(""===se.path&&ne(se)!==$t){const be=new ct([],{});be._sourceSegment=T,be._segmentIndexShift=w.length,G[ne(se)]=be}return G}(T,w,k,new ct(y,T.children)));return be._sourceSegment=T,be._segmentIndexShift=w.length,{segmentGroup:be,slicedSegments:[]}}if(0===y.length&&function Bi(T,w,y){return y.some(k=>hr(T,w,k))}(T,y,k)){const be=new ct(T.segments,function ni(T,w,y,k,G,se){const be={};for(const Le of k)if(hr(T,y,Le)&&!G[ne(Le)]){const Ct=new ct([],{});Ct._sourceSegment=T,Ct._segmentIndexShift="legacy"===se?T.segments.length:w.length,be[ne(Le)]=Ct}return Object.assign(Object.assign({},G),be)}(T,w,y,k,T.children,G));return be._sourceSegment=T,be._segmentIndexShift=w.length,{segmentGroup:be,slicedSegments:y}}const se=new ct(T.segments,T.children);return se._sourceSegment=T,se._segmentIndexShift=w.length,{segmentGroup:se,slicedSegments:y}}function hr(T,w,y){return(!(T.hasChildren()||w.length>0)||"full"!==y.pathMatch)&&""===y.path}function sr(T,w,y,k){return!!(ne(T)===k||k!==$t&&hr(w,y,T))&&("**"===T.path||Pt(w,T,y).matched)}function Sr(T,w,y){return 0===w.length&&!T.children[y]}class ao{constructor(w){this.segmentGroup=w||null}}class Ss{constructor(w){this.urlTree=w}}function Wn(T){return(0,Ee._)(new ao(T))}function Co(T){return(0,Ee._)(new Ss(T))}class vl{constructor(w,y,k,G,se){this.configLoader=y,this.urlSerializer=k,this.urlTree=G,this.config=se,this.allowRedirects=!0,this.ngModule=w.get(A.h0i)}apply(){const w=cn(this.urlTree.root,[],[],this.config).segmentGroup,y=new ct(w.segments,w.children);return this.expandSegmentGroup(this.ngModule,this.config,y,$t).pipe((0,In.U)(se=>this.createUrlTree(ca(se),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,_i.K)(se=>{if(se instanceof Ss)return this.allowRedirects=!1,this.match(se.urlTree);throw se instanceof ao?this.noMatchError(se):se}))}match(w){return this.expandSegmentGroup(this.ngModule,this.config,w.root,$t).pipe((0,In.U)(G=>this.createUrlTree(ca(G),w.queryParams,w.fragment))).pipe((0,_i.K)(G=>{throw G instanceof ao?this.noMatchError(G):G}))}noMatchError(w){return new Error(`Cannot match any routes. URL Segment: '${w.segmentGroup}'`)}createUrlTree(w,y,k){const G=w.segments.length>0?new ct([],{[$t]:w}):w;return new Ue(G,y,k)}expandSegmentGroup(w,y,k,G){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(w,y,k).pipe((0,In.U)(se=>new ct([],se))):this.expandSegment(w,k,y,k.segments,G,!0)}expandChildren(w,y,k){const G=[];for(const se of Object.keys(k.children))"primary"===se?G.unshift(se):G.push(se);return(0,le.D)(G).pipe((0,Wr.b)(se=>{const be=k.children[se],Le=ke(y,se);return this.expandSegmentGroup(w,Le,be,se).pipe((0,In.U)(Ct=>({segment:Ct,outlet:se})))}),_t((se,be)=>(se[be.outlet]=be.segment,se),{}),function Tn(T,w){const y=arguments.length>=2;return k=>k.pipe(T?(0,Vt.h)((G,se)=>T(G,se,k)):ce.y,yt(1),y?di(w):ri(()=>new de))}())}expandSegment(w,y,k,G,se,be){return(0,le.D)(k).pipe((0,Wr.b)(Le=>this.expandSegmentAgainstRoute(w,y,k,Le,G,se,be).pipe((0,_i.K)(Jt=>{if(Jt instanceof ao)return(0,Dt.of)(null);throw Jt}))),fi(Le=>!!Le),(0,_i.K)((Le,Ct)=>{if(Le instanceof de||"EmptyError"===Le.name)return Sr(y,G,se)?(0,Dt.of)(new ct([],{})):Wn(y);throw Le}))}expandSegmentAgainstRoute(w,y,k,G,se,be,Le){return sr(G,y,se,be)?void 0===G.redirectTo?this.matchSegmentAgainstRoute(w,y,G,se,be):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,y,k,G,se,be):Wn(y):Wn(y)}expandSegmentAgainstRouteUsingRedirect(w,y,k,G,se,be){return"**"===G.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,k,G,be):this.expandRegularSegmentAgainstRouteUsingRedirect(w,y,k,G,se,be)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,y,k,G){const se=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?Co(se):this.lineralizeSegments(k,se).pipe((0,Ai.z)(be=>{const Le=new ct(be,{});return this.expandSegment(w,Le,y,be,G,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,y,k,G,se,be){const{matched:Le,consumedSegments:Ct,remainingSegments:Jt,positionalParamSegments:Kn}=Pt(y,G,se);if(!Le)return Wn(y);const vn=this.applyRedirectCommands(Ct,G.redirectTo,Kn);return G.redirectTo.startsWith("/")?Co(vn):this.lineralizeSegments(G,vn).pipe((0,Ai.z)(fr=>this.expandSegment(w,y,k,fr.concat(Jt),be,!1)))}matchSegmentAgainstRoute(w,y,k,G,se){if("**"===k.path)return k.loadChildren?(k._loadedConfig?(0,Dt.of)(k._loadedConfig):this.configLoader.load(w.injector,k)).pipe((0,In.U)(vn=>(k._loadedConfig=vn,new ct(G,{})))):(0,Dt.of)(new ct(G,{}));const{matched:be,consumedSegments:Le,remainingSegments:Ct}=Pt(y,k,G);return be?this.getChildConfig(w,k,G).pipe((0,Ai.z)(Kn=>{const vn=Kn.module,fr=Kn.routes,{segmentGroup:Vi,slicedSegments:qs}=cn(y,Le,Ct,fr),Xs=new ct(Vi.segments,Vi.children);if(0===qs.length&&Xs.hasChildren())return this.expandChildren(vn,fr,Xs).pipe((0,In.U)(Ul=>new ct(Le,Ul)));if(0===fr.length&&0===qs.length)return(0,Dt.of)(new ct(Le,{}));const fa=ne(k)===se;return this.expandSegment(vn,Xs,fr,qs,fa?$t:se,!0).pipe((0,In.U)(Ia=>new ct(Le.concat(Ia.segments),Ia.children)))})):Wn(y)}getChildConfig(w,y,k){return y.children?(0,Dt.of)(new sa(y.children,w)):y.loadChildren?void 0!==y._loadedConfig?(0,Dt.of)(y._loadedConfig):this.runCanLoadGuards(w.injector,y,k).pipe((0,Ai.z)(G=>G?this.configLoader.load(w.injector,y).pipe((0,In.U)(se=>(y._loadedConfig=se,se))):function $o(T){return(0,Ee._)(Ki(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))}(y))):(0,Dt.of)(new sa([],w))}runCanLoadGuards(w,y,k){const G=y.canLoad;if(!G||0===G.length)return(0,Dt.of)(!0);const se=G.map(be=>{const Le=w.get(be);let Ct;if(function yl(T){return T&&Os(T.canLoad)}(Le))Ct=Le.canLoad(y,k);else{if(!Os(Le))throw new Error("Invalid CanLoad guard");Ct=Le(y,k)}return He(Ct)});return(0,Dt.of)(se).pipe(Bo(),(0,li.b)(be=>{if(!to(be))return;const Le=Ki(`Redirecting to "${this.urlSerializer.serialize(be)}"`);throw Le.url=be,Le}),(0,In.U)(be=>!0===be))}lineralizeSegments(w,y){let k=[],G=y.root;for(;;){if(k=k.concat(G.segments),0===G.numberOfChildren)return(0,Dt.of)(k);if(G.numberOfChildren>1||!G.children[$t])return(0,Ee._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${w.redirectTo}'`));G=G.children[$t]}}applyRedirectCommands(w,y,k){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),w,k)}applyRedirectCreatreUrlTree(w,y,k,G){const se=this.createSegmentGroup(w,y.root,k,G);return new Ue(se,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(w,y){const k={};return st(w,(G,se)=>{if("string"==typeof G&&G.startsWith(":")){const Le=G.substring(1);k[se]=y[Le]}else k[se]=G}),k}createSegmentGroup(w,y,k,G){const se=this.createSegments(w,y.segments,k,G);let be={};return st(y.children,(Le,Ct)=>{be[Ct]=this.createSegmentGroup(w,Le,k,G)}),new ct(se,be)}createSegments(w,y,k,G){return y.map(se=>se.path.startsWith(":")?this.findPosParam(w,se,G):this.findOrReturn(se,k))}findPosParam(w,y,k){const G=k[y.path.substring(1)];if(!G)throw new Error(`Cannot redirect to '${w}'. Cannot find '${y.path}'.`);return G}findOrReturn(w,y){let k=0;for(const G of y){if(G.path===w.path)return y.splice(k),G;k++}return w}}function ca(T){const w={};for(const k of Object.keys(T.children)){const se=ca(T.children[k]);(se.segments.length>0||se.hasChildren())&&(w[k]=se)}return function Aa(T){if(1===T.numberOfChildren&&T.children[$t]){const w=T.children[$t];return new ct(T.segments.concat(w.segments),w.children)}return T}(new ct(T.segments,w))}class Ui{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class qa{constructor(w,y){this.component=w,this.route=y}}function as(T,w,y){const k=T._root;return Ho(k,w?w._root:null,y,[k.value])}function Gt(T,w,y){const k=function xr(T){if(!T)return null;for(let w=T.parent;w;w=w.parent){const y=w.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(w);return(k?k.module.injector:y).get(T)}function Ho(T,w,y,k,G={canDeactivateChecks:[],canActivateChecks:[]}){const se=vi(w);return T.children.forEach(be=>{(function bl(T,w,y,k,G={canDeactivateChecks:[],canActivateChecks:[]}){const se=T.value,be=w?w.value:null,Le=y?y.getContext(T.value.outlet):null;if(be&&se.routeConfig===be.routeConfig){const Ct=function Ta(T,w,y){if("function"==typeof y)return y(T,w);switch(y){case"pathParamsChange":return!ae(T.url,w.url);case"pathParamsOrQueryParamsChange":return!ae(T.url,w.url)||!Ze(T.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!br(T,w)||!Ze(T.queryParams,w.queryParams);default:return!br(T,w)}}(be,se,se.routeConfig.runGuardsAndResolvers);Ct?G.canActivateChecks.push(new Ui(k)):(se.data=be.data,se._resolvedData=be._resolvedData),Ho(T,w,se.component?Le?Le.children:null:y,k,G),Ct&&Le&&Le.outlet&&Le.outlet.isActivated&&G.canDeactivateChecks.push(new qa(Le.outlet.component,be))}else be&&no(w,Le,G),G.canActivateChecks.push(new Ui(k)),Ho(T,null,se.component?Le?Le.children:null:y,k,G)})(be,se[be.value.outlet],y,k.concat([be.value]),G),delete se[be.value.outlet]}),st(se,(be,Le)=>no(be,y.getContext(Le),G)),G}function no(T,w,y){const k=vi(T),G=T.value;st(k,(se,be)=>{no(se,G.component?w?w.children.getContext(be):null:w,y)}),y.canDeactivateChecks.push(new qa(G.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,G))}class N{}function K(T){return new b.y(w=>w.error(T))}class Te{constructor(w,y,k,G,se,be){this.rootComponentType=w,this.config=y,this.urlTree=k,this.url=G,this.paramsInheritanceStrategy=se,this.relativeLinkResolution=be}recognize(){const w=cn(this.urlTree.root,[],[],this.config.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,w,$t);if(null===y)return null;const k=new zs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),G=new rr(k,y),se=new Zr(this.url,G);return this.inheritParamsAndData(se._root),se}inheritParamsAndData(w){const y=w.value,k=Qs(y,this.paramsInheritanceStrategy);y.params=Object.freeze(k.params),y.data=Object.freeze(k.data),w.children.forEach(G=>this.inheritParamsAndData(G))}processSegmentGroup(w,y,k){return 0===y.segments.length&&y.hasChildren()?this.processChildren(w,y):this.processSegment(w,y,y.segments,k)}processChildren(w,y){const k=[];for(const se of Object.keys(y.children)){const be=y.children[se],Le=ke(w,se),Ct=this.processSegmentGroup(Le,be,se);if(null===Ct)return null;k.push(...Ct)}const G=_n(k);return function Ie(T){T.sort((w,y)=>w.value.outlet===$t?-1:y.value.outlet===$t?1:w.value.outlet.localeCompare(y.value.outlet))}(G),G}processSegment(w,y,k,G){for(const se of w){const be=this.processSegmentAgainstRoute(se,y,k,G);if(null!==be)return be}return Sr(y,k,G)?[]:null}processSegmentAgainstRoute(w,y,k,G){if(w.redirectTo||!sr(w,y,k,G))return null;let se,be=[],Le=[];if("**"===w.path){const Vi=k.length>0?Pn(k).parameters:{};se=new zs(k,Vi,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jn(w),ne(w),w.component,w,fn(y),Jn(y)+k.length,gi(w))}else{const Vi=Pt(y,w,k);if(!Vi.matched)return null;be=Vi.consumedSegments,Le=Vi.remainingSegments,se=new zs(be,Vi.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jn(w),ne(w),w.component,w,fn(y),Jn(y)+be.length,gi(w))}const Ct=function rt(T){return T.children?T.children:T.loadChildren?T._loadedConfig.routes:[]}(w),{segmentGroup:Jt,slicedSegments:Kn}=cn(y,be,Le,Ct.filter(Vi=>void 0===Vi.redirectTo),this.relativeLinkResolution);if(0===Kn.length&&Jt.hasChildren()){const Vi=this.processChildren(Ct,Jt);return null===Vi?null:[new rr(se,Vi)]}if(0===Ct.length&&0===Kn.length)return[new rr(se,[])];const vn=ne(w)===G,fr=this.processSegment(Ct,Jt,Kn,vn?$t:G);return null===fr?null:[new rr(se,fr)]}}function It(T){const w=T.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function _n(T){const w=[],y=new Set;for(const k of T){if(!It(k)){w.push(k);continue}const G=w.find(se=>k.value.routeConfig===se.value.routeConfig);void 0!==G?(G.children.push(...k.children),y.add(G)):w.push(k)}for(const k of y){const G=_n(k.children);w.push(new rr(k.value,G))}return w.filter(k=>!y.has(k))}function fn(T){let w=T;for(;w._sourceSegment;)w=w._sourceSegment;return w}function Jn(T){let w=T,y=w._segmentIndexShift?w._segmentIndexShift:0;for(;w._sourceSegment;)w=w._sourceSegment,y+=w._segmentIndexShift?w._segmentIndexShift:0;return y-1}function jn(T){return T.data||{}}function gi(T){return T.resolve||{}}function ue(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function I(T){return Qe(w=>{const y=T(w);return y?(0,le.D)(y).pipe((0,In.U)(()=>w)):(0,Dt.of)(w)})}class it extends class W{shouldDetach(w){return!1}store(w,y){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,y){return w.routeConfig===y.routeConfig}}{}const sn=new A.OlP("ROUTES");class Li{constructor(w,y,k,G){this.injector=w,this.compiler=y,this.onLoadStartListener=k,this.onLoadEndListener=G}load(w,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const G=this.loadModuleFactory(y.loadChildren).pipe((0,In.U)(se=>{this.onLoadEndListener&&this.onLoadEndListener(y);const be=se.create(w);return new sa(Lt(be.injector.get(sn,void 0,A.XFs.Self|A.XFs.Optional)).map(V),be)}),(0,_i.K)(se=>{throw y._loader$=void 0,se}));return y._loader$=new Mt(G,()=>new xt.x).pipe(Ne()),y._loader$}loadModuleFactory(w){return He(w()).pipe((0,Ai.z)(y=>y instanceof A.YKP?(0,Dt.of)(y):(0,le.D)(this.compiler.compileModuleAsync(y))))}}class Cr{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,y){return w}}function Qr(T){throw T}function Qi(T,w,y){return w.parse("/")}function mn(T,w){return(0,Dt.of)(null)}const On={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ii={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qn=(()=>{class T{constructor(y,k,G,se,be,Le,Ct){this.rootComponentType=y,this.urlSerializer=k,this.rootContexts=G,this.location=se,this.config=Ct,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xt.x,this.errorHandler=Qr,this.malformedUriErrorHandler=Qi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mn,afterPreactivation:mn},this.urlHandlingStrategy=new Cr,this.routeReuseStrategy=new it,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=be.get(A.h0i),this.console=be.get(A.c2e);const vn=be.get(A.R0b);this.isNgZoneEnabled=vn instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(Ct),this.currentUrlTree=function Ce(){return new Ue(new ct([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Li(be,Le,fr=>this.triggerEvent(new hs(fr)),fr=>this.triggerEvent(new ki(fr))),this.routerState=Js(this.currentUrlTree,this.rootComponentType),this.transitions=new lt.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const k=this.events;return y.pipe((0,Vt.h)(G=>0!==G.id),(0,In.U)(G=>Object.assign(Object.assign({},G),{extractedUrl:this.urlHandlingStrategy.extract(G.rawUrl)})),Qe(G=>{let se=!1,be=!1;return(0,Dt.of)(G).pipe((0,li.b)(Le=>{this.currentNavigation={id:Le.id,initialUrl:Le.currentRawUrl,extractedUrl:Le.extractedUrl,trigger:Le.source,extras:Le.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qe(Le=>{const Ct=this.browserUrlTree.toString(),Jt=!this.navigated||Le.extractedUrl.toString()!==Ct||Ct!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Jt)&&this.urlHandlingStrategy.shouldProcessUrl(Le.rawUrl))return co(Le.source)&&(this.browserUrlTree=Le.extractedUrl),(0,Dt.of)(Le).pipe(Qe(vn=>{const fr=this.transitions.getValue();return k.next(new Ni(vn.id,this.serializeUrl(vn.extractedUrl),vn.source,vn.restoredState)),fr!==this.transitions.getValue()?bt.E:Promise.resolve(vn)}),function Wt(T,w,y,k){return Qe(G=>function la(T,w,y,k,G){return new vl(T,w,y,k,G).apply()}(T,w,y,G.extractedUrl,k).pipe((0,In.U)(se=>Object.assign(Object.assign({},G),{urlAfterRedirects:se}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,li.b)(vn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vn.urlAfterRedirects})}),function Zi(T,w,y,k,G){return(0,Ai.z)(se=>function te(T,w,y,k,G="emptyOnly",se="legacy"){try{const be=new Te(T,w,y,k,G,se).recognize();return null===be?K(new N):(0,Dt.of)(be)}catch(be){return K(be)}}(T,w,se.urlAfterRedirects,y(se.urlAfterRedirects),k,G).pipe((0,In.U)(be=>Object.assign(Object.assign({},se),{targetSnapshot:be}))))}(this.rootComponentType,this.config,vn=>this.serializeUrl(vn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,li.b)(vn=>{if("eager"===this.urlUpdateStrategy){if(!vn.extras.skipLocationChange){const Vi=this.urlHandlingStrategy.merge(vn.urlAfterRedirects,vn.rawUrl);this.setBrowserUrl(Vi,vn)}this.browserUrlTree=vn.urlAfterRedirects}const fr=new Un(vn.id,this.serializeUrl(vn.extractedUrl),this.serializeUrl(vn.urlAfterRedirects),vn.targetSnapshot);k.next(fr)}));if(Jt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:fr,extractedUrl:Vi,source:qs,restoredState:Xs,extras:fa}=Le,pa=new Ni(fr,this.serializeUrl(Vi),qs,Xs);k.next(pa);const Ia=Js(Vi,this.rootComponentType).snapshot;return(0,Dt.of)(Object.assign(Object.assign({},Le),{targetSnapshot:Ia,urlAfterRedirects:Vi,extras:Object.assign(Object.assign({},fa),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Le.rawUrl,Le.resolve(null),bt.E}),I(Le=>{const{targetSnapshot:Ct,id:Jt,extractedUrl:Kn,rawUrl:vn,extras:{skipLocationChange:fr,replaceUrl:Vi}}=Le;return this.hooks.beforePreactivation(Ct,{navigationId:Jt,appliedUrlTree:Kn,rawUrlTree:vn,skipLocationChange:!!fr,replaceUrl:!!Vi})}),(0,li.b)(Le=>{const Ct=new Us(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot);this.triggerEvent(Ct)}),(0,In.U)(Le=>Object.assign(Object.assign({},Le),{guards:as(Le.targetSnapshot,Le.currentSnapshot,this.rootContexts)})),function lo(T,w){return(0,Ai.z)(y=>{const{targetSnapshot:k,currentSnapshot:G,guards:{canActivateChecks:se,canDeactivateChecks:be}}=y;return 0===be.length&&0===se.length?(0,Dt.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function Fo(T,w,y,k){return(0,le.D)(T).pipe((0,Ai.z)(G=>function v(T,w,y,k,G){const se=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,Dt.of)(!0);const be=se.map(Le=>{const Ct=Gt(Le,w,G);let Jt;if(function Lo(T){return T&&Os(T.canDeactivate)}(Ct))Jt=He(Ct.canDeactivate(T,w,y,k));else{if(!Os(Ct))throw new Error("Invalid CanDeactivate guard");Jt=He(Ct(T,w,y,k))}return Jt.pipe(fi())});return(0,Dt.of)(be).pipe(Bo())}(G.component,G.route,y,w,k)),fi(G=>!0!==G,!0))}(be,k,G,T).pipe((0,Ai.z)(Le=>Le&&function _l(T){return"boolean"==typeof T}(Le)?function _s(T,w,y,k){return(0,le.D)(w).pipe((0,Wr.b)(G=>(0,ut.z)(function Ws(T,w){return null!==T&&w&&w(new lr(T)),(0,Dt.of)(!0)}(G.route.parent,k),function ls(T,w){return null!==T&&w&&w(new cr(T)),(0,Dt.of)(!0)}(G.route,k),function g(T,w,y){const k=w[w.length-1],se=w.slice(0,w.length-1).reverse().map(be=>function Vl(T){const w=T.routeConfig?T.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:T,guards:w}:null}(be)).filter(be=>null!==be).map(be=>(0,St.P)(()=>{const Le=be.guards.map(Ct=>{const Jt=Gt(Ct,be.node,y);let Kn;if(function So(T){return T&&Os(T.canActivateChild)}(Jt))Kn=He(Jt.canActivateChild(k,T));else{if(!Os(Jt))throw new Error("Invalid CanActivateChild guard");Kn=He(Jt(k,T))}return Kn.pipe(fi())});return(0,Dt.of)(Le).pipe(Bo())}));return(0,Dt.of)(se).pipe(Bo())}(T,G.path,y),function X(T,w,y){const k=w.routeConfig?w.routeConfig.canActivate:null;if(!k||0===k.length)return(0,Dt.of)(!0);const G=k.map(se=>(0,St.P)(()=>{const be=Gt(se,w,y);let Le;if(function Ms(T){return T&&Os(T.canActivate)}(be))Le=He(be.canActivate(w,T));else{if(!Os(be))throw new Error("Invalid CanActivate guard");Le=He(be(w,T))}return Le.pipe(fi())}));return(0,Dt.of)(G).pipe(Bo())}(T,G.route,y))),fi(G=>!0!==G,!0))}(k,se,T,w):(0,Dt.of)(Le)),(0,In.U)(Le=>Object.assign(Object.assign({},y),{guardsResult:Le})))})}(this.ngModule.injector,Le=>this.triggerEvent(Le)),(0,li.b)(Le=>{if(to(Le.guardsResult)){const Jt=Ki(`Redirecting to "${this.serializeUrl(Le.guardsResult)}"`);throw Jt.url=Le.guardsResult,Jt}const Ct=new jr(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot,!!Le.guardsResult);this.triggerEvent(Ct)}),(0,Vt.h)(Le=>!!Le.guardsResult||(this.restoreHistory(Le),this.cancelNavigationTransition(Le,""),!1)),I(Le=>{if(Le.guards.canActivateChecks.length)return(0,Dt.of)(Le).pipe((0,li.b)(Ct=>{const Jt=new $r(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(Jt)}),Qe(Ct=>{let Jt=!1;return(0,Dt.of)(Ct).pipe(function Hr(T,w){return(0,Ai.z)(y=>{const{targetSnapshot:k,guards:{canActivateChecks:G}}=y;if(!G.length)return(0,Dt.of)(y);let se=0;return(0,le.D)(G).pipe((0,Wr.b)(be=>function ps(T,w,y,k){return function Ji(T,w,y,k){const G=ue(T);if(0===G.length)return(0,Dt.of)({});const se={};return(0,le.D)(G).pipe((0,Ai.z)(be=>function L(T,w,y,k){const G=Gt(T,w,k);return He(G.resolve?G.resolve(w,y):G(w,y))}(T[be],w,y,k).pipe((0,li.b)(Le=>{se[be]=Le}))),yt(1),(0,Ai.z)(()=>ue(se).length===G.length?(0,Dt.of)(se):bt.E))}(T._resolve,T,w,k).pipe((0,In.U)(se=>(T._resolvedData=se,T.data=Object.assign(Object.assign({},T.data),Qs(T,y).resolve),null)))}(be.route,k,T,w)),(0,li.b)(()=>se++),yt(1),(0,Ai.z)(be=>se===G.length?(0,Dt.of)(y):bt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,li.b)({next:()=>Jt=!0,complete:()=>{Jt||(this.restoreHistory(Ct),this.cancelNavigationTransition(Ct,"At least one route resolver didn't emit any value."))}}))}),(0,li.b)(Ct=>{const Jt=new Lr(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(Jt)}))}),I(Le=>{const{targetSnapshot:Ct,id:Jt,extractedUrl:Kn,rawUrl:vn,extras:{skipLocationChange:fr,replaceUrl:Vi}}=Le;return this.hooks.afterPreactivation(Ct,{navigationId:Jt,appliedUrlTree:Kn,rawUrlTree:vn,skipLocationChange:!!fr,replaceUrl:!!Vi})}),(0,In.U)(Le=>{const Ct=function we(T,w,y){const k=z(T,w._root,y?y._root:void 0);return new Es(k,w)}(this.routeReuseStrategy,Le.targetSnapshot,Le.currentRouterState);return Object.assign(Object.assign({},Le),{targetRouterState:Ct})}),(0,li.b)(Le=>{this.currentUrlTree=Le.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Le.urlAfterRedirects,Le.rawUrl),this.routerState=Le.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Le.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Le),this.browserUrlTree=Le.urlAfterRedirects)}),((T,w,y)=>(0,In.U)(k=>(new $a(w,k.targetRouterState,k.currentRouterState,y).activate(T),k)))(this.rootContexts,this.routeReuseStrategy,Le=>this.triggerEvent(Le)),(0,li.b)({next(){se=!0},complete(){se=!0}}),(0,ds.x)(()=>{var Le;se||be||this.cancelNavigationTransition(G,`Navigation ID ${G.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Le=this.currentNavigation)||void 0===Le?void 0:Le.id)===G.id&&(this.currentNavigation=null)}),(0,_i.K)(Le=>{if(be=!0,function zi(T){return T&&T[Yn]}(Le)){const Ct=to(Le.url);Ct||(this.navigated=!0,this.restoreHistory(G,!0));const Jt=new ns(G.id,this.serializeUrl(G.extractedUrl),Le.message);k.next(Jt),Ct?setTimeout(()=>{const Kn=this.urlHandlingStrategy.merge(Le.url,this.rawUrlTree),vn={skipLocationChange:G.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||co(G.source)};this.scheduleNavigation(Kn,"imperative",null,vn,{resolve:G.resolve,reject:G.reject,promise:G.promise})},0):G.resolve(!1)}else{this.restoreHistory(G,!0);const Ct=new Kr(G.id,this.serializeUrl(G.extractedUrl),Le);k.next(Ct);try{G.resolve(this.errorHandler(Le))}catch(Jt){G.reject(Jt)}}return bt.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const k="popstate"===y.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{var G;const se={replaceUrl:!0},be=(null===(G=y.state)||void 0===G?void 0:G.navigationId)?y.state:null;if(be){const Ct=Object.assign({},be);delete Ct.navigationId,delete Ct.\u0275routerPageId,0!==Object.keys(Ct).length&&(se.state=Ct)}const Le=this.parseUrl(y.url);this.scheduleNavigation(Le,k,be,se)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){Ir(y),this.config=y.map(V),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,k={}){const{relativeTo:G,queryParams:se,fragment:be,queryParamsHandling:Le,preserveFragment:Ct}=k,Jt=G||this.routerState.root,Kn=Ct?this.currentUrlTree.fragment:be;let vn=null;switch(Le){case"merge":vn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),se);break;case"preserve":vn=this.currentUrlTree.queryParams;break;default:vn=se||null}return null!==vn&&(vn=this.removeEmptyProps(vn)),function De(T,w,y,k,G){if(0===y.length)return nn(w.root,w.root,w.root,k,G);const se=function ti(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Gn(!0,0,T);let w=0,y=!1;const k=T.reduce((G,se,be)=>{if("object"==typeof se&&null!=se){if(se.outlets){const Le={};return st(se.outlets,(Ct,Jt)=>{Le[Jt]="string"==typeof Ct?Ct.split("/"):Ct}),[...G,{outlets:Le}]}if(se.segmentPath)return[...G,se.segmentPath]}return"string"!=typeof se?[...G,se]:0===be?(se.split("/").forEach((Le,Ct)=>{0==Ct&&"."===Le||(0==Ct&&""===Le?y=!0:".."===Le?w++:""!=Le&&G.push(Le))}),G):[...G,se]},[]);return new Gn(y,w,k)}(y);if(se.toRoot())return nn(w.root,w.root,new ct([],{}),k,G);const be=function wo(T,w,y){if(T.isAbsolute)return new Vr(w.root,!0,0);if(-1===y.snapshot._lastPathIndex){const se=y.snapshot._urlSegment;return new Vr(se,se===w.root,0)}const k=Ke(T.commands[0])?0:1;return function Jr(T,w,y){let k=T,G=w,se=y;for(;se>G;){if(se-=G,k=k.parent,!k)throw new Error("Invalid number of '../'");G=k.segments.length}return new Vr(k,!1,G-se)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+k,T.numberOfDoubleDots)}(se,w,T),Le=be.processChildren?oo(be.segmentGroup,be.index,se.commands):Eo(be.segmentGroup,be.index,se.commands);return nn(w.root,be.segmentGroup,Le,k,G)}(Jt,this.currentUrlTree,y,vn,null!=Kn?Kn:null)}navigateByUrl(y,k={skipLocationChange:!1}){const G=to(y)?y:this.parseUrl(y),se=this.urlHandlingStrategy.merge(G,this.rawUrlTree);return this.scheduleNavigation(se,"imperative",null,k)}navigate(y,k={skipLocationChange:!1}){return function wr(T){for(let w=0;w<T.length;w++){const y=T[w];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${w}`)}}(y),this.navigateByUrl(this.createUrlTree(y,k),k)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let k;try{k=this.urlSerializer.parse(y)}catch(G){k=this.malformedUriErrorHandler(G,this.urlSerializer,y)}return k}isActive(y,k){let G;if(G=!0===k?Object.assign({},On):!1===k?Object.assign({},ii):k,to(y))return en(this.currentUrlTree,y,G);const se=this.parseUrl(y);return en(this.currentUrlTree,se,G)}removeEmptyProps(y){return Object.keys(y).reduce((k,G)=>{const se=y[G];return null!=se&&(k[G]=se),k},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Br(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,k,G,se,be){var Le,Ct;if(this.disposed)return Promise.resolve(!1);let Jt,Kn,vn;be?(Jt=be.resolve,Kn=be.reject,vn=be.promise):vn=new Promise((qs,Xs)=>{Jt=qs,Kn=Xs});const fr=++this.navigationId;let Vi;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(G=this.location.getState()),Vi=G&&G.\u0275routerPageId?G.\u0275routerPageId:se.replaceUrl||se.skipLocationChange?null!==(Le=this.browserPageId)&&void 0!==Le?Le:0:(null!==(Ct=this.browserPageId)&&void 0!==Ct?Ct:0)+1):Vi=0,this.setTransition({id:fr,targetPageId:Vi,source:k,restoredState:G,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:se,resolve:Jt,reject:Kn,promise:vn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),vn.catch(qs=>Promise.reject(qs))}setBrowserUrl(y,k){const G=this.urlSerializer.serialize(y),se=Object.assign(Object.assign({},k.extras.state),this.generateNgRouterState(k.id,k.targetPageId));this.location.isCurrentPathEqualTo(G)||k.extras.replaceUrl?this.location.replaceState(G,"",se):this.location.go(G,"",se)}restoreHistory(y,k=!1){var G,se;if("computed"===this.canceledNavigationResolution){const be=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(G=this.currentNavigation)||void 0===G?void 0:G.finalUrl)||0===be?this.currentUrlTree===(null===(se=this.currentNavigation)||void 0===se?void 0:se.finalUrl)&&0===be&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(be)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,k){const G=new ns(y.id,this.serializeUrl(y.extractedUrl),k);this.triggerEvent(G),y.resolve(!1)}generateNgRouterState(y,k){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:k}:{navigationId:y}}}return T.\u0275fac=function(y){A.$Z()},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();function co(T){return"imperative"!==T}class Xr{}class Ys{preload(w,y){return(0,Dt.of)(null)}}let Ls=(()=>{class T{constructor(y,k,G,se){this.router=y,this.injector=G,this.preloadingStrategy=se,this.loader=new Li(G,k,Ct=>y.triggerEvent(new hs(Ct)),Ct=>y.triggerEvent(new ki(Ct)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Vt.h)(y=>y instanceof Br),(0,Wr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(A.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,k){const G=[];for(const se of k)if(se.loadChildren&&!se.canLoad&&se._loadedConfig){const be=se._loadedConfig;G.push(this.processRoutes(be.module,be.routes))}else se.loadChildren&&!se.canLoad?G.push(this.preloadConfig(y,se)):se.children&&G.push(this.processRoutes(y,se.children));return(0,le.D)(G).pipe((0,ms.J)(),(0,In.U)(se=>{}))}preloadConfig(y,k){return this.preloadingStrategy.preload(k,()=>(k._loadedConfig?(0,Dt.of)(k._loadedConfig):this.loader.load(y.injector,k)).pipe((0,Ai.z)(se=>(k._loadedConfig=se,this.processRoutes(se.module,se.routes)))))}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(qn),A.LFG(A.Sil),A.LFG(A.zs3),A.LFG(Xr))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})(),Uo=(()=>{class T{constructor(y,k,G={}){this.router=y,this.viewportScroller=k,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Ni?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Br&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Sn&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,k){this.router.triggerEvent(new Sn(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(y){A.$Z()},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();const qo=new A.OlP("ROUTER_CONFIGURATION"),da=new A.OlP("ROUTER_FORROOT_GUARD"),Fn=[Tr.Ye,{provide:Et,useClass:Ot},{provide:qn,useFactory:function mo(T,w,y,k,G,se,be={},Le,Ct){const Jt=new qn(null,T,w,y,k,G,Lt(se));return Le&&(Jt.urlHandlingStrategy=Le),Ct&&(Jt.routeReuseStrategy=Ct),function td(T,w){T.errorHandler&&(w.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(w.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(w.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(w.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(w.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(w.canceledNavigationResolution=T.canceledNavigationResolution)}(be,Jt),be.enableTracing&&Jt.events.subscribe(Kn=>{var vn,fr;null===(vn=console.group)||void 0===vn||vn.call(console,`Router Event: ${Kn.constructor.name}`),console.log(Kn.toString()),console.log(Kn),null===(fr=console.groupEnd)||void 0===fr||fr.call(console)}),Jt},deps:[Et,po,Tr.Ye,A.zs3,A.Sil,sn,qo,[class or{},new A.FiY],[class E{},new A.FiY]]},po,{provide:mr,useFactory:function nd(T){return T.routerState.root},deps:[qn]},Ls,Ys,class Yo{preload(w,y){return y().pipe((0,_i.K)(()=>(0,Dt.of)(null)))}},{provide:qo,useValue:{enableTracing:!1}}];function El(){return new A.PXZ("Router",qn)}let io=(()=>{class T{constructor(y,k){}static forRoot(y,k){return{ngModule:T,providers:[Fn,Ml(y),{provide:da,useFactory:Xa,deps:[[qn,new A.FiY,new A.tp0]]},{provide:qo,useValue:k||{}},{provide:Tr.S$,useFactory:fc,deps:[Tr.lw,[new A.tBr(Tr.mr),new A.FiY],qo]},{provide:Uo,useFactory:iu,deps:[qn,Tr.EM,qo]},{provide:Xr,useExisting:k&&k.preloadingStrategy?k.preloadingStrategy:Ys},{provide:A.PXZ,multi:!0,useFactory:El},[Do,{provide:A.ip1,multi:!0,useFactory:Hl,deps:[Do]},{provide:Sl,useFactory:ru,deps:[Do]},{provide:A.tb,multi:!0,useExisting:Sl}]]}}static forChild(y){return{ngModule:T,providers:[Ml(y)]}}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(da,8),A.LFG(qn,8))},T.\u0275mod=A.oAB({type:T}),T.\u0275inj=A.cJS({}),T})();function iu(T,w,y){return y.scrollOffset&&w.setOffset(y.scrollOffset),new Uo(T,w,y)}function fc(T,w,y={}){return y.useHash?new Tr.Do(T,w):new Tr.b0(T,w)}function Xa(T){return"guarded"}function Ml(T){return[{provide:A.deG,multi:!0,useValue:T},{provide:sn,multi:!0,useValue:T}]}let Do=(()=>{class T{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new xt.x}appInitializer(){return this.injector.get(Tr.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let k=null;const G=new Promise(Le=>k=Le),se=this.injector.get(qn),be=this.injector.get(qo);return"disabled"===be.initialNavigation?(se.setUpLocationChangeListener(),k(!0)):"enabled"===be.initialNavigation||"enabledBlocking"===be.initialNavigation?(se.hooks.afterPreactivation=()=>this.initNavigation?(0,Dt.of)(null):(this.initNavigation=!0,k(!0),this.resultOfPreactivationDone),se.initialNavigation()):k(!0),G})}bootstrapListener(y){const k=this.injector.get(qo),G=this.injector.get(Ls),se=this.injector.get(Uo),be=this.injector.get(qn),Le=this.injector.get(A.z2F);y===Le.components[0]&&(("enabledNonBlocking"===k.initialNavigation||void 0===k.initialNavigation)&&be.initialNavigation(),G.setUpPreloading(),se.init(),be.resetRootComponentType(Le.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(y){return new(y||T)(A.LFG(A.zs3))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac}),T})();function Hl(T){return T.appInitializer.bind(T)}function ru(T){return T.bootstrapListener.bind(T)}const Sl=new A.OlP("Router Initializer")},2329:(dn,dt,q)=>{"use strict";function A(c,e,t,r,o,l,d){try{var h=c[l](d),p=h.value}catch(m){return void t(m)}h.done?e(p):Promise.resolve(p).then(r,o)}q.d(dt,{y8_:()=>sv,nvb:()=>ma,TlE:()=>es,u9r:()=>bi,Rki:()=>Ag,Ilk:()=>te,fHI:()=>al,pBf:()=>V,O7d:()=>Va,hH6:()=>na,a$l:()=>Nn,ZAu:()=>Ac,aNw:()=>cl,lLk:()=>$u,RsA:()=>le,M8C:()=>Vl,Kj0:()=>ro,vBJ:()=>Fr,xoR:()=>Ol,Tme:()=>Jt,cPb:()=>so,cek:()=>ch,woe:()=>If,UY4:()=>Ud,_fP:()=>Ji,iMs:()=>_h,rpg:()=>Sn,xsS:()=>Pd,T_1:()=>Xc,$V:()=>xg,QmN:()=>ce,dpR:()=>Yf,FM8:()=>Gt,Pa4:()=>ue,CP7:()=>Nr});const le={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ce={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Sn=1e3,$t=1001,Ti=1003,at=1006,si=1009,Ce=1012,en=1015,Bn=1016,Ye=1020,Ue=1023,me=1026,ae=1027,Gs=2400,br=2401,Tt=3e3,nn=3001,Jr="srgb",qr="srgb-linear",So=35044,Lo=35048,U="300 es";class V{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const o=this._listeners[e];if(void 0!==o){const l=o.indexOf(t);-1!==l&&o.splice(l,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const o=r.slice(0);for(let l=0,d=o.length;l<d;l++)o[l].call(this,e);e.target=null}}}const ne=[];for(let c=0;c<256;c++)ne[c]=(c<16?"0":"")+c.toString(16);let ke=1234567;const wt=Math.PI/180,Pt=180/Math.PI;function cn(){const c=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ne[255&c]+ne[c>>8&255]+ne[c>>16&255]+ne[c>>24&255]+"-"+ne[255&e]+ne[e>>8&255]+"-"+ne[e>>16&15|64]+ne[e>>24&255]+"-"+ne[63&t|128]+ne[t>>8&255]+"-"+ne[t>>16&255]+ne[t>>24&255]+ne[255&r]+ne[r>>8&255]+ne[r>>16&255]+ne[r>>24&255]).toLowerCase()}function ni(c,e,t){return Math.max(e,Math.min(t,c))}function Ei(c,e){return(c%e+e)%e}function hr(c,e,t){return(1-t)*c+t*e}function Aa(c){return 0==(c&c-1)&&0!==c}function Wt(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}var Vl=Object.freeze({__proto__:null,DEG2RAD:wt,RAD2DEG:Pt,generateUUID:cn,clamp:ni,euclideanModulo:Ei,mapLinear:function Mi(c,e,t,r,o){return r+(c-e)*(o-r)/(t-e)},inverseLerp:function Bi(c,e,t){return c!==e?(t-c)/(e-c):0},lerp:hr,damp:function sr(c,e,t,r){return hr(c,e,1-Math.exp(-t*r))},pingpong:function Sr(c,e=1){return e-Math.abs(Ei(c,2*e)-e)},smoothstep:function ao(c,e,t){return c<=e?0:c>=t?1:(c=(c-e)/(t-e))*c*(3-2*c)},smootherstep:function Ss(c,e,t){return c<=e?0:c>=t?1:(c=(c-e)/(t-e))*c*c*(c*(6*c-15)+10)},randInt:function Wn(c,e){return c+Math.floor(Math.random()*(e-c+1))},randFloat:function Co(c,e){return c+Math.random()*(e-c)},randFloatSpread:function aa(c){return c*(.5-Math.random())},seededRandom:function $o(c){void 0!==c&&(ke=c);let e=ke+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function la(c){return c*wt},radToDeg:function vl(c){return c*Pt},isPowerOfTwo:Aa,ceilPowerOfTwo:function ca(c){return Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},floorPowerOfTwo:Wt,setQuaternionFromProperEuler:function Ui(c,e,t,r,o){const l=Math.cos,d=Math.sin,h=l(t/2),p=d(t/2),m=l((e+r)/2),x=d((e+r)/2),M=l((e-r)/2),D=d((e-r)/2),R=l((r-e)/2),B=d((r-e)/2);switch(o){case"XYX":c.set(h*x,p*M,p*D,h*m);break;case"YZY":c.set(p*D,h*x,p*M,h*m);break;case"ZXZ":c.set(p*M,p*D,h*x,h*m);break;case"XZX":c.set(h*x,p*B,p*R,h*m);break;case"YXY":c.set(p*R,h*x,p*B,h*m);break;case"ZYZ":c.set(p*B,p*R,h*x,h*m);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}},normalize:function as(c,e){switch(e.constructor){case Float32Array:return c;case Uint16Array:return Math.round(65535*c);case Uint8Array:return Math.round(255*c);case Int16Array:return Math.round(32767*c);case Int8Array:return Math.round(127*c);default:throw new Error("Invalid component type.")}},denormalize:function qa(c,e){switch(e.constructor){case Float32Array:return c;case Uint16Array:return c/65535;case Uint8Array:return c/255;case Int16Array:return Math.max(c/32767,-1);case Int8Array:return Math.max(c/127,-1);default:throw new Error("Invalid component type.")}}});class Gt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),l=this.x-e.x,d=this.y-e.y;return this.x=l*r-d*o+e.x,this.y=l*o+d*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Gt.prototype.isVector2=!0;class xr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,d,h,p,m){const x=this.elements;return x[0]=e,x[1]=o,x[2]=h,x[3]=t,x[4]=l,x[5]=p,x[6]=r,x[7]=d,x[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,d=r[0],h=r[3],p=r[6],m=r[1],x=r[4],M=r[7],D=r[2],R=r[5],B=r[8],O=o[0],F=o[3],Z=o[6],ie=o[1],fe=o[4],oe=o[7],pe=o[2],Fe=o[5],Xe=o[8];return l[0]=d*O+h*ie+p*pe,l[3]=d*F+h*fe+p*Fe,l[6]=d*Z+h*oe+p*Xe,l[1]=m*O+x*ie+M*pe,l[4]=m*F+x*fe+M*Fe,l[7]=m*Z+x*oe+M*Xe,l[2]=D*O+R*ie+B*pe,l[5]=D*F+R*fe+B*Fe,l[8]=D*Z+R*oe+B*Xe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],x=e[8];return t*d*x-t*h*m-r*l*x+r*h*p+o*l*m-o*d*p}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],x=e[8],M=x*d-h*m,D=h*p-x*l,R=m*l-d*p,B=t*M+r*D+o*R;if(0===B)return this.set(0,0,0,0,0,0,0,0,0);const O=1/B;return e[0]=M*O,e[1]=(o*m-x*r)*O,e[2]=(h*r-o*d)*O,e[3]=D*O,e[4]=(x*t-o*p)*O,e[5]=(o*l-h*t)*O,e[6]=R*O,e[7]=(r*p-m*t)*O,e[8]=(d*t-r*l)*O,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,l,d,h){const p=Math.cos(l),m=Math.sin(l);return this.set(r*p,r*m,-r*(p*d+m*h)+d+e,-o*m,o*p,-o*(-m*d+p*h)+h+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,l=o[0],d=o[3],h=o[6],p=o[1],m=o[4],x=o[7];return o[0]=t*l+r*p,o[3]=t*d+r*m,o[6]=t*h+r*x,o[1]=-r*l+t*p,o[4]=-r*d+t*m,o[7]=-r*h+t*x,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Ho(c){for(let e=c.length-1;e>=0;--e)if(c[e]>65535)return!0;return!1}function no(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function lo(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function Fo(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}xr.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const _s={[Jr]:{[qr]:lo},[qr]:{[Jr]:Fo}},ls={legacyMode:!0,get workingColorSpace(){return qr},set workingColorSpace(c){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(c,e,t){if(this.legacyMode||e===t||!e||!t)return c;if(_s[e]&&void 0!==_s[e][t]){const r=_s[e][t];return c.r=r(c.r),c.g=r(c.g),c.b=r(c.b),c}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(c,e){return this.convert(c,this.workingColorSpace,e)},toWorkingColorSpace:function(c,e){return this.convert(c,e,this.workingColorSpace)}},Ws={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},X={r:0,g:0,b:0},g={h:0,s:0,l:0},v={h:0,s:0,l:0};function N(c,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?c+6*(e-c)*t:t<.5?e:t<2/3?c+6*(e-c)*(2/3-t):c}function K(c,e){return e.r=c.r,e.g=c.g,e.b=c.b,e}let Te,te=(()=>{class c{constructor(t,r,o){return void 0===r&&void 0===o?this.set(t):this.setRGB(t,r,o)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Jr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ls.toWorkingColorSpace(this,r),this}setRGB(t,r,o,l=qr){return this.r=t,this.g=r,this.b=o,ls.toWorkingColorSpace(this,l),this}setHSL(t,r,o,l=qr){if(t=Ei(t,1),r=ni(r,0,1),o=ni(o,0,1),0===r)this.r=this.g=this.b=o;else{const d=o<=.5?o*(1+r):o+r-o*r,h=2*o-d;this.r=N(h,d,t+1/3),this.g=N(h,d,t),this.b=N(h,d,t-1/3)}return ls.toWorkingColorSpace(this,l),this}setStyle(t,r=Jr){function o(d){void 0!==d&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let l;if(l=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let d;const p=l[2];switch(l[1]){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,ls.toWorkingColorSpace(this,r),o(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,ls.toWorkingColorSpace(this,r),o(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p)){const m=parseFloat(d[1])/360,x=parseInt(d[2],10)/100,M=parseInt(d[3],10)/100;return o(d[4]),this.setHSL(m,x,M,r)}}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(t)){const d=l[1],h=d.length;if(3===h)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,ls.toWorkingColorSpace(this,r),this;if(6===h)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,ls.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=Jr){const o=Ws[t.toLowerCase()];return void 0!==o?this.setHex(o,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=lo(t.r),this.g=lo(t.g),this.b=lo(t.b),this}copyLinearToSRGB(t){return this.r=Fo(t.r),this.g=Fo(t.g),this.b=Fo(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Jr){return ls.fromWorkingColorSpace(K(this,X),t),ni(255*X.r,0,255)<<16^ni(255*X.g,0,255)<<8^ni(255*X.b,0,255)<<0}getHexString(t=Jr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=qr){ls.fromWorkingColorSpace(K(this,X),r);const o=X.r,l=X.g,d=X.b,h=Math.max(o,l,d),p=Math.min(o,l,d);let m,x;const M=(p+h)/2;if(p===h)m=0,x=0;else{const D=h-p;switch(x=M<=.5?D/(h+p):D/(2-h-p),h){case o:m=(l-d)/D+(l<d?6:0);break;case l:m=(d-o)/D+2;break;case d:m=(o-l)/D+4}m/=6}return t.h=m,t.s=x,t.l=M,t}getRGB(t,r=qr){return ls.fromWorkingColorSpace(K(this,X),r),t.r=X.r,t.g=X.g,t.b=X.b,t}getStyle(t=Jr){return ls.fromWorkingColorSpace(K(this,X),t),t!==Jr?`color(${t} ${X.r} ${X.g} ${X.b})`:`rgb(${255*X.r|0},${255*X.g|0},${255*X.b|0})`}offsetHSL(t,r,o){return this.getHSL(g),g.h+=t,g.s+=r,g.l+=o,this.setHSL(g.h,g.s,g.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,o){return this.r=t.r+(r.r-t.r)*o,this.g=t.g+(r.g-t.g)*o,this.b=t.b+(r.b-t.b)*o,this}lerpHSL(t,r){this.getHSL(g),t.getHSL(v);const o=hr(g.h,v.h,r),l=hr(g.s,v.s,r),d=hr(g.l,v.l,r);return this.setHSL(o,l,d),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return c.NAMES=Ws,c})();te.prototype.isColor=!0,te.prototype.r=1,te.prototype.g=1,te.prototype.b=1;class Ie{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Te&&(Te=no("canvas")),Te.width=e.width,Te.height=e.height;const r=Te.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Te}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=no("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),l=o.data;for(let d=0;d<l.length;d++)l[d]=255*lo(l[d]/255);return r.putImageData(o,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*lo(t[r]/255)):lo(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class rt{constructor(e=null){this.uuid=cn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(null!==o){let l;if(Array.isArray(o)){l=[];for(let d=0,h=o.length;d<h;d++)l.push(It(o[d].isDataTexture?o[d].image:o[d]))}else l=It(o);r.url=l}return t||(e.images[this.uuid]=r),r}}function It(c){return"undefined"!=typeof HTMLImageElement&&c instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&c instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&c instanceof ImageBitmap?Ie.getDataURL(c):c.data?{data:Array.prototype.slice.call(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}rt.prototype.isSource=!0;let _n=0,yn=(()=>{class c extends V{constructor(t=c.DEFAULT_IMAGE,r=c.DEFAULT_MAPPING,o=$t,l=$t,d=at,h=1008,p=Ue,m=si,x=1,M=Tt){super(),Object.defineProperty(this,"id",{value:_n++}),this.uuid=cn(),this.name="",this.source=new rt(t),this.mipmaps=[],this.mapping=r,this.wrapS=o,this.wrapT=l,this.magFilter=d,this.minFilter=h,this.anisotropy=x,this.format=p,this.internalFormat=null,this.type=m,this.offset=new Gt(0,0),this.repeat=new Gt(1,1),this.center=new Gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=M,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const o={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),r||(t.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Sn:t.x=t.x-Math.floor(t.x);break;case $t:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Sn:t.y=t.y-Math.floor(t.y);break;case $t:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return c.DEFAULT_IMAGE=null,c.DEFAULT_MAPPING=300,c})();yn.prototype.isTexture=!0;class fn{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=this.w,d=e.elements;return this.x=d[0]*t+d[4]*r+d[8]*o+d[12]*l,this.y=d[1]*t+d[5]*r+d[9]*o+d[13]*l,this.z=d[2]*t+d[6]*r+d[10]*o+d[14]*l,this.w=d[3]*t+d[7]*r+d[11]*o+d[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,l;const p=e.elements,m=p[0],x=p[4],M=p[8],D=p[1],R=p[5],B=p[9],O=p[2],F=p[6],Z=p[10];if(Math.abs(x-D)<.01&&Math.abs(M-O)<.01&&Math.abs(B-F)<.01){if(Math.abs(x+D)<.1&&Math.abs(M+O)<.1&&Math.abs(B+F)<.1&&Math.abs(m+R+Z-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const fe=(m+1)/2,oe=(R+1)/2,pe=(Z+1)/2,Fe=(x+D)/4,Xe=(M+O)/4,tt=(B+F)/4;return fe>oe&&fe>pe?fe<.01?(r=0,o=.707106781,l=.707106781):(r=Math.sqrt(fe),o=Fe/r,l=Xe/r):oe>pe?oe<.01?(r=.707106781,o=0,l=.707106781):(o=Math.sqrt(oe),r=Fe/o,l=tt/o):pe<.01?(r=.707106781,o=.707106781,l=0):(l=Math.sqrt(pe),r=Xe/l,o=tt/l),this.set(r,o,l,t),this}let ie=Math.sqrt((F-B)*(F-B)+(M-O)*(M-O)+(D-x)*(D-x));return Math.abs(ie)<.001&&(ie=1),this.x=(F-B)/ie,this.y=(M-O)/ie,this.z=(D-x)/ie,this.w=Math.acos((m+R+Z-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}fn.prototype.isVector4=!0;class Jn extends V{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new fn(0,0,e,t),this.scissorTest=!1,this.viewport=new fn(0,0,e,t),this.texture=new yn({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:at,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Jn.prototype.isWebGLRenderTarget=!0;class jn extends yn{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=$t,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}jn.prototype.isDataArrayTexture=!0,class gi extends Jn{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new jn(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class Zi extends yn{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=$t,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Zi.prototype.isData3DTexture=!0,class Hr extends Jn{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new Zi(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class ps extends Jn{constructor(e,t,r,o={}){super(e,t,o);const l=this.texture;this.texture=[];for(let d=0;d<r;d++)this.texture[d]=l.clone(),this.texture[d].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,l=this.texture.length;o<l;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Ji{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,l,d,h){let p=r[o+0],m=r[o+1],x=r[o+2],M=r[o+3];const D=l[d+0],R=l[d+1],B=l[d+2],O=l[d+3];if(0===h)return e[t+0]=p,e[t+1]=m,e[t+2]=x,void(e[t+3]=M);if(1===h)return e[t+0]=D,e[t+1]=R,e[t+2]=B,void(e[t+3]=O);if(M!==O||p!==D||m!==R||x!==B){let F=1-h;const Z=p*D+m*R+x*B+M*O,ie=Z>=0?1:-1,fe=1-Z*Z;if(fe>Number.EPSILON){const pe=Math.sqrt(fe),Fe=Math.atan2(pe,Z*ie);F=Math.sin(F*Fe)/pe,h=Math.sin(h*Fe)/pe}const oe=h*ie;if(p=p*F+D*oe,m=m*F+R*oe,x=x*F+B*oe,M=M*F+O*oe,F===1-h){const pe=1/Math.sqrt(p*p+m*m+x*x+M*M);p*=pe,m*=pe,x*=pe,M*=pe}}e[t]=p,e[t+1]=m,e[t+2]=x,e[t+3]=M}static multiplyQuaternionsFlat(e,t,r,o,l,d){const h=r[o],p=r[o+1],m=r[o+2],x=r[o+3],M=l[d],D=l[d+1],R=l[d+2],B=l[d+3];return e[t]=h*B+x*M+p*R-m*D,e[t+1]=p*B+x*D+m*M-h*R,e[t+2]=m*B+x*R+h*D-p*M,e[t+3]=x*B-h*M-p*D-m*R,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,l=e._z,d=e._order,h=Math.cos,p=Math.sin,m=h(r/2),x=h(o/2),M=h(l/2),D=p(r/2),R=p(o/2),B=p(l/2);switch(d){case"XYZ":this._x=D*x*M+m*R*B,this._y=m*R*M-D*x*B,this._z=m*x*B+D*R*M,this._w=m*x*M-D*R*B;break;case"YXZ":this._x=D*x*M+m*R*B,this._y=m*R*M-D*x*B,this._z=m*x*B-D*R*M,this._w=m*x*M+D*R*B;break;case"ZXY":this._x=D*x*M-m*R*B,this._y=m*R*M+D*x*B,this._z=m*x*B+D*R*M,this._w=m*x*M-D*R*B;break;case"ZYX":this._x=D*x*M-m*R*B,this._y=m*R*M+D*x*B,this._z=m*x*B-D*R*M,this._w=m*x*M+D*R*B;break;case"YZX":this._x=D*x*M+m*R*B,this._y=m*R*M+D*x*B,this._z=m*x*B-D*R*M,this._w=m*x*M-D*R*B;break;case"XZY":this._x=D*x*M-m*R*B,this._y=m*R*M-D*x*B,this._z=m*x*B+D*R*M,this._w=m*x*M+D*R*B;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],l=t[8],d=t[1],h=t[5],p=t[9],m=t[2],x=t[6],M=t[10],D=r+h+M;if(D>0){const R=.5/Math.sqrt(D+1);this._w=.25/R,this._x=(x-p)*R,this._y=(l-m)*R,this._z=(d-o)*R}else if(r>h&&r>M){const R=2*Math.sqrt(1+r-h-M);this._w=(x-p)/R,this._x=.25*R,this._y=(o+d)/R,this._z=(l+m)/R}else if(h>M){const R=2*Math.sqrt(1+h-r-M);this._w=(l-m)/R,this._x=(o+d)/R,this._y=.25*R,this._z=(p+x)/R}else{const R=2*Math.sqrt(1+M-r-h);this._w=(d-o)/R,this._x=(l+m)/R,this._y=(p+x)/R,this._z=.25*R}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ni(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,l=e._z,d=e._w,h=t._x,p=t._y,m=t._z,x=t._w;return this._x=r*x+d*h+o*m-l*p,this._y=o*x+d*p+l*h-r*m,this._z=l*x+d*m+r*p-o*h,this._w=d*x-r*h-o*p-l*m,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,o=this._y,l=this._z,d=this._w;let h=d*e._w+r*e._x+o*e._y+l*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=d,this._x=r,this._y=o,this._z=l,this;const p=1-h*h;if(p<=Number.EPSILON){const R=1-t;return this._w=R*d+t*this._w,this._x=R*r+t*this._x,this._y=R*o+t*this._y,this._z=R*l+t*this._z,this.normalize(),this._onChangeCallback(),this}const m=Math.sqrt(p),x=Math.atan2(m,h),M=Math.sin((1-t)*x)/m,D=Math.sin(t*x)/m;return this._w=d*M+this._w*D,this._x=r*M+this._x*D,this._y=o*M+this._y*D,this._z=l*M+this._z*D,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(l),r*Math.cos(l),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ji.prototype.isQuaternion=!0;class ue{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(I.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(I.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*r+l[6]*o,this.y=l[1]*t+l[4]*r+l[7]*o,this.z=l[2]*t+l[5]*r+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=e.elements,d=1/(l[3]*t+l[7]*r+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*r+l[8]*o+l[12])*d,this.y=(l[1]*t+l[5]*r+l[9]*o+l[13])*d,this.z=(l[2]*t+l[6]*r+l[10]*o+l[14])*d,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,l=e.x,d=e.y,h=e.z,p=e.w,m=p*t+d*o-h*r,x=p*r+h*t-l*o,M=p*o+l*r-d*t,D=-l*t-d*r-h*o;return this.x=m*p+D*-l+x*-h-M*-d,this.y=x*p+D*-d+M*-l-m*-h,this.z=M*p+D*-h+m*-d-x*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*o,this.y=l[1]*t+l[5]*r+l[9]*o,this.z=l[2]*t+l[6]*r+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,l=e.z,d=t.x,h=t.y,p=t.z;return this.x=o*p-l*h,this.y=l*d-r*p,this.z=r*h-o*d,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return L.copy(this).projectOnVector(e),this.sub(L)}reflect(e){return this.sub(L.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(ni(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ue.prototype.isVector3=!0;const L=new ue,I=new Ji;class E{constructor(e=new ue(1/0,1/0,1/0),t=new ue(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,l=-1/0,d=-1/0,h=-1/0;for(let p=0,m=e.length;p<m;p+=3){const x=e[p],M=e[p+1],D=e[p+2];x<t&&(t=x),M<r&&(r=M),D<o&&(o=D),x>l&&(l=x),M>d&&(d=M),D>h&&(h=D)}return this.min.set(t,r,o),this.max.set(l,d,h),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,l=-1/0,d=-1/0,h=-1/0;for(let p=0,m=e.count;p<m;p++){const x=e.getX(p),M=e.getY(p),D=e.getZ(p);x<t&&(t=x),M<r&&(r=M),D<o&&(o=D),x>l&&(l=x),M>d&&(d=M),D>h&&(h=D)}return this.min.set(t,r,o),this.max.set(l,d,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=it.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const l=r.attributes.position;for(let d=0,h=l.count;d<h;d++)it.fromBufferAttribute(l,d).applyMatrix4(e.matrixWorld),this.expandByPoint(it)}else null===r.boundingBox&&r.computeBoundingBox(),sn.copy(r.boundingBox),sn.applyMatrix4(e.matrixWorld),this.union(sn);const o=e.children;for(let l=0,d=o.length;l<d;l++)this.expandByObject(o[l],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,it),it.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(On),ii.subVectors(this.max,On),Li.subVectors(e.a,On),or.subVectors(e.b,On),Cr.subVectors(e.c,On),Qr.subVectors(or,Li),Qi.subVectors(Cr,or),mn.subVectors(Li,Cr);let t=[0,-Qr.z,Qr.y,0,-Qi.z,Qi.y,0,-mn.z,mn.y,Qr.z,0,-Qr.x,Qi.z,0,-Qi.x,mn.z,0,-mn.x,-Qr.y,Qr.x,0,-Qi.y,Qi.x,0,-mn.y,mn.x,0];return!(!co(t,Li,or,Cr,ii)||(t=[1,0,0,0,1,0,0,0,1],!co(t,Li,or,Cr,ii)))&&(qn.crossVectors(Qr,Qi),t=[qn.x,qn.y,qn.z],co(t,Li,or,Cr,ii))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return it.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(it).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(W[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),W[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),W[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),W[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),W[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),W[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),W[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),W[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(W)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}E.prototype.isBox3=!0;const W=[new ue,new ue,new ue,new ue,new ue,new ue,new ue,new ue],it=new ue,sn=new E,Li=new ue,or=new ue,Cr=new ue,Qr=new ue,Qi=new ue,mn=new ue,On=new ue,ii=new ue,qn=new ue,wr=new ue;function co(c,e,t,r,o){for(let l=0,d=c.length-3;l<=d;l+=3){wr.fromArray(c,l);const h=o.x*Math.abs(wr.x)+o.y*Math.abs(wr.y)+o.z*Math.abs(wr.z),p=e.dot(wr),m=t.dot(wr),x=r.dot(wr);if(Math.max(-Math.max(p,m,x),Math.min(p,m,x))>h)return!1}return!0}const js=new E,$s=new ue,er=new ue,xl=new ue;class ua{constructor(e=new ue,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):js.setFromPoints(e).getCenter(r);let o=0;for(let l=0,d=e.length;l<d;l++)o=Math.max(o,r.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){xl.subVectors(e,this.center);const t=xl.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=.5*(r-this.radius);this.center.add(xl.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return!0===this.center.equals(e.center)?er.set(0,0,1).multiplyScalar(e.radius):er.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint($s.copy(e.center).add(er)),this.expandByPoint($s.copy(e.center).sub(er)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Xr=new ue,Yo=new ue,Ys=new ue,Ls=new ue,Uo=new ue,wl=new ue,qo=new ue;class da{constructor(e=new ue,t=new ue(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Xr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Xr.copy(this.direction).multiplyScalar(t).add(this.origin),Xr.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){Yo.copy(e).add(t).multiplyScalar(.5),Ys.copy(t).sub(e).normalize(),Ls.copy(this.origin).sub(Yo);const l=.5*e.distanceTo(t),d=-this.direction.dot(Ys),h=Ls.dot(this.direction),p=-Ls.dot(Ys),m=Ls.lengthSq(),x=Math.abs(1-d*d);let M,D,R,B;if(x>0)if(M=d*p-h,D=d*h-p,B=l*x,M>=0)if(D>=-B)if(D<=B){const O=1/x;M*=O,D*=O,R=M*(M+d*D+2*h)+D*(d*M+D+2*p)+m}else D=l,M=Math.max(0,-(d*D+h)),R=-M*M+D*(D+2*p)+m;else D=-l,M=Math.max(0,-(d*D+h)),R=-M*M+D*(D+2*p)+m;else D<=-B?(M=Math.max(0,-(-d*l+h)),D=M>0?-l:Math.min(Math.max(-l,-p),l),R=-M*M+D*(D+2*p)+m):D<=B?(M=0,D=Math.min(Math.max(-l,-p),l),R=D*(D+2*p)+m):(M=Math.max(0,-(d*l+h)),D=M>0?l:Math.min(Math.max(-l,-p),l),R=-M*M+D*(D+2*p)+m);else D=d>0?-l:l,M=Math.max(0,-(d*D+h)),R=-M*M+D*(D+2*p)+m;return r&&r.copy(this.direction).multiplyScalar(M).add(this.origin),o&&o.copy(Ys).multiplyScalar(D).add(Yo),R}intersectSphere(e,t){Xr.subVectors(e.center,this.origin);const r=Xr.dot(this.direction),o=Xr.dot(Xr)-r*r,l=e.radius*e.radius;if(o>l)return null;const d=Math.sqrt(l-o),h=r-d,p=r+d;return h<0&&p<0?null:this.at(h<0?p:h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,l,d,h,p;const m=1/this.direction.x,x=1/this.direction.y,M=1/this.direction.z,D=this.origin;return m>=0?(r=(e.min.x-D.x)*m,o=(e.max.x-D.x)*m):(r=(e.max.x-D.x)*m,o=(e.min.x-D.x)*m),x>=0?(l=(e.min.y-D.y)*x,d=(e.max.y-D.y)*x):(l=(e.max.y-D.y)*x,d=(e.min.y-D.y)*x),r>d||l>o||((l>r||r!=r)&&(r=l),(d<o||o!=o)&&(o=d),M>=0?(h=(e.min.z-D.z)*M,p=(e.max.z-D.z)*M):(h=(e.max.z-D.z)*M,p=(e.min.z-D.z)*M),r>p||h>o)||((h>r||r!=r)&&(r=h),(p<o||o!=o)&&(o=p),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return null!==this.intersectBox(e,Xr)}intersectTriangle(e,t,r,o,l){Uo.subVectors(t,e),wl.subVectors(r,e),qo.crossVectors(Uo,wl);let h,d=this.direction.dot(qo);if(d>0){if(o)return null;h=1}else{if(!(d<0))return null;h=-1,d=-d}Ls.subVectors(this.origin,e);const p=h*this.direction.dot(wl.crossVectors(Ls,wl));if(p<0)return null;const m=h*this.direction.dot(Uo.cross(Ls));if(m<0||p+m>d)return null;const x=-h*Ls.dot(qo);return x<0?null:this.at(x/d,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Fn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,d,h,p,m,x,M,D,R,B,O,F){const Z=this.elements;return Z[0]=e,Z[4]=t,Z[8]=r,Z[12]=o,Z[1]=l,Z[5]=d,Z[9]=h,Z[13]=p,Z[2]=m,Z[6]=x,Z[10]=M,Z[14]=D,Z[3]=R,Z[7]=B,Z[11]=O,Z[15]=F,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Fn).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/El.setFromMatrixColumn(e,0).length(),l=1/El.setFromMatrixColumn(e,1).length(),d=1/El.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*l,t[5]=r[5]*l,t[6]=r[6]*l,t[7]=0,t[8]=r[8]*d,t[9]=r[9]*d,t[10]=r[10]*d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,l=e.z,d=Math.cos(r),h=Math.sin(r),p=Math.cos(o),m=Math.sin(o),x=Math.cos(l),M=Math.sin(l);if("XYZ"===e.order){const D=d*x,R=d*M,B=h*x,O=h*M;t[0]=p*x,t[4]=-p*M,t[8]=m,t[1]=R+B*m,t[5]=D-O*m,t[9]=-h*p,t[2]=O-D*m,t[6]=B+R*m,t[10]=d*p}else if("YXZ"===e.order){const D=p*x,R=p*M,B=m*x,O=m*M;t[0]=D+O*h,t[4]=B*h-R,t[8]=d*m,t[1]=d*M,t[5]=d*x,t[9]=-h,t[2]=R*h-B,t[6]=O+D*h,t[10]=d*p}else if("ZXY"===e.order){const D=p*x,R=p*M,B=m*x,O=m*M;t[0]=D-O*h,t[4]=-d*M,t[8]=B+R*h,t[1]=R+B*h,t[5]=d*x,t[9]=O-D*h,t[2]=-d*m,t[6]=h,t[10]=d*p}else if("ZYX"===e.order){const D=d*x,R=d*M,B=h*x,O=h*M;t[0]=p*x,t[4]=B*m-R,t[8]=D*m+O,t[1]=p*M,t[5]=O*m+D,t[9]=R*m-B,t[2]=-m,t[6]=h*p,t[10]=d*p}else if("YZX"===e.order){const D=d*p,R=d*m,B=h*p,O=h*m;t[0]=p*x,t[4]=O-D*M,t[8]=B*M+R,t[1]=M,t[5]=d*x,t[9]=-h*x,t[2]=-m*x,t[6]=R*M+B,t[10]=D-O*M}else if("XZY"===e.order){const D=d*p,R=d*m,B=h*p,O=h*m;t[0]=p*x,t[4]=-M,t[8]=m*x,t[1]=D*M+O,t[5]=d*x,t[9]=R*M-B,t[2]=B*M-R,t[6]=h*x,t[10]=O*M+D}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(iu,e,fc)}lookAt(e,t,r){const o=this.elements;return mo.subVectors(e,t),0===mo.lengthSq()&&(mo.z=1),mo.normalize(),Xa.crossVectors(r,mo),0===Xa.lengthSq()&&(1===Math.abs(r.z)?mo.x+=1e-4:mo.z+=1e-4,mo.normalize(),Xa.crossVectors(r,mo)),Xa.normalize(),Ml.crossVectors(mo,Xa),o[0]=Xa.x,o[4]=Ml.x,o[8]=mo.x,o[1]=Xa.y,o[5]=Ml.y,o[9]=mo.y,o[2]=Xa.z,o[6]=Ml.z,o[10]=mo.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,d=r[0],h=r[4],p=r[8],m=r[12],x=r[1],M=r[5],D=r[9],R=r[13],B=r[2],O=r[6],F=r[10],Z=r[14],ie=r[3],fe=r[7],oe=r[11],pe=r[15],Fe=o[0],Xe=o[4],tt=o[8],kt=o[12],ht=o[1],he=o[5],$e=o[9],rn=o[13],gt=o[2],Ft=o[6],Rt=o[10],zt=o[14],ft=o[3],Zt=o[7],tn=o[11],pn=o[15];return l[0]=d*Fe+h*ht+p*gt+m*ft,l[4]=d*Xe+h*he+p*Ft+m*Zt,l[8]=d*tt+h*$e+p*Rt+m*tn,l[12]=d*kt+h*rn+p*zt+m*pn,l[1]=x*Fe+M*ht+D*gt+R*ft,l[5]=x*Xe+M*he+D*Ft+R*Zt,l[9]=x*tt+M*$e+D*Rt+R*tn,l[13]=x*kt+M*rn+D*zt+R*pn,l[2]=B*Fe+O*ht+F*gt+Z*ft,l[6]=B*Xe+O*he+F*Ft+Z*Zt,l[10]=B*tt+O*$e+F*Rt+Z*tn,l[14]=B*kt+O*rn+F*zt+Z*pn,l[3]=ie*Fe+fe*ht+oe*gt+pe*ft,l[7]=ie*Xe+fe*he+oe*Ft+pe*Zt,l[11]=ie*tt+fe*$e+oe*Rt+pe*tn,l[15]=ie*kt+fe*rn+oe*zt+pe*pn,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],l=e[12],d=e[1],h=e[5],p=e[9],m=e[13],x=e[2],M=e[6],D=e[10],R=e[14];return e[3]*(+l*p*M-o*m*M-l*h*D+r*m*D+o*h*R-r*p*R)+e[7]*(+t*p*R-t*m*D+l*d*D-o*d*R+o*m*x-l*p*x)+e[11]*(+t*m*M-t*h*R-l*d*M+r*d*R+l*h*x-r*m*x)+e[15]*(-o*h*x-t*p*M+t*h*D+o*d*M-r*d*D+r*p*x)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],d=e[4],h=e[5],p=e[6],m=e[7],x=e[8],M=e[9],D=e[10],R=e[11],B=e[12],O=e[13],F=e[14],Z=e[15],ie=M*F*m-O*D*m+O*p*R-h*F*R-M*p*Z+h*D*Z,fe=B*D*m-x*F*m-B*p*R+d*F*R+x*p*Z-d*D*Z,oe=x*O*m-B*M*m+B*h*R-d*O*R-x*h*Z+d*M*Z,pe=B*M*p-x*O*p-B*h*D+d*O*D+x*h*F-d*M*F,Fe=t*ie+r*fe+o*oe+l*pe;if(0===Fe)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Xe=1/Fe;return e[0]=ie*Xe,e[1]=(O*D*l-M*F*l-O*o*R+r*F*R+M*o*Z-r*D*Z)*Xe,e[2]=(h*F*l-O*p*l+O*o*m-r*F*m-h*o*Z+r*p*Z)*Xe,e[3]=(M*p*l-h*D*l-M*o*m+r*D*m+h*o*R-r*p*R)*Xe,e[4]=fe*Xe,e[5]=(x*F*l-B*D*l+B*o*R-t*F*R-x*o*Z+t*D*Z)*Xe,e[6]=(B*p*l-d*F*l-B*o*m+t*F*m+d*o*Z-t*p*Z)*Xe,e[7]=(d*D*l-x*p*l+x*o*m-t*D*m-d*o*R+t*p*R)*Xe,e[8]=oe*Xe,e[9]=(B*M*l-x*O*l-B*r*R+t*O*R+x*r*Z-t*M*Z)*Xe,e[10]=(d*O*l-B*h*l+B*r*m-t*O*m-d*r*Z+t*h*Z)*Xe,e[11]=(x*h*l-d*M*l-x*r*m+t*M*m+d*r*R-t*h*R)*Xe,e[12]=pe*Xe,e[13]=(x*O*o-B*M*o+B*r*D-t*O*D-x*r*F+t*M*F)*Xe,e[14]=(B*h*o-d*O*o-B*r*p+t*O*p+d*r*F-t*h*F)*Xe,e[15]=(d*M*o-x*h*o+x*r*p-t*M*p-d*r*D+t*h*D)*Xe,this}scale(e){const t=this.elements,r=e.x,o=e.y,l=e.z;return t[0]*=r,t[4]*=o,t[8]*=l,t[1]*=r,t[5]*=o,t[9]*=l,t[2]*=r,t[6]*=o,t[10]*=l,t[3]*=r,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),l=1-r,d=e.x,h=e.y,p=e.z,m=l*d,x=l*h;return this.set(m*d+r,m*h-o*p,m*p+o*h,0,m*h+o*p,x*h+r,x*p-o*d,0,m*p-o*h,x*p+o*d,l*p*p+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,l,d){return this.set(1,r,l,0,e,1,d,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,l=t._x,d=t._y,h=t._z,p=t._w,m=l+l,x=d+d,M=h+h,D=l*m,R=l*x,B=l*M,O=d*x,F=d*M,Z=h*M,ie=p*m,fe=p*x,oe=p*M,pe=r.x,Fe=r.y,Xe=r.z;return o[0]=(1-(O+Z))*pe,o[1]=(R+oe)*pe,o[2]=(B-fe)*pe,o[3]=0,o[4]=(R-oe)*Fe,o[5]=(1-(D+Z))*Fe,o[6]=(F+ie)*Fe,o[7]=0,o[8]=(B+fe)*Xe,o[9]=(F-ie)*Xe,o[10]=(1-(D+O))*Xe,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let l=El.set(o[0],o[1],o[2]).length();const d=El.set(o[4],o[5],o[6]).length(),h=El.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],io.copy(this);const m=1/l,x=1/d,M=1/h;return io.elements[0]*=m,io.elements[1]*=m,io.elements[2]*=m,io.elements[4]*=x,io.elements[5]*=x,io.elements[6]*=x,io.elements[8]*=M,io.elements[9]*=M,io.elements[10]*=M,t.setFromRotationMatrix(io),r.x=l,r.y=d,r.z=h,this}makePerspective(e,t,r,o,l,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,m=2*l/(r-o),x=(t+e)/(t-e),M=(r+o)/(r-o),D=-(d+l)/(d-l),R=-2*d*l/(d-l);return h[0]=2*l/(t-e),h[4]=0,h[8]=x,h[12]=0,h[1]=0,h[5]=m,h[9]=M,h[13]=0,h[2]=0,h[6]=0,h[10]=D,h[14]=R,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,o,l,d){const h=this.elements,p=1/(t-e),m=1/(r-o),x=1/(d-l),M=(t+e)*p,D=(r+o)*m,R=(d+l)*x;return h[0]=2*p,h[4]=0,h[8]=0,h[12]=-M,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-D,h[2]=0,h[6]=0,h[10]=-2*x,h[14]=-R,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Fn.prototype.isMatrix4=!0;const El=new ue,io=new Fn,iu=new ue(0,0,0),fc=new ue(1,1,1),Xa=new ue,Ml=new ue,mo=new ue,td=new Fn,nd=new Ji;class Do{constructor(e=0,t=0,r=0,o=Do.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,l=o[0],d=o[4],h=o[8],p=o[1],m=o[5],x=o[9],M=o[2],D=o[6],R=o[10];switch(t){case"XYZ":this._y=Math.asin(ni(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-x,R),this._z=Math.atan2(-d,l)):(this._x=Math.atan2(D,m),this._z=0);break;case"YXZ":this._x=Math.asin(-ni(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(h,R),this._z=Math.atan2(p,m)):(this._y=Math.atan2(-M,l),this._z=0);break;case"ZXY":this._x=Math.asin(ni(D,-1,1)),Math.abs(D)<.9999999?(this._y=Math.atan2(-M,R),this._z=Math.atan2(-d,m)):(this._y=0,this._z=Math.atan2(p,l));break;case"ZYX":this._y=Math.asin(-ni(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(D,R),this._z=Math.atan2(p,l)):(this._x=0,this._z=Math.atan2(-d,m));break;case"YZX":this._z=Math.asin(ni(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-x,m),this._y=Math.atan2(-M,l)):(this._x=0,this._y=Math.atan2(h,R));break;case"XZY":this._z=Math.asin(-ni(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(D,m),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-x,R),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return td.makeRotationFromQuaternion(e),this.setFromRotationMatrix(td,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nd.setFromEuler(this),this.setFromQuaternion(nd,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Do.prototype.isEuler=!0,Do.DefaultOrder="XYZ",Do.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Hl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let ru=0;const Sl=new ue,ha=new Ji,Ra=new Fn,T=new ue,w=new ue,y=new ue,k=new Ji,G=new ue(1,0,0),se=new ue(0,1,0),be=new ue(0,0,1),Le={type:"added"},Ct={type:"removed"};class Jt extends V{constructor(){super(),Object.defineProperty(this,"id",{value:ru++}),this.uuid=cn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jt.DefaultUp.clone();const e=new ue,t=new Do,r=new Ji,o=new ue(1,1,1);t._onChange(function l(){r.setFromEuler(t,!1)}),r._onChange(function d(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Fn},normalMatrix:{value:new xr}}),this.matrix=new Fn,this.matrixWorld=new Fn,this.matrixAutoUpdate=Jt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Hl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ha.setFromAxisAngle(e,t),this.quaternion.multiply(ha),this}rotateOnWorldAxis(e,t){return ha.setFromAxisAngle(e,t),this.quaternion.premultiply(ha),this}rotateX(e){return this.rotateOnAxis(G,e)}rotateY(e){return this.rotateOnAxis(se,e)}rotateZ(e){return this.rotateOnAxis(be,e)}translateOnAxis(e,t){return Sl.copy(e).applyQuaternion(this.quaternion),this.position.add(Sl.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(G,e)}translateY(e){return this.translateOnAxis(se,e)}translateZ(e){return this.translateOnAxis(be,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ra.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?T.copy(e):T.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),w.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ra.lookAt(w,T,this.up):Ra.lookAt(T,w,this.up),this.quaternion.setFromRotationMatrix(Ra),o&&(Ra.extractRotation(o.matrixWorld),ha.setFromRotationMatrix(Ra),this.quaternion.premultiply(ha.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Le)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ct)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Ct)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ra.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ra.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ra),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const d=this.children[r].getObjectByProperty(e,t);if(void 0!==d)return d}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w,e,y),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w,k,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const o=this.children;for(let l=0,d=o.length;l<d;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function l(h,p){return void 0===h[p.uuid]&&(h[p.uuid]=p.toJSON(e)),p.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes){const p=h.shapes;if(Array.isArray(p))for(let m=0,x=p.length;m<x;m++)l(e.shapes,p[m]);else l(e.shapes,p)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const h=[];for(let p=0,m=this.material.length;p<m;p++)h.push(l(e.materials,this.material[p]));o.material=h}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++)o.animations.push(l(e.animations,this.animations[h]))}if(t){const h=d(e.geometries),p=d(e.materials),m=d(e.textures),x=d(e.images),M=d(e.shapes),D=d(e.skeletons),R=d(e.animations),B=d(e.nodes);h.length>0&&(r.geometries=h),p.length>0&&(r.materials=p),m.length>0&&(r.textures=m),x.length>0&&(r.images=x),M.length>0&&(r.shapes=M),D.length>0&&(r.skeletons=D),R.length>0&&(r.animations=R),B.length>0&&(r.nodes=B)}return r.object=o,r;function d(h){const p=[];for(const m in h){const x=h[m];delete x.metadata,p.push(x)}return p}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}Jt.DefaultUp=new ue(0,1,0),Jt.DefaultMatrixAutoUpdate=!0,Jt.prototype.isObject3D=!0;const Kn=new ue,vn=new ue,fr=new ue,Vi=new ue,qs=new ue,Xs=new ue,fa=new ue,pa=new ue,Ia=new ue,Ul=new ue;class cs{constructor(e=new ue,t=new ue,r=new ue){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),Kn.subVectors(e,t),o.cross(Kn);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,r,o,l){Kn.subVectors(o,t),vn.subVectors(r,t),fr.subVectors(e,t);const d=Kn.dot(Kn),h=Kn.dot(vn),p=Kn.dot(fr),m=vn.dot(vn),x=vn.dot(fr),M=d*m-h*h;if(0===M)return l.set(-2,-1,-1);const D=1/M,R=(m*p-h*x)*D,B=(d*x-h*p)*D;return l.set(1-R-B,B,R)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,Vi),Vi.x>=0&&Vi.y>=0&&Vi.x+Vi.y<=1}static getUV(e,t,r,o,l,d,h,p){return this.getBarycoord(e,t,r,o,Vi),p.set(0,0),p.addScaledVector(l,Vi.x),p.addScaledVector(d,Vi.y),p.addScaledVector(h,Vi.z),p}static isFrontFacing(e,t,r,o){return Kn.subVectors(r,t),vn.subVectors(e,t),Kn.cross(vn).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kn.subVectors(this.c,this.b),vn.subVectors(this.a,this.b),.5*Kn.cross(vn).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return cs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,l){return cs.getUV(e,this.a,this.b,this.c,t,r,o,l)}containsPoint(e){return cs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,l=this.c;let d,h;qs.subVectors(o,r),Xs.subVectors(l,r),pa.subVectors(e,r);const p=qs.dot(pa),m=Xs.dot(pa);if(p<=0&&m<=0)return t.copy(r);Ia.subVectors(e,o);const x=qs.dot(Ia),M=Xs.dot(Ia);if(x>=0&&M<=x)return t.copy(o);const D=p*M-x*m;if(D<=0&&p>=0&&x<=0)return d=p/(p-x),t.copy(r).addScaledVector(qs,d);Ul.subVectors(e,l);const R=qs.dot(Ul),B=Xs.dot(Ul);if(B>=0&&R<=B)return t.copy(l);const O=R*m-p*B;if(O<=0&&m>=0&&B<=0)return h=m/(m-B),t.copy(r).addScaledVector(Xs,h);const F=x*B-R*M;if(F<=0&&M-x>=0&&R-B>=0)return fa.subVectors(l,o),h=(M-x)/(M-x+(R-B)),t.copy(o).addScaledVector(fa,h);const Z=1/(F+O+D);return d=O*Z,h=D*Z,t.copy(r).addScaledVector(qs,d).addScaledVector(Xs,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let a0=0;class Fs extends V{constructor(){super(),Object.defineProperty(this,"id",{value:a0++}),this.uuid=cn(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const o=this[t];void 0!==o?o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function o(l){const d=[];for(const h in l){const p=l[h];delete p.metadata,d.push(p)}return d}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const l=o(e.textures),d=o(e.images);l.length>0&&(r.textures=l),d.length>0&&(r.images=d)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const o=t.length;r=new Array(o);for(let l=0;l!==o;++l)r[l]=t[l].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Fs.prototype.isMaterial=!0,Fs.fromType=function(){return null};class Fr extends Fs{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Fr.prototype.isMeshBasicMaterial=!0;const Ns=new ue,Rh=new Gt;class es{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=So,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),d=new te),t[r++]=d.r,t[r++]=d.g,t[r++]=d.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),d=new Gt),t[r++]=d.x,t[r++]=d.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),d=new ue),t[r++]=d.x,t[r++]=d.y,t[r++]=d.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),d=new fn),t[r++]=d.x,t[r++]=d.y,t[r++]=d.z,t[r++]=d.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Rh.fromBufferAttribute(this,t),Rh.applyMatrix3(e),this.setXY(t,Rh.x,Rh.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Ns.fromBufferAttribute(this,t),Ns.applyMatrix3(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ns.fromBufferAttribute(this,t),Ns.applyMatrix4(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ns.fromBufferAttribute(this,t),Ns.applyNormalMatrix(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ns.fromBufferAttribute(this,t),Ns.transformDirection(e),this.setXYZ(t,Ns.x,Ns.y,Ns.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,l){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==So&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}es.prototype.isBufferAttribute=!0;class pc extends es{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class ks extends es{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class Ih extends es{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class Nn extends es{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Bg=0;const ys=new Fn,Xo=new Jt,zl=new ue,go=new E,Ka=new E,Ks=new ue;class bi extends V{constructor(){super(),Object.defineProperty(this,"id",{value:Bg++}),this.uuid=cn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Ho(e)?ks:pc)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const l=(new xr).getNormalMatrix(e);r.applyNormalMatrix(l),r.needsUpdate=!0}const o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(e),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ys.makeRotationFromQuaternion(e),this.applyMatrix4(ys),this}rotateX(e){return ys.makeRotationX(e),this.applyMatrix4(ys),this}rotateY(e){return ys.makeRotationY(e),this.applyMatrix4(ys),this}rotateZ(e){return ys.makeRotationZ(e),this.applyMatrix4(ys),this}translate(e,t,r){return ys.makeTranslation(e,t,r),this.applyMatrix4(ys),this}scale(e,t,r){return ys.makeScale(e,t,r),this.applyMatrix4(ys),this}lookAt(e){return Xo.lookAt(e),Xo.updateMatrix(),this.applyMatrix4(Xo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zl).negate(),this.translate(zl.x,zl.y,zl.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const l=e[r];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new Nn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new E);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ue(-1/0,-1/0,-1/0),new ue(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)go.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Ks.addVectors(this.boundingBox.min,go.min),this.boundingBox.expandByPoint(Ks),Ks.addVectors(this.boundingBox.max,go.max),this.boundingBox.expandByPoint(Ks)):(this.boundingBox.expandByPoint(go.min),this.boundingBox.expandByPoint(go.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ua);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ue,1/0);if(e){const r=this.boundingSphere.center;if(go.setFromBufferAttribute(e),t)for(let l=0,d=t.length;l<d;l++)Ka.setFromBufferAttribute(t[l]),this.morphTargetsRelative?(Ks.addVectors(go.min,Ka.min),go.expandByPoint(Ks),Ks.addVectors(go.max,Ka.max),go.expandByPoint(Ks)):(go.expandByPoint(Ka.min),go.expandByPoint(Ka.max));go.getCenter(r);let o=0;for(let l=0,d=e.count;l<d;l++)Ks.fromBufferAttribute(e,l),o=Math.max(o,r.distanceToSquared(Ks));if(t)for(let l=0,d=t.length;l<d;l++){const h=t[l],p=this.morphTargetsRelative;for(let m=0,x=h.count;m<x;m++)Ks.fromBufferAttribute(h,m),p&&(zl.fromBufferAttribute(e,m),Ks.add(zl)),o=Math.max(o,r.distanceToSquared(Ks))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,o=t.position.array,l=t.normal.array,d=t.uv.array,h=o.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new es(new Float32Array(4*h),4));const p=this.getAttribute("tangent").array,m=[],x=[];for(let ht=0;ht<h;ht++)m[ht]=new ue,x[ht]=new ue;const M=new ue,D=new ue,R=new ue,B=new Gt,O=new Gt,F=new Gt,Z=new ue,ie=new ue;function fe(ht,he,$e){M.fromArray(o,3*ht),D.fromArray(o,3*he),R.fromArray(o,3*$e),B.fromArray(d,2*ht),O.fromArray(d,2*he),F.fromArray(d,2*$e),D.sub(M),R.sub(M),O.sub(B),F.sub(B);const rn=1/(O.x*F.y-F.x*O.y);!isFinite(rn)||(Z.copy(D).multiplyScalar(F.y).addScaledVector(R,-O.y).multiplyScalar(rn),ie.copy(R).multiplyScalar(O.x).addScaledVector(D,-F.x).multiplyScalar(rn),m[ht].add(Z),m[he].add(Z),m[$e].add(Z),x[ht].add(ie),x[he].add(ie),x[$e].add(ie))}let oe=this.groups;0===oe.length&&(oe=[{start:0,count:r.length}]);for(let ht=0,he=oe.length;ht<he;++ht){const $e=oe[ht],rn=$e.start;for(let Ft=rn,Rt=rn+$e.count;Ft<Rt;Ft+=3)fe(r[Ft+0],r[Ft+1],r[Ft+2])}const pe=new ue,Fe=new ue,Xe=new ue,tt=new ue;function kt(ht){Xe.fromArray(l,3*ht),tt.copy(Xe);const he=m[ht];pe.copy(he),pe.sub(Xe.multiplyScalar(Xe.dot(he))).normalize(),Fe.crossVectors(tt,he);const rn=Fe.dot(x[ht])<0?-1:1;p[4*ht]=pe.x,p[4*ht+1]=pe.y,p[4*ht+2]=pe.z,p[4*ht+3]=rn}for(let ht=0,he=oe.length;ht<he;++ht){const $e=oe[ht],rn=$e.start;for(let Ft=rn,Rt=rn+$e.count;Ft<Rt;Ft+=3)kt(r[Ft+0]),kt(r[Ft+1]),kt(r[Ft+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new es(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let D=0,R=r.count;D<R;D++)r.setXYZ(D,0,0,0);const o=new ue,l=new ue,d=new ue,h=new ue,p=new ue,m=new ue,x=new ue,M=new ue;if(e)for(let D=0,R=e.count;D<R;D+=3){const B=e.getX(D+0),O=e.getX(D+1),F=e.getX(D+2);o.fromBufferAttribute(t,B),l.fromBufferAttribute(t,O),d.fromBufferAttribute(t,F),x.subVectors(d,l),M.subVectors(o,l),x.cross(M),h.fromBufferAttribute(r,B),p.fromBufferAttribute(r,O),m.fromBufferAttribute(r,F),h.add(x),p.add(x),m.add(x),r.setXYZ(B,h.x,h.y,h.z),r.setXYZ(O,p.x,p.y,p.z),r.setXYZ(F,m.x,m.y,m.z)}else for(let D=0,R=t.count;D<R;D+=3)o.fromBufferAttribute(t,D+0),l.fromBufferAttribute(t,D+1),d.fromBufferAttribute(t,D+2),x.subVectors(d,l),M.subVectors(o,l),x.cross(M),r.setXYZ(D+0,x.x,x.y,x.z),r.setXYZ(D+1,x.x,x.y,x.z),r.setXYZ(D+2,x.x,x.y,x.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(void 0===e.attributes[o])continue;const d=r[o].array,h=e.attributes[o],p=h.array,m=h.itemSize*t,x=Math.min(p.length,d.length-m);for(let M=0,D=m;M<x;M++,D++)d[D]=p[M]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ks.fromBufferAttribute(e,t),Ks.normalize(),e.setXYZ(t,Ks.x,Ks.y,Ks.z)}toNonIndexed(){function e(h,p){const m=h.array,x=h.itemSize,M=h.normalized,D=new m.constructor(p.length*x);let R=0,B=0;for(let O=0,F=p.length;O<F;O++){R=h.isInterleavedBufferAttribute?p[O]*h.data.stride+h.offset:p[O]*x;for(let Z=0;Z<x;Z++)D[B++]=m[R++]}return new es(D,x,M)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bi,r=this.index.array,o=this.attributes;for(const h in o){const m=e(o[h],r);t.setAttribute(h,m)}const l=this.morphAttributes;for(const h in l){const p=[],m=l[h];for(let x=0,M=m.length;x<M;x++){const R=e(m[x],r);p.push(R)}t.morphAttributes[h]=p}t.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let h=0,p=d.length;h<p;h++){const m=d[h];t.addGroup(m.start,m.count,m.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const p=this.parameters;for(const m in p)void 0!==p[m]&&(e[m]=p[m]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const p in r)e.data.attributes[p]=r[p].toJSON(e.data);const o={};let l=!1;for(const p in this.morphAttributes){const m=this.morphAttributes[p],x=[];for(let M=0,D=m.length;M<D;M++)x.push(m[M].toJSON(e.data));x.length>0&&(o[p]=x,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));const h=this.boundingSphere;return null!==h&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const o=e.attributes;for(const m in o)this.setAttribute(m,o[m].clone(t));const l=e.morphAttributes;for(const m in l){const x=[],M=l[m];for(let D=0,R=M.length;D<R;D++)x.push(M[D].clone(t));this.morphAttributes[m]=x}this.morphTargetsRelative=e.morphTargetsRelative;const d=e.groups;for(let m=0,x=d.length;m<x;m++){const M=d[m];this.addGroup(M.start,M.count,M.materialIndex)}const h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());const p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}bi.prototype.isBufferGeometry=!0;const wp=new Fn,su=new da,Ep=new ua,Za=new ue,Bs=new ue,Pa=new ue,Cl=new ue,Mp=new ue,id=new ue,rd=new ue,sd=new ue,od=new ue,ad=new Gt,ld=new Gt,ou=new Gt,au=new ue,Gl=new ue;class ro extends Jt{constructor(e=new bi,t=new Fr){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,l=this.matrixWorld;if(void 0===o||(null===r.boundingSphere&&r.computeBoundingSphere(),Ep.copy(r.boundingSphere),Ep.applyMatrix4(l),!1===e.ray.intersectsSphere(Ep))||(wp.copy(l).invert(),su.copy(e.ray).applyMatrix4(wp),null!==r.boundingBox&&!1===su.intersectsBox(r.boundingBox)))return;let d;if(r.isBufferGeometry){const h=r.index,p=r.attributes.position,m=r.morphAttributes.position,x=r.morphTargetsRelative,M=r.attributes.uv,D=r.attributes.uv2,R=r.groups,B=r.drawRange;if(null!==h)if(Array.isArray(o))for(let O=0,F=R.length;O<F;O++){const Z=R[O],ie=o[Z.materialIndex];for(let pe=Math.max(Z.start,B.start),Fe=Math.min(h.count,Math.min(Z.start+Z.count,B.start+B.count));pe<Fe;pe+=3){const Xe=h.getX(pe),tt=h.getX(pe+1),kt=h.getX(pe+2);d=mc(this,ie,e,su,p,m,x,M,D,Xe,tt,kt),d&&(d.faceIndex=Math.floor(pe/3),d.face.materialIndex=Z.materialIndex,t.push(d))}}else for(let Z=Math.max(0,B.start),ie=Math.min(h.count,B.start+B.count);Z<ie;Z+=3){const fe=h.getX(Z),oe=h.getX(Z+1),pe=h.getX(Z+2);d=mc(this,o,e,su,p,m,x,M,D,fe,oe,pe),d&&(d.faceIndex=Math.floor(Z/3),t.push(d))}else if(void 0!==p)if(Array.isArray(o))for(let O=0,F=R.length;O<F;O++){const Z=R[O],ie=o[Z.materialIndex];for(let pe=Math.max(Z.start,B.start),Fe=Math.min(p.count,Math.min(Z.start+Z.count,B.start+B.count));pe<Fe;pe+=3)d=mc(this,ie,e,su,p,m,x,M,D,pe,pe+1,pe+2),d&&(d.faceIndex=Math.floor(pe/3),d.face.materialIndex=Z.materialIndex,t.push(d))}else for(let Z=Math.max(0,B.start),ie=Math.min(p.count,B.start+B.count);Z<ie;Z+=3)d=mc(this,o,e,su,p,m,x,M,D,Z,Z+1,Z+2),d&&(d.faceIndex=Math.floor(Z/3),t.push(d))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function mc(c,e,t,r,o,l,d,h,p,m,x,M){Za.fromBufferAttribute(o,m),Bs.fromBufferAttribute(o,x),Pa.fromBufferAttribute(o,M);const D=c.morphTargetInfluences;if(l&&D){rd.set(0,0,0),sd.set(0,0,0),od.set(0,0,0);for(let B=0,O=l.length;B<O;B++){const F=D[B],Z=l[B];0!==F&&(Cl.fromBufferAttribute(Z,m),Mp.fromBufferAttribute(Z,x),id.fromBufferAttribute(Z,M),d?(rd.addScaledVector(Cl,F),sd.addScaledVector(Mp,F),od.addScaledVector(id,F)):(rd.addScaledVector(Cl.sub(Za),F),sd.addScaledVector(Mp.sub(Bs),F),od.addScaledVector(id.sub(Pa),F)))}Za.add(rd),Bs.add(sd),Pa.add(od)}c.isSkinnedMesh&&(c.boneTransform(m,Za),c.boneTransform(x,Bs),c.boneTransform(M,Pa));const R=function lu(c,e,t,r,o,l,d,h){let p;if(p=1===e.side?r.intersectTriangle(d,l,o,!0,h):r.intersectTriangle(o,l,d,2!==e.side,h),null===p)return null;Gl.copy(h),Gl.applyMatrix4(c.matrixWorld);const m=t.ray.origin.distanceTo(Gl);return m<t.near||m>t.far?null:{distance:m,point:Gl.clone(),object:c}}(c,e,t,r,Za,Bs,Pa,au);if(R){h&&(ad.fromBufferAttribute(h,m),ld.fromBufferAttribute(h,x),ou.fromBufferAttribute(h,M),R.uv=cs.getUV(au,Za,Bs,Pa,ad,ld,ou,new Gt)),p&&(ad.fromBufferAttribute(p,m),ld.fromBufferAttribute(p,x),ou.fromBufferAttribute(p,M),R.uv2=cs.getUV(au,Za,Bs,Pa,ad,ld,ou,new Gt));const B={a:m,b:x,c:M,normal:new ue,materialIndex:0};cs.getNormal(Za,Bs,Pa,B.normal),R.face=B}return R}ro.prototype.isMesh=!0;class ma extends bi{constructor(e=1,t=1,r=1,o=1,l=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:l,depthSegments:d};const h=this;o=Math.floor(o),l=Math.floor(l),d=Math.floor(d);const p=[],m=[],x=[],M=[];let D=0,R=0;function B(O,F,Z,ie,fe,oe,pe,Fe,Xe,tt,kt){const ht=oe/Xe,he=pe/tt,$e=oe/2,rn=pe/2,gt=Fe/2,Ft=Xe+1,Rt=tt+1;let zt=0,ft=0;const Zt=new ue;for(let tn=0;tn<Rt;tn++){const pn=tn*he-rn;for(let on=0;on<Ft;on++)Zt[O]=(on*ht-$e)*ie,Zt[F]=pn*fe,Zt[Z]=gt,m.push(Zt.x,Zt.y,Zt.z),Zt[O]=0,Zt[F]=0,Zt[Z]=Fe>0?1:-1,x.push(Zt.x,Zt.y,Zt.z),M.push(on/Xe),M.push(1-tn/tt),zt+=1}for(let tn=0;tn<tt;tn++)for(let pn=0;pn<Xe;pn++){const ai=D+pn+Ft*(tn+1),qi=D+(pn+1)+Ft*(tn+1),Ii=D+(pn+1)+Ft*tn;p.push(D+pn+Ft*tn,ai,Ii),p.push(ai,qi,Ii),ft+=6}h.addGroup(R,ft,kt),R+=ft,D+=zt}B("z","y","x",-1,-1,r,t,e,d,l,0),B("z","y","x",1,-1,r,t,-e,d,l,1),B("x","z","y",1,1,e,r,t,o,d,2),B("x","z","y",1,-1,e,r,-t,o,d,3),B("x","y","z",1,-1,e,t,r,o,l,4),B("x","y","z",-1,-1,e,t,-r,o,l,5),this.setIndex(p),this.setAttribute("position",new Nn(m,3)),this.setAttribute("normal",new Nn(x,3)),this.setAttribute("uv",new Nn(M,2))}static fromJSON(e){return new ma(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gc(c){const e={};for(const t in c){e[t]={};for(const r in c[t]){const o=c[t][r];e[t][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}}return e}function _o(c){const e={};for(let t=0;t<c.length;t++){const r=gc(c[t]);for(const o in r)e[o]=r[o]}return e}const Vg={clone:gc,merge:_o};class Ao extends Fs{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const d=this.uniforms[o].value;t.uniforms[o]=d&&d.isTexture?{type:"t",value:d.toJSON(e).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Ao.prototype.isShaderMaterial=!0;class cu extends Jt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Fn,this.projectionMatrix=new Fn,this.projectionMatrixInverse=new Fn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}cu.prototype.isCamera=!0;class so extends cu{constructor(e=50,t=1,r=.1,o=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Pt*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*wt*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Pt*Math.atan(Math.tan(.5*wt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,l,d){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*wt*this.fov)/this.zoom,r=2*t,o=this.aspect*r,l=-.5*o;const d=this.view;if(null!==this.view&&this.view.enabled){const p=d.fullWidth,m=d.fullHeight;l+=d.offsetX*o/p,t-=d.offsetY*r/m,o*=d.width/p,r*=d.height/m}const h=this.filmOffset;0!==h&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}so.prototype.isPerspectiveCamera=!0;class cd extends Jt{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const o=new so(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new ue(1,0,0)),this.add(o);const l=new so(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ue(-1,0,0)),this.add(l);const d=new so(90,1,e,t);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new ue(0,1,0)),this.add(d);const h=new so(90,1,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new ue(0,-1,0)),this.add(h);const p=new so(90,1,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new ue(0,0,1)),this.add(p);const m=new so(90,1,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new ue(0,0,-1)),this.add(m)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[o,l,d,h,p,m]=this.children,x=e.getRenderTarget(),M=e.outputEncoding,D=e.toneMapping,R=e.xr.enabled;e.outputEncoding=Tt,e.toneMapping=0,e.xr.enabled=!1;const B=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,l),e.setRenderTarget(r,2),e.render(t,d),e.setRenderTarget(r,3),e.render(t,h),e.setRenderTarget(r,4),e.render(t,p),r.texture.generateMipmaps=B,e.setRenderTarget(r,5),e.render(t,m),e.setRenderTarget(x),e.outputEncoding=M,e.toneMapping=D,e.xr.enabled=R,r.texture.needsPMREMUpdate=!0}}class jl extends yn{constructor(e,t,r,o,l,d,h,p,m,x){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,o,l,d,h,p,m,x),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}jl.prototype.isCubeTexture=!0;class _c extends Jn{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1};this.texture=new jl([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:at}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ma(5,5,5),l=new Ao({name:"CubemapFromEquirect",uniforms:gc(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});l.uniforms.tEquirect.value=t;const d=new ro(o,l),h=t.minFilter;return 1008===t.minFilter&&(t.minFilter=at),new cd(1,10,this).update(e,d),t.minFilter=h,d.geometry.dispose(),d.material.dispose(),this}clear(e,t,r,o){const l=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(t,r,o);e.setRenderTarget(l)}}_c.prototype.isWebGLCubeRenderTarget=!0;const Ph=new ue,Ug=new ue,zg=new xr;class Ko{constructor(e=new ue(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=Ph.subVectors(r,t).cross(Ug.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Ph),o=this.normal.dot(r);if(0===o)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(r).multiplyScalar(l).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||zg.getNormalMatrix(e),o=this.coplanarPoint(Ph).applyMatrix4(e),l=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Ko.prototype.isPlane=!0;const Oa=new ua,uu=new ue;class Dl{constructor(e=new Ko,t=new Ko,r=new Ko,o=new Ko,l=new Ko,d=new Ko){this.planes=[e,t,r,o,l,d]}set(e,t,r,o,l,d){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(r),h[3].copy(o),h[4].copy(l),h[5].copy(d),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],l=r[1],d=r[2],h=r[3],p=r[4],m=r[5],x=r[6],M=r[7],D=r[8],R=r[9],B=r[10],O=r[11],F=r[12],Z=r[13],ie=r[14],fe=r[15];return t[0].setComponents(h-o,M-p,O-D,fe-F).normalize(),t[1].setComponents(h+o,M+p,O+D,fe+F).normalize(),t[2].setComponents(h+l,M+m,O+R,fe+Z).normalize(),t[3].setComponents(h-l,M-m,O-R,fe-Z).normalize(),t[4].setComponents(h-d,M-x,O-B,fe-ie).normalize(),t[5].setComponents(h+d,M+x,O+B,fe+ie).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Oa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Oa)}intersectsSprite(e){return Oa.center.set(0,0,0),Oa.radius=.7071067811865476,Oa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Oa)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(uu.x=o.normal.x>0?e.max.x:e.min.x,uu.y=o.normal.y>0?e.max.y:e.min.y,uu.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(uu)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Cp(){let c=null,e=!1,t=null,r=null;function o(l,d){t(l,d),r=c.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==t&&(r=c.requestAnimationFrame(o),e=!0)},stop:function(){c.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){c=l}}}function Dp(c,e){const t=e.isWebGL2,r=new WeakMap;return{get:function d(m){return m.isInterleavedBufferAttribute&&(m=m.data),r.get(m)},remove:function h(m){m.isInterleavedBufferAttribute&&(m=m.data);const x=r.get(m);x&&(c.deleteBuffer(x.buffer),r.delete(m))},update:function p(m,x){if(m.isGLBufferAttribute){const D=r.get(m);return void((!D||D.version<m.version)&&r.set(m,{buffer:m.buffer,type:m.type,bytesPerElement:m.elementSize,version:m.version}))}m.isInterleavedBufferAttribute&&(m=m.data);const M=r.get(m);void 0===M?r.set(m,function o(m,x){const M=m.array,D=m.usage,R=c.createBuffer();let B;if(c.bindBuffer(x,R),c.bufferData(x,M,D),m.onUploadCallback(),M instanceof Float32Array)B=5126;else if(M instanceof Uint16Array)if(m.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");B=5131}else B=5123;else if(M instanceof Int16Array)B=5122;else if(M instanceof Uint32Array)B=5125;else if(M instanceof Int32Array)B=5124;else if(M instanceof Int8Array)B=5120;else if(M instanceof Uint8Array)B=5121;else{if(!(M instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+M);B=5121}return{buffer:R,type:B,bytesPerElement:M.BYTES_PER_ELEMENT,version:m.version}}(m,x)):M.version<m.version&&(function l(m,x,M){const D=x.array,R=x.updateRange;c.bindBuffer(M,m),-1===R.count?c.bufferSubData(M,0,D):(t?c.bufferSubData(M,R.offset*D.BYTES_PER_ELEMENT,D,R.offset,R.count):c.bufferSubData(M,R.offset*D.BYTES_PER_ELEMENT,D.subarray(R.offset,R.offset+R.count)),R.count=-1)}(M.buffer,m,x),M.version=m.version)}}}class $l extends bi{constructor(e=1,t=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const l=e/2,d=t/2,h=Math.floor(r),p=Math.floor(o),m=h+1,x=p+1,M=e/h,D=t/p,R=[],B=[],O=[],F=[];for(let Z=0;Z<x;Z++){const ie=Z*D-d;for(let fe=0;fe<m;fe++)B.push(fe*M-l,-ie,0),O.push(0,0,1),F.push(fe/h),F.push(1-Z/p)}for(let Z=0;Z<p;Z++)for(let ie=0;ie<h;ie++){const oe=ie+m*(Z+1),pe=ie+1+m*(Z+1),Fe=ie+1+m*Z;R.push(ie+m*Z,oe,Fe),R.push(oe,pe,Fe)}this.setIndex(R),this.setAttribute("position",new Nn(B,3)),this.setAttribute("normal",new Nn(O,3)),this.setAttribute("uv",new Nn(F,2))}static fromJSON(e){return new $l(e.width,e.height,e.widthSegments,e.heightSegments)}}const Yi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},wn={common:{diffuse:{value:new te(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new xr},uv2Transform:{value:new xr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new te(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new te(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xr}},sprite:{diffuse:{value:new te(16777215)},opacity:{value:1},center:{value:new Gt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xr}}},ga={basic:{uniforms:_o([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:Yi.meshbasic_vert,fragmentShader:Yi.meshbasic_frag},lambert:{uniforms:_o([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.fog,wn.lights,{emissive:{value:new te(0)}}]),vertexShader:Yi.meshlambert_vert,fragmentShader:Yi.meshlambert_frag},phong:{uniforms:_o([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new te(0)},specular:{value:new te(1118481)},shininess:{value:30}}]),vertexShader:Yi.meshphong_vert,fragmentShader:Yi.meshphong_frag},standard:{uniforms:_o([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yi.meshphysical_vert,fragmentShader:Yi.meshphysical_frag},toon:{uniforms:_o([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new te(0)}}]),vertexShader:Yi.meshtoon_vert,fragmentShader:Yi.meshtoon_frag},matcap:{uniforms:_o([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:Yi.meshmatcap_vert,fragmentShader:Yi.meshmatcap_frag},points:{uniforms:_o([wn.points,wn.fog]),vertexShader:Yi.points_vert,fragmentShader:Yi.points_frag},dashed:{uniforms:_o([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yi.linedashed_vert,fragmentShader:Yi.linedashed_frag},depth:{uniforms:_o([wn.common,wn.displacementmap]),vertexShader:Yi.depth_vert,fragmentShader:Yi.depth_frag},normal:{uniforms:_o([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:Yi.meshnormal_vert,fragmentShader:Yi.meshnormal_frag},sprite:{uniforms:_o([wn.sprite,wn.fog]),vertexShader:Yi.sprite_vert,fragmentShader:Yi.sprite_frag},background:{uniforms:{uvTransform:{value:new xr},t2D:{value:null}},vertexShader:Yi.background_vert,fragmentShader:Yi.background_frag},cube:{uniforms:_o([wn.envmap,{opacity:{value:1}}]),vertexShader:Yi.cube_vert,fragmentShader:Yi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yi.equirect_vert,fragmentShader:Yi.equirect_frag},distanceRGBA:{uniforms:_o([wn.common,wn.displacementmap,{referencePosition:{value:new ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yi.distanceRGBA_vert,fragmentShader:Yi.distanceRGBA_frag},shadow:{uniforms:_o([wn.lights,wn.fog,{color:{value:new te(0)},opacity:{value:1}}]),vertexShader:Yi.shadow_vert,fragmentShader:Yi.shadow_frag}};function F0(c,e,t,r,o,l){const d=new te(0);let p,m,h=!0===o?0:1,x=null,M=0,D=null;function B(O,F){t.buffers.color.setClear(O.r,O.g,O.b,F,l)}return{getClearColor:function(){return d},setClearColor:function(O,F=1){d.set(O),h=F,B(d,h)},getClearAlpha:function(){return h},setClearAlpha:function(O){h=O,B(d,h)},render:function R(O,F){let Z=!1,ie=!0===F.isScene?F.background:null;ie&&ie.isTexture&&(ie=e.get(ie));const fe=c.xr,oe=fe.getSession&&fe.getSession();oe&&"additive"===oe.environmentBlendMode&&(ie=null),null===ie?B(d,h):ie&&ie.isColor&&(B(ie,1),Z=!0),(c.autoClear||Z)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),ie&&(ie.isCubeTexture||306===ie.mapping)?(void 0===m&&(m=new ro(new ma(1,1,1),new Ao({name:"BackgroundCubeMaterial",uniforms:gc(ga.cube.uniforms),vertexShader:ga.cube.vertexShader,fragmentShader:ga.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(pe,Fe,Xe){this.matrixWorld.copyPosition(Xe.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),m.material.uniforms.envMap.value=ie,m.material.uniforms.flipEnvMap.value=ie.isCubeTexture&&!1===ie.isRenderTargetTexture?-1:1,(x!==ie||M!==ie.version||D!==c.toneMapping)&&(m.material.needsUpdate=!0,x=ie,M=ie.version,D=c.toneMapping),O.unshift(m,m.geometry,m.material,0,0,null)):ie&&ie.isTexture&&(void 0===p&&(p=new ro(new $l(2,2),new Ao({name:"BackgroundMaterial",uniforms:gc(ga.background.uniforms),vertexShader:ga.background.vertexShader,fragmentShader:ga.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=ie,!0===ie.matrixAutoUpdate&&ie.updateMatrix(),p.material.uniforms.uvTransform.value.copy(ie.matrix),(x!==ie||M!==ie.version||D!==c.toneMapping)&&(p.material.needsUpdate=!0,x=ie,M=ie.version,D=c.toneMapping),O.unshift(p,p.geometry,p.material,0,0,null))}}}function xc(c,e,t,r){const o=c.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),d=r.isWebGL2||null!==l,h={},p=F(null);let m=p,x=!1;function R(gt){return r.isWebGL2?c.bindVertexArray(gt):l.bindVertexArrayOES(gt)}function B(gt){return r.isWebGL2?c.deleteVertexArray(gt):l.deleteVertexArrayOES(gt)}function F(gt){const Ft=[],Rt=[],zt=[];for(let ft=0;ft<o;ft++)Ft[ft]=0,Rt[ft]=0,zt[ft]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ft,enabledAttributes:Rt,attributeDivisors:zt,object:gt,attributes:{},index:null}}function fe(){const gt=m.newAttributes;for(let Ft=0,Rt=gt.length;Ft<Rt;Ft++)gt[Ft]=0}function oe(gt){pe(gt,0)}function pe(gt,Ft){const zt=m.enabledAttributes,ft=m.attributeDivisors;m.newAttributes[gt]=1,0===zt[gt]&&(c.enableVertexAttribArray(gt),zt[gt]=1),ft[gt]!==Ft&&((r.isWebGL2?c:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](gt,Ft),ft[gt]=Ft)}function Fe(){const gt=m.newAttributes,Ft=m.enabledAttributes;for(let Rt=0,zt=Ft.length;Rt<zt;Rt++)Ft[Rt]!==gt[Rt]&&(c.disableVertexAttribArray(Rt),Ft[Rt]=0)}function Xe(gt,Ft,Rt,zt,ft,Zt){!0!==r.isWebGL2||5124!==Rt&&5125!==Rt?c.vertexAttribPointer(gt,Ft,Rt,zt,ft,Zt):c.vertexAttribIPointer(gt,Ft,Rt,ft,Zt)}function $e(){rn(),x=!0,m!==p&&(m=p,R(m.object))}function rn(){p.geometry=null,p.program=null,p.wireframe=!1}return{setup:function M(gt,Ft,Rt,zt,ft){let Zt=!1;if(d){const tn=function O(gt,Ft,Rt){const zt=!0===Rt.wireframe;let ft=h[gt.id];void 0===ft&&(ft={},h[gt.id]=ft);let Zt=ft[Ft.id];void 0===Zt&&(Zt={},ft[Ft.id]=Zt);let tn=Zt[zt];return void 0===tn&&(tn=F(function D(){return r.isWebGL2?c.createVertexArray():l.createVertexArrayOES()}()),Zt[zt]=tn),tn}(zt,Rt,Ft);m!==tn&&(m=tn,R(m.object)),Zt=function Z(gt,Ft){const Rt=m.attributes,zt=gt.attributes;let ft=0;for(const Zt in zt){const tn=Rt[Zt],pn=zt[Zt];if(void 0===tn||tn.attribute!==pn||tn.data!==pn.data)return!0;ft++}return m.attributesNum!==ft||m.index!==Ft}(zt,ft),Zt&&function ie(gt,Ft){const Rt={},zt=gt.attributes;let ft=0;for(const Zt in zt){const tn=zt[Zt],pn={};pn.attribute=tn,tn.data&&(pn.data=tn.data),Rt[Zt]=pn,ft++}m.attributes=Rt,m.attributesNum=ft,m.index=Ft}(zt,ft)}else{const tn=!0===Ft.wireframe;(m.geometry!==zt.id||m.program!==Rt.id||m.wireframe!==tn)&&(m.geometry=zt.id,m.program=Rt.id,m.wireframe=tn,Zt=!0)}!0===gt.isInstancedMesh&&(Zt=!0),null!==ft&&t.update(ft,34963),(Zt||x)&&(x=!1,function tt(gt,Ft,Rt,zt){if(!1===r.isWebGL2&&(gt.isInstancedMesh||zt.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;fe();const ft=zt.attributes,Zt=Rt.getAttributes(),tn=Ft.defaultAttributeValues;for(const pn in Zt){const on=Zt[pn];if(on.location>=0){let ai=ft[pn];if(void 0===ai&&("instanceMatrix"===pn&&gt.instanceMatrix&&(ai=gt.instanceMatrix),"instanceColor"===pn&&gt.instanceColor&&(ai=gt.instanceColor)),void 0!==ai){const qi=ai.normalized,Ii=ai.itemSize,Yt=t.get(ai);if(void 0===Yt)continue;const Dr=Yt.buffer,Gi=Yt.type,Wi=Yt.bytesPerElement;if(ai.isInterleavedBufferAttribute){const En=ai.data,Xi=En.stride,jt=ai.offset;if(En.isInstancedInterleavedBuffer){for(let Xt=0;Xt<on.locationSize;Xt++)pe(on.location+Xt,En.meshPerAttribute);!0!==gt.isInstancedMesh&&void 0===zt._maxInstanceCount&&(zt._maxInstanceCount=En.meshPerAttribute*En.count)}else for(let Xt=0;Xt<on.locationSize;Xt++)oe(on.location+Xt);c.bindBuffer(34962,Dr);for(let Xt=0;Xt<on.locationSize;Xt++)Xe(on.location+Xt,Ii/on.locationSize,Gi,qi,Xi*Wi,(jt+Ii/on.locationSize*Xt)*Wi)}else{if(ai.isInstancedBufferAttribute){for(let En=0;En<on.locationSize;En++)pe(on.location+En,ai.meshPerAttribute);!0!==gt.isInstancedMesh&&void 0===zt._maxInstanceCount&&(zt._maxInstanceCount=ai.meshPerAttribute*ai.count)}else for(let En=0;En<on.locationSize;En++)oe(on.location+En);c.bindBuffer(34962,Dr);for(let En=0;En<on.locationSize;En++)Xe(on.location+En,Ii/on.locationSize,Gi,qi,Ii*Wi,Ii/on.locationSize*En*Wi)}}else if(void 0!==tn){const qi=tn[pn];if(void 0!==qi)switch(qi.length){case 2:c.vertexAttrib2fv(on.location,qi);break;case 3:c.vertexAttrib3fv(on.location,qi);break;case 4:c.vertexAttrib4fv(on.location,qi);break;default:c.vertexAttrib1fv(on.location,qi)}}}}Fe()}(gt,Ft,Rt,zt),null!==ft&&c.bindBuffer(34963,t.get(ft).buffer))},reset:$e,resetDefaultState:rn,dispose:function kt(){$e();for(const gt in h){const Ft=h[gt];for(const Rt in Ft){const zt=Ft[Rt];for(const ft in zt)B(zt[ft].object),delete zt[ft];delete Ft[Rt]}delete h[gt]}},releaseStatesOfGeometry:function ht(gt){if(void 0===h[gt.id])return;const Ft=h[gt.id];for(const Rt in Ft){const zt=Ft[Rt];for(const ft in zt)B(zt[ft].object),delete zt[ft];delete Ft[Rt]}delete h[gt.id]},releaseStatesOfProgram:function he(gt){for(const Ft in h){const Rt=h[Ft];if(void 0===Rt[gt.id])continue;const zt=Rt[gt.id];for(const ft in zt)B(zt[ft].object),delete zt[ft];delete Rt[gt.id]}},initAttributes:fe,enableAttribute:oe,disableUnusedAttributes:Fe}}function Wh(c,e,t,r){const o=r.isWebGL2;let l;this.setMode=function d(m){l=m},this.render=function h(m,x){c.drawArrays(l,m,x),t.update(x,l,1)},this.renderInstances=function p(m,x,M){if(0===M)return;let D,R;if(o)D=c,R="drawArraysInstanced";else if(D=e.get("ANGLE_instanced_arrays"),R="drawArraysInstancedANGLE",null===D)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");D[R](l,m,x,M),t.update(x,l,M)}}function Zp(c,e,t){let r;function l(Xe){if("highp"===Xe){if(c.getShaderPrecisionFormat(35633,36338).precision>0&&c.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Xe="mediump"}return"mediump"===Xe&&c.getShaderPrecisionFormat(35633,36337).precision>0&&c.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d="undefined"!=typeof WebGL2RenderingContext&&c instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&c instanceof WebGL2ComputeRenderingContext;let h=void 0!==t.precision?t.precision:"highp";const p=l(h);p!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",p,"instead."),h=p);const m=d||e.has("WEBGL_draw_buffers"),x=!0===t.logarithmicDepthBuffer,M=c.getParameter(34930),D=c.getParameter(35660),R=c.getParameter(3379),B=c.getParameter(34076),O=c.getParameter(34921),F=c.getParameter(36347),Z=c.getParameter(36348),ie=c.getParameter(36349),fe=D>0,oe=d||e.has("OES_texture_float");return{isWebGL2:d,drawBuffers:m,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const Xe=e.get("EXT_texture_filter_anisotropic");r=c.getParameter(Xe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,precision:h,logarithmicDepthBuffer:x,maxTextures:M,maxVertexTextures:D,maxTextureSize:R,maxCubemapSize:B,maxAttributes:O,maxVertexUniforms:F,maxVaryings:Z,maxFragmentUniforms:ie,vertexTextures:fe,floatFragmentTextures:oe,floatVertexTextures:fe&&oe,maxSamples:d?c.getParameter(36183):0}}function B_(c){const e=this;let t=null,r=0,o=!1,l=!1;const d=new Ko,h=new xr,p={value:null,needsUpdate:!1};function m(){p.value!==t&&(p.value=t,p.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function x(M,D,R,B){const O=null!==M?M.length:0;let F=null;if(0!==O){if(F=p.value,!0!==B||null===F){const Z=R+4*O,ie=D.matrixWorldInverse;h.getNormalMatrix(ie),(null===F||F.length<Z)&&(F=new Float32Array(Z));for(let fe=0,oe=R;fe!==O;++fe,oe+=4)d.copy(M[fe]).applyMatrix4(ie,h),d.normal.toArray(F,oe),F[oe+3]=d.constant}p.value=F,p.needsUpdate=!0}return e.numPlanes=O,e.numIntersection=0,F}this.uniform=p,this.numPlanes=0,this.numIntersection=0,this.init=function(M,D,R){const B=0!==M.length||D||0!==r||o;return o=D,t=x(M,R,0),r=M.length,B},this.beginShadows=function(){l=!0,x(null)},this.endShadows=function(){l=!1,m()},this.setState=function(M,D,R){const B=M.clippingPlanes,O=M.clipIntersection,F=M.clipShadows,Z=c.get(M);if(!o||null===B||0===B.length||l&&!F)l?x(null):m();else{const ie=l?0:r,fe=4*ie;let oe=Z.clippingState||null;p.value=oe,oe=x(B,D,fe,R);for(let pe=0;pe!==fe;++pe)oe[pe]=t[pe];Z.clippingState=oe,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=ie}}}function jh(c){let e=new WeakMap;function t(d,h){return 303===h?d.mapping=301:304===h&&(d.mapping=302),d}function o(d){const h=d.target;h.removeEventListener("dispose",o);const p=e.get(h);void 0!==p&&(e.delete(h),p.dispose())}return{get:function r(d){if(d&&d.isTexture&&!1===d.isRenderTargetTexture){const h=d.mapping;if(303===h||304===h){if(e.has(d))return t(e.get(d).texture,d.mapping);{const p=d.image;if(p&&p.height>0){const m=new _c(p.height/2);return m.fromEquirectangularTexture(c,d),e.set(d,m),d.addEventListener("dispose",o),t(m.texture,d.mapping)}return null}}}return d},dispose:function l(){e=new WeakMap}}}ga.physical={uniforms:_o([ga.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Gt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new te(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new te(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new te(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Yi.meshphysical_vert,fragmentShader:Yi.meshphysical_frag};class md extends cu{constructor(e=-1,t=1,r=1,o=-1,l=.1,d=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=l,this.far=d,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,l,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=r-e,d=r+e,h=o+t,p=o-t;if(null!==this.view&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=m*this.view.offsetX,d=l+m*this.view.width,h-=x*this.view.offsetY,p=h-x*this.view.height}this.projectionMatrix.makeOrthographic(l,d,h,p,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}md.prototype.isOrthographicCamera=!0;const Jp=[.125,.215,.35,.446,.526,.582],$h=new md,Qp=new te;let gd=null;const tl=(1+Math.sqrt(5))/2,Xl=1/tl,_d=[new ue(1,1,1),new ue(-1,1,1),new ue(1,1,-1),new ue(-1,1,-1),new ue(0,tl,Xl),new ue(0,tl,-Xl),new ue(Xl,0,tl),new ue(-Xl,0,tl),new ue(tl,Xl,0),new ue(-tl,Xl,0)];class em{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){gd=this._renderer.getRenderTarget(),this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,o,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Xh(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=qh(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(gd),e.scissorTest=!1,_u(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),gd=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,r={magFilter:at,minFilter:at,generateMipmaps:!1,type:Bn,format:Ue,encoding:Tt,depthBuffer:!1},o=Yh(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Yh(e,t,r);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function V_(c){const e=[],t=[],r=[];let o=c;const l=c-4+1+Jp.length;for(let d=0;d<l;d++){const h=Math.pow(2,o);t.push(h);let p=1/h;d>c-4?p=Jp[d-c+4-1]:0===d&&(p=0),r.push(p);const m=1/(h-1),x=-m/2,M=1+m/2,D=[x,x,M,x,M,M,x,x,M,M,x,M],R=6,B=6,O=3,F=2,Z=1,ie=new Float32Array(O*B*R),fe=new Float32Array(F*B*R),oe=new Float32Array(Z*B*R);for(let Fe=0;Fe<R;Fe++){const Xe=Fe%3*2/3-1,tt=Fe>2?0:-1;ie.set([Xe,tt,0,Xe+2/3,tt,0,Xe+2/3,tt+1,0,Xe,tt,0,Xe+2/3,tt+1,0,Xe,tt+1,0],O*B*Fe),fe.set(D,F*B*Fe),oe.set([Fe,Fe,Fe,Fe,Fe,Fe],Z*B*Fe)}const pe=new bi;pe.setAttribute("position",new es(ie,O)),pe.setAttribute("uv",new es(fe,F)),pe.setAttribute("faceIndex",new es(oe,Z)),e.push(pe),o>4&&o--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(l)),this._blurMaterial=function Kl(c,e,t){const r=new Float32Array(20),o=new ue(0,1,0);return new Ao({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${c}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(l,e,t)}return o}_compileMaterial(e){const t=new ro(this._lodPlanes[0],e);this._renderer.compile(t,$h)}_sceneToCubeUV(e,t,r,o){const h=new so(90,1,t,r),p=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],x=this._renderer,M=x.autoClear,D=x.toneMapping;x.getClearColor(Qp),x.toneMapping=0,x.autoClear=!1;const R=new Fr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),B=new ro(new ma,R);let O=!1;const F=e.background;F?F.isColor&&(R.color.copy(F),e.background=null,O=!0):(R.color.copy(Qp),O=!0);for(let Z=0;Z<6;Z++){const ie=Z%3;0===ie?(h.up.set(0,p[Z],0),h.lookAt(m[Z],0,0)):1===ie?(h.up.set(0,0,p[Z]),h.lookAt(0,m[Z],0)):(h.up.set(0,p[Z],0),h.lookAt(0,0,m[Z]));const fe=this._cubeSize;_u(o,ie*fe,Z>2?fe:0,fe,fe),x.setRenderTarget(o),O&&x.render(B,h),x.render(e,h)}B.geometry.dispose(),B.material.dispose(),x.toneMapping=D,x.autoClear=M,e.background=F}_textureToCubeUV(e,t){const r=this._renderer,o=301===e.mapping||302===e.mapping;o?(null===this._cubemapMaterial&&(this._cubemapMaterial=Xh()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=qh());const l=o?this._cubemapMaterial:this._equirectMaterial,d=new ro(this._lodPlanes[0],l);l.uniforms.envMap.value=e;const p=this._cubeSize;_u(t,0,0,3*p,2*p),r.setRenderTarget(t),r.render(d,$h)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const l=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]);this._blur(e,o-1,o,l,_d[(o-1)%_d.length])}t.autoClear=r}_blur(e,t,r,o,l){const d=this._pingPongRenderTarget;this._halfBlur(e,d,t,r,o,"latitudinal",l),this._halfBlur(d,e,r,r,o,"longitudinal",l)}_halfBlur(e,t,r,o,l,d,h){const p=this._renderer,m=this._blurMaterial;"latitudinal"!==d&&"longitudinal"!==d&&console.error("blur direction must be either latitudinal or longitudinal!");const M=new ro(this._lodPlanes[o],m),D=m.uniforms,R=this._sizeLods[r]-1,B=isFinite(l)?Math.PI/(2*R):2*Math.PI/39,O=l/B,F=isFinite(l)?1+Math.floor(3*O):20;F>20&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${F} samples when the maximum is set to 20`);const Z=[];let ie=0;for(let Xe=0;Xe<20;++Xe){const tt=Xe/O,kt=Math.exp(-tt*tt/2);Z.push(kt),0===Xe?ie+=kt:Xe<F&&(ie+=2*kt)}for(let Xe=0;Xe<Z.length;Xe++)Z[Xe]=Z[Xe]/ie;D.envMap.value=e.texture,D.samples.value=F,D.weights.value=Z,D.latitudinal.value="latitudinal"===d,h&&(D.poleAxis.value=h);const{_lodMax:fe}=this;D.dTheta.value=B,D.mipInt.value=fe-r;const oe=this._sizeLods[o];_u(t,3*oe*(o>fe-4?o-fe+4:0),4*(this._cubeSize-oe),3*oe,2*oe),p.setRenderTarget(t),p.render(M,$h)}}function Yh(c,e,t){const r=new Jn(c,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _u(c,e,t,r,o){c.viewport.set(e,t,r,o),c.scissor.set(e,t,r,o)}function qh(){return new Ao({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Xh(){return new Ao({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function yd(c){let e=new WeakMap,t=null;function l(h){const p=h.target;p.removeEventListener("dispose",l);const m=e.get(p);void 0!==m&&(e.delete(p),m.dispose())}return{get:function r(h){if(h&&h.isTexture){const p=h.mapping,m=303===p||304===p,x=301===p||302===p;if(m||x){if(h.isRenderTargetTexture&&!0===h.needsPMREMUpdate){h.needsPMREMUpdate=!1;let M=e.get(h);return null===t&&(t=new em(c)),M=m?t.fromEquirectangular(h,M):t.fromCubemap(h,M),e.set(h,M),M.texture}if(e.has(h))return e.get(h).texture;{const M=h.image;if(m&&M&&M.height>0||x&&M&&function o(h){let p=0;for(let x=0;x<6;x++)void 0!==h[x]&&p++;return 6===p}(M)){null===t&&(t=new em(c));const D=m?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,D),h.addEventListener("dispose",l),D.texture}return null}}}return h},dispose:function d(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function H_(c){const e={};function t(r){if(void 0!==e[r])return e[r];let o;switch(r){case"WEBGL_depth_texture":o=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=c.getExtension(r)}return e[r]=o,o}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return null===o&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function tm(c,e,t,r){const o={},l=new WeakMap;function d(M){const D=M.target;null!==D.index&&e.remove(D.index);for(const B in D.attributes)e.remove(D.attributes[B]);D.removeEventListener("dispose",d),delete o[D.id];const R=l.get(D);R&&(e.remove(R),l.delete(D)),r.releaseStatesOfGeometry(D),!0===D.isInstancedBufferGeometry&&delete D._maxInstanceCount,t.memory.geometries--}function m(M){const D=[],R=M.index,B=M.attributes.position;let O=0;if(null!==R){const ie=R.array;O=R.version;for(let fe=0,oe=ie.length;fe<oe;fe+=3){const pe=ie[fe+0],Fe=ie[fe+1],Xe=ie[fe+2];D.push(pe,Fe,Fe,Xe,Xe,pe)}}else{O=B.version;for(let fe=0,oe=B.array.length/3-1;fe<oe;fe+=3){const pe=fe+0,Fe=fe+1,Xe=fe+2;D.push(pe,Fe,Fe,Xe,Xe,pe)}}const F=new(Ho(D)?ks:pc)(D,1);F.version=O;const Z=l.get(M);Z&&e.remove(Z),l.set(M,F)}return{get:function h(M,D){return!0===o[D.id]||(D.addEventListener("dispose",d),o[D.id]=!0,t.memory.geometries++),D},update:function p(M){const D=M.attributes;for(const B in D)e.update(D[B],34962);const R=M.morphAttributes;for(const B in R){const O=R[B];for(let F=0,Z=O.length;F<Z;F++)e.update(O[F],34962)}},getWireframeAttribute:function x(M){const D=l.get(M);if(D){const R=M.index;null!==R&&D.version<R.version&&m(M)}else m(M);return l.get(M)}}}function nm(c,e,t,r){const o=r.isWebGL2;let l,h,p;this.setMode=function d(D){l=D},this.setIndex=function m(D){h=D.type,p=D.bytesPerElement},this.render=function x(D,R){c.drawElements(l,R,h,D*p),t.update(R,l,1)},this.renderInstances=function M(D,R,B){if(0===B)return;let O,F;if(o)O=c,F="drawElementsInstanced";else if(O=e.get("ANGLE_instanced_arrays"),F="drawElementsInstancedANGLE",null===O)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");O[F](l,R,h,D*p,B),t.update(R,l,B)}}function im(c){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(l,d,h){switch(t.calls++,d){case 4:t.triangles+=h*(l/3);break;case 1:t.lines+=h*(l/2);break;case 3:t.lines+=h*(l-1);break;case 2:t.lines+=h*l;break;case 0:t.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function Zh(c,e){return c[0]-e[0]}function rm(c,e){return Math.abs(e[1])-Math.abs(c[1])}function Ec(c,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),c.divideScalar(t)}function vd(c,e,t){const r={},o=new Float32Array(8),l=new WeakMap,d=new fn,h=[];for(let m=0;m<8;m++)h[m]=[m,0];return{update:function p(m,x,M,D){const R=m.morphTargetInfluences;if(!0===e.isWebGL2){const B=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,O=void 0!==B?B.length:0;let F=l.get(x);if(void 0===F||F.count!==O){let Ft=function(){rn.dispose(),l.delete(x),x.removeEventListener("dispose",Ft)};void 0!==F&&F.texture.dispose();const fe=void 0!==x.morphAttributes.position,oe=void 0!==x.morphAttributes.normal,pe=void 0!==x.morphAttributes.color,Fe=x.morphAttributes.position||[],Xe=x.morphAttributes.normal||[],tt=x.morphAttributes.color||[];let kt=0;!0===fe&&(kt=1),!0===oe&&(kt=2),!0===pe&&(kt=3);let ht=x.attributes.position.count*kt,he=1;ht>e.maxTextureSize&&(he=Math.ceil(ht/e.maxTextureSize),ht=e.maxTextureSize);const $e=new Float32Array(ht*he*4*O),rn=new jn($e,ht,he,O);rn.type=en,rn.needsUpdate=!0;const gt=4*kt;for(let Rt=0;Rt<O;Rt++){const zt=Fe[Rt],ft=Xe[Rt],Zt=tt[Rt],tn=ht*he*4*Rt;for(let pn=0;pn<zt.count;pn++){const on=pn*gt;!0===fe&&(d.fromBufferAttribute(zt,pn),!0===zt.normalized&&Ec(d,zt),$e[tn+on+0]=d.x,$e[tn+on+1]=d.y,$e[tn+on+2]=d.z,$e[tn+on+3]=0),!0===oe&&(d.fromBufferAttribute(ft,pn),!0===ft.normalized&&Ec(d,ft),$e[tn+on+4]=d.x,$e[tn+on+5]=d.y,$e[tn+on+6]=d.z,$e[tn+on+7]=0),!0===pe&&(d.fromBufferAttribute(Zt,pn),!0===Zt.normalized&&Ec(d,Zt),$e[tn+on+8]=d.x,$e[tn+on+9]=d.y,$e[tn+on+10]=d.z,$e[tn+on+11]=4===Zt.itemSize?d.w:1)}}F={count:O,texture:rn,size:new Gt(ht,he)},l.set(x,F),x.addEventListener("dispose",Ft)}let Z=0;for(let fe=0;fe<R.length;fe++)Z+=R[fe];const ie=x.morphTargetsRelative?1:1-Z;D.getUniforms().setValue(c,"morphTargetBaseInfluence",ie),D.getUniforms().setValue(c,"morphTargetInfluences",R),D.getUniforms().setValue(c,"morphTargetsTexture",F.texture,t),D.getUniforms().setValue(c,"morphTargetsTextureSize",F.size)}else{const B=void 0===R?0:R.length;let O=r[x.id];if(void 0===O||O.length!==B){O=[];for(let oe=0;oe<B;oe++)O[oe]=[oe,0];r[x.id]=O}for(let oe=0;oe<B;oe++){const pe=O[oe];pe[0]=oe,pe[1]=R[oe]}O.sort(rm);for(let oe=0;oe<8;oe++)oe<B&&O[oe][1]?(h[oe][0]=O[oe][0],h[oe][1]=O[oe][1]):(h[oe][0]=Number.MAX_SAFE_INTEGER,h[oe][1]=0);h.sort(Zh);const F=x.morphAttributes.position,Z=x.morphAttributes.normal;let ie=0;for(let oe=0;oe<8;oe++){const pe=h[oe],Fe=pe[0],Xe=pe[1];Fe!==Number.MAX_SAFE_INTEGER&&Xe?(F&&x.getAttribute("morphTarget"+oe)!==F[Fe]&&x.setAttribute("morphTarget"+oe,F[Fe]),Z&&x.getAttribute("morphNormal"+oe)!==Z[Fe]&&x.setAttribute("morphNormal"+oe,Z[Fe]),o[oe]=Xe,ie+=Xe):(F&&!0===x.hasAttribute("morphTarget"+oe)&&x.deleteAttribute("morphTarget"+oe),Z&&!0===x.hasAttribute("morphNormal"+oe)&&x.deleteAttribute("morphNormal"+oe),o[oe]=0)}const fe=x.morphTargetsRelative?1:1-ie;D.getUniforms().setValue(c,"morphTargetBaseInfluence",fe),D.getUniforms().setValue(c,"morphTargetInfluences",o)}}}}function sm(c,e,t,r){let o=new WeakMap;function h(p){const m=p.target;m.removeEventListener("dispose",h),t.remove(m.instanceMatrix),null!==m.instanceColor&&t.remove(m.instanceColor)}return{update:function l(p){const m=r.render.frame,M=e.get(p,p.geometry);return o.get(M)!==m&&(e.update(M),o.set(M,m)),p.isInstancedMesh&&(!1===p.hasEventListener("dispose",h)&&p.addEventListener("dispose",h),t.update(p.instanceMatrix,34962),null!==p.instanceColor&&t.update(p.instanceColor,34962)),M},dispose:function d(){o=new WeakMap}}}const bd=new yn,Jh=new jn,xd=new Zi,Mc=new jl,om=[],Qh=[],am=new Float32Array(16),lm=new Float32Array(9),ef=new Float32Array(4);function Al(c,e,t){const r=c[0];if(r<=0||r>0)return c;const o=e*t;let l=om[o];if(void 0===l&&(l=new Float32Array(o),om[o]=l),0!==e){r.toArray(l,0);for(let d=1,h=0;d!==e;++d)h+=t,c[d].toArray(l,h)}return l}function vo(c,e){if(c.length!==e.length)return!1;for(let t=0,r=c.length;t<r;t++)if(c[t]!==e[t])return!1;return!0}function Ro(c,e){for(let t=0,r=e.length;t<r;t++)c[t]=e[t]}function yu(c,e){let t=Qh[e];void 0===t&&(t=new Int32Array(e),Qh[e]=t);for(let r=0;r!==e;++r)t[r]=c.allocateTextureUnit();return t}function U_(c,e){const t=this.cache;t[0]!==e&&(c.uniform1f(this.addr,e),t[0]=e)}function cm(c,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(c.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;c.uniform2fv(this.addr,e),Ro(t,e)}}function z_(c,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(c.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(c.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vo(t,e))return;c.uniform3fv(this.addr,e),Ro(t,e)}}function G_(c,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(c.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;c.uniform4fv(this.addr,e),Ro(t,e)}}function _a(c,e){const t=this.cache,r=e.elements;if(void 0===r){if(vo(t,e))return;c.uniformMatrix2fv(this.addr,!1,e),Ro(t,e)}else{if(vo(t,r))return;ef.set(r),c.uniformMatrix2fv(this.addr,!1,ef),Ro(t,r)}}function W_(c,e){const t=this.cache,r=e.elements;if(void 0===r){if(vo(t,e))return;c.uniformMatrix3fv(this.addr,!1,e),Ro(t,e)}else{if(vo(t,r))return;lm.set(r),c.uniformMatrix3fv(this.addr,!1,lm),Ro(t,r)}}function um(c,e){const t=this.cache,r=e.elements;if(void 0===r){if(vo(t,e))return;c.uniformMatrix4fv(this.addr,!1,e),Ro(t,e)}else{if(vo(t,r))return;am.set(r),c.uniformMatrix4fv(this.addr,!1,am),Ro(t,r)}}function j_(c,e){const t=this.cache;t[0]!==e&&(c.uniform1i(this.addr,e),t[0]=e)}function $_(c,e){const t=this.cache;vo(t,e)||(c.uniform2iv(this.addr,e),Ro(t,e))}function Y_(c,e){const t=this.cache;vo(t,e)||(c.uniform3iv(this.addr,e),Ro(t,e))}function q_(c,e){const t=this.cache;vo(t,e)||(c.uniform4iv(this.addr,e),Ro(t,e))}function dm(c,e){const t=this.cache;t[0]!==e&&(c.uniform1ui(this.addr,e),t[0]=e)}function X_(c,e){const t=this.cache;vo(t,e)||(c.uniform2uiv(this.addr,e),Ro(t,e))}function K_(c,e){const t=this.cache;vo(t,e)||(c.uniform3uiv(this.addr,e),Ro(t,e))}function Z_(c,e){const t=this.cache;vo(t,e)||(c.uniform4uiv(this.addr,e),Ro(t,e))}function Ri(c,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),t.setTexture2D(e||bd,o)}function hm(c,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||xd,o)}function fm(c,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),t.setTextureCube(e||Mc,o)}function pm(c,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(c.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||Jh,o)}function ya(c,e){c.uniform1fv(this.addr,e)}function mm(c,e){const t=Al(e,this.size,2);c.uniform2fv(this.addr,t)}function J_(c,e){const t=Al(e,this.size,3);c.uniform3fv(this.addr,t)}function tf(c,e){const t=Al(e,this.size,4);c.uniform4fv(this.addr,t)}function nl(c,e){const t=Al(e,this.size,4);c.uniformMatrix2fv(this.addr,!1,t)}function nf(c,e){const t=Al(e,this.size,9);c.uniformMatrix3fv(this.addr,!1,t)}function gm(c,e){const t=Al(e,this.size,16);c.uniformMatrix4fv(this.addr,!1,t)}function rf(c,e){c.uniform1iv(this.addr,e)}function N0(c,e){c.uniform2iv(this.addr,e)}function _m(c,e){c.uniform3iv(this.addr,e)}function k0(c,e){c.uniform4iv(this.addr,e)}function Ed(c,e){c.uniform1uiv(this.addr,e)}function Md(c,e){c.uniform2uiv(this.addr,e)}function sf(c,e){c.uniform3uiv(this.addr,e)}function af(c,e){c.uniform4uiv(this.addr,e)}function lf(c,e,t){const r=e.length,o=yu(t,r);c.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2D(e[l]||bd,o[l])}function B0(c,e,t){const r=e.length,o=yu(t,r);c.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture3D(e[l]||xd,o[l])}function Q_(c,e,t){const r=e.length,o=yu(t,r);c.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTextureCube(e[l]||Mc,o[l])}function ey(c,e,t){const r=e.length,o=yu(t,r);c.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||Jh,o[l])}function ny(c,e,t){this.id=c,this.addr=t,this.cache=[],this.setValue=function wd(c){switch(c){case 5126:return U_;case 35664:return cm;case 35665:return z_;case 35666:return G_;case 35674:return _a;case 35675:return W_;case 35676:return um;case 5124:case 35670:return j_;case 35667:case 35671:return $_;case 35668:case 35672:return Y_;case 35669:case 35673:return q_;case 5125:return dm;case 36294:return X_;case 36295:return K_;case 36296:return Z_;case 35678:case 36198:case 36298:case 36306:case 35682:return Ri;case 35679:case 36299:case 36307:return hm;case 35680:case 36300:case 36308:case 36293:return fm;case 36289:case 36303:case 36311:case 36292:return pm}}(e.type)}function cf(c,e,t){this.id=c,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function ty(c){switch(c){case 5126:return ya;case 35664:return mm;case 35665:return J_;case 35666:return tf;case 35674:return nl;case 35675:return nf;case 35676:return gm;case 5124:case 35670:return rf;case 35667:case 35671:return N0;case 35668:case 35672:return _m;case 35669:case 35673:return k0;case 5125:return Ed;case 36294:return Md;case 36295:return sf;case 36296:return af;case 35678:case 36198:case 36298:case 36306:case 35682:return lf;case 35679:case 36299:case 36307:return B0;case 35680:case 36300:case 36308:case 36293:return Q_;case 36289:case 36303:case 36311:case 36292:return ey}}(e.type)}function iy(c){this.id=c,this.seq=[],this.map={}}cf.prototype.updateCache=function(c){const e=this.cache;c instanceof Float32Array&&e.length!==c.length&&(this.cache=new Float32Array(c.length)),Ro(e,c)},iy.prototype.setValue=function(c,e,t){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const d=r[o];d.setValue(c,e[d.id],t)}};const uf=/(\w+)(\])?(\[|\.)?/g;function ry(c,e){c.seq.push(e),c.map[e.id]=e}function ym(c,e,t){const r=c.name,o=r.length;for(uf.lastIndex=0;;){const l=uf.exec(r),d=uf.lastIndex;let h=l[1];const m=l[3];if("]"===l[2]&&(h|=0),void 0===m||"["===m&&d+2===o){ry(t,void 0===m?new ny(h,c,e):new cf(h,c,e));break}{let M=t.map[h];void 0===M&&(M=new iy(h),ry(t,M)),t=M}}}function il(c,e){this.seq=[],this.map={};const t=c.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=c.getActiveUniform(e,r);ym(o,c.getUniformLocation(e,o.name),this)}}function vm(c,e,t){const r=c.createShader(e);return c.shaderSource(r,t),c.compileShader(r),r}il.prototype.setValue=function(c,e,t,r){const o=this.map[e];void 0!==o&&o.setValue(c,t,r)},il.prototype.setOptional=function(c,e,t){const r=e[t];void 0!==r&&this.setValue(c,t,r)},il.upload=function(c,e,t,r){for(let o=0,l=e.length;o!==l;++o){const d=e[o],h=t[d.id];!1!==h.needsUpdate&&d.setValue(c,h.value,r)}},il.seqWithValue=function(c,e){const t=[];for(let r=0,o=c.length;r!==o;++r){const l=c[r];l.id in e&&t.push(l)}return t};let df=0;function sy(c,e,t){const r=c.getShaderParameter(e,35713),o=c.getShaderInfoLog(e).trim();if(r&&""===o)return"";const l=parseInt(/ERROR: 0:(\d+)/.exec(o)[1]);return t.toUpperCase()+"\n\n"+o+"\n\n"+function V0(c,e){const t=c.split("\n"),r=[],o=Math.max(e-6,0),l=Math.min(e+6,t.length);for(let d=o;d<l;d++)r.push(d+1+": "+t[d]);return r.join("\n")}(c.getShaderSource(e),l)}function U0(c,e){const t=function H0(c){switch(c){case Tt:return["Linear","( value )"];case nn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}(e);return"vec4 "+c+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function z0(c,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+c+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Sd(c){return""!==c}function oy(c,e){return c.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rl(c,e){return c.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hf=/^[ \t]*#include +<([\w\d./]+)>/gm;function ff(c){return c.replace(hf,bm)}function bm(c,e){const t=Yi[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return ff(t)}const pf=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,xm=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cd(c){return c.replace(xm,sl).replace(pf,ay)}function ay(c,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),sl(0,e,t,r)}function sl(c,e,t,r){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function mf(c){let e="precision "+c.precision+" float;\nprecision "+c.precision+" int;";return"highp"===c.precision?e+="\n#define HIGH_PRECISION":"mediump"===c.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(e+="\n#define LOW_PRECISION"),e}function dy(c,e,t,r){const o=c.getContext(),l=t.defines;let d=t.vertexShader,h=t.fragmentShader;const p=function ly(c){let e="SHADOWMAP_TYPE_BASIC";return 1===c.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),m=function gf(c){let e="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),x=function cy(c){let e="ENVMAP_MODE_REFLECTION";return c.envMap&&302===c.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),M=function wm(c){let e="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),D=function uy(c){const e=c.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e/32+1)+3,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),R=t.isWebGL2?"":function G0(c){return[c.extensionDerivatives||c.envMapCubeUVHeight||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sd).join("\n")}(t),B=function W0(c){const e=[];for(const t in c){const r=c[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(l),O=o.createProgram();let F,Z,ie=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(F=[B].filter(Sd).join("\n"),F.length>0&&(F+="\n"),Z=[R,B].filter(Sd).join("\n"),Z.length>0&&(Z+="\n")):(F=[mf(t),"#define SHADER_NAME "+t.shaderName,B,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+x:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Sd).join("\n"),Z=[R,mf(t),"#define SHADER_NAME "+t.shaderName,B,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.envMap?"#define "+x:"",t.envMap?"#define "+M:"",D?"#define CUBEUV_TEXEL_WIDTH "+D.texelWidth:"",D?"#define CUBEUV_TEXEL_HEIGHT "+D.texelHeight:"",D?"#define CUBEUV_MAX_MIP "+D.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+p:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Yi.tonemapping_pars_fragment:"",0!==t.toneMapping?z0("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Yi.encodings_pars_fragment,U0("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Sd).join("\n")),d=ff(d),d=oy(d,t),d=rl(d,t),h=ff(h),h=oy(h,t),h=rl(h,t),d=Cd(d),h=Cd(h),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(ie="#version 300 es\n",F=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+F,Z=["#define varying in",t.glslVersion===U?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===U?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Z);const oe=ie+Z+h,pe=vm(o,35633,ie+F+d),Fe=vm(o,35632,oe);if(o.attachShader(O,pe),o.attachShader(O,Fe),void 0!==t.index0AttributeName?o.bindAttribLocation(O,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(O,0,"position"),o.linkProgram(O),c.debug.checkShaderErrors){const kt=o.getProgramInfoLog(O).trim(),ht=o.getShaderInfoLog(pe).trim(),he=o.getShaderInfoLog(Fe).trim();let $e=!0,rn=!0;if(!1===o.getProgramParameter(O,35714)){$e=!1;const gt=sy(o,pe,"vertex"),Ft=sy(o,Fe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(O,35715)+"\n\nProgram Info Log: "+kt+"\n"+gt+"\n"+Ft)}else""!==kt?console.warn("THREE.WebGLProgram: Program Info Log:",kt):(""===ht||""===he)&&(rn=!1);rn&&(this.diagnostics={runnable:$e,programLog:kt,vertexShader:{log:ht,prefix:F},fragmentShader:{log:he,prefix:Z}})}let Xe,tt;return o.deleteShader(pe),o.deleteShader(Fe),this.getUniforms=function(){return void 0===Xe&&(Xe=new il(o,O)),Xe},this.getAttributes=function(){return void 0===tt&&(tt=function j0(c,e){const t={},r=c.getProgramParameter(e,35721);for(let o=0;o<r;o++){const l=c.getActiveAttrib(e,o),d=l.name;let h=1;35674===l.type&&(h=2),35675===l.type&&(h=3),35676===l.type&&(h=4),t[d]={type:l.type,location:c.getAttribLocation(e,d),locationSize:h}}return t}(o,O)),tt},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(O),this.program=void 0},this.name=t.shaderName,this.id=df++,this.cacheKey=e,this.usedTimes=1,this.program=O,this.vertexShader=pe,this.fragmentShader=Fe,this}let vu=0;class Sc{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,o=this._getShaderStage(e.vertexShader),l=this._getShaderStage(r),d=this._getShaderCacheForMaterial(e);return!1===d.has(o)&&(d.add(o),o.usedTimes++),!1===d.has(l)&&(d.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new _f(e);t.set(e,r)}return t.get(e)}}class _f{constructor(e){this.id=vu++,this.code=e,this.usedTimes=0}}function Cc(c,e,t,r,o,l,d){const h=new Hl,p=new Sc,m=[],x=o.isWebGL2,M=o.logarithmicDepthBuffer,D=o.floatVertexTextures,R=o.maxVertexUniforms,B=o.vertexTextures;let O=o.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function ie(he,$e,rn,gt,Ft){const Rt=gt.fog,zt=Ft.geometry,Zt=(he.isMeshStandardMaterial?t:e).get(he.envMap||(he.isMeshStandardMaterial?gt.environment:null)),tn=Zt&&306===Zt.mapping?Zt.image.height:null,pn=F[he.type],on=Ft.isSkinnedMesh?function Z(he){const rn=he.skeleton.bones;if(D)return 1024;{const Ft=Math.floor((R-20)/4),Rt=Math.min(Ft,rn.length);return Rt<rn.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+rn.length+" bones. This GPU supports "+Rt+"."),0):Rt}}(Ft):0;null!==he.precision&&(O=o.getMaxPrecision(he.precision),O!==he.precision&&console.warn("THREE.WebGLProgram.getParameters:",he.precision,"not supported, using",O,"instead."));const ai=zt.morphAttributes.position||zt.morphAttributes.normal||zt.morphAttributes.color,qi=void 0!==ai?ai.length:0;let Yt,Dr,Gi,Wi,Ii=0;if(void 0!==zt.morphAttributes.position&&(Ii=1),void 0!==zt.morphAttributes.normal&&(Ii=2),void 0!==zt.morphAttributes.color&&(Ii=3),pn){const un=ga[pn];Yt=un.vertexShader,Dr=un.fragmentShader}else Yt=he.vertexShader,Dr=he.fragmentShader,p.update(he),Gi=p.getVertexShaderID(he),Wi=p.getFragmentShaderID(he);const En=c.getRenderTarget(),jt=he.clearcoat>0;return{isWebGL2:x,shaderID:pn,shaderName:he.type,vertexShader:Yt,fragmentShader:Dr,defines:he.defines,customVertexShaderID:Gi,customFragmentShaderID:Wi,isRawShaderMaterial:!0===he.isRawShaderMaterial,glslVersion:he.glslVersion,precision:O,instancing:!0===Ft.isInstancedMesh,instancingColor:!0===Ft.isInstancedMesh&&null!==Ft.instanceColor,supportsVertexTextures:B,outputEncoding:null===En?c.outputEncoding:!0===En.isXRRenderTarget?En.texture.encoding:Tt,map:!!he.map,matcap:!!he.matcap,envMap:!!Zt,envMapMode:Zt&&Zt.mapping,envMapCubeUVHeight:tn,lightMap:!!he.lightMap,aoMap:!!he.aoMap,emissiveMap:!!he.emissiveMap,bumpMap:!!he.bumpMap,normalMap:!!he.normalMap,objectSpaceNormalMap:1===he.normalMapType,tangentSpaceNormalMap:0===he.normalMapType,decodeVideoTexture:!!he.map&&!0===he.map.isVideoTexture&&he.map.encoding===nn,clearcoat:jt,clearcoatMap:jt&&!!he.clearcoatMap,clearcoatRoughnessMap:jt&&!!he.clearcoatRoughnessMap,clearcoatNormalMap:jt&&!!he.clearcoatNormalMap,displacementMap:!!he.displacementMap,roughnessMap:!!he.roughnessMap,metalnessMap:!!he.metalnessMap,specularMap:!!he.specularMap,specularIntensityMap:!!he.specularIntensityMap,specularColorMap:!!he.specularColorMap,opaque:!1===he.transparent&&1===he.blending,alphaMap:!!he.alphaMap,alphaTest:he.alphaTest>0,gradientMap:!!he.gradientMap,sheen:he.sheen>0,sheenColorMap:!!he.sheenColorMap,sheenRoughnessMap:!!he.sheenRoughnessMap,transmission:he.transmission>0,transmissionMap:!!he.transmissionMap,thicknessMap:!!he.thicknessMap,combine:he.combine,vertexTangents:!!he.normalMap&&!!zt.attributes.tangent,vertexColors:he.vertexColors,vertexAlphas:!0===he.vertexColors&&!!zt.attributes.color&&4===zt.attributes.color.itemSize,vertexUvs:!!(he.map||he.bumpMap||he.normalMap||he.specularMap||he.alphaMap||he.emissiveMap||he.roughnessMap||he.metalnessMap||he.clearcoatMap||he.clearcoatRoughnessMap||he.clearcoatNormalMap||he.displacementMap||he.transmissionMap||he.thicknessMap||he.specularIntensityMap||he.specularColorMap||he.sheenColorMap||he.sheenRoughnessMap),uvsVertexOnly:!(he.map||he.bumpMap||he.normalMap||he.specularMap||he.alphaMap||he.emissiveMap||he.roughnessMap||he.metalnessMap||he.clearcoatNormalMap||he.transmission>0||he.transmissionMap||he.thicknessMap||he.specularIntensityMap||he.specularColorMap||he.sheen>0||he.sheenColorMap||he.sheenRoughnessMap||!he.displacementMap),fog:!!Rt,useFog:he.fog,fogExp2:Rt&&Rt.isFogExp2,flatShading:!!he.flatShading,sizeAttenuation:he.sizeAttenuation,logarithmicDepthBuffer:M,skinning:!0===Ft.isSkinnedMesh&&on>0,maxBones:on,useVertexTexture:D,morphTargets:void 0!==zt.morphAttributes.position,morphNormals:void 0!==zt.morphAttributes.normal,morphColors:void 0!==zt.morphAttributes.color,morphTargetsCount:qi,morphTextureStride:Ii,numDirLights:$e.directional.length,numPointLights:$e.point.length,numSpotLights:$e.spot.length,numRectAreaLights:$e.rectArea.length,numHemiLights:$e.hemi.length,numDirLightShadows:$e.directionalShadowMap.length,numPointLightShadows:$e.pointShadowMap.length,numSpotLightShadows:$e.spotShadowMap.length,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:he.dithering,shadowMapEnabled:c.shadowMap.enabled&&rn.length>0,shadowMapType:c.shadowMap.type,toneMapping:he.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:he.premultipliedAlpha,doubleSided:2===he.side,flipSided:1===he.side,depthPacking:void 0!==he.depthPacking&&he.depthPacking,index0AttributeName:he.index0AttributeName,extensionDerivatives:he.extensions&&he.extensions.derivatives,extensionFragDepth:he.extensions&&he.extensions.fragDepth,extensionDrawBuffers:he.extensions&&he.extensions.drawBuffers,extensionShaderTextureLOD:he.extensions&&he.extensions.shaderTextureLOD,rendererExtensionFragDepth:x||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:x||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:x||r.has("EXT_shader_texture_lod"),customProgramCacheKey:he.customProgramCacheKey()}},getProgramCacheKey:function fe(he){const $e=[];if(he.shaderID?$e.push(he.shaderID):($e.push(he.customVertexShaderID),$e.push(he.customFragmentShaderID)),void 0!==he.defines)for(const rn in he.defines)$e.push(rn),$e.push(he.defines[rn]);return!1===he.isRawShaderMaterial&&(function oe(he,$e){he.push($e.precision),he.push($e.outputEncoding),he.push($e.envMapMode),he.push($e.envMapCubeUVHeight),he.push($e.combine),he.push($e.vertexUvs),he.push($e.fogExp2),he.push($e.sizeAttenuation),he.push($e.maxBones),he.push($e.morphTargetsCount),he.push($e.morphAttributeCount),he.push($e.numDirLights),he.push($e.numPointLights),he.push($e.numSpotLights),he.push($e.numHemiLights),he.push($e.numRectAreaLights),he.push($e.numDirLightShadows),he.push($e.numPointLightShadows),he.push($e.numSpotLightShadows),he.push($e.shadowMapType),he.push($e.toneMapping),he.push($e.numClippingPlanes),he.push($e.numClipIntersection)}($e,he),function pe(he,$e){h.disableAll(),$e.isWebGL2&&h.enable(0),$e.supportsVertexTextures&&h.enable(1),$e.instancing&&h.enable(2),$e.instancingColor&&h.enable(3),$e.map&&h.enable(4),$e.matcap&&h.enable(5),$e.envMap&&h.enable(6),$e.lightMap&&h.enable(7),$e.aoMap&&h.enable(8),$e.emissiveMap&&h.enable(9),$e.bumpMap&&h.enable(10),$e.normalMap&&h.enable(11),$e.objectSpaceNormalMap&&h.enable(12),$e.tangentSpaceNormalMap&&h.enable(13),$e.clearcoat&&h.enable(14),$e.clearcoatMap&&h.enable(15),$e.clearcoatRoughnessMap&&h.enable(16),$e.clearcoatNormalMap&&h.enable(17),$e.displacementMap&&h.enable(18),$e.specularMap&&h.enable(19),$e.roughnessMap&&h.enable(20),$e.metalnessMap&&h.enable(21),$e.gradientMap&&h.enable(22),$e.alphaMap&&h.enable(23),$e.alphaTest&&h.enable(24),$e.vertexColors&&h.enable(25),$e.vertexAlphas&&h.enable(26),$e.vertexUvs&&h.enable(27),$e.vertexTangents&&h.enable(28),$e.uvsVertexOnly&&h.enable(29),$e.fog&&h.enable(30),he.push(h.mask),h.disableAll(),$e.useFog&&h.enable(0),$e.flatShading&&h.enable(1),$e.logarithmicDepthBuffer&&h.enable(2),$e.skinning&&h.enable(3),$e.useVertexTexture&&h.enable(4),$e.morphTargets&&h.enable(5),$e.morphNormals&&h.enable(6),$e.morphColors&&h.enable(7),$e.premultipliedAlpha&&h.enable(8),$e.shadowMapEnabled&&h.enable(9),$e.physicallyCorrectLights&&h.enable(10),$e.doubleSided&&h.enable(11),$e.flipSided&&h.enable(12),$e.depthPacking&&h.enable(13),$e.dithering&&h.enable(14),$e.specularIntensityMap&&h.enable(15),$e.specularColorMap&&h.enable(16),$e.transmission&&h.enable(17),$e.transmissionMap&&h.enable(18),$e.thicknessMap&&h.enable(19),$e.sheen&&h.enable(20),$e.sheenColorMap&&h.enable(21),$e.sheenRoughnessMap&&h.enable(22),$e.decodeVideoTexture&&h.enable(23),$e.opaque&&h.enable(24),he.push(h.mask)}($e,he),$e.push(c.outputEncoding)),$e.push(he.customProgramCacheKey),$e.join()},getUniforms:function Fe(he){const $e=F[he.type];let rn;return rn=$e?Vg.clone(ga[$e].uniforms):he.uniforms,rn},acquireProgram:function Xe(he,$e){let rn;for(let gt=0,Ft=m.length;gt<Ft;gt++){const Rt=m[gt];if(Rt.cacheKey===$e){rn=Rt,++rn.usedTimes;break}}return void 0===rn&&(rn=new dy(c,$e,he,l),m.push(rn)),rn},releaseProgram:function tt(he){if(0==--he.usedTimes){const $e=m.indexOf(he);m[$e]=m[m.length-1],m.pop(),he.destroy()}},releaseShaderCache:function kt(he){p.remove(he)},programs:m,dispose:function ht(){p.dispose()}}}function bu(){let c=new WeakMap;return{get:function e(l){let d=c.get(l);return void 0===d&&(d={},c.set(l,d)),d},remove:function t(l){c.delete(l)},update:function r(l,d,h){c.get(l)[d]=h},dispose:function o(){c=new WeakMap}}}function Dc(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.material.id!==e.material.id?c.material.id-e.material.id:c.z!==e.z?c.z-e.z:c.id-e.id}function Em(c,e){return c.groupOrder!==e.groupOrder?c.groupOrder-e.groupOrder:c.renderOrder!==e.renderOrder?c.renderOrder-e.renderOrder:c.z!==e.z?e.z-c.z:c.id-e.id}function yf(){const c=[];let e=0;const t=[],r=[],o=[];function d(M,D,R,B,O,F){let Z=c[e];return void 0===Z?(Z={id:M.id,object:M,geometry:D,material:R,groupOrder:B,renderOrder:M.renderOrder,z:O,group:F},c[e]=Z):(Z.id=M.id,Z.object=M,Z.geometry=D,Z.material=R,Z.groupOrder=B,Z.renderOrder=M.renderOrder,Z.z=O,Z.group=F),e++,Z}return{opaque:t,transmissive:r,transparent:o,init:function l(){e=0,t.length=0,r.length=0,o.length=0},push:function h(M,D,R,B,O,F){const Z=d(M,D,R,B,O,F);R.transmission>0?r.push(Z):!0===R.transparent?o.push(Z):t.push(Z)},unshift:function p(M,D,R,B,O,F){const Z=d(M,D,R,B,O,F);R.transmission>0?r.unshift(Z):!0===R.transparent?o.unshift(Z):t.unshift(Z)},finish:function x(){for(let M=e,D=c.length;M<D;M++){const R=c[M];if(null===R.id)break;R.id=null,R.object=null,R.geometry=null,R.material=null,R.group=null}},sort:function m(M,D){t.length>1&&t.sort(M||Dc),r.length>1&&r.sort(D||Em),o.length>1&&o.sort(D||Em)}}}function Mm(){let c=new WeakMap;return{get:function e(r,o){let l;return!1===c.has(r)?(l=new yf,c.set(r,[l])):o>=c.get(r).length?(l=new yf,c.get(r).push(l)):l=c.get(r)[o],l},dispose:function t(){c=new WeakMap}}}function vf(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ue,color:new te};break;case"SpotLight":t={position:new ue,direction:new ue,color:new te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ue,color:new te,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ue,skyColor:new te,groundColor:new te};break;case"RectAreaLight":t={color:new te,position:new ue,halfWidth:new ue,halfHeight:new ue}}return c[e.id]=t,t}}}let Sm=0;function Dd(c,e){return(e.castShadow?1:0)-(c.castShadow?1:0)}function hy(c,e){const t=new vf,r=function bf(){const c={};return{get:function(e){if(void 0!==c[e.id])return c[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt,shadowCameraNear:1,shadowCameraFar:1e3}}return c[e.id]=t,t}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let x=0;x<9;x++)o.probe.push(new ue);const l=new ue,d=new Fn,h=new Fn;return{setup:function p(x,M){let D=0,R=0,B=0;for(let kt=0;kt<9;kt++)o.probe[kt].set(0,0,0);let O=0,F=0,Z=0,ie=0,fe=0,oe=0,pe=0,Fe=0;x.sort(Dd);const Xe=!0!==M?Math.PI:1;for(let kt=0,ht=x.length;kt<ht;kt++){const he=x[kt],$e=he.color,rn=he.intensity,gt=he.distance,Ft=he.shadow&&he.shadow.map?he.shadow.map.texture:null;if(he.isAmbientLight)D+=$e.r*rn*Xe,R+=$e.g*rn*Xe,B+=$e.b*rn*Xe;else if(he.isLightProbe)for(let Rt=0;Rt<9;Rt++)o.probe[Rt].addScaledVector(he.sh.coefficients[Rt],rn);else if(he.isDirectionalLight){const Rt=t.get(he);if(Rt.color.copy(he.color).multiplyScalar(he.intensity*Xe),he.castShadow){const zt=he.shadow,ft=r.get(he);ft.shadowBias=zt.bias,ft.shadowNormalBias=zt.normalBias,ft.shadowRadius=zt.radius,ft.shadowMapSize=zt.mapSize,o.directionalShadow[O]=ft,o.directionalShadowMap[O]=Ft,o.directionalShadowMatrix[O]=he.shadow.matrix,oe++}o.directional[O]=Rt,O++}else if(he.isSpotLight){const Rt=t.get(he);if(Rt.position.setFromMatrixPosition(he.matrixWorld),Rt.color.copy($e).multiplyScalar(rn*Xe),Rt.distance=gt,Rt.coneCos=Math.cos(he.angle),Rt.penumbraCos=Math.cos(he.angle*(1-he.penumbra)),Rt.decay=he.decay,he.castShadow){const zt=he.shadow,ft=r.get(he);ft.shadowBias=zt.bias,ft.shadowNormalBias=zt.normalBias,ft.shadowRadius=zt.radius,ft.shadowMapSize=zt.mapSize,o.spotShadow[Z]=ft,o.spotShadowMap[Z]=Ft,o.spotShadowMatrix[Z]=he.shadow.matrix,Fe++}o.spot[Z]=Rt,Z++}else if(he.isRectAreaLight){const Rt=t.get(he);Rt.color.copy($e).multiplyScalar(rn),Rt.halfWidth.set(.5*he.width,0,0),Rt.halfHeight.set(0,.5*he.height,0),o.rectArea[ie]=Rt,ie++}else if(he.isPointLight){const Rt=t.get(he);if(Rt.color.copy(he.color).multiplyScalar(he.intensity*Xe),Rt.distance=he.distance,Rt.decay=he.decay,he.castShadow){const zt=he.shadow,ft=r.get(he);ft.shadowBias=zt.bias,ft.shadowNormalBias=zt.normalBias,ft.shadowRadius=zt.radius,ft.shadowMapSize=zt.mapSize,ft.shadowCameraNear=zt.camera.near,ft.shadowCameraFar=zt.camera.far,o.pointShadow[F]=ft,o.pointShadowMap[F]=Ft,o.pointShadowMatrix[F]=he.shadow.matrix,pe++}o.point[F]=Rt,F++}else if(he.isHemisphereLight){const Rt=t.get(he);Rt.skyColor.copy(he.color).multiplyScalar(rn*Xe),Rt.groundColor.copy(he.groundColor).multiplyScalar(rn*Xe),o.hemi[fe]=Rt,fe++}}ie>0&&(e.isWebGL2||!0===c.has("OES_texture_float_linear")?(o.rectAreaLTC1=wn.LTC_FLOAT_1,o.rectAreaLTC2=wn.LTC_FLOAT_2):!0===c.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=wn.LTC_HALF_1,o.rectAreaLTC2=wn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=D,o.ambient[1]=R,o.ambient[2]=B;const tt=o.hash;(tt.directionalLength!==O||tt.pointLength!==F||tt.spotLength!==Z||tt.rectAreaLength!==ie||tt.hemiLength!==fe||tt.numDirectionalShadows!==oe||tt.numPointShadows!==pe||tt.numSpotShadows!==Fe)&&(o.directional.length=O,o.spot.length=Z,o.rectArea.length=ie,o.point.length=F,o.hemi.length=fe,o.directionalShadow.length=oe,o.directionalShadowMap.length=oe,o.pointShadow.length=pe,o.pointShadowMap.length=pe,o.spotShadow.length=Fe,o.spotShadowMap.length=Fe,o.directionalShadowMatrix.length=oe,o.pointShadowMatrix.length=pe,o.spotShadowMatrix.length=Fe,tt.directionalLength=O,tt.pointLength=F,tt.spotLength=Z,tt.rectAreaLength=ie,tt.hemiLength=fe,tt.numDirectionalShadows=oe,tt.numPointShadows=pe,tt.numSpotShadows=Fe,o.version=Sm++)},setupView:function m(x,M){let D=0,R=0,B=0,O=0,F=0;const Z=M.matrixWorldInverse;for(let ie=0,fe=x.length;ie<fe;ie++){const oe=x[ie];if(oe.isDirectionalLight){const pe=o.directional[D];pe.direction.setFromMatrixPosition(oe.matrixWorld),l.setFromMatrixPosition(oe.target.matrixWorld),pe.direction.sub(l),pe.direction.transformDirection(Z),D++}else if(oe.isSpotLight){const pe=o.spot[B];pe.position.setFromMatrixPosition(oe.matrixWorld),pe.position.applyMatrix4(Z),pe.direction.setFromMatrixPosition(oe.matrixWorld),l.setFromMatrixPosition(oe.target.matrixWorld),pe.direction.sub(l),pe.direction.transformDirection(Z),B++}else if(oe.isRectAreaLight){const pe=o.rectArea[O];pe.position.setFromMatrixPosition(oe.matrixWorld),pe.position.applyMatrix4(Z),h.identity(),d.copy(oe.matrixWorld),d.premultiply(Z),h.extractRotation(d),pe.halfWidth.set(.5*oe.width,0,0),pe.halfHeight.set(0,.5*oe.height,0),pe.halfWidth.applyMatrix4(h),pe.halfHeight.applyMatrix4(h),O++}else if(oe.isPointLight){const pe=o.point[R];pe.position.setFromMatrixPosition(oe.matrixWorld),pe.position.applyMatrix4(Z),R++}else if(oe.isHemisphereLight){const pe=o.hemi[F];pe.direction.setFromMatrixPosition(oe.matrixWorld),pe.direction.transformDirection(Z),pe.direction.normalize(),F++}}},state:o}}function xf(c,e){const t=new hy(c,e),r=[],o=[];return{init:function l(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:function p(M){t.setup(r,M)},setupLightsView:function m(M){t.setupView(r,M)},pushLight:function d(M){r.push(M)},pushShadow:function h(M){o.push(M)}}}function $0(c,e){let t=new WeakMap;return{get:function r(l,d=0){let h;return!1===t.has(l)?(h=new xf(c,e),t.set(l,[h])):d>=t.get(l).length?(h=new xf(c,e),t.get(l).push(h)):h=t.get(l)[d],h},dispose:function o(){t=new WeakMap}}}class Ad extends Fs{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Ad.prototype.isMeshDepthMaterial=!0;class Td extends Fs{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ue,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Dm(c,e,t){let r=new Dl;const o=new Gt,l=new Gt,d=new fn,h=new Ad({depthPacking:3201}),p=new Td,m={},x=t.maxTextureSize,M={0:1,1:0,2:2},D=new Ao({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),R=D.clone();R.defines.HORIZONTAL_PASS=1;const B=new bi;B.setAttribute("position",new es(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const O=new ro(B,D),F=this;function Z(oe,pe){const Fe=e.update(O);D.defines.VSM_SAMPLES!==oe.blurSamples&&(D.defines.VSM_SAMPLES=oe.blurSamples,R.defines.VSM_SAMPLES=oe.blurSamples,D.needsUpdate=!0,R.needsUpdate=!0),D.uniforms.shadow_pass.value=oe.map.texture,D.uniforms.resolution.value=oe.mapSize,D.uniforms.radius.value=oe.radius,c.setRenderTarget(oe.mapPass),c.clear(),c.renderBufferDirect(pe,null,Fe,D,O,null),R.uniforms.shadow_pass.value=oe.mapPass.texture,R.uniforms.resolution.value=oe.mapSize,R.uniforms.radius.value=oe.radius,c.setRenderTarget(oe.map),c.clear(),c.renderBufferDirect(pe,null,Fe,R,O,null)}function ie(oe,pe,Fe,Xe,tt,kt){let ht=null;const he=!0===Fe.isPointLight?oe.customDistanceMaterial:oe.customDepthMaterial;if(ht=void 0!==he?he:!0===Fe.isPointLight?p:h,c.localClippingEnabled&&!0===pe.clipShadows&&0!==pe.clippingPlanes.length||pe.displacementMap&&0!==pe.displacementScale||pe.alphaMap&&pe.alphaTest>0){const $e=ht.uuid,rn=pe.uuid;let gt=m[$e];void 0===gt&&(gt={},m[$e]=gt);let Ft=gt[rn];void 0===Ft&&(Ft=ht.clone(),gt[rn]=Ft),ht=Ft}return ht.visible=pe.visible,ht.wireframe=pe.wireframe,ht.side=3===kt?null!==pe.shadowSide?pe.shadowSide:pe.side:null!==pe.shadowSide?pe.shadowSide:M[pe.side],ht.alphaMap=pe.alphaMap,ht.alphaTest=pe.alphaTest,ht.clipShadows=pe.clipShadows,ht.clippingPlanes=pe.clippingPlanes,ht.clipIntersection=pe.clipIntersection,ht.displacementMap=pe.displacementMap,ht.displacementScale=pe.displacementScale,ht.displacementBias=pe.displacementBias,ht.wireframeLinewidth=pe.wireframeLinewidth,ht.linewidth=pe.linewidth,!0===Fe.isPointLight&&!0===ht.isMeshDistanceMaterial&&(ht.referencePosition.setFromMatrixPosition(Fe.matrixWorld),ht.nearDistance=Xe,ht.farDistance=tt),ht}function fe(oe,pe,Fe,Xe,tt){if(!1===oe.visible)return;if(oe.layers.test(pe.layers)&&(oe.isMesh||oe.isLine||oe.isPoints)&&(oe.castShadow||oe.receiveShadow&&3===tt)&&(!oe.frustumCulled||r.intersectsObject(oe))){oe.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,oe.matrixWorld);const he=e.update(oe),$e=oe.material;if(Array.isArray($e)){const rn=he.groups;for(let gt=0,Ft=rn.length;gt<Ft;gt++){const Rt=rn[gt],zt=$e[Rt.materialIndex];if(zt&&zt.visible){const ft=ie(oe,zt,Xe,Fe.near,Fe.far,tt);c.renderBufferDirect(Fe,null,he,ft,oe,Rt)}}}else if($e.visible){const rn=ie(oe,$e,Xe,Fe.near,Fe.far,tt);c.renderBufferDirect(Fe,null,he,rn,oe,null)}}const ht=oe.children;for(let he=0,$e=ht.length;he<$e;he++)fe(ht[he],pe,Fe,Xe,tt)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(oe,pe,Fe){if(!1===F.enabled||!1===F.autoUpdate&&!1===F.needsUpdate||0===oe.length)return;const Xe=c.getRenderTarget(),tt=c.getActiveCubeFace(),kt=c.getActiveMipmapLevel(),ht=c.state;ht.setBlending(0),ht.buffers.color.setClear(1,1,1,1),ht.buffers.depth.setTest(!0),ht.setScissorTest(!1);for(let he=0,$e=oe.length;he<$e;he++){const rn=oe[he],gt=rn.shadow;if(void 0===gt){console.warn("THREE.WebGLShadowMap:",rn,"has no shadow.");continue}if(!1===gt.autoUpdate&&!1===gt.needsUpdate)continue;o.copy(gt.mapSize);const Ft=gt.getFrameExtents();o.multiply(Ft),l.copy(gt.mapSize),(o.x>x||o.y>x)&&(o.x>x&&(l.x=Math.floor(x/Ft.x),o.x=l.x*Ft.x,gt.mapSize.x=l.x),o.y>x&&(l.y=Math.floor(x/Ft.y),o.y=l.y*Ft.y,gt.mapSize.y=l.y)),null===gt.map&&!gt.isPointLightShadow&&3===this.type&&(gt.map=new Jn(o.x,o.y),gt.map.texture.name=rn.name+".shadowMap",gt.mapPass=new Jn(o.x,o.y),gt.camera.updateProjectionMatrix()),null===gt.map&&(gt.map=new Jn(o.x,o.y,{minFilter:Ti,magFilter:Ti,format:Ue}),gt.map.texture.name=rn.name+".shadowMap",gt.camera.updateProjectionMatrix()),c.setRenderTarget(gt.map),c.clear();const Rt=gt.getViewportCount();for(let zt=0;zt<Rt;zt++){const ft=gt.getViewport(zt);d.set(l.x*ft.x,l.y*ft.y,l.x*ft.z,l.y*ft.w),ht.viewport(d),gt.updateMatrices(rn,zt),r=gt.getFrustum(),fe(pe,Fe,gt.camera,rn,this.type)}!gt.isPointLightShadow&&3===this.type&&Z(gt,Fe),gt.needsUpdate=!1}F.needsUpdate=!1,c.setRenderTarget(Xe,tt,kt)}}function py(c,e,t){const r=t.isWebGL2,h=new function o(){let Je=!1;const Dn=new fn;let Mn=null;const Si=new fn(0,0,0,0);return{setMask:function(Hn){Mn!==Hn&&!Je&&(c.colorMask(Hn,Hn,Hn,Hn),Mn=Hn)},setLocked:function(Hn){Je=Hn},setClear:function(Hn,Ci,bn,Di,kr){!0===kr&&(Hn*=Di,Ci*=Di,bn*=Di),Dn.set(Hn,Ci,bn,Di),!1===Si.equals(Dn)&&(c.clearColor(Hn,Ci,bn,Di),Si.copy(Dn))},reset:function(){Je=!1,Mn=null,Si.set(-1,0,0,0)}}},p=new function l(){let Je=!1,Dn=null,Mn=null,Si=null;return{setTest:function(Hn){Hn?Ii(2929):Yt(2929)},setMask:function(Hn){Dn!==Hn&&!Je&&(c.depthMask(Hn),Dn=Hn)},setFunc:function(Hn){if(Mn!==Hn){if(Hn)switch(Hn){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);Mn=Hn}},setLocked:function(Hn){Je=Hn},setClear:function(Hn){Si!==Hn&&(c.clearDepth(Hn),Si=Hn)},reset:function(){Je=!1,Dn=null,Mn=null,Si=null}}},m=new function d(){let Je=!1,Dn=null,Mn=null,Si=null,Hn=null,Ci=null,bn=null,Di=null,kr=null;return{setTest:function(pr){Je||(pr?Ii(2960):Yt(2960))},setMask:function(pr){Dn!==pr&&!Je&&(c.stencilMask(pr),Dn=pr)},setFunc:function(pr,Ea,Ma){(Mn!==pr||Si!==Ea||Hn!==Ma)&&(c.stencilFunc(pr,Ea,Ma),Mn=pr,Si=Ea,Hn=Ma)},setOp:function(pr,Ea,Ma){(Ci!==pr||bn!==Ea||Di!==Ma)&&(c.stencilOp(pr,Ea,Ma),Ci=pr,bn=Ea,Di=Ma)},setLocked:function(pr){Je=pr},setClear:function(pr){kr!==pr&&(c.clearStencil(pr),kr=pr)},reset:function(){Je=!1,Dn=null,Mn=null,Si=null,Hn=null,Ci=null,bn=null,Di=null,kr=null}}};let x={},M={},D=new WeakMap,R=[],B=null,O=!1,F=null,Z=null,ie=null,fe=null,oe=null,pe=null,Fe=null,Xe=!1,tt=null,kt=null,ht=null,he=null,$e=null;const rn=c.getParameter(35661);let gt=!1,Ft=0;const Rt=c.getParameter(7938);-1!==Rt.indexOf("WebGL")?(Ft=parseFloat(/^WebGL (\d)/.exec(Rt)[1]),gt=Ft>=1):-1!==Rt.indexOf("OpenGL ES")&&(Ft=parseFloat(/^OpenGL ES (\d)/.exec(Rt)[1]),gt=Ft>=2);let zt=null,ft={};const Zt=c.getParameter(3088),tn=c.getParameter(2978),pn=(new fn).fromArray(Zt),on=(new fn).fromArray(tn);function ai(Je,Dn,Mn){const Si=new Uint8Array(4),Hn=c.createTexture();c.bindTexture(Je,Hn),c.texParameteri(Je,10241,9728),c.texParameteri(Je,10240,9728);for(let Ci=0;Ci<Mn;Ci++)c.texImage2D(Dn+Ci,0,6408,1,1,0,6408,5121,Si);return Hn}const qi={};function Ii(Je){!0!==x[Je]&&(c.enable(Je),x[Je]=!0)}function Yt(Je){!1!==x[Je]&&(c.disable(Je),x[Je]=!1)}qi[3553]=ai(3553,3553,1),qi[34067]=ai(34067,34069,6),h.setClear(0,0,0,1),p.setClear(1),m.setClear(0),Ii(2929),p.setFunc(3),un(!1),Xn(1),Ii(2884),jt(0);const En={100:32774,101:32778,102:32779};if(r)En[103]=32775,En[104]=32776;else{const Je=e.get("EXT_blend_minmax");null!==Je&&(En[103]=Je.MIN_EXT,En[104]=Je.MAX_EXT)}const Xi={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function jt(Je,Dn,Mn,Si,Hn,Ci,bn,Di){if(0!==Je){if(!1===O&&(Ii(3042),O=!0),5===Je)Hn=Hn||Dn,Ci=Ci||Mn,bn=bn||Si,(Dn!==Z||Hn!==oe)&&(c.blendEquationSeparate(En[Dn],En[Hn]),Z=Dn,oe=Hn),(Mn!==ie||Si!==fe||Ci!==pe||bn!==Fe)&&(c.blendFuncSeparate(Xi[Mn],Xi[Si],Xi[Ci],Xi[bn]),ie=Mn,fe=Si,pe=Ci,Fe=bn),F=Je,Xe=null;else if(Je!==F||Di!==Xe){if((100!==Z||100!==oe)&&(c.blendEquation(32774),Z=100,oe=100),Di)switch(Je){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Je)}else switch(Je){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Je)}ie=null,fe=null,pe=null,Fe=null,F=Je,Xe=Di}}else!0===O&&(Yt(3042),O=!1)}function un(Je){tt!==Je&&(c.frontFace(Je?2304:2305),tt=Je)}function Xn(Je){0!==Je?(Ii(2884),Je!==kt&&c.cullFace(1===Je?1029:2===Je?1028:1032)):Yt(2884),kt=Je}function Fi(Je,Dn,Mn){Je?(Ii(32823),(he!==Dn||$e!==Mn)&&(c.polygonOffset(Dn,Mn),he=Dn,$e=Mn)):Yt(32823)}function pi(Je){void 0===Je&&(Je=33984+rn-1),zt!==Je&&(c.activeTexture(Je),zt=Je)}return{buffers:{color:h,depth:p,stencil:m},enable:Ii,disable:Yt,bindFramebuffer:function Dr(Je,Dn){return M[Je]!==Dn&&(c.bindFramebuffer(Je,Dn),M[Je]=Dn,r&&(36009===Je&&(M[36160]=Dn),36160===Je&&(M[36009]=Dn)),!0)},drawBuffers:function Gi(Je,Dn){let Mn=R,Si=!1;if(Je)if(Mn=D.get(Dn),void 0===Mn&&(Mn=[],D.set(Dn,Mn)),Je.isWebGLMultipleRenderTargets){const Hn=Je.texture;if(Mn.length!==Hn.length||36064!==Mn[0]){for(let Ci=0,bn=Hn.length;Ci<bn;Ci++)Mn[Ci]=36064+Ci;Mn.length=Hn.length,Si=!0}}else 36064!==Mn[0]&&(Mn[0]=36064,Si=!0);else 1029!==Mn[0]&&(Mn[0]=1029,Si=!0);Si&&(t.isWebGL2?c.drawBuffers(Mn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Mn))},useProgram:function Wi(Je){return B!==Je&&(c.useProgram(Je),B=Je,!0)},setBlending:jt,setMaterial:function Xt(Je,Dn){2===Je.side?Yt(2884):Ii(2884);let Mn=1===Je.side;Dn&&(Mn=!Mn),un(Mn),1===Je.blending&&!1===Je.transparent?jt(0):jt(Je.blending,Je.blendEquation,Je.blendSrc,Je.blendDst,Je.blendEquationAlpha,Je.blendSrcAlpha,Je.blendDstAlpha,Je.premultipliedAlpha),p.setFunc(Je.depthFunc),p.setTest(Je.depthTest),p.setMask(Je.depthWrite),h.setMask(Je.colorWrite);const Si=Je.stencilWrite;m.setTest(Si),Si&&(m.setMask(Je.stencilWriteMask),m.setFunc(Je.stencilFunc,Je.stencilRef,Je.stencilFuncMask),m.setOp(Je.stencilFail,Je.stencilZFail,Je.stencilZPass)),Fi(Je.polygonOffset,Je.polygonOffsetFactor,Je.polygonOffsetUnits),!0===Je.alphaToCoverage?Ii(32926):Yt(32926)},setFlipSided:un,setCullFace:Xn,setLineWidth:function Rn(Je){Je!==ht&&(gt&&c.lineWidth(Je),ht=Je)},setPolygonOffset:Fi,setScissorTest:function xi(Je){Je?Ii(3089):Yt(3089)},activeTexture:pi,bindTexture:function xs(Je,Dn){null===zt&&pi();let Mn=ft[zt];void 0===Mn&&(Mn={type:void 0,texture:void 0},ft[zt]=Mn),(Mn.type!==Je||Mn.texture!==Dn)&&(c.bindTexture(Je,Dn||qi[Je]),Mn.type=Je,Mn.texture=Dn)},unbindTexture:function zr(){const Je=ft[zt];void 0!==Je&&void 0!==Je.type&&(c.bindTexture(Je.type,null),Je.type=void 0,Je.texture=void 0)},compressedTexImage2D:function Re(){try{c.compressedTexImage2D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texImage2D:function ci(){try{c.texImage2D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texImage3D:function Ut(){try{c.texImage3D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texStorage2D:function Cn(){try{c.texStorage2D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texStorage3D:function kn(){try{c.texStorage3D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texSubImage2D:function ge(){try{c.texSubImage2D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},texSubImage3D:function Ht(){try{c.texSubImage3D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},compressedTexSubImage2D:function an(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(Je){console.error("THREE.WebGLState:",Je)}},scissor:function ji(Je){!1===pn.equals(Je)&&(c.scissor(Je.x,Je.y,Je.z,Je.w),pn.copy(Je))},viewport:function tr(Je){!1===on.equals(Je)&&(c.viewport(Je.x,Je.y,Je.z,Je.w),on.copy(Je))},reset:function $n(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===r&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),x={},zt=null,ft={},M={},D=new WeakMap,R=[],B=null,O=!1,F=null,Z=null,ie=null,fe=null,oe=null,pe=null,Fe=null,Xe=!1,tt=null,kt=null,ht=null,he=null,$e=null,pn.set(0,0,c.canvas.width,c.canvas.height),on.set(0,0,c.canvas.width,c.canvas.height),h.reset(),p.reset(),m.reset()}}}function zo(c,e,t,r,o,l,d){const h=o.isWebGL2,p=o.maxTextures,m=o.maxCubemapSize,x=o.maxTextureSize,M=o.maxSamples,D=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,R=/OculusBrowser/g.test(navigator.userAgent),B=new WeakMap;let O;const F=new WeakMap;let Z=!1;try{Z="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Re){}function ie(Re,ge){return Z?new OffscreenCanvas(Re,ge):no("canvas")}function fe(Re,ge,Ht,an){let Cn=1;if((Re.width>an||Re.height>an)&&(Cn=an/Math.max(Re.width,Re.height)),Cn<1||!0===ge){if("undefined"!=typeof HTMLImageElement&&Re instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&Re instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&Re instanceof ImageBitmap){const kn=ge?Wt:Math.floor,ci=kn(Cn*Re.width),Ut=kn(Cn*Re.height);void 0===O&&(O=ie(ci,Ut));const ji=Ht?ie(ci,Ut):O;return ji.width=ci,ji.height=Ut,ji.getContext("2d").drawImage(Re,0,0,ci,Ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+ci+"x"+Ut+")."),ji}return"data"in Re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),Re}return Re}function oe(Re){return Aa(Re.width)&&Aa(Re.height)}function Fe(Re,ge){return Re.generateMipmaps&&ge&&Re.minFilter!==Ti&&Re.minFilter!==at}function Xe(Re){c.generateMipmap(Re)}function tt(Re,ge,Ht,an,Cn=!1){if(!1===h)return ge;if(null!==Re){if(void 0!==c[Re])return c[Re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Re+"'")}let kn=ge;return 6403===ge&&(5126===Ht&&(kn=33326),5131===Ht&&(kn=33325),5121===Ht&&(kn=33321)),33319===ge&&(5126===Ht&&(kn=33328),5131===Ht&&(kn=33327),5121===Ht&&(kn=33323)),6408===ge&&(5126===Ht&&(kn=34836),5131===Ht&&(kn=34842),5121===Ht&&(kn=an===nn&&!1===Cn?35907:32856),32819===Ht&&(kn=32854),32820===Ht&&(kn=32855)),(33325===kn||33326===kn||33327===kn||33328===kn||34842===kn||34836===kn)&&e.get("EXT_color_buffer_float"),kn}function kt(Re,ge,Ht){return!0===Fe(Re,Ht)||Re.isFramebufferTexture&&Re.minFilter!==Ti&&Re.minFilter!==at?Math.log2(Math.max(ge.width,ge.height))+1:void 0!==Re.mipmaps&&Re.mipmaps.length>0?Re.mipmaps.length:Re.isCompressedTexture&&Array.isArray(Re.image)?ge.mipmaps.length:1}function ht(Re){return Re===Ti||1004===Re||1005===Re?9728:9729}function he(Re){const ge=Re.target;ge.removeEventListener("dispose",he),function rn(Re){const ge=r.get(Re);if(void 0===ge.__webglInit)return;const Ht=Re.source,an=F.get(Ht);if(an){const Cn=an[ge.__cacheKey];Cn.usedTimes--,0===Cn.usedTimes&&gt(Re),0===Object.keys(an).length&&F.delete(Ht)}r.remove(Re)}(ge),ge.isVideoTexture&&B.delete(ge)}function $e(Re){const ge=Re.target;ge.removeEventListener("dispose",$e),function Ft(Re){const ge=Re.texture,Ht=r.get(Re),an=r.get(ge);if(void 0!==an.__webglTexture&&(c.deleteTexture(an.__webglTexture),d.memory.textures--),Re.depthTexture&&Re.depthTexture.dispose(),Re.isWebGLCubeRenderTarget)for(let Cn=0;Cn<6;Cn++)c.deleteFramebuffer(Ht.__webglFramebuffer[Cn]),Ht.__webglDepthbuffer&&c.deleteRenderbuffer(Ht.__webglDepthbuffer[Cn]);else c.deleteFramebuffer(Ht.__webglFramebuffer),Ht.__webglDepthbuffer&&c.deleteRenderbuffer(Ht.__webglDepthbuffer),Ht.__webglMultisampledFramebuffer&&c.deleteFramebuffer(Ht.__webglMultisampledFramebuffer),Ht.__webglColorRenderbuffer&&c.deleteRenderbuffer(Ht.__webglColorRenderbuffer),Ht.__webglDepthRenderbuffer&&c.deleteRenderbuffer(Ht.__webglDepthRenderbuffer);if(Re.isWebGLMultipleRenderTargets)for(let Cn=0,kn=ge.length;Cn<kn;Cn++){const ci=r.get(ge[Cn]);ci.__webglTexture&&(c.deleteTexture(ci.__webglTexture),d.memory.textures--),r.remove(ge[Cn])}r.remove(ge),r.remove(Re)}(ge)}function gt(Re){const ge=r.get(Re);c.deleteTexture(ge.__webglTexture),delete F.get(Re.source)[ge.__cacheKey],d.memory.textures--}let Rt=0;function tn(Re,ge){const Ht=r.get(Re);if(Re.isVideoTexture&&function xs(Re){const ge=d.render.frame;B.get(Re)!==ge&&(B.set(Re,ge),Re.update())}(Re),!1===Re.isRenderTargetTexture&&Re.version>0&&Ht.__version!==Re.version){const an=Re.image;if(null===an)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==an.complete)return void Gi(Ht,Re,ge);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ge),t.bindTexture(3553,Ht.__webglTexture)}const qi={[Sn]:10497,[$t]:33071,1002:33648},Ii={[Ti]:9728,1004:9984,1005:9986,[at]:9729,1007:9985,1008:9987};function Yt(Re,ge,Ht){if(Ht?(c.texParameteri(Re,10242,qi[ge.wrapS]),c.texParameteri(Re,10243,qi[ge.wrapT]),(32879===Re||35866===Re)&&c.texParameteri(Re,32882,qi[ge.wrapR]),c.texParameteri(Re,10240,Ii[ge.magFilter]),c.texParameteri(Re,10241,Ii[ge.minFilter])):(c.texParameteri(Re,10242,33071),c.texParameteri(Re,10243,33071),(32879===Re||35866===Re)&&c.texParameteri(Re,32882,33071),(ge.wrapS!==$t||ge.wrapT!==$t)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(Re,10240,ht(ge.magFilter)),c.texParameteri(Re,10241,ht(ge.minFilter)),ge.minFilter!==Ti&&ge.minFilter!==at&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const an=e.get("EXT_texture_filter_anisotropic");if(ge.type===en&&!1===e.has("OES_texture_float_linear")||!1===h&&ge.type===Bn&&!1===e.has("OES_texture_half_float_linear"))return;(ge.anisotropy>1||r.get(ge).__currentAnisotropy)&&(c.texParameterf(Re,an.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ge.anisotropy,o.getMaxAnisotropy())),r.get(ge).__currentAnisotropy=ge.anisotropy)}}function Dr(Re,ge){let Ht=!1;void 0===Re.__webglInit&&(Re.__webglInit=!0,ge.addEventListener("dispose",he));const an=ge.source;let Cn=F.get(an);void 0===Cn&&(Cn={},F.set(an,Cn));const kn=function Zt(Re){const ge=[];return ge.push(Re.wrapS),ge.push(Re.wrapT),ge.push(Re.magFilter),ge.push(Re.minFilter),ge.push(Re.anisotropy),ge.push(Re.internalFormat),ge.push(Re.format),ge.push(Re.type),ge.push(Re.generateMipmaps),ge.push(Re.premultiplyAlpha),ge.push(Re.flipY),ge.push(Re.unpackAlignment),ge.push(Re.encoding),ge.join()}(ge);if(kn!==Re.__cacheKey){void 0===Cn[kn]&&(Cn[kn]={texture:c.createTexture(),usedTimes:0},d.memory.textures++,Ht=!0),Cn[kn].usedTimes++;const ci=Cn[Re.__cacheKey];void 0!==ci&&(Cn[Re.__cacheKey].usedTimes--,0===ci.usedTimes&&gt(ge)),Re.__cacheKey=kn,Re.__webglTexture=Cn[kn].texture}return Ht}function Gi(Re,ge,Ht){let an=3553;ge.isDataArrayTexture&&(an=35866),ge.isData3DTexture&&(an=32879);const Cn=Dr(Re,ge),kn=ge.source;if(t.activeTexture(33984+Ht),t.bindTexture(an,Re.__webglTexture),kn.version!==kn.__currentVersion||!0===Cn){c.pixelStorei(37440,ge.flipY),c.pixelStorei(37441,ge.premultiplyAlpha),c.pixelStorei(3317,ge.unpackAlignment),c.pixelStorei(37443,0);const ci=function pe(Re){return!h&&(Re.wrapS!==$t||Re.wrapT!==$t||Re.minFilter!==Ti&&Re.minFilter!==at)}(ge)&&!1===oe(ge.image);let Ut=fe(ge.image,ci,!1,x);Ut=zr(ge,Ut);const ji=oe(Ut)||h,tr=l.convert(ge.format,ge.encoding);let Dn,$n=l.convert(ge.type),Je=tt(ge.internalFormat,tr,$n,ge.encoding,ge.isVideoTexture);Yt(an,ge,ji);const Mn=ge.mipmaps,Si=h&&!0!==ge.isVideoTexture,Hn=void 0===Re.__version,Ci=kt(ge,Ut,ji);if(ge.isDepthTexture)Je=6402,h?Je=ge.type===en?36012:1014===ge.type?33190:ge.type===Ye?35056:33189:ge.type===en&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ge.format===me&&6402===Je&&ge.type!==Ce&&1014!==ge.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ge.type=Ce,$n=l.convert(ge.type)),ge.format===ae&&6402===Je&&(Je=34041,ge.type!==Ye&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ge.type=Ye,$n=l.convert(ge.type))),Si&&Hn?t.texStorage2D(3553,1,Je,Ut.width,Ut.height):t.texImage2D(3553,0,Je,Ut.width,Ut.height,0,tr,$n,null);else if(ge.isDataTexture)if(Mn.length>0&&ji){Si&&Hn&&t.texStorage2D(3553,Ci,Je,Mn[0].width,Mn[0].height);for(let bn=0,Di=Mn.length;bn<Di;bn++)Dn=Mn[bn],Si?t.texSubImage2D(3553,bn,0,0,Dn.width,Dn.height,tr,$n,Dn.data):t.texImage2D(3553,bn,Je,Dn.width,Dn.height,0,tr,$n,Dn.data);ge.generateMipmaps=!1}else Si?(Hn&&t.texStorage2D(3553,Ci,Je,Ut.width,Ut.height),t.texSubImage2D(3553,0,0,0,Ut.width,Ut.height,tr,$n,Ut.data)):t.texImage2D(3553,0,Je,Ut.width,Ut.height,0,tr,$n,Ut.data);else if(ge.isCompressedTexture){Si&&Hn&&t.texStorage2D(3553,Ci,Je,Mn[0].width,Mn[0].height);for(let bn=0,Di=Mn.length;bn<Di;bn++)Dn=Mn[bn],ge.format!==Ue?null!==tr?Si?t.compressedTexSubImage2D(3553,bn,0,0,Dn.width,Dn.height,tr,Dn.data):t.compressedTexImage2D(3553,bn,Je,Dn.width,Dn.height,0,Dn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Si?t.texSubImage2D(3553,bn,0,0,Dn.width,Dn.height,tr,$n,Dn.data):t.texImage2D(3553,bn,Je,Dn.width,Dn.height,0,tr,$n,Dn.data)}else if(ge.isDataArrayTexture)Si?(Hn&&t.texStorage3D(35866,Ci,Je,Ut.width,Ut.height,Ut.depth),t.texSubImage3D(35866,0,0,0,0,Ut.width,Ut.height,Ut.depth,tr,$n,Ut.data)):t.texImage3D(35866,0,Je,Ut.width,Ut.height,Ut.depth,0,tr,$n,Ut.data);else if(ge.isData3DTexture)Si?(Hn&&t.texStorage3D(32879,Ci,Je,Ut.width,Ut.height,Ut.depth),t.texSubImage3D(32879,0,0,0,0,Ut.width,Ut.height,Ut.depth,tr,$n,Ut.data)):t.texImage3D(32879,0,Je,Ut.width,Ut.height,Ut.depth,0,tr,$n,Ut.data);else if(ge.isFramebufferTexture)Si&&Hn?t.texStorage2D(3553,Ci,Je,Ut.width,Ut.height):t.texImage2D(3553,0,Je,Ut.width,Ut.height,0,tr,$n,null);else if(Mn.length>0&&ji){Si&&Hn&&t.texStorage2D(3553,Ci,Je,Mn[0].width,Mn[0].height);for(let bn=0,Di=Mn.length;bn<Di;bn++)Dn=Mn[bn],Si?t.texSubImage2D(3553,bn,0,0,tr,$n,Dn):t.texImage2D(3553,bn,Je,tr,$n,Dn);ge.generateMipmaps=!1}else Si?(Hn&&t.texStorage2D(3553,Ci,Je,Ut.width,Ut.height),t.texSubImage2D(3553,0,0,0,tr,$n,Ut)):t.texImage2D(3553,0,Je,tr,$n,Ut);Fe(ge,ji)&&Xe(an),kn.__currentVersion=kn.version,ge.onUpdate&&ge.onUpdate(ge)}Re.__version=ge.version}function En(Re,ge,Ht,an,Cn){const kn=l.convert(Ht.format,Ht.encoding),ci=l.convert(Ht.type),Ut=tt(Ht.internalFormat,kn,ci,Ht.encoding);r.get(ge).__hasExternalTextures||(32879===Cn||35866===Cn?t.texImage3D(Cn,0,Ut,ge.width,ge.height,ge.depth,0,kn,ci,null):t.texImage2D(Cn,0,Ut,ge.width,ge.height,0,kn,ci,null)),t.bindFramebuffer(36160,Re),pi(ge)?D.framebufferTexture2DMultisampleEXT(36160,an,Cn,r.get(Ht).__webglTexture,0,xi(ge)):c.framebufferTexture2D(36160,an,Cn,r.get(Ht).__webglTexture,0),t.bindFramebuffer(36160,null)}function Xi(Re,ge,Ht){if(c.bindRenderbuffer(36161,Re),ge.depthBuffer&&!ge.stencilBuffer){let an=33189;if(Ht||pi(ge)){const Cn=ge.depthTexture;Cn&&Cn.isDepthTexture&&(Cn.type===en?an=36012:1014===Cn.type&&(an=33190));const kn=xi(ge);pi(ge)?D.renderbufferStorageMultisampleEXT(36161,kn,an,ge.width,ge.height):c.renderbufferStorageMultisample(36161,kn,an,ge.width,ge.height)}else c.renderbufferStorage(36161,an,ge.width,ge.height);c.framebufferRenderbuffer(36160,36096,36161,Re)}else if(ge.depthBuffer&&ge.stencilBuffer){const an=xi(ge);Ht&&!1===pi(ge)?c.renderbufferStorageMultisample(36161,an,35056,ge.width,ge.height):pi(ge)?D.renderbufferStorageMultisampleEXT(36161,an,35056,ge.width,ge.height):c.renderbufferStorage(36161,34041,ge.width,ge.height),c.framebufferRenderbuffer(36160,33306,36161,Re)}else{const an=!0===ge.isWebGLMultipleRenderTargets?ge.texture[0]:ge.texture,Cn=l.convert(an.format,an.encoding),kn=l.convert(an.type),ci=tt(an.internalFormat,Cn,kn,an.encoding),Ut=xi(ge);Ht&&!1===pi(ge)?c.renderbufferStorageMultisample(36161,Ut,ci,ge.width,ge.height):pi(ge)?D.renderbufferStorageMultisampleEXT(36161,Ut,ci,ge.width,ge.height):c.renderbufferStorage(36161,ci,ge.width,ge.height)}c.bindRenderbuffer(36161,null)}function Xt(Re){const ge=r.get(Re),Ht=!0===Re.isWebGLCubeRenderTarget;if(Re.depthTexture&&!ge.__autoAllocateDepthBuffer){if(Ht)throw new Error("target.depthTexture not supported in Cube render targets");!function jt(Re,ge){if(ge&&ge.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Re),!ge.depthTexture||!ge.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ge.depthTexture).__webglTexture||ge.depthTexture.image.width!==ge.width||ge.depthTexture.image.height!==ge.height)&&(ge.depthTexture.image.width=ge.width,ge.depthTexture.image.height=ge.height,ge.depthTexture.needsUpdate=!0),tn(ge.depthTexture,0);const an=r.get(ge.depthTexture).__webglTexture,Cn=xi(ge);if(ge.depthTexture.format===me)pi(ge)?D.framebufferTexture2DMultisampleEXT(36160,36096,3553,an,0,Cn):c.framebufferTexture2D(36160,36096,3553,an,0);else{if(ge.depthTexture.format!==ae)throw new Error("Unknown depthTexture format");pi(ge)?D.framebufferTexture2DMultisampleEXT(36160,33306,3553,an,0,Cn):c.framebufferTexture2D(36160,33306,3553,an,0)}}(ge.__webglFramebuffer,Re)}else if(Ht){ge.__webglDepthbuffer=[];for(let an=0;an<6;an++)t.bindFramebuffer(36160,ge.__webglFramebuffer[an]),ge.__webglDepthbuffer[an]=c.createRenderbuffer(),Xi(ge.__webglDepthbuffer[an],Re,!1)}else t.bindFramebuffer(36160,ge.__webglFramebuffer),ge.__webglDepthbuffer=c.createRenderbuffer(),Xi(ge.__webglDepthbuffer,Re,!1);t.bindFramebuffer(36160,null)}function xi(Re){return Math.min(M,Re.samples)}function pi(Re){const ge=r.get(Re);return h&&Re.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==ge.__useRenderToTexture}function zr(Re,ge){const Ht=Re.encoding,an=Re.format,Cn=Re.type;return!0===Re.isCompressedTexture||!0===Re.isVideoTexture||1035===Re.format||Ht!==Tt&&(Ht===nn?!1===h?!0===e.has("EXT_sRGB")&&an===Ue?(Re.format=1035,Re.minFilter=at,Re.generateMipmaps=!1):ge=Ie.sRGBToLinear(ge):(an!==Ue||Cn!==si)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ht)),ge}this.allocateTextureUnit=function ft(){const Re=Rt;return Re>=p&&console.warn("THREE.WebGLTextures: Trying to use "+Re+" texture units while this GPU supports only "+p),Rt+=1,Re},this.resetTextureUnits=function zt(){Rt=0},this.setTexture2D=tn,this.setTexture2DArray=function pn(Re,ge){const Ht=r.get(Re);Re.version>0&&Ht.__version!==Re.version?Gi(Ht,Re,ge):(t.activeTexture(33984+ge),t.bindTexture(35866,Ht.__webglTexture))},this.setTexture3D=function on(Re,ge){const Ht=r.get(Re);Re.version>0&&Ht.__version!==Re.version?Gi(Ht,Re,ge):(t.activeTexture(33984+ge),t.bindTexture(32879,Ht.__webglTexture))},this.setTextureCube=function ai(Re,ge){const Ht=r.get(Re);Re.version>0&&Ht.__version!==Re.version?function Wi(Re,ge,Ht){if(6!==ge.image.length)return;const an=Dr(Re,ge),Cn=ge.source;if(t.activeTexture(33984+Ht),t.bindTexture(34067,Re.__webglTexture),Cn.version!==Cn.__currentVersion||!0===an){c.pixelStorei(37440,ge.flipY),c.pixelStorei(37441,ge.premultiplyAlpha),c.pixelStorei(3317,ge.unpackAlignment),c.pixelStorei(37443,0);const kn=ge.isCompressedTexture||ge.image[0].isCompressedTexture,ci=ge.image[0]&&ge.image[0].isDataTexture,Ut=[];for(let bn=0;bn<6;bn++)Ut[bn]=kn||ci?ci?ge.image[bn].image:ge.image[bn]:fe(ge.image[bn],!1,!0,m),Ut[bn]=zr(ge,Ut[bn]);const ji=Ut[0],tr=oe(ji)||h,$n=l.convert(ge.format,ge.encoding),Je=l.convert(ge.type),Dn=tt(ge.internalFormat,$n,Je,ge.encoding),Mn=h&&!0!==ge.isVideoTexture,Si=void 0===Re.__version;let Ci,Hn=kt(ge,ji,tr);if(Yt(34067,ge,tr),kn){Mn&&Si&&t.texStorage2D(34067,Hn,Dn,ji.width,ji.height);for(let bn=0;bn<6;bn++){Ci=Ut[bn].mipmaps;for(let Di=0;Di<Ci.length;Di++){const kr=Ci[Di];ge.format!==Ue?null!==$n?Mn?t.compressedTexSubImage2D(34069+bn,Di,0,0,kr.width,kr.height,$n,kr.data):t.compressedTexImage2D(34069+bn,Di,Dn,kr.width,kr.height,0,kr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Mn?t.texSubImage2D(34069+bn,Di,0,0,kr.width,kr.height,$n,Je,kr.data):t.texImage2D(34069+bn,Di,Dn,kr.width,kr.height,0,$n,Je,kr.data)}}}else{Ci=ge.mipmaps,Mn&&Si&&(Ci.length>0&&Hn++,t.texStorage2D(34067,Hn,Dn,Ut[0].width,Ut[0].height));for(let bn=0;bn<6;bn++)if(ci){Mn?t.texSubImage2D(34069+bn,0,0,0,Ut[bn].width,Ut[bn].height,$n,Je,Ut[bn].data):t.texImage2D(34069+bn,0,Dn,Ut[bn].width,Ut[bn].height,0,$n,Je,Ut[bn].data);for(let Di=0;Di<Ci.length;Di++){const pr=Ci[Di].image[bn].image;Mn?t.texSubImage2D(34069+bn,Di+1,0,0,pr.width,pr.height,$n,Je,pr.data):t.texImage2D(34069+bn,Di+1,Dn,pr.width,pr.height,0,$n,Je,pr.data)}}else{Mn?t.texSubImage2D(34069+bn,0,0,0,$n,Je,Ut[bn]):t.texImage2D(34069+bn,0,Dn,$n,Je,Ut[bn]);for(let Di=0;Di<Ci.length;Di++){const kr=Ci[Di];Mn?t.texSubImage2D(34069+bn,Di+1,0,0,$n,Je,kr.image[bn]):t.texImage2D(34069+bn,Di+1,Dn,$n,Je,kr.image[bn])}}}Fe(ge,tr)&&Xe(34067),Cn.__currentVersion=Cn.version,ge.onUpdate&&ge.onUpdate(ge)}Re.__version=ge.version}(Ht,Re,ge):(t.activeTexture(33984+ge),t.bindTexture(34067,Ht.__webglTexture))},this.rebindTextures=function un(Re,ge,Ht){const an=r.get(Re);void 0!==ge&&En(an.__webglFramebuffer,Re,Re.texture,36064,3553),void 0!==Ht&&Xt(Re)},this.setupRenderTarget=function Xn(Re){const ge=Re.texture,Ht=r.get(Re),an=r.get(ge);Re.addEventListener("dispose",$e),!0!==Re.isWebGLMultipleRenderTargets&&(void 0===an.__webglTexture&&(an.__webglTexture=c.createTexture()),an.__version=ge.version,d.memory.textures++);const Cn=!0===Re.isWebGLCubeRenderTarget,kn=!0===Re.isWebGLMultipleRenderTargets,ci=oe(Re)||h;if(Cn){Ht.__webglFramebuffer=[];for(let Ut=0;Ut<6;Ut++)Ht.__webglFramebuffer[Ut]=c.createFramebuffer()}else if(Ht.__webglFramebuffer=c.createFramebuffer(),kn)if(o.drawBuffers){const Ut=Re.texture;for(let ji=0,tr=Ut.length;ji<tr;ji++){const $n=r.get(Ut[ji]);void 0===$n.__webglTexture&&($n.__webglTexture=c.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(h&&Re.samples>0&&!1===pi(Re)){Ht.__webglMultisampledFramebuffer=c.createFramebuffer(),Ht.__webglColorRenderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(36161,Ht.__webglColorRenderbuffer);const Ut=l.convert(ge.format,ge.encoding),ji=l.convert(ge.type),tr=tt(ge.internalFormat,Ut,ji,ge.encoding),$n=xi(Re);c.renderbufferStorageMultisample(36161,$n,tr,Re.width,Re.height),t.bindFramebuffer(36160,Ht.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064,36161,Ht.__webglColorRenderbuffer),c.bindRenderbuffer(36161,null),Re.depthBuffer&&(Ht.__webglDepthRenderbuffer=c.createRenderbuffer(),Xi(Ht.__webglDepthRenderbuffer,Re,!0)),t.bindFramebuffer(36160,null)}if(Cn){t.bindTexture(34067,an.__webglTexture),Yt(34067,ge,ci);for(let Ut=0;Ut<6;Ut++)En(Ht.__webglFramebuffer[Ut],Re,ge,36064,34069+Ut);Fe(ge,ci)&&Xe(34067),t.unbindTexture()}else if(kn){const Ut=Re.texture;for(let ji=0,tr=Ut.length;ji<tr;ji++){const $n=Ut[ji],Je=r.get($n);t.bindTexture(3553,Je.__webglTexture),Yt(3553,$n,ci),En(Ht.__webglFramebuffer,Re,$n,36064+ji,3553),Fe($n,ci)&&Xe(3553)}t.unbindTexture()}else{let Ut=3553;(Re.isWebGL3DRenderTarget||Re.isWebGLArrayRenderTarget)&&(h?Ut=Re.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ut,an.__webglTexture),Yt(Ut,ge,ci),En(Ht.__webglFramebuffer,Re,ge,36064,Ut),Fe(ge,ci)&&Xe(Ut),t.unbindTexture()}Re.depthBuffer&&Xt(Re)},this.updateRenderTargetMipmap=function Rn(Re){const ge=oe(Re)||h,Ht=!0===Re.isWebGLMultipleRenderTargets?Re.texture:[Re.texture];for(let an=0,Cn=Ht.length;an<Cn;an++){const kn=Ht[an];if(Fe(kn,ge)){const ci=Re.isWebGLCubeRenderTarget?34067:3553,Ut=r.get(kn).__webglTexture;t.bindTexture(ci,Ut),Xe(ci),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Fi(Re){if(h&&Re.samples>0&&!1===pi(Re)){const ge=Re.width,Ht=Re.height;let an=16384;const Cn=[36064],kn=Re.stencilBuffer?33306:36096;Re.depthBuffer&&Cn.push(kn);const ci=r.get(Re),Ut=void 0!==ci.__ignoreDepthValues&&ci.__ignoreDepthValues;!1===Ut&&(Re.depthBuffer&&(an|=256),Re.stencilBuffer&&(an|=1024)),t.bindFramebuffer(36008,ci.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ci.__webglFramebuffer),!0===Ut&&(c.invalidateFramebuffer(36008,[kn]),c.invalidateFramebuffer(36009,[kn])),c.blitFramebuffer(0,0,ge,Ht,0,0,ge,Ht,an,9728),R&&c.invalidateFramebuffer(36008,Cn),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,ci.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Xt,this.setupFrameBufferTexture=En,this.useMultisampledRTT=pi}function my(c,e,t){const r=t.isWebGL2;return{convert:function o(l,d=null){let h;if(l===si)return 5121;if(1017===l)return 32819;if(1018===l)return 32820;if(1010===l)return 5120;if(1011===l)return 5122;if(l===Ce)return 5123;if(1013===l)return 5124;if(1014===l)return 5125;if(l===en)return 5126;if(l===Bn)return r?5131:(h=e.get("OES_texture_half_float"),null!==h?h.HALF_FLOAT_OES:null);if(1021===l)return 6406;if(l===Ue)return 6408;if(1024===l)return 6409;if(1025===l)return 6410;if(l===me)return 6402;if(l===ae)return 34041;if(1028===l)return 6403;if(1022===l)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===l)return h=e.get("EXT_sRGB"),null!==h?h.SRGB_ALPHA_EXT:null;if(1029===l)return 36244;if(1030===l)return 33319;if(1031===l)return 33320;if(1033===l)return 36249;if(33776===l||33777===l||33778===l||33779===l)if(d===nn){if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===h)return null;if(33776===l)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===l)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===l)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===l)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(h=e.get("WEBGL_compressed_texture_s3tc"),null===h)return null;if(33776===l)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===l)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===l)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===l)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===l||35841===l||35842===l||35843===l){if(h=e.get("WEBGL_compressed_texture_pvrtc"),null===h)return null;if(35840===l)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===l)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===l)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===l)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===l)return h=e.get("WEBGL_compressed_texture_etc1"),null!==h?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===l||37496===l){if(h=e.get("WEBGL_compressed_texture_etc"),null===h)return null;if(37492===l)return d===nn?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(37496===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(37808===l||37809===l||37810===l||37811===l||37812===l||37813===l||37814===l||37815===l||37816===l||37817===l||37818===l||37819===l||37820===l||37821===l){if(h=e.get("WEBGL_compressed_texture_astc"),null===h)return null;if(37808===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===l)return d===nn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===l){if(h=e.get("EXT_texture_compression_bptc"),null===h)return null;if(36492===l)return d===nn?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}return l===Ye?r?34042:(h=e.get("WEBGL_depth_texture"),null!==h?h.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}Td.prototype.isMeshDistanceMaterial=!0;class Am extends so{constructor(e=[]){super(),this.cameras=e}}Am.prototype.isArrayCamera=!0;class Ac extends Jt{constructor(){super(),this.type="Group"}}Ac.prototype.isGroup=!0;const Y0={type:"move"};class Rd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ac,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ac,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ue),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ac,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ue),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let o=null,l=null,d=null;const h=this._targetRay,p=this._grip,m=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==h&&(o=t.getPose(e.targetRaySpace,r),null!==o&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(Y0))),m&&e.hand){d=!0;for(const O of e.hand.values()){const F=t.getJointPose(O,r);if(void 0===m.joints[O.jointName]){const ie=new Ac;ie.matrixAutoUpdate=!1,ie.visible=!1,m.joints[O.jointName]=ie,m.add(ie)}const Z=m.joints[O.jointName];null!==F&&(Z.matrix.fromArray(F.transform.matrix),Z.matrix.decompose(Z.position,Z.rotation,Z.scale),Z.jointRadius=F.radius),Z.visible=null!==F}const D=m.joints["index-finger-tip"].position.distanceTo(m.joints["thumb-tip"].position),R=.02,B=.005;m.inputState.pinching&&D>R+B?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!m.inputState.pinching&&D<=R-B&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==p&&e.gripSpace&&(l=t.getPose(e.gripSpace,r),null!==l&&(p.matrix.fromArray(l.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),l.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(l.linearVelocity)):p.hasLinearVelocity=!1,l.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(l.angularVelocity)):p.hasAngularVelocity=!1));return null!==h&&(h.visible=null!==o),null!==p&&(p.visible=null!==l),null!==m&&(m.visible=null!==d),this}}class gy extends yn{constructor(e,t,r,o,l,d,h,p,m,x){if((x=void 0!==x?x:me)!==me&&x!==ae)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&x===me&&(r=Ce),void 0===r&&x===ae&&(r=Ye),super(null,o,l,d,h,p,x,r,m),this.image={width:e,height:t},this.magFilter=void 0!==h?h:Ti,this.minFilter=void 0!==p?p:Ti,this.flipY=!1,this.generateMipmaps=!1}}gy.prototype.isDepthTexture=!0;class _y extends V{constructor(e,t){super();const r=this;let o=null,l=1,d=null,h="local-floor",p=null,m=null,x=null,M=null,D=null;const R=t.getContextAttributes();let B=null,O=null;const F=[],Z=new Map,ie=new so;ie.layers.enable(1),ie.viewport=new fn;const fe=new so;fe.layers.enable(2),fe.viewport=new fn;const oe=[ie,fe],pe=new Am;pe.layers.enable(1),pe.layers.enable(2);let Fe=null,Xe=null;function tt(ft){const Zt=Z.get(ft.inputSource);Zt&&Zt.dispatchEvent({type:ft.type,data:ft.inputSource})}function kt(){Z.forEach(function(ft,Zt){ft.disconnect(Zt)}),Z.clear(),Fe=null,Xe=null,e.setRenderTarget(B),M=null,x=null,m=null,o=null,O=null,zt.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function ht(ft){const Zt=o.inputSources;for(let tn=0;tn<F.length;tn++)Z.set(Zt[tn],F[tn]);for(let tn=0;tn<ft.removed.length;tn++){const pn=ft.removed[tn],on=Z.get(pn);on&&(on.dispatchEvent({type:"disconnected",data:pn}),Z.delete(pn))}for(let tn=0;tn<ft.added.length;tn++){const pn=ft.added[tn],on=Z.get(pn);on&&on.dispatchEvent({type:"connected",data:pn})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ft){let Zt=F[ft];return void 0===Zt&&(Zt=new Rd,F[ft]=Zt),Zt.getTargetRaySpace()},this.getControllerGrip=function(ft){let Zt=F[ft];return void 0===Zt&&(Zt=new Rd,F[ft]=Zt),Zt.getGripSpace()},this.getHand=function(ft){let Zt=F[ft];return void 0===Zt&&(Zt=new Rd,F[ft]=Zt),Zt.getHandSpace()},this.setFramebufferScaleFactor=function(ft){l=ft,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ft){h=ft,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d},this.getBaseLayer=function(){return null!==x?x:M},this.getBinding=function(){return m},this.getFrame=function(){return D},this.getSession=function(){return o},this.setSession=function(){var ft=function b(c){return function(){var e=this,t=arguments;return new Promise(function(r,o){var l=c.apply(e,t);function d(p){A(l,r,o,d,h,"next",p)}function h(p){A(l,r,o,d,h,"throw",p)}d(void 0)})}}(function*(Zt){if(o=Zt,null!==o){if(B=e.getRenderTarget(),o.addEventListener("select",tt),o.addEventListener("selectstart",tt),o.addEventListener("selectend",tt),o.addEventListener("squeeze",tt),o.addEventListener("squeezestart",tt),o.addEventListener("squeezeend",tt),o.addEventListener("end",kt),o.addEventListener("inputsourceschange",ht),!0!==R.xrCompatible&&(yield t.makeXRCompatible()),void 0===o.renderState.layers||!1===e.capabilities.isWebGL2)M=new XRWebGLLayer(o,t,{antialias:void 0!==o.renderState.layers||R.antialias,alpha:R.alpha,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:l}),o.updateRenderState({baseLayer:M}),O=new Jn(M.framebufferWidth,M.framebufferHeight,{format:Ue,type:si,encoding:e.outputEncoding});else{let tn=null,pn=null,on=null;R.depth&&(on=R.stencil?35056:33190,tn=R.stencil?ae:me,pn=R.stencil?Ye:Ce);const ai={colorFormat:e.outputEncoding===nn?35907:32856,depthFormat:on,scaleFactor:l};m=new XRWebGLBinding(o,t),x=m.createProjectionLayer(ai),o.updateRenderState({layers:[x]}),O=new Jn(x.textureWidth,x.textureHeight,{format:Ue,type:si,depthTexture:new gy(x.textureWidth,x.textureHeight,pn,void 0,void 0,void 0,void 0,void 0,void 0,tn),stencilBuffer:R.stencil,encoding:e.outputEncoding,samples:R.antialias?4:0}),e.properties.get(O).__ignoreDepthValues=x.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(1),d=yield o.requestReferenceSpace(h),zt.setContext(o),zt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(Zt){return ft.apply(this,arguments)}}();const he=new ue,$e=new ue;function gt(ft,Zt){null===Zt?ft.matrixWorld.copy(ft.matrix):ft.matrixWorld.multiplyMatrices(Zt.matrixWorld,ft.matrix),ft.matrixWorldInverse.copy(ft.matrixWorld).invert()}this.updateCamera=function(ft){if(null===o)return;pe.near=fe.near=ie.near=ft.near,pe.far=fe.far=ie.far=ft.far,(Fe!==pe.near||Xe!==pe.far)&&(o.updateRenderState({depthNear:pe.near,depthFar:pe.far}),Fe=pe.near,Xe=pe.far);const Zt=ft.parent,tn=pe.cameras;gt(pe,Zt);for(let on=0;on<tn.length;on++)gt(tn[on],Zt);pe.matrixWorld.decompose(pe.position,pe.quaternion,pe.scale),ft.position.copy(pe.position),ft.quaternion.copy(pe.quaternion),ft.scale.copy(pe.scale),ft.matrix.copy(pe.matrix),ft.matrixWorld.copy(pe.matrixWorld);const pn=ft.children;for(let on=0,ai=pn.length;on<ai;on++)pn[on].updateMatrixWorld(!0);2===tn.length?function rn(ft,Zt,tn){he.setFromMatrixPosition(Zt.matrixWorld),$e.setFromMatrixPosition(tn.matrixWorld);const pn=he.distanceTo($e),on=Zt.projectionMatrix.elements,ai=tn.projectionMatrix.elements,qi=on[14]/(on[10]-1),Ii=on[14]/(on[10]+1),Yt=(on[9]+1)/on[5],Dr=(on[9]-1)/on[5],Gi=(on[8]-1)/on[0],Wi=(ai[8]+1)/ai[0],En=qi*Gi,Xi=qi*Wi,jt=pn/(-Gi+Wi),Xt=jt*-Gi;Zt.matrixWorld.decompose(ft.position,ft.quaternion,ft.scale),ft.translateX(Xt),ft.translateZ(jt),ft.matrixWorld.compose(ft.position,ft.quaternion,ft.scale),ft.matrixWorldInverse.copy(ft.matrixWorld).invert();const un=qi+jt,Xn=Ii+jt;ft.projectionMatrix.makePerspective(En-Xt,Xi+(pn-Xt),Yt*Ii/Xn*un,Dr*Ii/Xn*un,un,Xn)}(pe,ie,fe):pe.projectionMatrix.copy(ie.projectionMatrix)},this.getCamera=function(){return pe},this.getFoveation=function(){return null!==x?x.fixedFoveation:null!==M?M.fixedFoveation:void 0},this.setFoveation=function(ft){null!==x&&(x.fixedFoveation=ft),null!==M&&void 0!==M.fixedFoveation&&(M.fixedFoveation=ft)};let Ft=null;const zt=new Cp;zt.setAnimationLoop(function Rt(ft,Zt){if(p=Zt.getViewerPose(d),D=Zt,null!==p){const pn=p.views;null!==M&&(e.setRenderTargetFramebuffer(O,M.framebuffer),e.setRenderTarget(O));let on=!1;pn.length!==pe.cameras.length&&(pe.cameras.length=0,on=!0);for(let ai=0;ai<pn.length;ai++){const qi=pn[ai];let Ii=null;if(null!==M)Ii=M.getViewport(qi);else{const Dr=m.getViewSubImage(x,qi);Ii=Dr.viewport,0===ai&&(e.setRenderTargetTextures(O,Dr.colorTexture,x.ignoreDepthValues?void 0:Dr.depthStencilTexture),e.setRenderTarget(O))}const Yt=oe[ai];Yt.matrix.fromArray(qi.transform.matrix),Yt.projectionMatrix.fromArray(qi.projectionMatrix),Yt.viewport.set(Ii.x,Ii.y,Ii.width,Ii.height),0===ai&&pe.matrix.copy(Yt.matrix),!0===on&&pe.cameras.push(Yt)}}const tn=o.inputSources;for(let pn=0;pn<F.length;pn++)F[pn].update(tn[pn],Zt,d);Ft&&Ft(ft,Zt),D=null}),this.setAnimationLoop=function(ft){Ft=ft},this.dispose=function(){}}}function wf(c,e){function o(O,F){O.opacity.value=F.opacity,F.color&&O.diffuse.value.copy(F.color),F.emissive&&O.emissive.value.copy(F.emissive).multiplyScalar(F.emissiveIntensity),F.map&&(O.map.value=F.map),F.alphaMap&&(O.alphaMap.value=F.alphaMap),F.bumpMap&&(O.bumpMap.value=F.bumpMap,O.bumpScale.value=F.bumpScale,1===F.side&&(O.bumpScale.value*=-1)),F.displacementMap&&(O.displacementMap.value=F.displacementMap,O.displacementScale.value=F.displacementScale,O.displacementBias.value=F.displacementBias),F.emissiveMap&&(O.emissiveMap.value=F.emissiveMap),F.normalMap&&(O.normalMap.value=F.normalMap,O.normalScale.value.copy(F.normalScale),1===F.side&&O.normalScale.value.negate()),F.specularMap&&(O.specularMap.value=F.specularMap),F.alphaTest>0&&(O.alphaTest.value=F.alphaTest);const Z=e.get(F).envMap;if(Z&&(O.envMap.value=Z,O.flipEnvMap.value=Z.isCubeTexture&&!1===Z.isRenderTargetTexture?-1:1,O.reflectivity.value=F.reflectivity,O.ior.value=F.ior,O.refractionRatio.value=F.refractionRatio),F.lightMap){O.lightMap.value=F.lightMap;const oe=!0!==c.physicallyCorrectLights?Math.PI:1;O.lightMapIntensity.value=F.lightMapIntensity*oe}let ie,fe;F.aoMap&&(O.aoMap.value=F.aoMap,O.aoMapIntensity.value=F.aoMapIntensity),F.map?ie=F.map:F.specularMap?ie=F.specularMap:F.displacementMap?ie=F.displacementMap:F.normalMap?ie=F.normalMap:F.bumpMap?ie=F.bumpMap:F.roughnessMap?ie=F.roughnessMap:F.metalnessMap?ie=F.metalnessMap:F.alphaMap?ie=F.alphaMap:F.emissiveMap?ie=F.emissiveMap:F.clearcoatMap?ie=F.clearcoatMap:F.clearcoatNormalMap?ie=F.clearcoatNormalMap:F.clearcoatRoughnessMap?ie=F.clearcoatRoughnessMap:F.specularIntensityMap?ie=F.specularIntensityMap:F.specularColorMap?ie=F.specularColorMap:F.transmissionMap?ie=F.transmissionMap:F.thicknessMap?ie=F.thicknessMap:F.sheenColorMap?ie=F.sheenColorMap:F.sheenRoughnessMap&&(ie=F.sheenRoughnessMap),void 0!==ie&&(ie.isWebGLRenderTarget&&(ie=ie.texture),!0===ie.matrixAutoUpdate&&ie.updateMatrix(),O.uvTransform.value.copy(ie.matrix)),F.aoMap?fe=F.aoMap:F.lightMap&&(fe=F.lightMap),void 0!==fe&&(fe.isWebGLRenderTarget&&(fe=fe.texture),!0===fe.matrixAutoUpdate&&fe.updateMatrix(),O.uv2Transform.value.copy(fe.matrix))}return{refreshFogUniforms:function t(O,F){O.fogColor.value.copy(F.color),F.isFog?(O.fogNear.value=F.near,O.fogFar.value=F.far):F.isFogExp2&&(O.fogDensity.value=F.density)},refreshMaterialUniforms:function r(O,F,Z,ie,fe){F.isMeshBasicMaterial||F.isMeshLambertMaterial?o(O,F):F.isMeshToonMaterial?(o(O,F),function x(O,F){F.gradientMap&&(O.gradientMap.value=F.gradientMap)}(O,F)):F.isMeshPhongMaterial?(o(O,F),function m(O,F){O.specular.value.copy(F.specular),O.shininess.value=Math.max(F.shininess,1e-4)}(O,F)):F.isMeshStandardMaterial?(o(O,F),function M(O,F){O.roughness.value=F.roughness,O.metalness.value=F.metalness,F.roughnessMap&&(O.roughnessMap.value=F.roughnessMap),F.metalnessMap&&(O.metalnessMap.value=F.metalnessMap),e.get(F).envMap&&(O.envMapIntensity.value=F.envMapIntensity)}(O,F),F.isMeshPhysicalMaterial&&function D(O,F,Z){O.ior.value=F.ior,F.sheen>0&&(O.sheenColor.value.copy(F.sheenColor).multiplyScalar(F.sheen),O.sheenRoughness.value=F.sheenRoughness,F.sheenColorMap&&(O.sheenColorMap.value=F.sheenColorMap),F.sheenRoughnessMap&&(O.sheenRoughnessMap.value=F.sheenRoughnessMap)),F.clearcoat>0&&(O.clearcoat.value=F.clearcoat,O.clearcoatRoughness.value=F.clearcoatRoughness,F.clearcoatMap&&(O.clearcoatMap.value=F.clearcoatMap),F.clearcoatRoughnessMap&&(O.clearcoatRoughnessMap.value=F.clearcoatRoughnessMap),F.clearcoatNormalMap&&(O.clearcoatNormalScale.value.copy(F.clearcoatNormalScale),O.clearcoatNormalMap.value=F.clearcoatNormalMap,1===F.side&&O.clearcoatNormalScale.value.negate())),F.transmission>0&&(O.transmission.value=F.transmission,O.transmissionSamplerMap.value=Z.texture,O.transmissionSamplerSize.value.set(Z.width,Z.height),F.transmissionMap&&(O.transmissionMap.value=F.transmissionMap),O.thickness.value=F.thickness,F.thicknessMap&&(O.thicknessMap.value=F.thicknessMap),O.attenuationDistance.value=F.attenuationDistance,O.attenuationColor.value.copy(F.attenuationColor)),O.specularIntensity.value=F.specularIntensity,O.specularColor.value.copy(F.specularColor),F.specularIntensityMap&&(O.specularIntensityMap.value=F.specularIntensityMap),F.specularColorMap&&(O.specularColorMap.value=F.specularColorMap)}(O,F,fe)):F.isMeshMatcapMaterial?(o(O,F),function R(O,F){F.matcap&&(O.matcap.value=F.matcap)}(O,F)):F.isMeshDepthMaterial?o(O,F):F.isMeshDistanceMaterial?(o(O,F),function B(O,F){O.referencePosition.value.copy(F.referencePosition),O.nearDistance.value=F.nearDistance,O.farDistance.value=F.farDistance}(O,F)):F.isMeshNormalMaterial?o(O,F):F.isLineBasicMaterial?(function l(O,F){O.diffuse.value.copy(F.color),O.opacity.value=F.opacity}(O,F),F.isLineDashedMaterial&&function d(O,F){O.dashSize.value=F.dashSize,O.totalSize.value=F.dashSize+F.gapSize,O.scale.value=F.scale}(O,F)):F.isPointsMaterial?function h(O,F,Z,ie){let fe;O.diffuse.value.copy(F.color),O.opacity.value=F.opacity,O.size.value=F.size*Z,O.scale.value=.5*ie,F.map&&(O.map.value=F.map),F.alphaMap&&(O.alphaMap.value=F.alphaMap),F.alphaTest>0&&(O.alphaTest.value=F.alphaTest),F.map?fe=F.map:F.alphaMap&&(fe=F.alphaMap),void 0!==fe&&(!0===fe.matrixAutoUpdate&&fe.updateMatrix(),O.uvTransform.value.copy(fe.matrix))}(O,F,Z,ie):F.isSpriteMaterial?function p(O,F){let Z;O.diffuse.value.copy(F.color),O.opacity.value=F.opacity,O.rotation.value=F.rotation,F.map&&(O.map.value=F.map),F.alphaMap&&(O.alphaMap.value=F.alphaMap),F.alphaTest>0&&(O.alphaTest.value=F.alphaTest),F.map?Z=F.map:F.alphaMap&&(Z=F.alphaMap),void 0!==Z&&(!0===Z.matrixAutoUpdate&&Z.updateMatrix(),O.uvTransform.value.copy(Z.matrix))}(O,F):F.isShadowMaterial?(O.color.value.copy(F.color),O.opacity.value=F.opacity):F.isShaderMaterial&&(F.uniformsNeedUpdate=!1)}}}function Nr(c={}){const e=void 0!==c.canvas?c.canvas:function Tm(){const c=no("canvas");return c.style.display="block",c}(),t=void 0!==c.context?c.context:null,r=void 0===c.depth||c.depth,o=void 0===c.stencil||c.stencil,l=void 0!==c.antialias&&c.antialias,d=void 0===c.premultipliedAlpha||c.premultipliedAlpha,h=void 0!==c.preserveDrawingBuffer&&c.preserveDrawingBuffer,p=void 0!==c.powerPreference?c.powerPreference:"default",m=void 0!==c.failIfMajorPerformanceCaveat&&c.failIfMajorPerformanceCaveat;let x;x=void 0!==c.context?t.getContextAttributes().alpha:void 0!==c.alpha&&c.alpha;let M=null,D=null;const R=[],B=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Tt,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const O=this;let F=!1,Z=0,ie=0,fe=null,oe=-1,pe=null;const Fe=new fn,Xe=new fn;let tt=null,kt=e.width,ht=e.height,he=1,$e=null,rn=null;const gt=new fn(0,0,kt,ht),Ft=new fn(0,0,kt,ht);let Rt=!1;const zt=new Dl;let ft=!1,Zt=!1,tn=null;const pn=new Fn,on=new Gt,ai=new ue,qi={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ii(){return null===fe?he:1}let Gi,Wi,En,Xi,jt,Xt,un,Xn,Rn,Fi,xi,pi,xs,zr,Re,ge,Ht,an,Cn,kn,ci,Ut,ji,Yt=t;function Dr(xe,vt){for(let Nt=0;Nt<xe.length;Nt++){const Kt=e.getContext(xe[Nt],vt);if(null!==Kt)return Kt}return null}try{const xe={alpha:!0,depth:r,stencil:o,antialias:l,premultipliedAlpha:d,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r139"),e.addEventListener("webglcontextlost",Je,!1),e.addEventListener("webglcontextrestored",Dn,!1),null===Yt){const vt=["webgl2","webgl","experimental-webgl"];if(!0===O.isWebGL1Renderer&&vt.shift(),Yt=Dr(vt,xe),null===Yt)throw Dr(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Yt.getShaderPrecisionFormat&&(Yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(xe){throw console.error("THREE.WebGLRenderer: "+xe.message),xe}function tr(){Gi=new H_(Yt),Wi=new Zp(Yt,Gi,c),Gi.init(Wi),Ut=new my(Yt,Gi,Wi),En=new py(Yt,Gi,Wi),Xi=new im(Yt),jt=new bu,Xt=new zo(Yt,Gi,En,jt,Wi,Ut,Xi),un=new jh(O),Xn=new yd(O),Rn=new Dp(Yt,Wi),ji=new xc(Yt,Gi,Rn,Wi),Fi=new tm(Yt,Rn,Xi,ji),xi=new sm(Yt,Fi,Rn,Xi),Cn=new vd(Yt,Wi,Xt),ge=new B_(jt),pi=new Cc(O,un,Xn,Gi,Wi,ji,ge),xs=new wf(O,jt),zr=new Mm,Re=new $0(Gi,Wi),an=new F0(O,un,En,xi,x,d),Ht=new Dm(O,xi,Wi),kn=new Wh(Yt,Gi,Xi,Wi),ci=new nm(Yt,Gi,Xi,Wi),Xi.programs=pi.programs,O.capabilities=Wi,O.extensions=Gi,O.properties=jt,O.renderLists=zr,O.shadowMap=Ht,O.state=En,O.info=Xi}tr();const $n=new _y(O,Yt);function Je(xe){xe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function Dn(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const xe=Xi.autoReset,vt=Ht.enabled,Nt=Ht.autoUpdate,At=Ht.needsUpdate,Kt=Ht.type;tr(),Xi.autoReset=xe,Ht.enabled=vt,Ht.autoUpdate=Nt,Ht.needsUpdate=At,Ht.type=Kt}function Mn(xe){const vt=xe.target;vt.removeEventListener("dispose",Mn),function Si(xe){(function Hn(xe){const vt=jt.get(xe).programs;void 0!==vt&&(vt.forEach(function(Nt){pi.releaseProgram(Nt)}),xe.isShaderMaterial&&pi.releaseShaderCache(xe))})(xe),jt.remove(xe)}(vt)}this.xr=$n,this.getContext=function(){return Yt},this.getContextAttributes=function(){return Yt.getContextAttributes()},this.forceContextLoss=function(){const xe=Gi.get("WEBGL_lose_context");xe&&xe.loseContext()},this.forceContextRestore=function(){const xe=Gi.get("WEBGL_lose_context");xe&&xe.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(xe){void 0!==xe&&(he=xe,this.setSize(kt,ht,!1))},this.getSize=function(xe){return xe.set(kt,ht)},this.setSize=function(xe,vt,Nt){$n.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(kt=xe,ht=vt,e.width=Math.floor(xe*he),e.height=Math.floor(vt*he),!1!==Nt&&(e.style.width=xe+"px",e.style.height=vt+"px"),this.setViewport(0,0,xe,vt))},this.getDrawingBufferSize=function(xe){return xe.set(kt*he,ht*he).floor()},this.setDrawingBufferSize=function(xe,vt,Nt){kt=xe,ht=vt,he=Nt,e.width=Math.floor(xe*Nt),e.height=Math.floor(vt*Nt),this.setViewport(0,0,xe,vt)},this.getCurrentViewport=function(xe){return xe.copy(Fe)},this.getViewport=function(xe){return xe.copy(gt)},this.setViewport=function(xe,vt,Nt,At){xe.isVector4?gt.set(xe.x,xe.y,xe.z,xe.w):gt.set(xe,vt,Nt,At),En.viewport(Fe.copy(gt).multiplyScalar(he).floor())},this.getScissor=function(xe){return xe.copy(Ft)},this.setScissor=function(xe,vt,Nt,At){xe.isVector4?Ft.set(xe.x,xe.y,xe.z,xe.w):Ft.set(xe,vt,Nt,At),En.scissor(Xe.copy(Ft).multiplyScalar(he).floor())},this.getScissorTest=function(){return Rt},this.setScissorTest=function(xe){En.setScissorTest(Rt=xe)},this.setOpaqueSort=function(xe){$e=xe},this.setTransparentSort=function(xe){rn=xe},this.getClearColor=function(xe){return xe.copy(an.getClearColor())},this.setClearColor=function(){an.setClearColor.apply(an,arguments)},this.getClearAlpha=function(){return an.getClearAlpha()},this.setClearAlpha=function(){an.setClearAlpha.apply(an,arguments)},this.clear=function(xe=!0,vt=!0,Nt=!0){let At=0;xe&&(At|=16384),vt&&(At|=256),Nt&&(At|=1024),Yt.clear(At)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Je,!1),e.removeEventListener("webglcontextrestored",Dn,!1),zr.dispose(),Re.dispose(),jt.dispose(),un.dispose(),Xn.dispose(),xi.dispose(),ji.dispose(),pi.dispose(),$n.dispose(),$n.removeEventListener("sessionstart",Di),$n.removeEventListener("sessionend",kr),tn&&(tn.dispose(),tn=null),pr.stop()},this.renderBufferDirect=function(xe,vt,Nt,At,Kt,Pi){null===vt&&(vt=qi);const Hi=Kt.isMesh&&Kt.matrixWorld.determinant()<0,nr=function wv(xe,vt,Nt,At,Kt){!0!==vt.isScene&&(vt=qi),Xt.resetTextureUnits();const Pi=vt.fog,nr=null===fe?O.outputEncoding:!0===fe.isXRRenderTarget?fe.texture.encoding:Tt,$i=(At.isMeshStandardMaterial?Xn:un).get(At.envMap||(At.isMeshStandardMaterial?vt.environment:null)),Ar=!0===At.vertexColors&&!!Nt.attributes.color&&4===Nt.attributes.color.itemSize,gr=!!At.normalMap&&!!Nt.attributes.tangent,Er=!!Nt.morphAttributes.position,Ds=!!Nt.morphAttributes.normal,hc=!!Nt.morphAttributes.color,Jc=At.toneMapped?O.toneMapping:0,Qc=Nt.morphAttributes.position||Nt.morphAttributes.normal||Nt.morphAttributes.color,Ga=void 0!==Qc?Qc.length:0,Pr=jt.get(At),eu=D.state.lights;!0!==ft||!0!==Zt&&xe===pe||ge.setState(At,xe,xe===pe&&At.id===oe);let Hs=!1;At.version===Pr.__version?(Pr.needsLights&&Pr.lightsStateVersion!==eu.state.version||Pr.outputEncoding!==nr||Kt.isInstancedMesh&&!1===Pr.instancing||!Kt.isInstancedMesh&&!0===Pr.instancing||Kt.isSkinnedMesh&&!1===Pr.skinning||!Kt.isSkinnedMesh&&!0===Pr.skinning||Pr.envMap!==$i||At.fog&&Pr.fog!==Pi||void 0!==Pr.numClippingPlanes&&(Pr.numClippingPlanes!==ge.numPlanes||Pr.numIntersection!==ge.numIntersection)||Pr.vertexAlphas!==Ar||Pr.vertexTangents!==gr||Pr.morphTargets!==Er||Pr.morphNormals!==Ds||Pr.morphColors!==hc||Pr.toneMapping!==Jc||!0===Wi.isWebGL2&&Pr.morphTargetsCount!==Ga)&&(Hs=!0):(Hs=!0,Pr.__version=At.version);let ko=Pr.currentProgram;!0===Hs&&(ko=yp(At,vt,Kt));let fl=!1,tu=!1,Dh=!1;const uo=ko.getUniforms(),nu=Pr.uniforms;if(En.useProgram(ko.program)&&(fl=!0,tu=!0,Dh=!0),At.id!==oe&&(oe=At.id,tu=!0),fl||pe!==xe){if(uo.setValue(Yt,"projectionMatrix",xe.projectionMatrix),Wi.logarithmicDepthBuffer&&uo.setValue(Yt,"logDepthBufFC",2/(Math.log(xe.far+1)/Math.LN2)),pe!==xe&&(pe=xe,tu=!0,Dh=!0),At.isShaderMaterial||At.isMeshPhongMaterial||At.isMeshToonMaterial||At.isMeshStandardMaterial||At.envMap){const Sa=uo.map.cameraPosition;void 0!==Sa&&Sa.setValue(Yt,ai.setFromMatrixPosition(xe.matrixWorld))}(At.isMeshPhongMaterial||At.isMeshToonMaterial||At.isMeshLambertMaterial||At.isMeshBasicMaterial||At.isMeshStandardMaterial||At.isShaderMaterial)&&uo.setValue(Yt,"isOrthographic",!0===xe.isOrthographicCamera),(At.isMeshPhongMaterial||At.isMeshToonMaterial||At.isMeshLambertMaterial||At.isMeshBasicMaterial||At.isMeshStandardMaterial||At.isShaderMaterial||At.isShadowMaterial||Kt.isSkinnedMesh)&&uo.setValue(Yt,"viewMatrix",xe.matrixWorldInverse)}if(Kt.isSkinnedMesh){uo.setOptional(Yt,Kt,"bindMatrix"),uo.setOptional(Yt,Kt,"bindMatrixInverse");const Sa=Kt.skeleton;Sa&&(Wi.floatVertexTextures?(null===Sa.boneTexture&&Sa.computeBoneTexture(),uo.setValue(Yt,"boneTexture",Sa.boneTexture,Xt),uo.setValue(Yt,"boneTextureSize",Sa.boneTextureSize)):uo.setOptional(Yt,Sa,"boneMatrices"))}const Ah=Nt.morphAttributes;return(void 0!==Ah.position||void 0!==Ah.normal||void 0!==Ah.color&&!0===Wi.isWebGL2)&&Cn.update(Kt,Nt,At,ko),(tu||Pr.receiveShadow!==Kt.receiveShadow)&&(Pr.receiveShadow=Kt.receiveShadow,uo.setValue(Yt,"receiveShadow",Kt.receiveShadow)),tu&&(uo.setValue(Yt,"toneMappingExposure",O.toneMappingExposure),Pr.needsLights&&function Ev(xe,vt){xe.ambientLightColor.needsUpdate=vt,xe.lightProbe.needsUpdate=vt,xe.directionalLights.needsUpdate=vt,xe.directionalLightShadows.needsUpdate=vt,xe.pointLights.needsUpdate=vt,xe.pointLightShadows.needsUpdate=vt,xe.spotLights.needsUpdate=vt,xe.spotLightShadows.needsUpdate=vt,xe.rectAreaLights.needsUpdate=vt,xe.hemisphereLights.needsUpdate=vt}(nu,Dh),Pi&&At.fog&&xs.refreshFogUniforms(nu,Pi),xs.refreshMaterialUniforms(nu,At,he,ht,tn),il.upload(Yt,Pr.uniformsList,nu,Xt)),At.isShaderMaterial&&!0===At.uniformsNeedUpdate&&(il.upload(Yt,Pr.uniformsList,nu,Xt),At.uniformsNeedUpdate=!1),At.isSpriteMaterial&&uo.setValue(Yt,"center",Kt.center),uo.setValue(Yt,"modelViewMatrix",Kt.modelViewMatrix),uo.setValue(Yt,"normalMatrix",Kt.normalMatrix),uo.setValue(Yt,"modelMatrix",Kt.matrixWorld),ko}(xe,vt,Nt,At,Kt);En.setMaterial(At,Hi);let $i=Nt.index;const Ar=Nt.attributes.position;if(null===$i){if(void 0===Ar||0===Ar.count)return}else if(0===$i.count)return;let gr=1;!0===At.wireframe&&($i=Fi.getWireframeAttribute(Nt),gr=2),ji.setup(Kt,At,nr,Nt,$i);let Er,Ds=kn;null!==$i&&(Er=Rn.get($i),Ds=ci,Ds.setIndex(Er));const hc=null!==$i?$i.count:Ar.count,Jc=Nt.drawRange.start*gr,Qc=Nt.drawRange.count*gr,Ga=null!==Pi?Pi.start*gr:0,Pr=null!==Pi?Pi.count*gr:1/0,eu=Math.max(Jc,Ga),Hs=Math.min(hc,Jc+Qc,Ga+Pr)-1,ko=Math.max(0,Hs-eu+1);if(0!==ko){if(Kt.isMesh)!0===At.wireframe?(En.setLineWidth(At.wireframeLinewidth*Ii()),Ds.setMode(1)):Ds.setMode(4);else if(Kt.isLine){let fl=At.linewidth;void 0===fl&&(fl=1),En.setLineWidth(fl*Ii()),Ds.setMode(Kt.isLineSegments?1:Kt.isLineLoop?2:3)}else Kt.isPoints?Ds.setMode(0):Kt.isSprite&&Ds.setMode(4);if(Kt.isInstancedMesh)Ds.renderInstances(eu,ko,Kt.count);else if(Nt.isInstancedBufferGeometry){const fl=Math.min(Nt.instanceCount,Nt._maxInstanceCount);Ds.renderInstances(eu,ko,fl)}else Ds.render(eu,ko)}},this.compile=function(xe,vt){D=Re.get(xe),D.init(),B.push(D),xe.traverseVisible(function(Nt){Nt.isLight&&Nt.layers.test(vt.layers)&&(D.pushLight(Nt),Nt.castShadow&&D.pushShadow(Nt))}),D.setupLights(O.physicallyCorrectLights),xe.traverse(function(Nt){const At=Nt.material;if(At)if(Array.isArray(At))for(let Kt=0;Kt<At.length;Kt++)yp(At[Kt],xe,Nt);else yp(At,xe,Nt)}),B.pop(),D=null};let Ci=null;function Di(){pr.stop()}function kr(){pr.start()}const pr=new Cp;function Ea(xe,vt,Nt,At){if(!1===xe.visible)return;if(xe.layers.test(vt.layers))if(xe.isGroup)Nt=xe.renderOrder;else if(xe.isLOD)!0===xe.autoUpdate&&xe.update(vt);else if(xe.isLight)D.pushLight(xe),xe.castShadow&&D.pushShadow(xe);else if(xe.isSprite){if(!xe.frustumCulled||zt.intersectsSprite(xe)){At&&ai.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(pn);const Hi=xi.update(xe),nr=xe.material;nr.visible&&M.push(xe,Hi,nr,Nt,ai.z,null)}}else if((xe.isMesh||xe.isLine||xe.isPoints)&&(xe.isSkinnedMesh&&xe.skeleton.frame!==Xi.render.frame&&(xe.skeleton.update(),xe.skeleton.frame=Xi.render.frame),!xe.frustumCulled||zt.intersectsObject(xe))){At&&ai.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(pn);const Hi=xi.update(xe),nr=xe.material;if(Array.isArray(nr)){const $i=Hi.groups;for(let Ar=0,gr=$i.length;Ar<gr;Ar++){const Er=$i[Ar],Ds=nr[Er.materialIndex];Ds&&Ds.visible&&M.push(xe,Hi,Ds,Nt,ai.z,Er)}}else nr.visible&&M.push(xe,Hi,nr,Nt,ai.z,null)}const Pi=xe.children;for(let Hi=0,nr=Pi.length;Hi<nr;Hi++)Ea(Pi[Hi],vt,Nt,At)}function Ma(xe,vt,Nt,At){const Kt=xe.opaque,Pi=xe.transmissive,Hi=xe.transparent;D.setupLightsView(Nt),Pi.length>0&&function bv(xe,vt,Nt){const At=Wi.isWebGL2;null===tn&&(tn=new Jn(1,1,{generateMipmaps:!0,type:null!==Ut.convert(Bn)?Bn:si,minFilter:1008,samples:At&&!0===l?4:0})),O.getDrawingBufferSize(on),At?tn.setSize(on.x,on.y):tn.setSize(Wt(on.x),Wt(on.y));const Kt=O.getRenderTarget();O.setRenderTarget(tn),O.clear();const Pi=O.toneMapping;O.toneMapping=0,Ch(xe,vt,Nt),O.toneMapping=Pi,Xt.updateMultisampleRenderTarget(tn),Xt.updateRenderTargetMipmap(tn),O.setRenderTarget(Kt)}(Kt,vt,Nt),At&&En.viewport(Fe.copy(At)),Kt.length>0&&Ch(Kt,vt,Nt),Pi.length>0&&Ch(Pi,vt,Nt),Hi.length>0&&Ch(Hi,vt,Nt),En.buffers.depth.setTest(!0),En.buffers.depth.setMask(!0),En.buffers.color.setMask(!0),En.setPolygonOffset(!1)}function Ch(xe,vt,Nt){const At=!0===vt.isScene?vt.overrideMaterial:null;for(let Kt=0,Pi=xe.length;Kt<Pi;Kt++){const Hi=xe[Kt],nr=Hi.object,$i=Hi.geometry,Ar=null===At?Hi.material:At,gr=Hi.group;nr.layers.test(Nt.layers)&&_p(nr,vt,Nt,$i,Ar,gr)}}function _p(xe,vt,Nt,At,Kt,Pi){xe.onBeforeRender(O,vt,Nt,At,Kt,Pi),xe.modelViewMatrix.multiplyMatrices(Nt.matrixWorldInverse,xe.matrixWorld),xe.normalMatrix.getNormalMatrix(xe.modelViewMatrix),Kt.onBeforeRender(O,vt,Nt,At,xe,Pi),!0===Kt.transparent&&2===Kt.side?(Kt.side=1,Kt.needsUpdate=!0,O.renderBufferDirect(Nt,vt,At,Kt,xe,Pi),Kt.side=0,Kt.needsUpdate=!0,O.renderBufferDirect(Nt,vt,At,Kt,xe,Pi),Kt.side=2):O.renderBufferDirect(Nt,vt,At,Kt,xe,Pi),xe.onAfterRender(O,vt,Nt,At,Kt,Pi)}function yp(xe,vt,Nt){!0!==vt.isScene&&(vt=qi);const At=jt.get(xe),Kt=D.state.lights,Hi=Kt.state.version,nr=pi.getParameters(xe,Kt.state,D.state.shadowsArray,vt,Nt),$i=pi.getProgramCacheKey(nr);let Ar=At.programs;At.environment=xe.isMeshStandardMaterial?vt.environment:null,At.fog=vt.fog,At.envMap=(xe.isMeshStandardMaterial?Xn:un).get(xe.envMap||At.environment),void 0===Ar&&(xe.addEventListener("dispose",Mn),Ar=new Map,At.programs=Ar);let gr=Ar.get($i);if(void 0!==gr){if(At.currentProgram===gr&&At.lightsStateVersion===Hi)return xv(xe,nr),gr}else nr.uniforms=pi.getUniforms(xe),xe.onBuild(Nt,nr,O),xe.onBeforeCompile(nr,O),gr=pi.acquireProgram(nr,$i),Ar.set($i,gr),At.uniforms=nr.uniforms;const Er=At.uniforms;(!xe.isShaderMaterial&&!xe.isRawShaderMaterial||!0===xe.clipping)&&(Er.clippingPlanes=ge.uniform),xv(xe,nr),At.needsLights=function Zc(xe){return xe.isMeshLambertMaterial||xe.isMeshToonMaterial||xe.isMeshPhongMaterial||xe.isMeshStandardMaterial||xe.isShadowMaterial||xe.isShaderMaterial&&!0===xe.lights}(xe),At.lightsStateVersion=Hi,At.needsLights&&(Er.ambientLightColor.value=Kt.state.ambient,Er.lightProbe.value=Kt.state.probe,Er.directionalLights.value=Kt.state.directional,Er.directionalLightShadows.value=Kt.state.directionalShadow,Er.spotLights.value=Kt.state.spot,Er.spotLightShadows.value=Kt.state.spotShadow,Er.rectAreaLights.value=Kt.state.rectArea,Er.ltc_1.value=Kt.state.rectAreaLTC1,Er.ltc_2.value=Kt.state.rectAreaLTC2,Er.pointLights.value=Kt.state.point,Er.pointLightShadows.value=Kt.state.pointShadow,Er.hemisphereLights.value=Kt.state.hemi,Er.directionalShadowMap.value=Kt.state.directionalShadowMap,Er.directionalShadowMatrix.value=Kt.state.directionalShadowMatrix,Er.spotShadowMap.value=Kt.state.spotShadowMap,Er.spotShadowMatrix.value=Kt.state.spotShadowMatrix,Er.pointShadowMap.value=Kt.state.pointShadowMap,Er.pointShadowMatrix.value=Kt.state.pointShadowMatrix);const Ds=gr.getUniforms(),hc=il.seqWithValue(Ds.seq,Er);return At.currentProgram=gr,At.uniformsList=hc,gr}function xv(xe,vt){const Nt=jt.get(xe);Nt.outputEncoding=vt.outputEncoding,Nt.instancing=vt.instancing,Nt.skinning=vt.skinning,Nt.morphTargets=vt.morphTargets,Nt.morphNormals=vt.morphNormals,Nt.morphColors=vt.morphColors,Nt.morphTargetsCount=vt.morphTargetsCount,Nt.numClippingPlanes=vt.numClippingPlanes,Nt.numIntersection=vt.numClipIntersection,Nt.vertexAlphas=vt.vertexAlphas,Nt.vertexTangents=vt.vertexTangents,Nt.toneMapping=vt.toneMapping}pr.setAnimationLoop(function bn(xe){Ci&&Ci(xe)}),"undefined"!=typeof self&&pr.setContext(self),this.setAnimationLoop=function(xe){Ci=xe,$n.setAnimationLoop(xe),null===xe?pr.stop():pr.start()},$n.addEventListener("sessionstart",Di),$n.addEventListener("sessionend",kr),this.render=function(xe,vt){if(void 0===vt||!0===vt.isCamera){if(!0!==F){if(!0===xe.autoUpdate&&xe.updateMatrixWorld(),null===vt.parent&&vt.updateMatrixWorld(),!0===$n.enabled&&!0===$n.isPresenting&&(!0===$n.cameraAutoUpdate&&$n.updateCamera(vt),vt=$n.getCamera()),!0===xe.isScene&&xe.onBeforeRender(O,xe,vt,fe),D=Re.get(xe,B.length),D.init(),B.push(D),pn.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),zt.setFromProjectionMatrix(pn),Zt=this.localClippingEnabled,ft=ge.init(this.clippingPlanes,Zt,vt),M=zr.get(xe,R.length),M.init(),R.push(M),Ea(xe,vt,0,O.sortObjects),M.finish(),!0===O.sortObjects&&M.sort($e,rn),!0===ft&&ge.beginShadows(),Ht.render(D.state.shadowsArray,xe,vt),!0===ft&&ge.endShadows(),!0===this.info.autoReset&&this.info.reset(),an.render(M,xe),D.setupLights(O.physicallyCorrectLights),vt.isArrayCamera){const At=vt.cameras;for(let Kt=0,Pi=At.length;Kt<Pi;Kt++){const Hi=At[Kt];Ma(M,xe,Hi,Hi.viewport)}}else Ma(M,xe,vt);null!==fe&&(Xt.updateMultisampleRenderTarget(fe),Xt.updateRenderTargetMipmap(fe)),!0===xe.isScene&&xe.onAfterRender(O,xe,vt),ji.resetDefaultState(),oe=-1,pe=null,B.pop(),D=B.length>0?B[B.length-1]:null,R.pop(),M=R.length>0?R[R.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return Z},this.getActiveMipmapLevel=function(){return ie},this.getRenderTarget=function(){return fe},this.setRenderTargetTextures=function(xe,vt,Nt){jt.get(xe.texture).__webglTexture=vt,jt.get(xe.depthTexture).__webglTexture=Nt;const At=jt.get(xe);At.__hasExternalTextures=!0,At.__hasExternalTextures&&(At.__autoAllocateDepthBuffer=void 0===Nt,At.__autoAllocateDepthBuffer||!0===Gi.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),At.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(xe,vt){const Nt=jt.get(xe);Nt.__webglFramebuffer=vt,Nt.__useDefaultFramebuffer=void 0===vt},this.setRenderTarget=function(xe,vt=0,Nt=0){fe=xe,Z=vt,ie=Nt;let At=!0;if(xe){const $i=jt.get(xe);void 0!==$i.__useDefaultFramebuffer?(En.bindFramebuffer(36160,null),At=!1):void 0===$i.__webglFramebuffer?Xt.setupRenderTarget(xe):$i.__hasExternalTextures&&Xt.rebindTextures(xe,jt.get(xe.texture).__webglTexture,jt.get(xe.depthTexture).__webglTexture)}let Kt=null,Pi=!1,Hi=!1;if(xe){const $i=xe.texture;($i.isData3DTexture||$i.isDataArrayTexture)&&(Hi=!0);const Ar=jt.get(xe).__webglFramebuffer;xe.isWebGLCubeRenderTarget?(Kt=Ar[vt],Pi=!0):Kt=Wi.isWebGL2&&xe.samples>0&&!1===Xt.useMultisampledRTT(xe)?jt.get(xe).__webglMultisampledFramebuffer:Ar,Fe.copy(xe.viewport),Xe.copy(xe.scissor),tt=xe.scissorTest}else Fe.copy(gt).multiplyScalar(he).floor(),Xe.copy(Ft).multiplyScalar(he).floor(),tt=Rt;if(En.bindFramebuffer(36160,Kt)&&Wi.drawBuffers&&At&&En.drawBuffers(xe,Kt),En.viewport(Fe),En.scissor(Xe),En.setScissorTest(tt),Pi){const $i=jt.get(xe.texture);Yt.framebufferTexture2D(36160,36064,34069+vt,$i.__webglTexture,Nt)}else if(Hi){const $i=jt.get(xe.texture);Yt.framebufferTextureLayer(36160,36064,$i.__webglTexture,Nt||0,vt||0)}oe=-1},this.readRenderTargetPixels=function(xe,vt,Nt,At,Kt,Pi,Hi){if(!xe||!xe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let nr=jt.get(xe).__webglFramebuffer;if(xe.isWebGLCubeRenderTarget&&void 0!==Hi&&(nr=nr[Hi]),nr){En.bindFramebuffer(36160,nr);try{const $i=xe.texture,Ar=$i.format,gr=$i.type;if(Ar!==Ue&&Ut.convert(Ar)!==Yt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Er=gr===Bn&&(Gi.has("EXT_color_buffer_half_float")||Wi.isWebGL2&&Gi.has("EXT_color_buffer_float"));if(!(gr===si||Ut.convert(gr)===Yt.getParameter(35738)||gr===en&&(Wi.isWebGL2||Gi.has("OES_texture_float")||Gi.has("WEBGL_color_buffer_float"))||Er))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");vt>=0&&vt<=xe.width-At&&Nt>=0&&Nt<=xe.height-Kt&&Yt.readPixels(vt,Nt,At,Kt,Ut.convert(Ar),Ut.convert(gr),Pi)}finally{const $i=null!==fe?jt.get(fe).__webglFramebuffer:null;En.bindFramebuffer(36160,$i)}}},this.copyFramebufferToTexture=function(xe,vt,Nt=0){if(!0!==vt.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const At=Math.pow(2,-Nt),Kt=Math.floor(vt.image.width*At),Pi=Math.floor(vt.image.height*At);Xt.setTexture2D(vt,0),Yt.copyTexSubImage2D(3553,Nt,0,0,xe.x,xe.y,Kt,Pi),En.unbindTexture()},this.copyTextureToTexture=function(xe,vt,Nt,At=0){const Kt=vt.image.width,Pi=vt.image.height,Hi=Ut.convert(Nt.format),nr=Ut.convert(Nt.type);Xt.setTexture2D(Nt,0),Yt.pixelStorei(37440,Nt.flipY),Yt.pixelStorei(37441,Nt.premultiplyAlpha),Yt.pixelStorei(3317,Nt.unpackAlignment),vt.isDataTexture?Yt.texSubImage2D(3553,At,xe.x,xe.y,Kt,Pi,Hi,nr,vt.image.data):vt.isCompressedTexture?Yt.compressedTexSubImage2D(3553,At,xe.x,xe.y,vt.mipmaps[0].width,vt.mipmaps[0].height,Hi,vt.mipmaps[0].data):Yt.texSubImage2D(3553,At,xe.x,xe.y,Hi,nr,vt.image),0===At&&Nt.generateMipmaps&&Yt.generateMipmap(3553),En.unbindTexture()},this.copyTextureToTexture3D=function(xe,vt,Nt,At,Kt=0){if(O.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Pi=xe.max.x-xe.min.x+1,Hi=xe.max.y-xe.min.y+1,nr=xe.max.z-xe.min.z+1,$i=Ut.convert(At.format),Ar=Ut.convert(At.type);let gr;if(At.isData3DTexture)Xt.setTexture3D(At,0),gr=32879;else{if(!At.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Xt.setTexture2DArray(At,0),gr=35866}Yt.pixelStorei(37440,At.flipY),Yt.pixelStorei(37441,At.premultiplyAlpha),Yt.pixelStorei(3317,At.unpackAlignment);const Er=Yt.getParameter(3314),Ds=Yt.getParameter(32878),hc=Yt.getParameter(3316),Jc=Yt.getParameter(3315),Qc=Yt.getParameter(32877),Ga=Nt.isCompressedTexture?Nt.mipmaps[0]:Nt.image;Yt.pixelStorei(3314,Ga.width),Yt.pixelStorei(32878,Ga.height),Yt.pixelStorei(3316,xe.min.x),Yt.pixelStorei(3315,xe.min.y),Yt.pixelStorei(32877,xe.min.z),Nt.isDataTexture||Nt.isData3DTexture?Yt.texSubImage3D(gr,Kt,vt.x,vt.y,vt.z,Pi,Hi,nr,$i,Ar,Ga.data):Nt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Yt.compressedTexSubImage3D(gr,Kt,vt.x,vt.y,vt.z,Pi,Hi,nr,$i,Ga.data)):Yt.texSubImage3D(gr,Kt,vt.x,vt.y,vt.z,Pi,Hi,nr,$i,Ar,Ga),Yt.pixelStorei(3314,Er),Yt.pixelStorei(32878,Ds),Yt.pixelStorei(3316,hc),Yt.pixelStorei(3315,Jc),Yt.pixelStorei(32877,Qc),0===Kt&&At.generateMipmaps&&Yt.generateMipmap(gr),En.unbindTexture()},this.initTexture=function(xe){Xt.setTexture2D(xe,0),En.unbindTexture()},this.resetState=function(){Z=0,ie=0,fe=null,En.reset(),ji.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Nr.prototype.isWebGLRenderer=!0,class yy extends Nr{}.prototype.isWebGL1Renderer=!0;class Id{constructor(e,t=25e-5){this.name="",this.color=new te(e),this.density=t}clone(){return new Id(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Id.prototype.isFogExp2=!0;class xu{constructor(e,t=1,r=1e3){this.name="",this.color=new te(e),this.near=t,this.far=r}clone(){return new xu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}xu.prototype.isFog=!0;class Pd extends Jt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Pd.prototype.isScene=!0;class Zl{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=So,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=cn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=cn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=cn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Zl.prototype.isInterleavedBuffer=!0;const Io=new ue;class Jl{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Io.fromBufferAttribute(this,t),Io.applyMatrix4(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Io.fromBufferAttribute(this,t),Io.applyNormalMatrix(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Io.fromBufferAttribute(this,t),Io.transformDirection(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,l){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new es(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Jl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Jl.prototype.isInterleavedBufferAttribute=!0;class Od extends Fs{constructor(e){super(),this.type="SpriteMaterial",this.color=new te(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Ql;Od.prototype.isSpriteMaterial=!0;const wu=new ue,Po=new ue,Tl=new ue,Tc=new Gt,Eu=new Gt,vy=new Fn,Mu=new ue,Su=new ue,Ld=new ue,Rm=new Gt,Cu=new Gt,Im=new Gt;function ec(c,e,t,r,o,l){Tc.subVectors(c,t).addScalar(.5).multiply(r),void 0!==o?(Eu.x=l*Tc.x-o*Tc.y,Eu.y=o*Tc.x+l*Tc.y):Eu.copy(Tc),c.copy(e),c.x+=Eu.x,c.y+=Eu.y,c.applyMatrix4(vy)}(class Pm extends Jt{constructor(e){if(super(),this.type="Sprite",void 0===Ql){Ql=new bi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Zl(t,5);Ql.setIndex([0,1,2,0,2,3]),Ql.setAttribute("position",new Jl(r,3,0,!1)),Ql.setAttribute("uv",new Jl(r,2,3,!1))}this.geometry=Ql,this.material=void 0!==e?e:new Od,this.center=new Gt(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Po.setFromMatrixScale(this.matrixWorld),vy.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Tl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Po.multiplyScalar(-Tl.z);const r=this.material.rotation;let o,l;0!==r&&(l=Math.cos(r),o=Math.sin(r));const d=this.center;ec(Mu.set(-.5,-.5,0),Tl,d,Po,o,l),ec(Su.set(.5,-.5,0),Tl,d,Po,o,l),ec(Ld.set(.5,.5,0),Tl,d,Po,o,l),Rm.set(0,0),Cu.set(1,0),Im.set(1,1);let h=e.ray.intersectTriangle(Mu,Su,Ld,!1,wu);if(null===h&&(ec(Su.set(-.5,.5,0),Tl,d,Po,o,l),Cu.set(0,1),h=e.ray.intersectTriangle(Mu,Ld,Su,!1,wu),null===h))return;const p=e.ray.origin.distanceTo(wu);p<e.near||p>e.far||t.push({distance:p,point:wu.clone(),uv:cs.getUV(wu,Mu,Su,Ld,Rm,Cu,Im,new Gt),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Fd=new ue,Mf=new fn,Lm=new fn,by=new ue,Nd=new Fn;class Fm extends ro{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Fn,this.bindMatrixInverse=new Fn}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new fn,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.fromBufferAttribute(t,r);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;Mf.fromBufferAttribute(o.attributes.skinIndex,e),Lm.fromBufferAttribute(o.attributes.skinWeight,e),Fd.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const d=Lm.getComponent(l);if(0!==d){const h=Mf.getComponent(l);Nd.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),t.addScaledVector(by.copy(Fd).applyMatrix4(Nd),d)}}return t.applyMatrix4(this.bindMatrixInverse)}}Fm.prototype.isSkinnedMesh=!0;(class Sf extends Jt{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class tc extends yn{constructor(e=null,t=1,r=1,o,l,d,h,p,m=Ti,x=Ti,M,D){super(null,d,h,p,m,x,o,l,M,D),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class nc extends es{constructor(e,t,r,o=1){"number"==typeof r&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}nc.prototype.isInstancedBufferAttribute=!0;const Fa=new Fn,Du=new Fn,Bd=[],Au=new ro;(class xy extends ro{constructor(e,t,r){super(e,t),this.instanceMatrix=new nc(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(Au.geometry=this.geometry,Au.material=this.material,void 0!==Au.material)for(let l=0;l<o;l++){this.getMatrixAt(l,Fa),Du.multiplyMatrices(r,Fa),Au.matrixWorld=Du,Au.raycast(e,Bd);for(let d=0,h=Bd.length;d<h;d++){const p=Bd[d];p.instanceId=l,p.object=this,t.push(p)}Bd.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new nc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Zs extends Fs{constructor(e){super(),this.type="LineBasicMaterial",this.color=new te(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Zs.prototype.isLineBasicMaterial=!0;const Df=new ue,Vd=new ue,Ic=new Fn,Af=new da,Pc=new ua;class Rl extends Jt{constructor(e=new bi,t=new Zs){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let o=1,l=t.count;o<l;o++)Df.fromBufferAttribute(t,o-1),Vd.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=Df.distanceTo(Vd);e.setAttribute("lineDistance",new Nn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,d=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Pc.copy(r.boundingSphere),Pc.applyMatrix4(o),Pc.radius+=l,!1===e.ray.intersectsSphere(Pc))return;Ic.copy(o).invert(),Af.copy(e.ray).applyMatrix4(Ic);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,m=new ue,x=new ue,M=new ue,D=new ue,R=this.isLineSegments?2:1;if(r.isBufferGeometry){const B=r.index,F=r.attributes.position;if(null!==B)for(let fe=Math.max(0,d.start),oe=Math.min(B.count,d.start+d.count)-1;fe<oe;fe+=R){const pe=B.getX(fe),Fe=B.getX(fe+1);if(m.fromBufferAttribute(F,pe),x.fromBufferAttribute(F,Fe),Af.distanceSqToSegment(m,x,D,M)>p)continue;D.applyMatrix4(this.matrixWorld);const tt=e.ray.origin.distanceTo(D);tt<e.near||tt>e.far||t.push({distance:tt,point:M.clone().applyMatrix4(this.matrixWorld),index:fe,face:null,faceIndex:null,object:this})}else for(let fe=Math.max(0,d.start),oe=Math.min(F.count,d.start+d.count)-1;fe<oe;fe+=R){if(m.fromBufferAttribute(F,fe),x.fromBufferAttribute(F,fe+1),Af.distanceSqToSegment(m,x,D,M)>p)continue;D.applyMatrix4(this.matrixWorld);const Fe=e.ray.origin.distanceTo(D);Fe<e.near||Fe>e.far||t.push({distance:Fe,point:M.clone().applyMatrix4(this.matrixWorld),index:fe,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Rl.prototype.isLine=!0;const Tf=new ue,Rf=new ue;class Il extends Rl{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let o=0,l=t.count;o<l;o+=2)Tf.fromBufferAttribute(t,o),Rf.fromBufferAttribute(t,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+Tf.distanceTo(Rf);e.setAttribute("lineDistance",new Nn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Il.prototype.isLineSegments=!0;(class Hd extends Rl{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Ud extends Fs{constructor(e){super(),this.type="PointsMaterial",this.color=new te(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Ud.prototype.isPointsMaterial=!0;const km=new Fn,zd=new da,ol=new ua,Tu=new ue;class If extends Jt{constructor(e=new bi,t=new Ud){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Points.threshold,d=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),ol.copy(r.boundingSphere),ol.applyMatrix4(o),ol.radius+=l,!1===e.ray.intersectsSphere(ol))return;km.copy(o).invert(),zd.copy(e.ray).applyMatrix4(km);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h;if(r.isBufferGeometry){const m=r.index,M=r.attributes.position;if(null!==m)for(let B=Math.max(0,d.start),O=Math.min(m.count,d.start+d.count);B<O;B++){const F=m.getX(B);Tu.fromBufferAttribute(M,F),Bm(Tu,F,p,o,e,t,this)}else for(let B=Math.max(0,d.start),O=Math.min(M.count,d.start+d.count);B<O;B++)Tu.fromBufferAttribute(M,B),Bm(Tu,B,p,o,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Bm(c,e,t,r,o,l,d){const h=zd.distanceSqToPoint(c);if(h<t){const p=new ue;zd.closestPointToPoint(c,p),p.applyMatrix4(r);const m=o.ray.origin.distanceTo(p);if(m<o.near||m>o.far)return;l.push({distance:m,distanceToRay:Math.sqrt(h),point:p,index:e,face:null,object:d})}}If.prototype.isPoints=!0,class Oc extends yn{constructor(e,t,r,o,l,d,h,p,m){super(e,t,r,o,l,d,h,p,m),this.minFilter=void 0!==d?d:at,this.magFilter=void 0!==l?l:at,this.generateMipmaps=!1;const x=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function M(){x.needsUpdate=!0,e.requestVideoFrameCallback(M)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class wy extends yn{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=Ti,this.minFilter=Ti,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class Vm extends yn{constructor(e,t,r,o,l,d,h,p,m,x,M,D){super(null,d,h,p,m,x,o,l,M,D),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class Ey extends yn{constructor(e,t,r,o,l,d,h,p,m){super(e,t,r,o,l,d,h,p,m),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class Zo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),l=0;t.push(0);for(let d=1;d<=e;d++)r=this.getPoint(d/e),l+=r.distanceTo(o),t.push(l),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const l=r.length;let d;d=t||e*r[l-1];let m,h=0,p=l-1;for(;h<=p;)if(o=Math.floor(h+(p-h)/2),m=r[o]-d,m<0)h=o+1;else{if(!(m>0)){p=o;break}p=o-1}if(o=p,r[o]===d)return o/(l-1);const x=r[o];return(o+(d-x)/(r[o+1]-x))/(l-1)}getTangent(e,t){let o=e-1e-4,l=e+1e-4;o<0&&(o=0),l>1&&(l=1);const d=this.getPoint(o),h=this.getPoint(l),p=t||(d.isVector2?new Gt:new ue);return p.copy(h).sub(d).normalize(),p}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ue,o=[],l=[],d=[],h=new ue,p=new Fn;for(let R=0;R<=e;R++)o[R]=this.getTangentAt(R/e,new ue);l[0]=new ue,d[0]=new ue;let m=Number.MAX_VALUE;const x=Math.abs(o[0].x),M=Math.abs(o[0].y),D=Math.abs(o[0].z);x<=m&&(m=x,r.set(1,0,0)),M<=m&&(m=M,r.set(0,1,0)),D<=m&&r.set(0,0,1),h.crossVectors(o[0],r).normalize(),l[0].crossVectors(o[0],h),d[0].crossVectors(o[0],l[0]);for(let R=1;R<=e;R++){if(l[R]=l[R-1].clone(),d[R]=d[R-1].clone(),h.crossVectors(o[R-1],o[R]),h.length()>Number.EPSILON){h.normalize();const B=Math.acos(ni(o[R-1].dot(o[R]),-1,1));l[R].applyMatrix4(p.makeRotationAxis(h,B))}d[R].crossVectors(o[R],l[R])}if(!0===t){let R=Math.acos(ni(l[0].dot(l[e]),-1,1));R/=e,o[0].dot(h.crossVectors(l[0],l[e]))>0&&(R=-R);for(let B=1;B<=e;B++)l[B].applyMatrix4(p.makeRotationAxis(o[B],R*B)),d[B].crossVectors(o[B],l[B])}return{tangents:o,normals:l,binormals:d}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class No extends Zo{constructor(e=0,t=0,r=1,o=1,l=0,d=2*Math.PI,h=!1,p=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=d,this.aClockwise=h,this.aRotation=p}getPoint(e,t){const r=t||new Gt,o=2*Math.PI;let l=this.aEndAngle-this.aStartAngle;const d=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(l=d?0:o),!0===this.aClockwise&&!d&&(l===o?l=-o:l-=o);const h=this.aStartAngle+e*l;let p=this.aX+this.xRadius*Math.cos(h),m=this.aY+this.yRadius*Math.sin(h);if(0!==this.aRotation){const x=Math.cos(this.aRotation),M=Math.sin(this.aRotation),D=p-this.aX,R=m-this.aY;p=D*x-R*M+this.aX,m=D*M+R*x+this.aY}return r.set(p,m)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}No.prototype.isEllipseCurve=!0;class Gd extends No{constructor(e,t,r,o,l,d){super(e,t,r,r,o,l,d),this.type="ArcCurve"}}function Wd(){let c=0,e=0,t=0,r=0;function o(l,d,h,p){c=l,e=h,t=-3*l+3*d-2*h-p,r=2*l-2*d+h+p}return{initCatmullRom:function(l,d,h,p,m){o(d,h,m*(h-l),m*(p-d))},initNonuniformCatmullRom:function(l,d,h,p,m,x,M){let D=(d-l)/m-(h-l)/(m+x)+(h-d)/x,R=(h-d)/x-(p-d)/(x+M)+(p-h)/M;D*=x,R*=x,o(d,h,D,R)},calc:function(l){const d=l*l;return c+e*l+t*d+r*(d*l)}}}Gd.prototype.isArcCurve=!0;const Ru=new ue,jd=new Wd,$d=new Wd,Pf=new Wd;class Hm extends Zo{constructor(e=[],t=!1,r="centripetal",o=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new ue){const r=t,o=this.points,l=o.length,d=(l-(this.closed?0:1))*e;let m,x,h=Math.floor(d),p=d-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:0===p&&h===l-1&&(h=l-2,p=1),this.closed||h>0?m=o[(h-1)%l]:(Ru.subVectors(o[0],o[1]).add(o[0]),m=Ru);const M=o[h%l],D=o[(h+1)%l];if(this.closed||h+2<l?x=o[(h+2)%l]:(Ru.subVectors(o[l-1],o[l-2]).add(o[l-1]),x=Ru),"centripetal"===this.curveType||"chordal"===this.curveType){const R="chordal"===this.curveType?.5:.25;let B=Math.pow(m.distanceToSquared(M),R),O=Math.pow(M.distanceToSquared(D),R),F=Math.pow(D.distanceToSquared(x),R);O<1e-4&&(O=1),B<1e-4&&(B=O),F<1e-4&&(F=O),jd.initNonuniformCatmullRom(m.x,M.x,D.x,x.x,B,O,F),$d.initNonuniformCatmullRom(m.y,M.y,D.y,x.y,B,O,F),Pf.initNonuniformCatmullRom(m.z,M.z,D.z,x.z,B,O,F)}else"catmullrom"===this.curveType&&(jd.initCatmullRom(m.x,M.x,D.x,x.x,this.tension),$d.initCatmullRom(m.y,M.y,D.y,x.y,this.tension),Pf.initCatmullRom(m.z,M.z,D.z,x.z,this.tension));return r.set(jd.calc(p),$d.calc(p),Pf.calc(p)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new ue).fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Um(c,e,t,r,o){const l=.5*(r-e),d=.5*(o-t),h=c*c;return(2*t-2*r+l+d)*(c*h)+(-3*t+3*r-2*l-d)*h+l*c+t}function Lc(c,e,t,r){return function My(c,e){const t=1-c;return t*t*e}(c,e)+function zm(c,e){return 2*(1-c)*c*e}(c,t)+function q0(c,e){return c*c*e}(c,r)}function ic(c,e,t,r,o){return function Sy(c,e){const t=1-c;return t*t*t*e}(c,e)+function Cy(c,e){const t=1-c;return 3*t*t*c*e}(c,t)+function X0(c,e){return 3*(1-c)*c*c*e}(c,r)+function K0(c,e){return c*c*c*e}(c,o)}Hm.prototype.isCatmullRomCurve3=!0;class Of extends Zo{constructor(e=new Gt,t=new Gt,r=new Gt,o=new Gt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new Gt){const r=t,o=this.v0,l=this.v1,d=this.v2,h=this.v3;return r.set(ic(e,o.x,l.x,d.x,h.x),ic(e,o.y,l.y,d.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Of.prototype.isCubicBezierCurve=!0;class Lf extends Zo{constructor(e=new ue,t=new ue,r=new ue,o=new ue){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new ue){const r=t,o=this.v0,l=this.v1,d=this.v2,h=this.v3;return r.set(ic(e,o.x,l.x,d.x,h.x),ic(e,o.y,l.y,d.y,h.y),ic(e,o.z,l.z,d.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Lf.prototype.isCubicBezierCurve3=!0;class Iu extends Zo{constructor(e=new Gt,t=new Gt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Gt){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Gt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Iu.prototype.isLineCurve=!0;class Go extends Zo{constructor(e=new Gt,t=new Gt,r=new Gt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Gt){const r=t,o=this.v0,l=this.v1,d=this.v2;return r.set(Lc(e,o.x,l.x,d.x),Lc(e,o.y,l.y,d.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Go.prototype.isQuadraticBezierCurve=!0;class Gm extends Zo{constructor(e=new ue,t=new ue,r=new ue){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ue){const r=t,o=this.v0,l=this.v1,d=this.v2;return r.set(Lc(e,o.x,l.x,d.x),Lc(e,o.y,l.y,d.y),Lc(e,o.z,l.z,d.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Gm.prototype.isQuadraticBezierCurve3=!0;class Wm extends Zo{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Gt){const r=t,o=this.points,l=(o.length-1)*e,d=Math.floor(l),h=l-d,p=o[0===d?d:d-1],m=o[d],x=o[d>o.length-2?o.length-1:d+1],M=o[d>o.length-3?o.length-1:d+2];return r.set(Um(h,p.x,m.x,x.x,M.x),Um(h,p.y,m.y,x.y,M.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new Gt).fromArray(o))}return this}}Wm.prototype.isSplineCurve=!0;var Yd=Object.freeze({__proto__:null,ArcCurve:Gd,CatmullRomCurve3:Hm,CubicBezierCurve:Of,CubicBezierCurve3:Lf,EllipseCurve:No,LineCurve:Iu,LineCurve3:class Z0 extends Zo{constructor(e=new ue,t=new ue){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ue){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Go,QuadraticBezierCurve3:Gm,SplineCurve:Wm});class jm extends Zo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Iu(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=r){const d=o[l]-r,h=this.curves[l],p=h.getLength();return h.getPointAt(0===p?0:1-d/p,t)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,l=this.curves;o<l.length;o++){const d=l[o],p=d.getPoints(d.isEllipseCurve?2*e:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?e*d.points.length:e);for(let m=0;m<p.length;m++){const x=p[m];r&&r.equals(x)||(t.push(x),r=x)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push((new Yd[o.type]).fromJSON(o))}return this}}class Fc extends jm{constructor(e){super(),this.type="Path",this.currentPoint=new Gt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Iu(this.currentPoint.clone(),new Gt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const l=new Go(this.currentPoint.clone(),new Gt(e,t),new Gt(r,o));return this.curves.push(l),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,l,d){const h=new Of(this.currentPoint.clone(),new Gt(e,t),new Gt(r,o),new Gt(l,d));return this.curves.push(h),this.currentPoint.set(l,d),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Wm(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,l,d){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,o,l,d),this}absarc(e,t,r,o,l,d){return this.absellipse(e,t,r,r,o,l,d),this}ellipse(e,t,r,o,l,d,h,p){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,o,l,d,h,p),this}absellipse(e,t,r,o,l,d,h,p){const m=new No(e,t,r,o,l,d,h,p);if(this.curves.length>0){const M=m.getPoint(0);M.equals(this.currentPoint)||this.lineTo(M.x,M.y)}this.curves.push(m);const x=m.getPoint(1);return this.currentPoint.copy(x),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class al extends bi{constructor(e=1,t=1,r=1,o=8,l=1,d=!1,h=0,p=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:l,openEnded:d,thetaStart:h,thetaLength:p};const m=this;o=Math.floor(o),l=Math.floor(l);const x=[],M=[],D=[],R=[];let B=0;const O=[],F=r/2;let Z=0;function fe(oe){const pe=B,Fe=new Gt,Xe=new ue;let tt=0;const kt=!0===oe?e:t,ht=!0===oe?1:-1;for(let $e=1;$e<=o;$e++)M.push(0,F*ht,0),D.push(0,ht,0),R.push(.5,.5),B++;const he=B;for(let $e=0;$e<=o;$e++){const gt=$e/o*p+h,Ft=Math.cos(gt),Rt=Math.sin(gt);Xe.x=kt*Rt,Xe.y=F*ht,Xe.z=kt*Ft,M.push(Xe.x,Xe.y,Xe.z),D.push(0,ht,0),Fe.x=.5*Ft+.5,Fe.y=.5*Rt*ht+.5,R.push(Fe.x,Fe.y),B++}for(let $e=0;$e<o;$e++){const rn=pe+$e,gt=he+$e;!0===oe?x.push(gt,gt+1,rn):x.push(gt+1,gt,rn),tt+=3}m.addGroup(Z,tt,!0===oe?1:2),Z+=tt}(function ie(){const oe=new ue,pe=new ue;let Fe=0;const Xe=(t-e)/r;for(let tt=0;tt<=l;tt++){const kt=[],ht=tt/l,he=ht*(t-e)+e;for(let $e=0;$e<=o;$e++){const rn=$e/o,gt=rn*p+h,Ft=Math.sin(gt),Rt=Math.cos(gt);pe.x=he*Ft,pe.y=-ht*r+F,pe.z=he*Rt,M.push(pe.x,pe.y,pe.z),oe.set(Ft,Xe,Rt).normalize(),D.push(oe.x,oe.y,oe.z),R.push(rn,1-ht),kt.push(B++)}O.push(kt)}for(let tt=0;tt<o;tt++)for(let kt=0;kt<l;kt++){const he=O[kt+1][tt],$e=O[kt+1][tt+1],rn=O[kt][tt+1];x.push(O[kt][tt],he,rn),x.push(he,$e,rn),Fe+=6}m.addGroup(Z,Fe,0),Z+=Fe})(),!1===d&&(e>0&&fe(!0),t>0&&fe(!1)),this.setIndex(x),this.setAttribute("position",new Nn(M,3)),this.setAttribute("normal",new Nn(D,3)),this.setAttribute("uv",new Nn(R,2))}static fromJSON(e){return new al(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new ue,new ue,new ue,new cs;class Jo extends Fc{constructor(e){super(e),this.uuid=cn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push((new Fc).fromJSON(o))}return this}}function Ym(c,e,t,r,o){let l,d;if(o===function Ay(c,e,t,r){let o=0;for(let l=e,d=t-r;l<t;l+=r)o+=(c[d]-c[l])*(c[l+1]+c[d+1]),d=l;return o}(c,e,t,r)>0)for(l=e;l<t;l+=r)d=Hf(l,c[l],c[l+1],d);else for(l=t-r;l>=e;l-=r)d=Hf(l,c[l],c[l+1],d);return d&&ll(d,d.next)&&(zc(d),d=d.next),d}function Qo(c,e){if(!c)return c;e||(e=c);let r,t=c;do{if(r=!1,t.steiner||!ll(t,t.next)&&0!==Ur(t.prev,t,t.next))t=t.next;else{if(zc(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function Lu(c,e,t,r,o,l,d){if(!c)return;!d&&l&&function kc(c,e,t,r){let o=c;do{null===o.z&&(o.z=Pl(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==c);o.prevZ.nextZ=null,o.prevZ=null,function Bc(c){let e,t,r,o,l,d,h,p,m=1;do{for(t=c,c=null,l=null,d=0;t;){for(d++,r=t,h=0,e=0;e<m&&(h++,r=r.nextZ,r);e++);for(p=m;h>0||p>0&&r;)0!==h&&(0===p||!r||t.z<=r.z)?(o=t,t=t.nextZ,h--):(o=r,r=r.nextZ,p--),l?l.nextZ=o:c=o,o.prevZ=l,l=o;t=r}l.nextZ=null,m*=2}while(d>1)}(o)}(c,r,o,l);let p,m,h=c;for(;c.prev!==c.next;)if(p=c.prev,m=c.next,l?kf(c,r,o,l):Dy(c))e.push(p.i/t),e.push(c.i/t),e.push(m.i/t),zc(c),c=m.next,h=m.next;else if((c=m)===h){d?1===d?Lu(c=ka(Qo(c),e,t),e,t,r,o,l,2):2===d&&Fu(c,e,t,r,o,l):Lu(Qo(c),e,t,r,o,l,1);break}}function Dy(c){const e=c.prev,t=c,r=c.next;if(Ur(e,t,r)>=0)return!1;let o=c.next.next;for(;o!==c.prev;){if(va(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&Ur(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function kf(c,e,t,r){const o=c.prev,l=c,d=c.next;if(Ur(o,l,d)>=0)return!1;const m=o.x>l.x?o.x>d.x?o.x:d.x:l.x>d.x?l.x:d.x,x=o.y>l.y?o.y>d.y?o.y:d.y:l.y>d.y?l.y:d.y,M=Pl(o.x<l.x?o.x<d.x?o.x:d.x:l.x<d.x?l.x:d.x,o.y<l.y?o.y<d.y?o.y:d.y:l.y<d.y?l.y:d.y,e,t,r),D=Pl(m,x,e,t,r);let R=c.prevZ,B=c.nextZ;for(;R&&R.z>=M&&B&&B.z<=D;){if(R!==c.prev&&R!==c.next&&va(o.x,o.y,l.x,l.y,d.x,d.y,R.x,R.y)&&Ur(R.prev,R,R.next)>=0||(R=R.prevZ,B!==c.prev&&B!==c.next&&va(o.x,o.y,l.x,l.y,d.x,d.y,B.x,B.y)&&Ur(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;R&&R.z>=M;){if(R!==c.prev&&R!==c.next&&va(o.x,o.y,l.x,l.y,d.x,d.y,R.x,R.y)&&Ur(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;B&&B.z<=D;){if(B!==c.prev&&B!==c.next&&va(o.x,o.y,l.x,l.y,d.x,d.y,B.x,B.y)&&Ur(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function ka(c,e,t){let r=c;do{const o=r.prev,l=r.next.next;!ll(o,l)&&sc(o,r,r.next,l)&&Uc(o,l)&&Uc(l,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(l.i/t),zc(r),zc(r.next),r=c=l),r=r.next}while(r!==c);return Qo(r)}function Fu(c,e,t,r,o,l){let d=c;do{let h=d.next.next;for(;h!==d.prev;){if(d.i!==h.i&&Hc(d,h)){let p=Vf(d,h);return d=Qo(d,d.next),p=Qo(p,p.next),Lu(d,e,t,r,o,l),void Lu(p,e,t,r,o,l)}h=h.next}d=d.next}while(d!==c)}function rc(c,e){return c.x-e.x}function Qd(c,e){if(e=function ea(c,e){let t=e;const r=c.x,o=c.y;let d,l=-1/0;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const D=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(D<=r&&D>l){if(l=D,D===r){if(o===t.y)return t;if(o===t.next.y)return t.next}d=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!d)return null;if(r===l)return d;const h=d,p=d.x,m=d.y;let M,x=1/0;t=d;do{r>=t.x&&t.x>=p&&r!==t.x&&va(o<m?r:l,o,p,m,o<m?l:r,o,t.x,t.y)&&(M=Math.abs(o-t.y)/(r-t.x),Uc(t,c)&&(M<x||M===x&&(t.x>d.x||t.x===d.x&&Bf(d,t)))&&(d=t,x=M)),t=t.next}while(t!==h);return d}(c,e),e){const t=Vf(e,c);Qo(e,e.next),Qo(t,t.next)}}function Bf(c,e){return Ur(c.prev,c,e.prev)<0&&Ur(e.next,c,c.next)<0}function Pl(c,e,t,r,o){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-t)*o)|c<<8))|c<<4))|c<<2))|c<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Vc(c){let e=c,t=c;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==c);return t}function va(c,e,t,r,o,l,d,h){return(o-d)*(e-h)-(c-d)*(l-h)>=0&&(c-d)*(r-h)-(t-d)*(e-h)>=0&&(t-d)*(l-h)-(o-d)*(r-h)>=0}function Hc(c,e){return c.next.i!==e.i&&c.prev.i!==e.i&&!function qm(c,e){let t=c;do{if(t.i!==c.i&&t.next.i!==c.i&&t.i!==e.i&&t.next.i!==e.i&&sc(t,t.next,c,e))return!0;t=t.next}while(t!==c);return!1}(c,e)&&(Uc(c,e)&&Uc(e,c)&&function Xm(c,e){let t=c,r=!1;const o=(c.x+e.x)/2,l=(c.y+e.y)/2;do{t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==c);return r}(c,e)&&(Ur(c.prev,c,e.prev)||Ur(c,e.prev,e))||ll(c,e)&&Ur(c.prev,c,c.next)>0&&Ur(e.prev,e,e.next)>0)}function Ur(c,e,t){return(e.y-c.y)*(t.x-e.x)-(e.x-c.x)*(t.y-e.y)}function ll(c,e){return c.x===e.x&&c.y===e.y}function sc(c,e,t,r){const o=ku(Ur(c,e,t)),l=ku(Ur(c,e,r)),d=ku(Ur(t,r,c)),h=ku(Ur(t,r,e));return!!(o!==l&&d!==h||0===o&&Nu(c,t,e)||0===l&&Nu(c,r,e)||0===d&&Nu(t,c,r)||0===h&&Nu(t,e,r))}function Nu(c,e,t){return e.x<=Math.max(c.x,t.x)&&e.x>=Math.min(c.x,t.x)&&e.y<=Math.max(c.y,t.y)&&e.y>=Math.min(c.y,t.y)}function ku(c){return c>0?1:c<0?-1:0}function Uc(c,e){return Ur(c.prev,c,c.next)<0?Ur(c,e,c.next)>=0&&Ur(c,c.prev,e)>=0:Ur(c,e,c.prev)<0||Ur(c,c.next,e)<0}function Vf(c,e){const t=new eh(c.i,c.x,c.y),r=new eh(e.i,e.x,e.y),o=c.next,l=e.prev;return c.next=e,e.prev=c,t.next=o,o.prev=t,r.next=t,t.prev=r,l.next=r,r.prev=l,r}function Hf(c,e,t,r){const o=new eh(c,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function zc(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function eh(c,e,t){this.i=c,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ba{static area(e){const t=e.length;let r=0;for(let o=t-1,l=0;l<t;o=l++)r+=e[o].x*e[l].y-e[l].x*e[o].y;return.5*r}static isClockWise(e){return Ba.area(e)<0}static triangulateShape(e,t){const r=[],o=[],l=[];Km(e),Uf(r,e);let d=e.length;t.forEach(Km);for(let p=0;p<t.length;p++)o.push(d),d+=t[p].length,Uf(r,t[p]);const h=function(c,e,t=2){const r=e&&e.length,o=r?e[0]*t:c.length;let l=Ym(c,0,o,t,!0);const d=[];if(!l||l.next===l.prev)return d;let h,p,m,x,M,D,R;if(r&&(l=function bo(c,e,t,r){const o=[];let l,d,h,p,m;for(l=0,d=e.length;l<d;l++)h=e[l]*r,p=l<d-1?e[l+1]*r:c.length,m=Ym(c,h,p,r,!1),m===m.next&&(m.steiner=!0),o.push(Vc(m));for(o.sort(rc),l=0;l<o.length;l++)Qd(o[l],t),t=Qo(t,t.next);return t}(c,e,l,t)),c.length>80*t){h=m=c[0],p=x=c[1];for(let B=t;B<o;B+=t)M=c[B],D=c[B+1],M<h&&(h=M),D<p&&(p=D),M>m&&(m=M),D>x&&(x=D);R=Math.max(m-h,x-p),R=0!==R?1/R:0}return Lu(l,d,t,h,p,R),d}(r,o);for(let p=0;p<h.length;p+=3)l.push(h.slice(p,p+3));return l}}function Km(c){const e=c.length;e>2&&c[e-1].equals(c[0])&&c.pop()}function Uf(c,e){for(let t=0;t<e.length;t++)c.push(e[t].x),c.push(e[t].y)}class Va extends bi{constructor(e=new Jo([new Gt(.5,.5),new Gt(-.5,.5),new Gt(-.5,-.5),new Gt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],l=[];for(let h=0,p=e.length;h<p;h++)d(e[h]);function d(h){const p=[],m=void 0!==t.curveSegments?t.curveSegments:12,x=void 0!==t.steps?t.steps:1;let M=void 0!==t.depth?t.depth:1,D=void 0===t.bevelEnabled||t.bevelEnabled,R=void 0!==t.bevelThickness?t.bevelThickness:.2,B=void 0!==t.bevelSize?t.bevelSize:R-.1,O=void 0!==t.bevelOffset?t.bevelOffset:0,F=void 0!==t.bevelSegments?t.bevelSegments:3;const Z=t.extrudePath,ie=void 0!==t.UVGenerator?t.UVGenerator:Ty;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),M=t.amount);let fe,pe,Fe,Xe,tt,oe=!1;Z&&(fe=Z.getSpacedPoints(x),oe=!0,D=!1,pe=Z.computeFrenetFrames(x,!1),Fe=new ue,Xe=new ue,tt=new ue),D||(F=0,R=0,B=0,O=0);const kt=h.extractPoints(m);let ht=kt.shape;const he=kt.holes;if(!Ba.isClockWise(ht)){ht=ht.reverse();for(let jt=0,Xt=he.length;jt<Xt;jt++){const un=he[jt];Ba.isClockWise(un)&&(he[jt]=un.reverse())}}const rn=Ba.triangulateShape(ht,he),gt=ht;for(let jt=0,Xt=he.length;jt<Xt;jt++)ht=ht.concat(he[jt]);function Ft(jt,Xt,un){return Xt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Xt.clone().multiplyScalar(un).add(jt)}const Rt=ht.length,zt=rn.length;function ft(jt,Xt,un){let Xn,Rn,Fi;const xi=jt.x-Xt.x,pi=jt.y-Xt.y,xs=un.x-jt.x,zr=un.y-jt.y,Re=xi*xi+pi*pi;if(Math.abs(xi*zr-pi*xs)>Number.EPSILON){const Ht=Math.sqrt(Re),an=Math.sqrt(xs*xs+zr*zr),Cn=Xt.x-pi/Ht,kn=Xt.y+xi/Ht,ji=((un.x-zr/an-Cn)*zr-(un.y+xs/an-kn)*xs)/(xi*zr-pi*xs);Xn=Cn+xi*ji-jt.x,Rn=kn+pi*ji-jt.y;const tr=Xn*Xn+Rn*Rn;if(tr<=2)return new Gt(Xn,Rn);Fi=Math.sqrt(tr/2)}else{let Ht=!1;xi>Number.EPSILON?xs>Number.EPSILON&&(Ht=!0):xi<-Number.EPSILON?xs<-Number.EPSILON&&(Ht=!0):Math.sign(pi)===Math.sign(zr)&&(Ht=!0),Ht?(Xn=-pi,Rn=xi,Fi=Math.sqrt(Re)):(Xn=xi,Rn=pi,Fi=Math.sqrt(Re/2))}return new Gt(Xn/Fi,Rn/Fi)}const Zt=[];for(let jt=0,Xt=gt.length,un=Xt-1,Xn=jt+1;jt<Xt;jt++,un++,Xn++)un===Xt&&(un=0),Xn===Xt&&(Xn=0),Zt[jt]=ft(gt[jt],gt[un],gt[Xn]);const tn=[];let pn,on=Zt.concat();for(let jt=0,Xt=he.length;jt<Xt;jt++){const un=he[jt];pn=[];for(let Xn=0,Rn=un.length,Fi=Rn-1,xi=Xn+1;Xn<Rn;Xn++,Fi++,xi++)Fi===Rn&&(Fi=0),xi===Rn&&(xi=0),pn[Xn]=ft(un[Xn],un[Fi],un[xi]);tn.push(pn),on=on.concat(pn)}for(let jt=0;jt<F;jt++){const Xt=jt/F,un=R*Math.cos(Xt*Math.PI/2),Xn=B*Math.sin(Xt*Math.PI/2)+O;for(let Rn=0,Fi=gt.length;Rn<Fi;Rn++){const xi=Ft(gt[Rn],Zt[Rn],Xn);Dr(xi.x,xi.y,-un)}for(let Rn=0,Fi=he.length;Rn<Fi;Rn++){const xi=he[Rn];pn=tn[Rn];for(let pi=0,xs=xi.length;pi<xs;pi++){const zr=Ft(xi[pi],pn[pi],Xn);Dr(zr.x,zr.y,-un)}}}const ai=B+O;for(let jt=0;jt<Rt;jt++){const Xt=D?Ft(ht[jt],on[jt],ai):ht[jt];oe?(Xe.copy(pe.normals[0]).multiplyScalar(Xt.x),Fe.copy(pe.binormals[0]).multiplyScalar(Xt.y),tt.copy(fe[0]).add(Xe).add(Fe),Dr(tt.x,tt.y,tt.z)):Dr(Xt.x,Xt.y,0)}for(let jt=1;jt<=x;jt++)for(let Xt=0;Xt<Rt;Xt++){const un=D?Ft(ht[Xt],on[Xt],ai):ht[Xt];oe?(Xe.copy(pe.normals[jt]).multiplyScalar(un.x),Fe.copy(pe.binormals[jt]).multiplyScalar(un.y),tt.copy(fe[jt]).add(Xe).add(Fe),Dr(tt.x,tt.y,tt.z)):Dr(un.x,un.y,M/x*jt)}for(let jt=F-1;jt>=0;jt--){const Xt=jt/F,un=R*Math.cos(Xt*Math.PI/2),Xn=B*Math.sin(Xt*Math.PI/2)+O;for(let Rn=0,Fi=gt.length;Rn<Fi;Rn++){const xi=Ft(gt[Rn],Zt[Rn],Xn);Dr(xi.x,xi.y,M+un)}for(let Rn=0,Fi=he.length;Rn<Fi;Rn++){const xi=he[Rn];pn=tn[Rn];for(let pi=0,xs=xi.length;pi<xs;pi++){const zr=Ft(xi[pi],pn[pi],Xn);oe?Dr(zr.x,zr.y+fe[x-1].y,fe[x-1].x+un):Dr(zr.x,zr.y,M+un)}}}function Yt(jt,Xt){let un=jt.length;for(;--un>=0;){const Xn=un;let Rn=un-1;Rn<0&&(Rn=jt.length-1);for(let Fi=0,xi=x+2*F;Fi<xi;Fi++){const pi=Rt*Fi,xs=Rt*(Fi+1);Wi(Xt+Xn+pi,Xt+Rn+pi,Xt+Rn+xs,Xt+Xn+xs)}}}function Dr(jt,Xt,un){p.push(jt),p.push(Xt),p.push(un)}function Gi(jt,Xt,un){En(jt),En(Xt),En(un);const Xn=o.length/3,Rn=ie.generateTopUV(r,o,Xn-3,Xn-2,Xn-1);Xi(Rn[0]),Xi(Rn[1]),Xi(Rn[2])}function Wi(jt,Xt,un,Xn){En(jt),En(Xt),En(Xn),En(Xt),En(un),En(Xn);const Rn=o.length/3,Fi=ie.generateSideWallUV(r,o,Rn-6,Rn-3,Rn-2,Rn-1);Xi(Fi[0]),Xi(Fi[1]),Xi(Fi[3]),Xi(Fi[1]),Xi(Fi[2]),Xi(Fi[3])}function En(jt){o.push(p[3*jt+0]),o.push(p[3*jt+1]),o.push(p[3*jt+2])}function Xi(jt){l.push(jt.x),l.push(jt.y)}(function qi(){const jt=o.length/3;if(D){let Xt=0,un=Rt*Xt;for(let Xn=0;Xn<zt;Xn++){const Rn=rn[Xn];Gi(Rn[2]+un,Rn[1]+un,Rn[0]+un)}Xt=x+2*F,un=Rt*Xt;for(let Xn=0;Xn<zt;Xn++){const Rn=rn[Xn];Gi(Rn[0]+un,Rn[1]+un,Rn[2]+un)}}else{for(let Xt=0;Xt<zt;Xt++){const un=rn[Xt];Gi(un[2],un[1],un[0])}for(let Xt=0;Xt<zt;Xt++){const un=rn[Xt];Gi(un[0]+Rt*x,un[1]+Rt*x,un[2]+Rt*x)}}r.addGroup(jt,o.length/3-jt,0)})(),function Ii(){const jt=o.length/3;let Xt=0;Yt(gt,Xt),Xt+=gt.length;for(let un=0,Xn=he.length;un<Xn;un++){const Rn=he[un];Yt(Rn,Xt),Xt+=Rn.length}r.addGroup(jt,o.length/3-jt,1)}()}this.setAttribute("position",new Nn(o,3)),this.setAttribute("uv",new Nn(l,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Ry(c,e,t){if(t.shapes=[],Array.isArray(c))for(let r=0,o=c.length;r<o;r++)t.shapes.push(c[r].uuid);else t.shapes.push(c.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let l=0,d=e.shapes.length;l<d;l++)r.push(t[e.shapes[l]]);const o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new Yd[o.type]).fromJSON(o)),new Va(r,e.options)}}const Ty={generateTopUV:function(c,e,t,r,o){const h=e[3*r],p=e[3*r+1],m=e[3*o],x=e[3*o+1];return[new Gt(e[3*t],e[3*t+1]),new Gt(h,p),new Gt(m,x)]},generateSideWallUV:function(c,e,t,r,o,l){const d=e[3*t],h=e[3*t+1],p=e[3*t+2],m=e[3*r],x=e[3*r+1],M=e[3*r+2],D=e[3*o],R=e[3*o+1],B=e[3*o+2],O=e[3*l],F=e[3*l+1],Z=e[3*l+2];return Math.abs(h-x)<Math.abs(d-m)?[new Gt(d,1-p),new Gt(m,1-M),new Gt(D,1-B),new Gt(O,1-Z)]:[new Gt(h,1-p),new Gt(x,1-M),new Gt(R,1-B),new Gt(F,1-Z)]}};class Uu extends bi{constructor(e=new Jo([new Gt(0,.5),new Gt(-.5,-.5),new Gt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],l=[],d=[];let h=0,p=0;if(!1===Array.isArray(e))m(e);else for(let x=0;x<e.length;x++)m(e[x]),this.addGroup(h,p,x),h+=p,p=0;function m(x){const M=o.length/3,D=x.extractPoints(t);let R=D.shape;const B=D.holes;!1===Ba.isClockWise(R)&&(R=R.reverse());for(let F=0,Z=B.length;F<Z;F++){const ie=B[F];!0===Ba.isClockWise(ie)&&(B[F]=ie.reverse())}const O=Ba.triangulateShape(R,B);for(let F=0,Z=B.length;F<Z;F++)R=R.concat(B[F]);for(let F=0,Z=R.length;F<Z;F++){const ie=R[F];o.push(ie.x,ie.y,0),l.push(0,0,1),d.push(ie.x,ie.y)}for(let F=0,Z=O.length;F<Z;F++){const ie=O[F];r.push(ie[0]+M,ie[1]+M,ie[2]+M),p+=3}}this.setIndex(r),this.setAttribute("position",new Nn(o,3)),this.setAttribute("normal",new Nn(l,3)),this.setAttribute("uv",new Nn(d,2))}toJSON(){const e=super.toJSON();return function Iy(c,e){if(e.shapes=[],Array.isArray(c))for(let t=0,r=c.length;t<r;t++)e.shapes.push(c[t].uuid);else e.shapes.push(c.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++)r.push(t[e.shapes[o]]);return new Uu(r,e.curveSegments)}}class Zm extends Fs{constructor(e){super(),this.type="ShadowMaterial",this.color=new te(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Zm.prototype.isShadowMaterial=!0;class zf extends Ao{constructor(e){super(e),this.type="RawShaderMaterial"}}zf.prototype.isRawShaderMaterial=!0;class Jm extends Fs{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new te(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Jm.prototype.isMeshStandardMaterial=!0;class Qm extends Jm{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Gt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ni(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new te(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new te(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new te(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Qm.prototype.isMeshPhysicalMaterial=!0;class Ol extends Fs{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new te(16777215),this.specular=new te(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Ol.prototype.isMeshPhongMaterial=!0;class eg extends Fs{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new te(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}eg.prototype.isMeshToonMaterial=!0;class Gf extends Fs{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Gf.prototype.isMeshNormalMaterial=!0;class tg extends Fs{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}tg.prototype.isMeshLambertMaterial=!0;class Wf extends Fs{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new te(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}Wf.prototype.isMeshMatcapMaterial=!0;class zu extends Zs{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}zu.prototype.isLineDashedMaterial=!0;const Fy={ShadowMaterial:Zm,SpriteMaterial:Od,RawShaderMaterial:zf,ShaderMaterial:Ao,PointsMaterial:Ud,MeshPhysicalMaterial:Qm,MeshStandardMaterial:Jm,MeshPhongMaterial:Ol,MeshToonMaterial:eg,MeshNormalMaterial:Gf,MeshLambertMaterial:tg,MeshDepthMaterial:Ad,MeshDistanceMaterial:Td,MeshBasicMaterial:Fr,MeshMatcapMaterial:Wf,LineDashedMaterial:zu,LineBasicMaterial:Zs,Material:Fs};Fs.fromType=function(c){return new Fy[c]};const us={arraySlice:function(c,e,t){return us.isTypedArray(c)?new c.constructor(c.subarray(e,void 0!==t?t:c.length)):c.slice(e,t)},convertArray:function(c,e,t){return!c||!t&&c.constructor===e?c:"number"==typeof e.BYTES_PER_ELEMENT?new e(c):Array.prototype.slice.call(c)},isTypedArray:function(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)},getKeyframeOrder:function(c){const t=c.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(function e(o,l){return c[o]-c[l]}),r},sortedArray:function(c,e,t){const r=c.length,o=new c.constructor(r);for(let l=0,d=0;d!==r;++l){const h=t[l]*e;for(let p=0;p!==e;++p)o[d++]=c[h+p]}return o},flattenJSON:function(c,e,t,r){let o=1,l=c[0];for(;void 0!==l&&void 0===l[r];)l=c[o++];if(void 0===l)return;let d=l[r];if(void 0!==d)if(Array.isArray(d))do{d=l[r],void 0!==d&&(e.push(l.time),t.push.apply(t,d)),l=c[o++]}while(void 0!==l);else if(void 0!==d.toArray)do{d=l[r],void 0!==d&&(e.push(l.time),d.toArray(t,t.length)),l=c[o++]}while(void 0!==l);else do{d=l[r],void 0!==d&&(e.push(l.time),t.push(d)),l=c[o++]}while(void 0!==l)},subclip:function(c,e,t,r,o=30){const l=c.clone();l.name=e;const d=[];for(let p=0;p<l.tracks.length;++p){const m=l.tracks[p],x=m.getValueSize(),M=[],D=[];for(let R=0;R<m.times.length;++R){const B=m.times[R]*o;if(!(B<t||B>=r)){M.push(m.times[R]);for(let O=0;O<x;++O)D.push(m.values[R*x+O])}}0!==M.length&&(m.times=us.convertArray(M,m.times.constructor),m.values=us.convertArray(D,m.values.constructor),d.push(m))}l.tracks=d;let h=1/0;for(let p=0;p<l.tracks.length;++p)h>l.tracks[p].times[0]&&(h=l.tracks[p].times[0]);for(let p=0;p<l.tracks.length;++p)l.tracks[p].shift(-1*h);return l.resetDuration(),l},makeClipAdditive:function(c,e=0,t=c,r=30){r<=0&&(r=30);const o=t.tracks.length,l=e/r;for(let d=0;d<o;++d){const h=t.tracks[d],p=h.ValueTypeName;if("bool"===p||"string"===p)continue;const m=c.tracks.find(function(Z){return Z.name===h.name&&Z.ValueTypeName===p});if(void 0===m)continue;let x=0;const M=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=M/3);let D=0;const R=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(D=R/3);const B=h.times.length-1;let O;if(l<=h.times[0])O=us.arraySlice(h.values,x,M-x);else if(l>=h.times[B]){const Z=B*M+x;O=us.arraySlice(h.values,Z,Z+M-x)}else{const Z=h.createInterpolant(),ie=x,fe=M-x;Z.evaluate(l),O=us.arraySlice(Z.resultBuffer,ie,fe)}"quaternion"===p&&(new Ji).fromArray(O).normalize().conjugate().toArray(O);const F=m.times.length;for(let Z=0;Z<F;++Z){const ie=Z*R+D;if("quaternion"===p)Ji.multiplyQuaternionsFlat(m.values,ie,O,0,m.values,ie);else{const fe=R-2*D;for(let oe=0;oe<fe;++oe)m.values[ie+oe]-=O[oe]}}}return c.blendMode=2501,c}};class Ll{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],l=t[r-1];e:{t:{let d;n:{i:if(!(e<o)){for(let h=r+2;;){if(void 0===o){if(e<l)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,l)}if(r===h)break;if(l=o,o=t[++r],e<o)break t}d=t.length;break n}if(e>=l)break e;{const h=t[1];e<h&&(r=2,l=h);for(let p=r-2;;){if(void 0===l)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===p)break;if(o=l,l=t[--r-1],e>=l)break t}d=r,r=0}}for(;r<d;){const h=r+d>>>1;e<t[h]?d=h:r=h+1}if(o=t[r],l=t[r-1],void 0===l)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(void 0===o)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,l,e)}this._cachedIndex=r,this.intervalChanged_(r,l,o)}return this.interpolate_(r,l,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o;for(let d=0;d!==o;++d)t[d]=r[l+d];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ll.prototype.beforeStart_=Ll.prototype.copySampleValue_,Ll.prototype.afterEnd_=Ll.prototype.copySampleValue_;class Ny extends Ll{constructor(e,t,r,o){super(e,t,r,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gs,endingEnd:Gs}}intervalChanged_(e,t,r){const o=this.parameterPositions;let l=e-2,d=e+1,h=o[l],p=o[d];if(void 0===h)switch(this.getSettings_().endingStart){case br:l=e,h=2*t-r;break;case 2402:l=o.length-2,h=t+o[l]-o[l+1];break;default:l=e,h=r}if(void 0===p)switch(this.getSettings_().endingEnd){case br:d=e,p=2*r-t;break;case 2402:d=1,p=r+o[1]-o[0];break;default:d=e-1,p=t}const m=.5*(r-t),x=this.valueSize;this._weightPrev=m/(t-h),this._weightNext=m/(p-r),this._offsetPrev=l*x,this._offsetNext=d*x}interpolate_(e,t,r,o){const l=this.resultBuffer,d=this.sampleValues,h=this.valueSize,p=e*h,m=p-h,x=this._offsetPrev,M=this._offsetNext,D=this._weightPrev,R=this._weightNext,B=(r-t)/(o-t),O=B*B,F=O*B,Z=-D*F+2*D*O-D*B,ie=(1+D)*F+(-1.5-2*D)*O+(-.5+D)*B+1,fe=(-1-R)*F+(1.5+R)*O+.5*B,oe=R*F-R*O;for(let pe=0;pe!==h;++pe)l[pe]=Z*d[x+pe]+ie*d[m+pe]+fe*d[p+pe]+oe*d[M+pe];return l}}class ng extends Ll{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,d=this.sampleValues,h=this.valueSize,p=e*h,m=p-h,x=(r-t)/(o-t),M=1-x;for(let D=0;D!==h;++D)l[D]=d[m+D]*M+d[p+D]*x;return l}}class ky extends Ll{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ha{constructor(e,t,r,o){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=us.convertArray(t,this.TimeBufferType),this.values=us.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:us.convertArray(e.times,Array),values:us.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new ky(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ng(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ny(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let l=0,d=o-1;for(;l!==o&&r[l]<e;)++l;for(;-1!==d&&r[d]>t;)--d;if(++d,0!==l||d!==o){l>=d&&(d=Math.max(d,1),l=d-1);const h=this.getValueSize();this.times=us.arraySlice(r,l,d),this.values=us.arraySlice(this.values,l*h,d*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,l=r.length;0===l&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let d=null;for(let h=0;h!==l;h++){const p=r[h];if("number"==typeof p&&isNaN(p)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,p),e=!1;break}if(null!==d&&d>p){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,p,d),e=!1;break}d=p}if(void 0!==o&&us.isTypedArray(o))for(let h=0,p=o.length;h!==p;++h){const m=o[h];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,m),e=!1;break}}return e}optimize(){const e=us.arraySlice(this.times),t=us.arraySlice(this.values),r=this.getValueSize(),o=2302===this.getInterpolation(),l=e.length-1;let d=1;for(let h=1;h<l;++h){let p=!1;const m=e[h];if(m!==e[h+1]&&(1!==h||m!==e[0]))if(o)p=!0;else{const M=h*r,D=M-r,R=M+r;for(let B=0;B!==r;++B){const O=t[M+B];if(O!==t[D+B]||O!==t[R+B]){p=!0;break}}}if(p){if(h!==d){e[d]=e[h];const M=h*r,D=d*r;for(let R=0;R!==r;++R)t[D+R]=t[M+R]}++d}}if(l>0){e[d]=e[l];for(let h=l*r,p=d*r,m=0;m!==r;++m)t[p+m]=t[h+m];++d}return d!==e.length?(this.times=us.arraySlice(e,0,d),this.values=us.arraySlice(t,0,d*r)):(this.times=e,this.values=t),this}clone(){const e=us.arraySlice(this.times,0),t=us.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}Ha.prototype.TimeBufferType=Float32Array,Ha.prototype.ValueBufferType=Float32Array,Ha.prototype.DefaultInterpolation=2301;class oc extends Ha{}oc.prototype.ValueTypeName="bool",oc.prototype.ValueBufferType=Array,oc.prototype.DefaultInterpolation=2300,oc.prototype.InterpolantFactoryMethodLinear=void 0,oc.prototype.InterpolantFactoryMethodSmooth=void 0;class ig extends Ha{}ig.prototype.ValueTypeName="color";class Gu extends Ha{}Gu.prototype.ValueTypeName="number";class rg extends Ll{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,d=this.sampleValues,h=this.valueSize,p=(r-t)/(o-t);let m=e*h;for(let x=m+h;m!==x;m+=4)Ji.slerpFlat(l,0,d,m-h,d,m,p);return l}}class ac extends Ha{InterpolantFactoryMethodLinear(e){return new rg(this.times,this.values,this.getValueSize(),e)}}ac.prototype.ValueTypeName="quaternion",ac.prototype.DefaultInterpolation=2301,ac.prototype.InterpolantFactoryMethodSmooth=void 0;class Wu extends Ha{}Wu.prototype.ValueTypeName="string",Wu.prototype.ValueBufferType=Array,Wu.prototype.DefaultInterpolation=2300,Wu.prototype.InterpolantFactoryMethodLinear=void 0,Wu.prototype.InterpolantFactoryMethodSmooth=void 0;class jc extends Ha{}jc.prototype.ValueTypeName="vector";class rh{constructor(e,t=-1,r,o=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=cn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let d=0,h=r.length;d!==h;++d)t.push(ju(r[d]).scale(o));const l=new this(e.name,e.duration,t,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,d=r.length;l!==d;++l)t.push(Ha.toJSON(r[l]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const l=t.length,d=[];for(let h=0;h<l;h++){let p=[],m=[];p.push((h+l-1)%l,h,(h+1)%l),m.push(0,1,0);const x=us.getKeyframeOrder(p);p=us.sortedArray(p,1,x),m=us.sortedArray(m,1,x),!o&&0===p[0]&&(p.push(l),m.push(m[0])),d.push(new Gu(".morphTargetInfluences["+t[h].name+"]",p,m).scale(1/r))}return new this(e,-1,d)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},l=/^([\w-]*?)([\d]+)$/;for(let h=0,p=e.length;h<p;h++){const m=e[h],x=m.name.match(l);if(x&&x.length>1){const M=x[1];let D=o[M];D||(o[M]=D=[]),D.push(m)}}const d=[];for(const h in o)d.push(this.CreateFromMorphTargetSequence(h,o[h],t,r));return d}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(M,D,R,B,O){if(0!==R.length){const F=[],Z=[];us.flattenJSON(R,F,Z,B),0!==F.length&&O.push(new M(D,F,Z))}},o=[],l=e.name||"default",d=e.fps||30,h=e.blendMode;let p=e.length||-1;const m=e.hierarchy||[];for(let M=0;M<m.length;M++){const D=m[M].keys;if(D&&0!==D.length)if(D[0].morphTargets){const R={};let B;for(B=0;B<D.length;B++)if(D[B].morphTargets)for(let O=0;O<D[B].morphTargets.length;O++)R[D[B].morphTargets[O]]=-1;for(const O in R){const F=[],Z=[];for(let ie=0;ie!==D[B].morphTargets.length;++ie){const fe=D[B];F.push(fe.time),Z.push(fe.morphTarget===O?1:0)}o.push(new Gu(".morphTargetInfluence["+O+"]",F,Z))}p=R.length*d}else{const R=".bones["+t[M].name+"]";r(jc,R+".position",D,"pos",o),r(ac,R+".quaternion",D,"rot",o),r(jc,R+".scale",D,"scl",o)}}return 0===o.length?null:new this(l,p,o,h)}resetDuration(){let t=0;for(let r=0,o=this.tracks.length;r!==o;++r){const l=this.tracks[r];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ju(c){if(void 0===c.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function J0(c){switch(c.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gu;case"vector":case"vector2":case"vector3":case"vector4":return jc;case"color":return ig;case"quaternion":return ac;case"bool":case"boolean":return oc;case"string":return Wu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+c)}(c.type);if(void 0===c.times){const t=[],r=[];us.flattenJSON(c.keys,t,r,"value"),c.times=t,c.values=r}return void 0!==e.parse?e.parse(c):new e(c.name,c.times,c.values,c.interpolation)}const lc={enabled:!1,files:{},add:function(c,e){!1!==this.enabled&&(this.files[c]=e)},get:function(c){if(!1!==this.enabled)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};class $u{constructor(e,t,r){const o=this;let p,l=!1,d=0,h=0;const m=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(x){h++,!1===l&&void 0!==o.onStart&&o.onStart(x,d,h),l=!0},this.itemEnd=function(x){d++,void 0!==o.onProgress&&o.onProgress(x,d,h),d===h&&(l=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(x){void 0!==o.onError&&o.onError(x)},this.resolveURL=function(x){return p?p(x):x},this.setURLModifier=function(x){return p=x,this},this.addHandler=function(x,M){return m.push(x,M),this},this.removeHandler=function(x){const M=m.indexOf(x);return-1!==M&&m.splice(M,2),this},this.getHandler=function(x){for(let M=0,D=m.length;M<D;M+=2){const R=m[M],B=m[M+1];if(R.global&&(R.lastIndex=0),R.test(x))return B}return null}}}const jf=new $u;class cl{constructor(e){this.manager=void 0!==e?e:jf,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,l){r.load(e,o,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ta={};class na extends cl{constructor(e){super(e)}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const l=lc.get(e);if(void 0!==l)return this.manager.itemStart(e),setTimeout(()=>{t&&t(l),this.manager.itemEnd(e)},0),l;if(void 0!==ta[e])return void ta[e].push({onLoad:t,onProgress:r,onError:o});ta[e]=[],ta[e].push({onLoad:t,onProgress:r,onError:o});const d=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,p=this.responseType;fetch(d).then(m=>{if(200===m.status||0===m.status){if(0===m.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===m.body||void 0===m.body.getReader)return m;const x=ta[e],M=m.body.getReader(),D=m.headers.get("Content-Length"),R=D?parseInt(D):0,B=0!==R;let O=0;const F=new ReadableStream({start(Z){!function ie(){M.read().then(({done:fe,value:oe})=>{if(fe)Z.close();else{O+=oe.byteLength;const pe=new ProgressEvent("progress",{lengthComputable:B,loaded:O,total:R});for(let Fe=0,Xe=x.length;Fe<Xe;Fe++){const tt=x[Fe];tt.onProgress&&tt.onProgress(pe)}Z.enqueue(oe),ie()}})}()}});return new Response(F)}throw Error(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`)}).then(m=>{switch(p){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(x=>(new DOMParser).parseFromString(x,h));case"json":return m.json();default:if(void 0===h)return m.text();{const M=/charset="?([^;"\s]*)"?/i.exec(h),D=M&&M[1]?M[1].toLowerCase():void 0,R=new TextDecoder(D);return m.arrayBuffer().then(B=>R.decode(B))}}}).then(m=>{lc.add(e,m);const x=ta[e];delete ta[e];for(let M=0,D=x.length;M<D;M++){const R=x[M];R.onLoad&&R.onLoad(m)}}).catch(m=>{const x=ta[e];if(void 0===x)throw this.manager.itemError(e),m;delete ta[e];for(let M=0,D=x.length;M<D;M++){const R=x[M];R.onError&&R.onError(m)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class sh extends cl{constructor(e){super(e)}load(e,t,r,o){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,d=lc.get(e);if(void 0!==d)return l.manager.itemStart(e),setTimeout(function(){t&&t(d),l.manager.itemEnd(e)},0),d;const h=no("img");function p(){x(),lc.add(e,this),t&&t(this),l.manager.itemEnd(e)}function m(M){x(),o&&o(M),l.manager.itemError(e),l.manager.itemEnd(e)}function x(){h.removeEventListener("load",p,!1),h.removeEventListener("error",m,!1)}return h.addEventListener("load",p,!1),h.addEventListener("error",m,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),l.manager.itemStart(e),h.src=e,h}}class $f extends cl{constructor(e){super(e)}load(e,t,r,o){const l=new jl,d=new sh(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let h=0;function p(m){d.load(e[m],function(x){l.images[m]=x,h++,6===h&&(l.needsUpdate=!0,t&&t(l))},void 0,o)}for(let m=0;m<e.length;++m)p(m);return l}}class Yf extends cl{constructor(e){super(e)}load(e,t,r,o){const l=new yn,d=new sh(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(e,function(h){l.image=h,l.needsUpdate=!0,void 0!==t&&t(l)},r,o),l}}class Ua extends Jt{constructor(e,t=1){super(),this.type="Light",this.color=new te(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ua.prototype.isLight=!0;(class oh extends Ua{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(Jt.DefaultUp),this.updateMatrix(),this.groundColor=new te(t)}copy(e){return Ua.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const qf=new Fn,Xf=new ue,ah=new ue;class Yu{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Gt(512,512),this.map=null,this.mapPass=null,this.matrix=new Fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dl,this._frameExtents=new Gt(1,1),this._viewportCount=1,this._viewports=[new fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Xf.setFromMatrixPosition(e.matrixWorld),t.position.copy(Xf),ah.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ah),t.updateMatrixWorld(),qf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qf),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ag extends Yu{constructor(){super(new so(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*Pt*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;(r!==t.fov||o!==t.aspect||l!==t.far)&&(t.fov=r,t.aspect=o,t.far=l,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}ag.prototype.isSpotLightShadow=!0;(class Kf extends Ua{constructor(e,t,r=0,o=Math.PI/3,l=0,d=1){super(e,t),this.type="SpotLight",this.position.copy(Jt.DefaultUp),this.updateMatrix(),this.target=new Jt,this.distance=r,this.angle=o,this.penumbra=l,this.decay=d,this.shadow=new ag}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const Zf=new Fn,cc=new ue,lh=new ue;class lg extends Yu{constructor(){super(new so(90,1,.5,500)),this._frameExtents=new Gt(4,2),this._viewportCount=6,this._viewports=[new fn(2,1,1,1),new fn(0,1,1,1),new fn(3,1,1,1),new fn(1,1,1,1),new fn(3,0,1,1),new fn(1,0,1,1)],this._cubeDirections=[new ue(1,0,0),new ue(-1,0,0),new ue(0,0,1),new ue(0,0,-1),new ue(0,1,0),new ue(0,-1,0)],this._cubeUps=[new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,1,0),new ue(0,0,1),new ue(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,l=e.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),cc.setFromMatrixPosition(e.matrixWorld),r.position.copy(cc),lh.copy(r.position),lh.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(lh),r.updateMatrixWorld(),o.makeTranslation(-cc.x,-cc.y,-cc.z),Zf.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zf)}}lg.prototype.isPointLightShadow=!0;class ch extends Ua{constructor(e,t,r=0,o=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new lg}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}ch.prototype.isPointLight=!0;class Jf extends Yu{constructor(){super(new md(-5,5,5,-5,.5,500))}}Jf.prototype.isDirectionalLightShadow=!0;(class uh extends Ua{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Jt.DefaultUp),this.updateMatrix(),this.target=new Jt,this.shadow=new Jf}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class dh extends Ua{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class Qf extends Ua{constructor(e,t,r=10,o=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class ep{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ue)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,l=e.z,d=this.coefficients;return t.copy(d[0]).multiplyScalar(.282095),t.addScaledVector(d[1],.488603*o),t.addScaledVector(d[2],.488603*l),t.addScaledVector(d[3],.488603*r),t.addScaledVector(d[4],r*o*1.092548),t.addScaledVector(d[5],o*l*1.092548),t.addScaledVector(d[6],.315392*(3*l*l-1)),t.addScaledVector(d[7],r*l*1.092548),t.addScaledVector(d[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,l=e.z,d=this.coefficients;return t.copy(d[0]).multiplyScalar(.886227),t.addScaledVector(d[1],1.023328*o),t.addScaledVector(d[2],1.023328*l),t.addScaledVector(d[3],1.023328*r),t.addScaledVector(d[4],.858086*r*o),t.addScaledVector(d[5],.858086*o*l),t.addScaledVector(d[6],.743125*l*l-.247708),t.addScaledVector(d[7],.858086*r*l),t.addScaledVector(d[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+3*o);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+3*o);return e}static getBasisAt(e,t){const r=e.x,o=e.y,l=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*l,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*r*l,t[8]=.546274*(r*r-o*o)}}ep.prototype.isSphericalHarmonics3=!0;class qu extends Ua{constructor(e=new ep,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}qu.prototype.isLightProbe=!0;let fh;(class tp extends bi{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class fg extends cl{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,d=lc.get(e);if(void 0!==d)return l.manager.itemStart(e),setTimeout(function(){t&&t(d),l.manager.itemEnd(e)},0),d;const h={};h.credentials="anonymous"===this.crossOrigin?"same-origin":"include",h.headers=this.requestHeader,fetch(e,h).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(p){lc.add(e,p),t&&t(p),l.manager.itemEnd(e)}).catch(function(p){o&&o(p),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class pg extends cl{constructor(e){super(e)}load(e,t,r,o){const l=this,d=new na(this.manager);d.setResponseType("arraybuffer"),d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(h){try{const p=h.slice(0);(void 0===fh&&(fh=new(window.AudioContext||window.webkitAudioContext)),fh).decodeAudioData(p,function(x){t(x)})}catch(p){o?o(p):console.error(p),l.manager.itemError(e)}},r,o)}}(class Vy extends qu{constructor(e,t,r=1){super(void 0,r);const o=(new te).set(e),l=(new te).set(t),d=new ue(o.r,o.g,o.b),h=new ue(l.r,l.g,l.b),p=Math.sqrt(Math.PI),m=p*Math.sqrt(.75);this.sh.coefficients[0].copy(d).add(h).multiplyScalar(p),this.sh.coefficients[1].copy(d).sub(h).multiplyScalar(m)}}).prototype.isHemisphereLightProbe=!0,class Hy extends qu{constructor(e,t=1){super(void 0,t);const r=(new te).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class wa{constructor(e,t,r){let o,l,d;switch(this.binding=e,this.valueSize=r,t){case"quaternion":o=this._slerp,l=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,l=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,l=e*o+o;let d=this.cumulativeWeight;if(0===d){for(let h=0;h!==o;++h)r[l+h]=r[h];d=t}else d+=t,this._mixBufferRegion(r,l,0,t/d,o);this.cumulativeWeight=d}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,l=this.cumulativeWeight,d=this.cumulativeWeightAdditive,h=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1&&this._mixBufferRegion(r,o,t*this._origIndex,1-l,t),d>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let p=t,m=t+t;p!==m;++p)if(r[p]!==r[p+t]){h.setValue(r,o);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,o=r*this._origIndex;this.binding.getValue(t,o);for(let l=r,d=o;l!==d;++l)t[l]=t[o+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,l){if(o>=.5)for(let d=0;d!==l;++d)e[t+d]=e[r+d]}_slerp(e,t,r,o){Ji.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,l){const d=this._workIndex*l;Ji.multiplyQuaternionsFlat(e,d,e,t,e,r),Ji.slerpFlat(e,t,e,t,e,d,o)}_lerp(e,t,r,o,l){const d=1-o;for(let h=0;h!==l;++h){const p=t+h;e[p]=e[p]*d+e[r+h]*o}}_lerpAdditive(e,t,r,o,l){for(let d=0;d!==l;++d){const h=t+d;e[h]=e[h]+e[r+d]*o}}}const ph="\\[\\]\\.:\\/",_g=new RegExp("["+ph+"]","g"),sp="[^"+ph+"]",Wy="[^"+ph.replace("\\.","")+"]",jy=/((?:WC+[\/:])*)/.source.replace("WC",sp),$y=/(WCOD+)?/.source.replace("WCOD",Wy),op=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sp),Xu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sp),Yy=new RegExp("^"+jy+$y+op+Xu+"$"),yg=["material","materials","bones"];class qy{constructor(e,t,r){const o=r||ts.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=r.length;o!==l;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let ts=(()=>{class c{constructor(t,r,o){this.path=r,this.parsedPath=o||c.parseTrackName(r),this.node=c.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,o){return t&&t.isAnimationObjectGroup?new c.Composite(t,r,o):new c(t,r,o)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(_g,"")}static parseTrackName(t){const r=Yy.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const o={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},l=o.nodeName&&o.nodeName.lastIndexOf(".");if(void 0!==l&&-1!==l){const d=o.nodeName.substring(l+1);-1!==yg.indexOf(d)&&(o.nodeName=o.nodeName.substring(0,l),o.objectName=d)}if(null===o.propertyName||0===o.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return o}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const o=t.skeleton.getBoneByName(r);if(void 0!==o)return o}if(t.children){const o=function(d){for(let h=0;h<d.length;h++){const p=d[h];if(p.name===r||p.uuid===r)return p;const m=o(p.children);if(m)return m}return null},l=o(t.children);if(l)return l}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)t[r++]=o[l]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)o[l]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)o[l]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)o[l]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,o=r.objectName,l=r.propertyName;let d=r.propertyIndex;if(t||(t=c.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(o){let x=r.objectIndex;switch(o){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let M=0;M<t.length;M++)if(t[M].name===x){x=M;break}break;default:if(void 0===t[o])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[o]}if(void 0!==x){if(void 0===t[x])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[x]}}const h=t[l];if(void 0===h)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+l+" but it wasn't found.",t);let p=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(void 0!==d){if("morphTargetInfluences"===l){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[d]&&(d=t.morphTargetDictionary[d])}m=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=d}else void 0!==h.fromArray&&void 0!==h.toArray?(m=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(m=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=l;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][p]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=qy,c})();ts.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ts.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ts.prototype.GetterByBindingType=[ts.prototype._getValue_direct,ts.prototype._getValue_array,ts.prototype._getValue_arrayElement,ts.prototype._getValue_toArray],ts.prototype.SetterByBindingTypeAndVersioning=[[ts.prototype._setValue_direct,ts.prototype._setValue_direct_setNeedsUpdate,ts.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ts.prototype._setValue_array,ts.prototype._setValue_array_setNeedsUpdate,ts.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ts.prototype._setValue_arrayElement,ts.prototype._setValue_arrayElement_setNeedsUpdate,ts.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ts.prototype._setValue_fromArray,ts.prototype._setValue_fromArray_setNeedsUpdate,ts.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mh{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const l=t.tracks,d=l.length,h=new Array(d),p={endingStart:Gs,endingEnd:Gs};for(let m=0;m!==d;++m){const x=l[m].createInterpolant(null);h[m]=x,x.settings=p}this._interpolantSettings=p,this._interpolants=h,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,l=e._clip.duration,h=o/l;e.warp(1,l/o,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,l=o.time,d=this.timeScale;let h=this._timeScaleInterpolant;null===h&&(h=o._lendControlInterpolant(),this._timeScaleInterpolant=h);const p=h.parameterPositions,m=h.sampleValues;return p[0]=l,p[1]=l+r,m[0]=e/d,m[1]=t/d,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled)return void this._updateWeight(e);const l=this._startTime;if(null!==l){const p=(e-l)*r;if(p<0||0===r)return;this._startTime=null,t=r*p}t*=this._updateTimeScale(e);const d=this._updateTime(t),h=this._updateWeight(e);if(h>0){const p=this._interpolants,m=this._propertyBindings;if(2501===this.blendMode)for(let x=0,M=p.length;x!==M;++x)p[x].evaluate(d),m[x].accumulateAdditive(h);else for(let x=0,M=p.length;x!==M;++x)p[x].evaluate(d),m[x].accumulate(o,h)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,l=this._loopCount;const d=2202===r;if(0===e)return-1===l?o:d&&1==(1&l)?t-o:o;if(2200===r){-1===l&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===l&&(e>=0?(l=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d)),o>=t||o<0){const h=Math.floor(o/t);o-=t*h,l+=Math.abs(h);const p=this.repetitions-l;if(p<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===p){const m=e<0;this._setEndings(m,!m,d)}else this._setEndings(!1,!1,d);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=o;if(d&&1==(1&l))return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=br,o.endingEnd=br):(o.endingStart=e?this.zeroSlopeAtStart?br:Gs:2402,o.endingEnd=t?this.zeroSlopeAtEnd?br:Gs:2402)}_scheduleFading(e,t,r){const o=this._mixer,l=o.time;let d=this._weightInterpolant;null===d&&(d=o._lendControlInterpolant(),this._weightInterpolant=d);const h=d.parameterPositions,p=d.sampleValues;return h[0]=l,p[0]=t,h[1]=l+e,p[1]=r,this}}(class Xy extends V{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,l=o.length,d=e._propertyBindings,h=e._interpolants,p=r.uuid,m=this._bindingsByRootAndName;let x=m[p];void 0===x&&(x={},m[p]=x);for(let M=0;M!==l;++M){const D=o[M],R=D.name;let B=x[R];if(void 0!==B)++B.referenceCount,d[M]=B;else{if(B=d[M],void 0!==B){null===B._cacheIndex&&(++B.referenceCount,this._addInactiveBinding(B,p,R));continue}B=new wa(ts.create(r,R,t&&t._propertyBindings[M].binding.parsedPath),D.ValueTypeName,D.getValueSize()),++B.referenceCount,this._addInactiveBinding(B,p,R),d[M]=B}h[M].resultBuffer=B.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,l=this._actionsByClip[o];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];0==l.useCount++&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];0==--l.useCount&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,l=this._actionsByClip;let d=l[t];if(void 0===d)d={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=d;else{const h=d.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=o.length,o.push(e),d.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const l=e._clip.uuid,d=this._actionsByClip,h=d[l],p=h.knownActions,m=p[p.length-1],x=e._byClipCacheIndex;m._byClipCacheIndex=x,p[x]=m,p.pop(),e._byClipCacheIndex=null,delete h.actionByRoot[(e._localRoot||this._root).uuid],0===p.length&&delete d[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];0==--l.referenceCount&&this._removeInactiveBinding(l)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,l=this._bindings;let d=o[t];void 0===d&&(d={},o[t]=d),d[r]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,l=r.path,d=this._bindingsByRootAndName,h=d[o],p=t[t.length-1],m=e._cacheIndex;p._cacheIndex=m,t[m]=p,t.pop(),delete h[l],0===Object.keys(h).length&&delete d[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new ng(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,l=t[o];e.__cacheIndex=o,t[o]=e,l.__cacheIndex=r,t[r]=l}clipAction(e,t,r){const o=t||this._root,l=o.uuid;let d="string"==typeof e?rh.findByName(o,e):e;const h=null!==d?d.uuid:e,p=this._actionsByClip[h];let m=null;if(void 0===r&&(r=null!==d?d.blendMode:2500),void 0!==p){const M=p.actionByRoot[l];if(void 0!==M&&M.blendMode===r)return M;m=p.knownActions[0],null===d&&(d=m._clip)}if(null===d)return null;const x=new mh(this,d,t,r);return this._bindAction(x,m),this._addInactiveAction(x,h,l),x}existingAction(e,t){const r=t||this._root,o=r.uuid,l="string"==typeof e?rh.findByName(r,e):e,h=this._actionsByClip[l?l.uuid:e];return void 0!==h&&h.actionByRoot[o]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,o=this.time+=e*=this.timeScale,l=Math.sign(e),d=this._accuIndex^=1;for(let m=0;m!==r;++m)t[m]._update(o,e,l,d);const h=this._bindings,p=this._nActiveBindings;for(let m=0;m!==p;++m)h[m].apply(d);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,l=o[r];if(void 0!==l){const d=l.knownActions;for(let h=0,p=d.length;h!==p;++h){const m=d[h];this._deactivateAction(m);const x=m._cacheIndex,M=t[t.length-1];m._cacheIndex=null,m._byClipCacheIndex=null,M._cacheIndex=x,t[x]=M,t.pop(),this._removeInactiveBindingsForAction(m)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const d in r){const p=r[d].actionByRoot[t];void 0!==p&&(this._deactivateAction(p),this._removeInactiveAction(p))}const l=this._bindingsByRootAndName[t];if(void 0!==l)for(const d in l){const h=l[d];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class gh{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new gh(void 0===this.value.clone?this.value:this.value.clone())}}(class bg extends Zl{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class _h{constructor(e,t,r=0,o=1/0){this.ray=new da(e,t),this.near=r,this.far=o,this.camera=null,this.layers=new Hl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return yh(e,this,r,t),r.sort(lp),r}intersectObjects(e,t=!0,r=[]){for(let o=0,l=e.length;o<l;o++)yh(e[o],this,r,t);return r.sort(lp),r}}function lp(c,e){return c.distance-e.distance}function yh(c,e,t,r){if(c.layers.test(e.layers)&&c.raycast(e,t),!0===r){const o=c.children;for(let l=0,d=o.length;l<d;l++)yh(o[l],e,t,!0)}}class xg{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ni(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const cp=new Gt;class Yc{constructor(e=new Gt(1/0,1/0),t=new Gt(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=cp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return cp.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Yc.prototype.isBox2=!0;const kl=new ue,vh=new Fn,dp=new Fn;function Eg(c){const e=[];!0===c.isBone&&e.push(c);for(let t=0;t<c.children.length;t++)e.push.apply(e,Eg(c.children[t]));return e}const Zu=new ue,bs=new cu;class Ag extends Il{constructor(e){const t=new bi,r=new Zs({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],d={},h=new te(16755200),p=new te(16711680),m=new te(43775),x=new te(16777215),M=new te(3355443);function D(B,O,F){R(B,F),R(O,F)}function R(B,O){o.push(0,0,0),l.push(O.r,O.g,O.b),void 0===d[B]&&(d[B]=[]),d[B].push(o.length/3-1)}D("n1","n2",h),D("n2","n4",h),D("n4","n3",h),D("n3","n1",h),D("f1","f2",h),D("f2","f4",h),D("f4","f3",h),D("f3","f1",h),D("n1","f1",h),D("n2","f2",h),D("n3","f3",h),D("n4","f4",h),D("p","n1",p),D("p","n2",p),D("p","n3",p),D("p","n4",p),D("u1","u2",m),D("u2","u3",m),D("u3","u1",m),D("c","t",x),D("p","c",M),D("cn1","cn2",M),D("cn3","cn4",M),D("cf1","cf2",M),D("cf3","cf4",M),t.setAttribute("position",new Nn(o,3)),t.setAttribute("color",new Nn(l,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}update(){const e=this.geometry,t=this.pointMap;bs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Cs("c",t,e,bs,0,0,-1),Cs("t",t,e,bs,0,0,1),Cs("n1",t,e,bs,-1,-1,-1),Cs("n2",t,e,bs,1,-1,-1),Cs("n3",t,e,bs,-1,1,-1),Cs("n4",t,e,bs,1,1,-1),Cs("f1",t,e,bs,-1,-1,1),Cs("f2",t,e,bs,1,-1,1),Cs("f3",t,e,bs,-1,1,1),Cs("f4",t,e,bs,1,1,1),Cs("u1",t,e,bs,.7,1.1,-1),Cs("u2",t,e,bs,-.7,1.1,-1),Cs("u3",t,e,bs,0,2,-1),Cs("cf1",t,e,bs,-1,0,1),Cs("cf2",t,e,bs,1,0,1),Cs("cf3",t,e,bs,0,-1,1),Cs("cf4",t,e,bs,0,1,1),Cs("cn1",t,e,bs,-1,0,-1),Cs("cn2",t,e,bs,1,0,-1),Cs("cn3",t,e,bs,0,-1,-1),Cs("cn4",t,e,bs,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Cs(c,e,t,r,o,l,d){Zu.set(o,l,d).unproject(r);const h=e[c];if(void 0!==h){const p=t.getAttribute("position");for(let m=0,x=h.length;m<x;m++)p.setXYZ(h[m],Zu.x,Zu.y,Zu.z)}}class sv extends Il{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],o=new bi;o.setAttribute("position",new Nn(t,3)),o.setAttribute("color",new Nn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(o,new Zs({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,r){const o=new te,l=this.geometry.attributes.color.array;return o.set(e),o.toArray(l,0),o.toArray(l,3),o.set(t),o.toArray(l,6),o.toArray(l,9),o.set(r),o.toArray(l,12),o.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xc{constructor(){this.type="ShapePath",this.color=new te,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Fc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,o){return this.currentPath.quadraticCurveTo(e,t,r,o),this}bezierCurveTo(e,t,r,o,l,d){return this.currentPath.bezierCurveTo(e,t,r,o,l,d),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(ie){const fe=[];for(let oe=0,pe=ie.length;oe<pe;oe++){const Fe=ie[oe],Xe=new Jo;Xe.curves=Fe.curves,fe.push(Xe)}return fe}function o(ie,fe){const oe=fe.length;let pe=!1;for(let Fe=oe-1,Xe=0;Xe<oe;Fe=Xe++){let tt=fe[Fe],kt=fe[Xe],ht=kt.x-tt.x,he=kt.y-tt.y;if(Math.abs(he)>Number.EPSILON){if(he<0&&(tt=fe[Xe],ht=-ht,kt=fe[Fe],he=-he),ie.y<tt.y||ie.y>kt.y)continue;if(ie.y===tt.y){if(ie.x===tt.x)return!0}else{const $e=he*(ie.x-tt.x)-ht*(ie.y-tt.y);if(0===$e)return!0;if($e<0)continue;pe=!pe}}else{if(ie.y!==tt.y)continue;if(kt.x<=ie.x&&ie.x<=tt.x||tt.x<=ie.x&&ie.x<=kt.x)return!0}}return pe}const l=Ba.isClockWise,d=this.subPaths;if(0===d.length)return[];if(!0===t)return r(d);let h,p,m;const x=[];if(1===d.length)return p=d[0],m=new Jo,m.curves=p.curves,x.push(m),x;let M=!l(d[0].getPoints());M=e?!M:M;const D=[],R=[];let F,Z,B=[],O=0;R[O]=void 0,B[O]=[];for(let ie=0,fe=d.length;ie<fe;ie++)p=d[ie],F=p.getPoints(),h=l(F),h=e?!h:h,h?(!M&&R[O]&&O++,R[O]={s:new Jo,p:F},R[O].s.curves=p.curves,M&&O++,B[O]=[]):B[O].push({h:p,p:F[0]});if(!R[0])return r(d);if(R.length>1){let ie=!1,fe=0;for(let oe=0,pe=R.length;oe<pe;oe++)D[oe]=[];for(let oe=0,pe=R.length;oe<pe;oe++){const Fe=B[oe];for(let Xe=0;Xe<Fe.length;Xe++){const tt=Fe[Xe];let kt=!0;for(let ht=0;ht<R.length;ht++)o(tt.p,R[ht].p)&&(oe!==ht&&fe++,kt?(kt=!1,D[ht].push(tt)):ie=!0);kt&&D[oe].push(tt)}}fe>0&&!1===ie&&(B=D)}for(let ie=0,fe=R.length;ie<fe;ie++){m=R[ie].s,x.push(m),Z=B[ie];for(let oe=0,pe=Z.length;oe<pe;oe++)m.holes.push(Z[oe].h)}return x}}const wh=new ArrayBuffer(4),ia=(new Float32Array(wh),new Uint32Array(wh),new Uint32Array(512)),za=new Uint32Array(512);for(let c=0;c<256;++c){const e=c-127;e<-27?(ia[c]=0,ia[256|c]=32768,za[c]=24,za[256|c]=24):e<-14?(ia[c]=1024>>-e-14,ia[256|c]=1024>>-e-14|32768,za[c]=-e-1,za[256|c]=-e-1):e<=15?(ia[c]=e+15<<10,ia[256|c]=e+15<<10|32768,za[c]=13,za[256|c]=13):e<128?(ia[c]=31744,ia[256|c]=64512,za[c]=24,za[256|c]=24):(ia[c]=31744,ia[256|c]=64512,za[c]=13,za[256|c]=13)}const oi=new Uint32Array(2048),Kc=new Uint32Array(64),Tg=new Uint32Array(64);for(let c=1;c<1024;++c){let e=c<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,oi[c]=e|t}for(let c=1024;c<2048;++c)oi[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)Kc[c]=c<<23;Kc[31]=1199570944,Kc[32]=2147483648;for(let c=33;c<63;++c)Kc[c]=2147483648+(c-32<<23);Kc[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(Tg[c]=1024);Zo.create=function(c,e){return console.log("THREE.Curve.create() has been deprecated"),c.prototype=Object.create(Zo.prototype),c.prototype.constructor=c,c.prototype.getPoint=e,c},Fc.prototype.fromPoints=function(c){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(c)},class ev extends Il{constructor(e=10,t=10,r=4473924,o=8947848){r=new te(r),o=new te(o);const l=t/2,d=e/t,h=e/2,p=[],m=[];for(let D=0,R=0,B=-h;D<=t;D++,B+=d){p.push(-h,0,B,h,0,B),p.push(B,0,-h,B,0,h);const O=D===l?r:o;O.toArray(m,R),R+=3,O.toArray(m,R),R+=3,O.toArray(m,R),R+=3,O.toArray(m,R),R+=3}const x=new bi;x.setAttribute("position",new Nn(p,3)),x.setAttribute("color",new Nn(m,3)),super(x,new Zs({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class Jy extends Il{constructor(e){const t=Eg(e),r=new bi,o=[],l=[],d=new te(0,0,1),h=new te(0,1,0);for(let m=0;m<t.length;m++){const x=t[m];x.parent&&x.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(d.r,d.g,d.b),l.push(h.r,h.g,h.b))}r.setAttribute("position",new Nn(o,3)),r.setAttribute("color",new Nn(l,3)),super(r,new Zs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");dp.copy(this.root.matrixWorld).invert();for(let l=0,d=0;l<t.length;l++){const h=t[l];h.parent&&h.parent.isBone&&(vh.multiplyMatrices(dp,h.matrixWorld),kl.setFromMatrixPosition(vh),o.setXYZ(d,kl.x,kl.y,kl.z),vh.multiplyMatrices(dp,h.parent.matrixWorld),kl.setFromMatrixPosition(vh),o.setXYZ(d+1,kl.x,kl.y,kl.z),d+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},cl.prototype.extractUrlBase=function(c){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class hh{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(c)},cl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Yc.prototype.center=function(c){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(c)},Yc.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Yc.prototype.isIntersectionBox=function(c){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},Yc.prototype.size=function(c){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(c)},E.prototype.center=function(c){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(c)},E.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},E.prototype.isIntersectionBox=function(c){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},E.prototype.isIntersectionSphere=function(c){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(c)},E.prototype.size=function(c){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(c)},Do.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},ua.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Dl.prototype.setFromMatrix=function(c){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(c)},xr.prototype.flattenToArrayOffset=function(c,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(c,e)},xr.prototype.multiplyVector3=function(c){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),c.applyMatrix3(this)},xr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},xr.prototype.applyToBufferAttribute=function(c){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),c.applyMatrix3(this)},xr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},xr.prototype.getInverse=function(c){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(c).invert()},Fn.prototype.extractPosition=function(c){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(c)},Fn.prototype.flattenToArrayOffset=function(c,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(c,e)},Fn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ue).setFromMatrixColumn(this,3)},Fn.prototype.setRotationFromQuaternion=function(c){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(c)},Fn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Fn.prototype.multiplyVector3=function(c){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},Fn.prototype.multiplyVector4=function(c){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},Fn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Fn.prototype.rotateAxis=function(c){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),c.transformDirection(this)},Fn.prototype.crossVector=function(c){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},Fn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Fn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Fn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Fn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Fn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Fn.prototype.applyToBufferAttribute=function(c){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},Fn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Fn.prototype.makeFrustum=function(c,e,t,r,o,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(c,e,r,t,o,l)},Fn.prototype.getInverse=function(c){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(c).invert()},Ko.prototype.isIntersectionLine=function(c){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(c)},Ji.prototype.multiplyVector3=function(c){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),c.applyQuaternion(this)},Ji.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},da.prototype.isIntersectionBox=function(c){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},da.prototype.isIntersectionPlane=function(c){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(c)},da.prototype.isIntersectionSphere=function(c){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(c)},cs.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},cs.prototype.barycoordFromPoint=function(c,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(c,e)},cs.prototype.midpoint=function(c){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(c)},cs.prototypenormal=function(c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(c)},cs.prototype.plane=function(c){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(c)},cs.barycoordFromPoint=function(c,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),cs.getBarycoord(c,e,t,r,o)},cs.normal=function(c,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),cs.getNormal(c,e,t,r)},Jo.prototype.extractAllPoints=function(c){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(c)},Jo.prototype.extrude=function(c){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Va(this,c)},Jo.prototype.makeGeometry=function(c){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Uu(this,c)},Gt.prototype.fromAttribute=function(c,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,e,t)},Gt.prototype.distanceToManhattan=function(c){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(c)},Gt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ue.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ue.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ue.prototype.getPositionFromMatrix=function(c){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(c)},ue.prototype.getScaleFromMatrix=function(c){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(c)},ue.prototype.getColumnFromMatrix=function(c,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,c)},ue.prototype.applyProjection=function(c){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(c)},ue.prototype.fromAttribute=function(c,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,e,t)},ue.prototype.distanceToManhattan=function(c){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(c)},ue.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},fn.prototype.fromAttribute=function(c,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,e,t)},fn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Jt.prototype.getChildByName=function(c){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(c)},Jt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Jt.prototype.translate=function(c,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,c)},Jt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Jt.prototype.applyMatrix=function(c){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(c)},Object.defineProperties(Jt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(c){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=c}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),ro.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(ro.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Fm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},so.prototype.setLens=function(c,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(c)},Object.defineProperties(Ua.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(c){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=c}},shadowCameraLeft:{set:function(c){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=c}},shadowCameraRight:{set:function(c){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=c}},shadowCameraTop:{set:function(c){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=c}},shadowCameraBottom:{set:function(c){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=c}},shadowCameraNear:{set:function(c){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=c}},shadowCameraFar:{set:function(c){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=c}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(c){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=c}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(c){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=c}},shadowMapHeight:{set:function(c){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=c}}}),Object.defineProperties(es.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Lo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Lo)}}}),es.prototype.setDynamic=function(c){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===c?Lo:So),this},es.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},es.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},bi.prototype.addIndex=function(c){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(c)},bi.prototype.addAttribute=function(c,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===c?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(c,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(c,new es(arguments[1],arguments[2])))},bi.prototype.addDrawCall=function(c,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(c,e)},bi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},bi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},bi.prototype.removeAttribute=function(c){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(c)},bi.prototype.applyMatrix=function(c){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(c)},Object.defineProperties(bi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Zl.prototype.setDynamic=function(c){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===c?Lo:So),this},Zl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Va.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Va.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Va.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Pd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},gh.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Fs.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new te}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(c){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(c){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=c}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Ao.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(c){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=c}}}),Nr.prototype.clearTarget=function(c,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(c),this.clear(e,t,r)},Nr.prototype.animate=function(c){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(c)},Nr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Nr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Nr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Nr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Nr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Nr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Nr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Nr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Nr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Nr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Nr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Nr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Nr.prototype.enableScissorTest=function(c){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(c)},Nr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Nr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Nr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Nr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Nr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Nr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Nr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Nr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Nr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Nr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Nr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=c}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=c}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(c){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===c?nn:Tt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(Dm.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Jn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=c}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=c}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=c}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=c}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(c){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=c}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(c){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=c}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(c){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=c}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(c){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=c}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(c){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=c}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(c){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=c}}}),class rp extends Jt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(c){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new pg).load(c,function(r){e.setBuffer(r)}),this},cd.prototype.updateCubeMap=function(c,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(c,e)},cd.prototype.clear=function(c,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(c,e,t,r)},Ie.crossOrigin=void 0,Ie.loadTexture=function(c,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new Yf;o.setCrossOrigin(this.crossOrigin);const l=o.load(c,t,void 0,r);return e&&(l.mapping=e),l},Ie.loadTextureCube=function(c,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new $f;o.setCrossOrigin(this.crossOrigin);const l=o.load(c,t,void 0,r);return e&&(l.mapping=e),l},Ie.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ie.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"139"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="139")}},dn=>{dn(dn.s=9332)}]);