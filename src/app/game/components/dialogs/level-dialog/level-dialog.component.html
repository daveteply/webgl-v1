<h2 class="dialog-header">
  <span *ngIf="data.isWelcome; else levelHeader">Welcome!</span>
  <ng-template #levelHeader>Level Complete!</ng-template>
</h2>

<mat-dialog-content>
  <div class="intro" *ngIf="data.isWelcome; else levelContent">
    <mat-accordion>
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          <span>How to play?</span>
        </mat-expansion-panel-header>
        <ng-template matExpansionPanelContent>
          <p>
            Game pieces can move <b>right</b> or <b>left</b>, or be flipped
            <b>up</b> or <b>down</b>. Tap or press a game piece to make a match!
          </p>
          <p>
            Must match <b>at least {{ matchTarget }} pieces</b> top-to-bottom or
            side-to-side.
          </p>
          <p>
            Watch your <b>moves</b>! You may only have a few moves left. Once
            your moves are all used up, the game is over.
          </p>
        </ng-template>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <ng-template #levelContent>
    <table>
      <tr *ngIf="data.stats.fastMatchBonusTotal">
        <td>Speed bonus:</td>
        <td>{{ data.stats.fastMatchBonusTotal | number }}</td>
      </tr>
      <tr *ngIf="data.stats.fastMatchBonusTotal">
        <td>Fastest match time:</td>
        <td>{{ data.stats.fastestMatchMs / 1000 | number: "1.1-1" }}s</td>
      </tr>
      <tr *ngIf="data.stats.moveCount">
        <td>Moves used:</td>
        <td>{{ data.stats.moveCount }}</td>
      </tr>
      <tr *ngIf="data.stats.moveCountEarned">
        <td>Moves earned:</td>
        <td>{{ data.stats.moveCountEarned }}</td>
      </tr>
      <tr>
        <td>Piece count:</td>
        <td>{{ data.stats.pieceCount }}</td>
      </tr>
    </table>
  </ng-template>
  <mat-progress-bar
    class="progress"
    [class.fade-out]="!texturesStillLoading"
    [value]="progress"
  ></mat-progress-bar>
</mat-dialog-content>

<mat-dialog-actions align="center">
  <button
    mat-raised-button
    color="primary"
    mat-dialog-close
    [disabled]="texturesStillLoading"
  >
    <span *ngIf="data.isWelcome; else levelButtonContent">Play!</span>
    <ng-template #levelButtonContent>
      <span>Next Level, let's go!</span>
    </ng-template>
  </button>
</mat-dialog-actions>
