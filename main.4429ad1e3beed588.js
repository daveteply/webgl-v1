var DE=Object.defineProperty,TE=Object.defineProperties,AE=Object.getOwnPropertyDescriptors,Lx=Object.getOwnPropertySymbols,RE=Object.prototype.hasOwnProperty,IE=Object.prototype.propertyIsEnumerable,Ox=(sn,at,q)=>at in sn?DE(sn,at,{enumerable:!0,configurable:!0,writable:!0,value:q}):sn[at]=q,Cn=(sn,at)=>{for(var q in at||(at={}))RE.call(at,q)&&Ox(sn,q,at[q]);if(Lx)for(var q of Lx(at))IE.call(at,q)&&Ox(sn,q,at[q]);return sn},eo=(sn,at)=>TE(sn,AE(at));(self.webpackChunkwebgl_v1=self.webpackChunkwebgl_v1||[]).push([[179],{4760:(sn,at)=>{var B;!function(){"use strict";var y=function(){this.init()};y.prototype={init:function(){var E=this||j;return E._counter=1e3,E._html5AudioPool=[],E.html5PoolSize=10,E._codecs={},E._howls=[],E._muted=!1,E._volume=1,E._canPlayEvent="canplaythrough",E._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,E.masterGain=null,E.noAudio=!1,E.usingWebAudio=!0,E.autoSuspend=!0,E.ctx=null,E.autoUnlock=!0,E._setup(),E},volume:function(E){var $=this||j;if(E=parseFloat(E),$.ctx||Ge(),void 0!==E&&E>=0&&E<=1){if($._volume=E,$._muted)return $;$.usingWebAudio&&$.masterGain.gain.setValueAtTime(E,j.ctx.currentTime);for(var J=0;J<$._howls.length;J++)if(!$._howls[J]._webAudio)for(var de=$._howls[J]._getSoundIds(),Ae=0;Ae<de.length;Ae++){var Be=$._howls[J]._soundById(de[Ae]);Be&&Be._node&&(Be._node.volume=Be._volume*E)}return $}return $._volume},mute:function(E){var $=this||j;$.ctx||Ge(),$._muted=E,$.usingWebAudio&&$.masterGain.gain.setValueAtTime(E?0:$._volume,j.ctx.currentTime);for(var J=0;J<$._howls.length;J++)if(!$._howls[J]._webAudio)for(var de=$._howls[J]._getSoundIds(),Ae=0;Ae<de.length;Ae++){var Be=$._howls[J]._soundById(de[Ae]);Be&&Be._node&&(Be._node.muted=!!E||Be._muted)}return $},stop:function(){for(var E=this||j,$=0;$<E._howls.length;$++)E._howls[$].stop();return E},unload:function(){for(var E=this||j,$=E._howls.length-1;$>=0;$--)E._howls[$].unload();return E.usingWebAudio&&E.ctx&&void 0!==E.ctx.close&&(E.ctx.close(),E.ctx=null,Ge()),E},codecs:function(E){return(this||j)._codecs[E.replace(/^x-/,"")]},_setup:function(){var E=this||j;if(E.state=E.ctx&&E.ctx.state||"suspended",E._autoSuspend(),!E.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(E._canPlayEvent="canplay")}catch(J){E.noAudio=!0}else E.noAudio=!0;try{(new Audio).muted&&(E.noAudio=!0)}catch(J){}return E.noAudio||E._setupCodecs(),E},_setupCodecs:function(){var E=this||j,$=null;try{$="undefined"!=typeof Audio?new Audio:null}catch(Xe){return E}if(!$||"function"!=typeof $.canPlayType)return E;var J=$.canPlayType("audio/mpeg;").replace(/^no$/,""),de=E._navigator?E._navigator.userAgent:"",Ae=de.match(/OPR\/([0-6].)/g),Be=Ae&&parseInt(Ae[0].split("/")[1],10)<33,_e=-1!==de.indexOf("Safari")&&-1===de.indexOf("Chrome"),st=de.match(/Version\/(.*?) /),Lt=_e&&st&&parseInt(st[1],10)<15;return E._codecs={mp3:!(Be||!J&&!$.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!J,opus:!!$.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!$.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!$.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!($.canPlayType('audio/wav; codecs="1"')||$.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!$.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!$.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!($.canPlayType("audio/x-m4a;")||$.canPlayType("audio/m4a;")||$.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!($.canPlayType("audio/x-m4b;")||$.canPlayType("audio/m4b;")||$.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!($.canPlayType("audio/x-mp4;")||$.canPlayType("audio/mp4;")||$.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(Lt||!$.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(Lt||!$.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!$.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!($.canPlayType("audio/x-flac;")||$.canPlayType("audio/flac;")).replace(/^no$/,"")},E},_unlockAudio:function(){var E=this||j;if(!E._audioUnlocked&&E.ctx){E._audioUnlocked=!1,E.autoUnlock=!1,!E._mobileUnloaded&&44100!==E.ctx.sampleRate&&(E._mobileUnloaded=!0,E.unload()),E._scratchBuffer=E.ctx.createBuffer(1,1,22050);var $=function(J){for(;E._html5AudioPool.length<E.html5PoolSize;)try{var de=new Audio;de._unlocked=!0,E._releaseHtml5Audio(de)}catch(Xe){E.noAudio=!0;break}for(var Ae=0;Ae<E._howls.length;Ae++)if(!E._howls[Ae]._webAudio)for(var Be=E._howls[Ae]._getSoundIds(),_e=0;_e<Be.length;_e++){var st=E._howls[Ae]._soundById(Be[_e]);st&&st._node&&!st._node._unlocked&&(st._node._unlocked=!0,st._node.load())}E._autoResume();var Lt=E.ctx.createBufferSource();Lt.buffer=E._scratchBuffer,Lt.connect(E.ctx.destination),void 0===Lt.start?Lt.noteOn(0):Lt.start(0),"function"==typeof E.ctx.resume&&E.ctx.resume(),Lt.onended=function(){Lt.disconnect(0),E._audioUnlocked=!0,document.removeEventListener("touchstart",$,!0),document.removeEventListener("touchend",$,!0),document.removeEventListener("click",$,!0),document.removeEventListener("keydown",$,!0);for(var Xe=0;Xe<E._howls.length;Xe++)E._howls[Xe]._emit("unlock")}};return document.addEventListener("touchstart",$,!0),document.addEventListener("touchend",$,!0),document.addEventListener("click",$,!0),document.addEventListener("keydown",$,!0),E}},_obtainHtml5Audio:function(){var E=this||j;if(E._html5AudioPool.length)return E._html5AudioPool.pop();var $=(new Audio).play();return $&&"undefined"!=typeof Promise&&($ instanceof Promise||"function"==typeof $.then)&&$.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(E){var $=this||j;return E._unlocked&&$._html5AudioPool.push(E),$},_autoSuspend:function(){var E=this;if(E.autoSuspend&&E.ctx&&void 0!==E.ctx.suspend&&j.usingWebAudio){for(var $=0;$<E._howls.length;$++)if(E._howls[$]._webAudio)for(var J=0;J<E._howls[$]._sounds.length;J++)if(!E._howls[$]._sounds[J]._paused)return E;return E._suspendTimer&&clearTimeout(E._suspendTimer),E._suspendTimer=setTimeout(function(){if(E.autoSuspend){E._suspendTimer=null,E.state="suspending";var de=function(){E.state="suspended",E._resumeAfterSuspend&&(delete E._resumeAfterSuspend,E._autoResume())};E.ctx.suspend().then(de,de)}},3e4),E}},_autoResume:function(){var E=this;if(E.ctx&&void 0!==E.ctx.resume&&j.usingWebAudio)return"running"===E.state&&"interrupted"!==E.ctx.state&&E._suspendTimer?(clearTimeout(E._suspendTimer),E._suspendTimer=null):"suspended"===E.state||"running"===E.state&&"interrupted"===E.ctx.state?(E.ctx.resume().then(function(){E.state="running";for(var $=0;$<E._howls.length;$++)E._howls[$]._emit("resume")}),E._suspendTimer&&(clearTimeout(E._suspendTimer),E._suspendTimer=null)):"suspending"===E.state&&(E._resumeAfterSuspend=!0),E}};var j=new y,me=function(E){E.src&&0!==E.src.length?this.init(E):console.error("An array of source files must be passed with any new Howl.")};me.prototype={init:function(E){var $=this;return j.ctx||Ge(),$._autoplay=E.autoplay||!1,$._format="string"!=typeof E.format?E.format:[E.format],$._html5=E.html5||!1,$._muted=E.mute||!1,$._loop=E.loop||!1,$._pool=E.pool||5,$._preload="boolean"!=typeof E.preload&&"metadata"!==E.preload||E.preload,$._rate=E.rate||1,$._sprite=E.sprite||{},$._src="string"!=typeof E.src?E.src:[E.src],$._volume=void 0!==E.volume?E.volume:1,$._xhr={method:E.xhr&&E.xhr.method?E.xhr.method:"GET",headers:E.xhr&&E.xhr.headers?E.xhr.headers:null,withCredentials:!(!E.xhr||!E.xhr.withCredentials)&&E.xhr.withCredentials},$._duration=0,$._state="unloaded",$._sounds=[],$._endTimers={},$._queue=[],$._playLock=!1,$._onend=E.onend?[{fn:E.onend}]:[],$._onfade=E.onfade?[{fn:E.onfade}]:[],$._onload=E.onload?[{fn:E.onload}]:[],$._onloaderror=E.onloaderror?[{fn:E.onloaderror}]:[],$._onplayerror=E.onplayerror?[{fn:E.onplayerror}]:[],$._onpause=E.onpause?[{fn:E.onpause}]:[],$._onplay=E.onplay?[{fn:E.onplay}]:[],$._onstop=E.onstop?[{fn:E.onstop}]:[],$._onmute=E.onmute?[{fn:E.onmute}]:[],$._onvolume=E.onvolume?[{fn:E.onvolume}]:[],$._onrate=E.onrate?[{fn:E.onrate}]:[],$._onseek=E.onseek?[{fn:E.onseek}]:[],$._onunlock=E.onunlock?[{fn:E.onunlock}]:[],$._onresume=[],$._webAudio=j.usingWebAudio&&!$._html5,void 0!==j.ctx&&j.ctx&&j.autoUnlock&&j._unlockAudio(),j._howls.push($),$._autoplay&&$._queue.push({event:"play",action:function(){$.play()}}),$._preload&&"none"!==$._preload&&$.load(),$},load:function(){var E=this,$=null;if(j.noAudio)E._emit("loaderror",null,"No audio support.");else{"string"==typeof E._src&&(E._src=[E._src]);for(var J=0;J<E._src.length;J++){var de,Ae;if(E._format&&E._format[J])de=E._format[J];else{if("string"!=typeof(Ae=E._src[J])){E._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(de=/^data:audio\/([^;,]+);/i.exec(Ae))||(de=/\.([^.]+)$/.exec(Ae.split("?",1)[0])),de&&(de=de[1].toLowerCase())}if(de||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),de&&j.codecs(de)){$=E._src[J];break}}if($)return E._src=$,E._state="loading","https:"===window.location.protocol&&"http:"===$.slice(0,5)&&(E._html5=!0,E._webAudio=!1),new ce(E),E._webAudio&&Se(E),E;E._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(E,$){var J=this,de=null;if("number"==typeof E)de=E,E=null;else{if("string"==typeof E&&"loaded"===J._state&&!J._sprite[E])return null;if(void 0===E&&(E="__default",!J._playLock)){for(var Ae=0,Be=0;Be<J._sounds.length;Be++)J._sounds[Be]._paused&&!J._sounds[Be]._ended&&(Ae++,de=J._sounds[Be]._id);1===Ae?E=null:de=null}}var _e=de?J._soundById(de):J._inactiveSound();if(!_e)return null;if(de&&!E&&(E=_e._sprite||"__default"),"loaded"!==J._state){_e._sprite=E,_e._ended=!1;var st=_e._id;return J._queue.push({event:"play",action:function(){J.play(st)}}),st}if(de&&!_e._paused)return $||J._loadQueue("play"),_e._id;J._webAudio&&j._autoResume();var Lt=Math.max(0,_e._seek>0?_e._seek:J._sprite[E][0]/1e3),Xe=Math.max(0,(J._sprite[E][0]+J._sprite[E][1])/1e3-Lt),He=1e3*Xe/Math.abs(_e._rate),pt=J._sprite[E][0]/1e3,ft=(J._sprite[E][0]+J._sprite[E][1])/1e3;_e._sprite=E,_e._ended=!1;var xt=function(){_e._paused=!1,_e._seek=Lt,_e._start=pt,_e._stop=ft,_e._loop=!(!_e._loop&&!J._sprite[E][2])};if(!(Lt>=ft)){var At=_e._node;if(J._webAudio){var Ze=function(){J._playLock=!1,xt(),J._refreshBuffer(_e),At.gain.setValueAtTime(_e._muted||J._muted?0:_e._volume,j.ctx.currentTime),_e._playStart=j.ctx.currentTime,void 0===At.bufferSource.start?At.bufferSource.noteGrainOn(0,Lt,_e._loop?86400:Xe):At.bufferSource.start(0,Lt,_e._loop?86400:Xe),He!==1/0&&(J._endTimers[_e._id]=setTimeout(J._ended.bind(J,_e),He)),$||setTimeout(function(){J._emit("play",_e._id),J._loadQueue()},0)};"running"===j.state&&"interrupted"!==j.ctx.state?Ze():(J._playLock=!0,J.once("resume",Ze),J._clearTimer(_e._id))}else{var Qe=function(){At.currentTime=Lt,At.muted=_e._muted||J._muted||j._muted||At.muted,At.volume=_e._volume*j.volume(),At.playbackRate=_e._rate;try{var Vt=At.play();if(Vt&&"undefined"!=typeof Promise&&(Vt instanceof Promise||"function"==typeof Vt.then)?(J._playLock=!0,xt(),Vt.then(function(){J._playLock=!1,At._unlocked=!0,$?J._loadQueue():J._emit("play",_e._id)}).catch(function(){J._playLock=!1,J._emit("playerror",_e._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),_e._ended=!0,_e._paused=!0})):$||(J._playLock=!1,xt(),J._emit("play",_e._id)),At.playbackRate=_e._rate,At.paused)return void J._emit("playerror",_e._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==E||_e._loop?J._endTimers[_e._id]=setTimeout(J._ended.bind(J,_e),He):(J._endTimers[_e._id]=function(){J._ended(_e),At.removeEventListener("ended",J._endTimers[_e._id],!1)},At.addEventListener("ended",J._endTimers[_e._id],!1))}catch(yt){J._emit("playerror",_e._id,yt)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===At.src&&(At.src=J._src,At.load());var ut=window&&window.ejecta||!At.readyState&&j._navigator.isCocoonJS;if(At.readyState>=3||ut)Qe();else{J._playLock=!0,J._state="loading";var bt=function(){J._state="loaded",Qe(),At.removeEventListener(j._canPlayEvent,bt,!1)};At.addEventListener(j._canPlayEvent,bt,!1),J._clearTimer(_e._id)}}return _e._id}J._ended(_e)},pause:function(E){var $=this;if("loaded"!==$._state||$._playLock)return $._queue.push({event:"pause",action:function(){$.pause(E)}}),$;for(var J=$._getSoundIds(E),de=0;de<J.length;de++){$._clearTimer(J[de]);var Ae=$._soundById(J[de]);if(Ae&&!Ae._paused&&(Ae._seek=$.seek(J[de]),Ae._rateSeek=0,Ae._paused=!0,$._stopFade(J[de]),Ae._node))if($._webAudio){if(!Ae._node.bufferSource)continue;void 0===Ae._node.bufferSource.stop?Ae._node.bufferSource.noteOff(0):Ae._node.bufferSource.stop(0),$._cleanBuffer(Ae._node)}else(!isNaN(Ae._node.duration)||Ae._node.duration===1/0)&&Ae._node.pause();arguments[1]||$._emit("pause",Ae?Ae._id:null)}return $},stop:function(E,$){var J=this;if("loaded"!==J._state||J._playLock)return J._queue.push({event:"stop",action:function(){J.stop(E)}}),J;for(var de=J._getSoundIds(E),Ae=0;Ae<de.length;Ae++){J._clearTimer(de[Ae]);var Be=J._soundById(de[Ae]);Be&&(Be._seek=Be._start||0,Be._rateSeek=0,Be._paused=!0,Be._ended=!0,J._stopFade(de[Ae]),Be._node&&(J._webAudio?Be._node.bufferSource&&(void 0===Be._node.bufferSource.stop?Be._node.bufferSource.noteOff(0):Be._node.bufferSource.stop(0),J._cleanBuffer(Be._node)):(!isNaN(Be._node.duration)||Be._node.duration===1/0)&&(Be._node.currentTime=Be._start||0,Be._node.pause(),Be._node.duration===1/0&&J._clearSound(Be._node))),$||J._emit("stop",Be._id))}return J},mute:function(E,$){var J=this;if("loaded"!==J._state||J._playLock)return J._queue.push({event:"mute",action:function(){J.mute(E,$)}}),J;if(void 0===$){if("boolean"!=typeof E)return J._muted;J._muted=E}for(var de=J._getSoundIds($),Ae=0;Ae<de.length;Ae++){var Be=J._soundById(de[Ae]);Be&&(Be._muted=E,Be._interval&&J._stopFade(Be._id),J._webAudio&&Be._node?Be._node.gain.setValueAtTime(E?0:Be._volume,j.ctx.currentTime):Be._node&&(Be._node.muted=!!j._muted||E),J._emit("mute",Be._id))}return J},volume:function(){var J,de,_e,E=this,$=arguments;if(0===$.length)return E._volume;if(1===$.length||2===$.length&&void 0===$[1]){var Ae=E._getSoundIds(),Be=Ae.indexOf($[0]);Be>=0?de=parseInt($[0],10):J=parseFloat($[0])}else $.length>=2&&(J=parseFloat($[0]),de=parseInt($[1],10));if(!(void 0!==J&&J>=0&&J<=1))return(_e=de?E._soundById(de):E._sounds[0])?_e._volume:0;if("loaded"!==E._state||E._playLock)return E._queue.push({event:"volume",action:function(){E.volume.apply(E,$)}}),E;void 0===de&&(E._volume=J),de=E._getSoundIds(de);for(var st=0;st<de.length;st++)(_e=E._soundById(de[st]))&&(_e._volume=J,$[2]||E._stopFade(de[st]),E._webAudio&&_e._node&&!_e._muted?_e._node.gain.setValueAtTime(J,j.ctx.currentTime):_e._node&&!_e._muted&&(_e._node.volume=J*j.volume()),E._emit("volume",_e._id));return E},fade:function(E,$,J,de){var Ae=this;if("loaded"!==Ae._state||Ae._playLock)return Ae._queue.push({event:"fade",action:function(){Ae.fade(E,$,J,de)}}),Ae;E=Math.min(Math.max(0,parseFloat(E)),1),$=Math.min(Math.max(0,parseFloat($)),1),J=parseFloat(J),Ae.volume(E,de);for(var Be=Ae._getSoundIds(de),_e=0;_e<Be.length;_e++){var st=Ae._soundById(Be[_e]);if(st){if(de||Ae._stopFade(Be[_e]),Ae._webAudio&&!st._muted){var Lt=j.ctx.currentTime,Xe=Lt+J/1e3;st._volume=E,st._node.gain.setValueAtTime(E,Lt),st._node.gain.linearRampToValueAtTime($,Xe)}Ae._startFadeInterval(st,E,$,J,Be[_e],void 0===de)}}return Ae},_startFadeInterval:function(E,$,J,de,Ae,Be){var _e=this,st=$,Lt=J-$,Xe=Math.abs(Lt/.01),He=Math.max(4,Xe>0?de/Xe:de),pt=Date.now();E._fadeTo=J,E._interval=setInterval(function(){var ft=(Date.now()-pt)/de;pt=Date.now(),st+=Lt*ft,st=Math.round(100*st)/100,st=Lt<0?Math.max(J,st):Math.min(J,st),_e._webAudio?E._volume=st:_e.volume(st,E._id,!0),Be&&(_e._volume=st),(J<$&&st<=J||J>$&&st>=J)&&(clearInterval(E._interval),E._interval=null,E._fadeTo=null,_e.volume(J,E._id),_e._emit("fade",E._id))},He)},_stopFade:function(E){var $=this,J=$._soundById(E);return J&&J._interval&&($._webAudio&&J._node.gain.cancelScheduledValues(j.ctx.currentTime),clearInterval(J._interval),J._interval=null,$.volume(J._fadeTo,E),J._fadeTo=null,$._emit("fade",E)),$},loop:function(){var J,de,Ae,E=this,$=arguments;if(0===$.length)return E._loop;if(1===$.length){if("boolean"!=typeof $[0])return!!(Ae=E._soundById(parseInt($[0],10)))&&Ae._loop;E._loop=J=$[0]}else 2===$.length&&(J=$[0],de=parseInt($[1],10));for(var Be=E._getSoundIds(de),_e=0;_e<Be.length;_e++)(Ae=E._soundById(Be[_e]))&&(Ae._loop=J,E._webAudio&&Ae._node&&Ae._node.bufferSource&&(Ae._node.bufferSource.loop=J,J&&(Ae._node.bufferSource.loopStart=Ae._start||0,Ae._node.bufferSource.loopEnd=Ae._stop,E.playing(Be[_e])&&(E.pause(Be[_e],!0),E.play(Be[_e],!0)))));return E},rate:function(){var J,de,_e,E=this,$=arguments;if(0===$.length)de=E._sounds[0]._id;else if(1===$.length){var Ae=E._getSoundIds(),Be=Ae.indexOf($[0]);Be>=0?de=parseInt($[0],10):J=parseFloat($[0])}else 2===$.length&&(J=parseFloat($[0]),de=parseInt($[1],10));if("number"!=typeof J)return(_e=E._soundById(de))?_e._rate:E._rate;if("loaded"!==E._state||E._playLock)return E._queue.push({event:"rate",action:function(){E.rate.apply(E,$)}}),E;void 0===de&&(E._rate=J),de=E._getSoundIds(de);for(var st=0;st<de.length;st++)if(_e=E._soundById(de[st])){E.playing(de[st])&&(_e._rateSeek=E.seek(de[st]),_e._playStart=E._webAudio?j.ctx.currentTime:_e._playStart),_e._rate=J,E._webAudio&&_e._node&&_e._node.bufferSource?_e._node.bufferSource.playbackRate.setValueAtTime(J,j.ctx.currentTime):_e._node&&(_e._node.playbackRate=J);var Lt=E.seek(de[st]),Xe=(E._sprite[_e._sprite][0]+E._sprite[_e._sprite][1])/1e3-Lt,He=1e3*Xe/Math.abs(_e._rate);(E._endTimers[de[st]]||!_e._paused)&&(E._clearTimer(de[st]),E._endTimers[de[st]]=setTimeout(E._ended.bind(E,_e),He)),E._emit("rate",_e._id)}return E},seek:function(){var J,de,E=this,$=arguments;if(0===$.length)E._sounds.length&&(de=E._sounds[0]._id);else if(1===$.length){var Ae=E._getSoundIds(),Be=Ae.indexOf($[0]);Be>=0?de=parseInt($[0],10):E._sounds.length&&(de=E._sounds[0]._id,J=parseFloat($[0]))}else 2===$.length&&(J=parseFloat($[0]),de=parseInt($[1],10));if(void 0===de)return 0;if("number"==typeof J&&("loaded"!==E._state||E._playLock))return E._queue.push({event:"seek",action:function(){E.seek.apply(E,$)}}),E;var _e=E._soundById(de);if(_e){if(!("number"==typeof J&&J>=0)){if(E._webAudio){var He=E.playing(de)?j.ctx.currentTime-_e._playStart:0,pt=_e._rateSeek?_e._rateSeek-_e._seek:0;return _e._seek+(pt+He*Math.abs(_e._rate))}return _e._node.currentTime}var st=E.playing(de);st&&E.pause(de,!0),_e._seek=J,_e._ended=!1,E._clearTimer(de),!E._webAudio&&_e._node&&!isNaN(_e._node.duration)&&(_e._node.currentTime=J);var Lt=function(){st&&E.play(de,!0),E._emit("seek",de)};if(st&&!E._webAudio){var Xe=function(){E._playLock?setTimeout(Xe,0):Lt()};setTimeout(Xe,0)}else Lt()}return E},playing:function(E){var $=this;if("number"==typeof E){var J=$._soundById(E);return!!J&&!J._paused}for(var de=0;de<$._sounds.length;de++)if(!$._sounds[de]._paused)return!0;return!1},duration:function(E){var $=this,J=$._duration,de=$._soundById(E);return de&&(J=$._sprite[de._sprite][1]/1e3),J},state:function(){return this._state},unload:function(){for(var E=this,$=E._sounds,J=0;J<$.length;J++)$[J]._paused||E.stop($[J]._id),E._webAudio||(E._clearSound($[J]._node),$[J]._node.removeEventListener("error",$[J]._errorFn,!1),$[J]._node.removeEventListener(j._canPlayEvent,$[J]._loadFn,!1),$[J]._node.removeEventListener("ended",$[J]._endFn,!1),j._releaseHtml5Audio($[J]._node)),delete $[J]._node,E._clearTimer($[J]._id);var de=j._howls.indexOf(E);de>=0&&j._howls.splice(de,1);var Ae=!0;for(J=0;J<j._howls.length;J++)if(j._howls[J]._src===E._src||E._src.indexOf(j._howls[J]._src)>=0){Ae=!1;break}return Oe&&Ae&&delete Oe[E._src],j.noAudio=!1,E._state="unloaded",E._sounds=[],E=null,null},on:function(E,$,J,de){return"function"==typeof $&&this["_on"+E].push(de?{id:J,fn:$,once:de}:{id:J,fn:$}),this},off:function(E,$,J){var de=this,Ae=de["_on"+E],Be=0;if("number"==typeof $&&(J=$,$=null),$||J)for(Be=0;Be<Ae.length;Be++){var _e=J===Ae[Be].id;if($===Ae[Be].fn&&_e||!$&&_e){Ae.splice(Be,1);break}}else if(E)de["_on"+E]=[];else{var st=Object.keys(de);for(Be=0;Be<st.length;Be++)0===st[Be].indexOf("_on")&&Array.isArray(de[st[Be]])&&(de[st[Be]]=[])}return de},once:function(E,$,J){return this.on(E,$,J,1),this},_emit:function(E,$,J){for(var de=this,Ae=de["_on"+E],Be=Ae.length-1;Be>=0;Be--)(!Ae[Be].id||Ae[Be].id===$||"load"===E)&&(setTimeout(function(_e){_e.call(this,$,J)}.bind(de,Ae[Be].fn),0),Ae[Be].once&&de.off(E,Ae[Be].fn,Ae[Be].id));return de._loadQueue(E),de},_loadQueue:function(E){var $=this;if($._queue.length>0){var J=$._queue[0];J.event===E&&($._queue.shift(),$._loadQueue()),E||J.action()}return $},_ended:function(E){var $=this,J=E._sprite;if(!$._webAudio&&E._node&&!E._node.paused&&!E._node.ended&&E._node.currentTime<E._stop)return setTimeout($._ended.bind($,E),100),$;var de=!(!E._loop&&!$._sprite[J][2]);if($._emit("end",E._id),!$._webAudio&&de&&$.stop(E._id,!0).play(E._id),$._webAudio&&de){$._emit("play",E._id),E._seek=E._start||0,E._rateSeek=0,E._playStart=j.ctx.currentTime;var Ae=1e3*(E._stop-E._start)/Math.abs(E._rate);$._endTimers[E._id]=setTimeout($._ended.bind($,E),Ae)}return $._webAudio&&!de&&(E._paused=!0,E._ended=!0,E._seek=E._start||0,E._rateSeek=0,$._clearTimer(E._id),$._cleanBuffer(E._node),j._autoSuspend()),!$._webAudio&&!de&&$.stop(E._id,!0),$},_clearTimer:function(E){var $=this;if($._endTimers[E]){if("function"!=typeof $._endTimers[E])clearTimeout($._endTimers[E]);else{var J=$._soundById(E);J&&J._node&&J._node.removeEventListener("ended",$._endTimers[E],!1)}delete $._endTimers[E]}return $},_soundById:function(E){for(var $=this,J=0;J<$._sounds.length;J++)if(E===$._sounds[J]._id)return $._sounds[J];return null},_inactiveSound:function(){var E=this;E._drain();for(var $=0;$<E._sounds.length;$++)if(E._sounds[$]._ended)return E._sounds[$].reset();return new ce(E)},_drain:function(){var E=this,$=E._pool,J=0,de=0;if(!(E._sounds.length<$)){for(de=0;de<E._sounds.length;de++)E._sounds[de]._ended&&J++;for(de=E._sounds.length-1;de>=0;de--){if(J<=$)return;E._sounds[de]._ended&&(E._webAudio&&E._sounds[de]._node&&E._sounds[de]._node.disconnect(0),E._sounds.splice(de,1),J--)}}},_getSoundIds:function(E){if(void 0===E){for(var J=[],de=0;de<this._sounds.length;de++)J.push(this._sounds[de]._id);return J}return[E]},_refreshBuffer:function(E){return E._node.bufferSource=j.ctx.createBufferSource(),E._node.bufferSource.buffer=Oe[this._src],E._node.bufferSource.connect(E._panner?E._panner:E._node),E._node.bufferSource.loop=E._loop,E._loop&&(E._node.bufferSource.loopStart=E._start||0,E._node.bufferSource.loopEnd=E._stop||0),E._node.bufferSource.playbackRate.setValueAtTime(E._rate,j.ctx.currentTime),this},_cleanBuffer:function(E){var J=j._navigator&&j._navigator.vendor.indexOf("Apple")>=0;if(j._scratchBuffer&&E.bufferSource&&(E.bufferSource.onended=null,E.bufferSource.disconnect(0),J))try{E.bufferSource.buffer=j._scratchBuffer}catch(de){}return E.bufferSource=null,this},_clearSound:function(E){/MSIE |Trident\//.test(j._navigator&&j._navigator.userAgent)||(E.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var ce=function(E){this._parent=E,this.init()};ce.prototype={init:function(){var E=this,$=E._parent;return E._muted=$._muted,E._loop=$._loop,E._volume=$._volume,E._rate=$._rate,E._seek=0,E._paused=!0,E._ended=!0,E._sprite="__default",E._id=++j._counter,$._sounds.push(E),E.create(),E},create:function(){var E=this,$=E._parent,J=j._muted||E._muted||E._parent._muted?0:E._volume;return $._webAudio?(E._node=void 0===j.ctx.createGain?j.ctx.createGainNode():j.ctx.createGain(),E._node.gain.setValueAtTime(J,j.ctx.currentTime),E._node.paused=!0,E._node.connect(j.masterGain)):j.noAudio||(E._node=j._obtainHtml5Audio(),E._errorFn=E._errorListener.bind(E),E._node.addEventListener("error",E._errorFn,!1),E._loadFn=E._loadListener.bind(E),E._node.addEventListener(j._canPlayEvent,E._loadFn,!1),E._endFn=E._endListener.bind(E),E._node.addEventListener("ended",E._endFn,!1),E._node.src=$._src,E._node.preload=!0===$._preload?"auto":$._preload,E._node.volume=J*j.volume(),E._node.load()),E},reset:function(){var E=this,$=E._parent;return E._muted=$._muted,E._loop=$._loop,E._volume=$._volume,E._rate=$._rate,E._seek=0,E._rateSeek=0,E._paused=!0,E._ended=!0,E._sprite="__default",E._id=++j._counter,E},_errorListener:function(){var E=this;E._parent._emit("loaderror",E._id,E._node.error?E._node.error.code:0),E._node.removeEventListener("error",E._errorFn,!1)},_loadListener:function(){var E=this,$=E._parent;$._duration=Math.ceil(10*E._node.duration)/10,0===Object.keys($._sprite).length&&($._sprite={__default:[0,1e3*$._duration]}),"loaded"!==$._state&&($._state="loaded",$._emit("load"),$._loadQueue()),E._node.removeEventListener(j._canPlayEvent,E._loadFn,!1)},_endListener:function(){var E=this,$=E._parent;$._duration===1/0&&($._duration=Math.ceil(10*E._node.duration)/10,$._sprite.__default[1]===1/0&&($._sprite.__default[1]=1e3*$._duration),$._ended(E)),E._node.removeEventListener("ended",E._endFn,!1)}};var Oe={},Se=function(E){var $=E._src;if(Oe[$])return E._duration=Oe[$].duration,void Me(E);if(/^data:[^;]+;base64,/.test($)){for(var J=atob($.split(",")[1]),de=new Uint8Array(J.length),Ae=0;Ae<J.length;++Ae)de[Ae]=J.charCodeAt(Ae);Ie(de.buffer,E)}else{var Be=new XMLHttpRequest;Be.open(E._xhr.method,$,!0),Be.withCredentials=E._xhr.withCredentials,Be.responseType="arraybuffer",E._xhr.headers&&Object.keys(E._xhr.headers).forEach(function(_e){Be.setRequestHeader(_e,E._xhr.headers[_e])}),Be.onload=function(){var _e=(Be.status+"")[0];"0"===_e||"2"===_e||"3"===_e?Ie(Be.response,E):E._emit("loaderror",null,"Failed loading audio file with status: "+Be.status+".")},Be.onerror=function(){E._webAudio&&(E._html5=!0,E._webAudio=!1,E._sounds=[],delete Oe[$],E.load())},Ye(Be)}},Ye=function(E){try{E.send()}catch($){E.onerror()}},Ie=function(E,$){var J=function(){$._emit("loaderror",null,"Decoding audio data failed.")},de=function(Ae){Ae&&$._sounds.length>0?(Oe[$._src]=Ae,Me($,Ae)):J()};"undefined"!=typeof Promise&&1===j.ctx.decodeAudioData.length?j.ctx.decodeAudioData(E).then(de).catch(J):j.ctx.decodeAudioData(E,de,J)},Me=function(E,$){$&&!E._duration&&(E._duration=$.duration),0===Object.keys(E._sprite).length&&(E._sprite={__default:[0,1e3*E._duration]}),"loaded"!==E._state&&(E._state="loaded",E._emit("load"),E._loadQueue())},Ge=function(){if(j.usingWebAudio){try{"undefined"!=typeof AudioContext?j.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?j.ctx=new webkitAudioContext:j.usingWebAudio=!1}catch(Ae){j.usingWebAudio=!1}j.ctx||(j.usingWebAudio=!1);var E=/iP(hone|od|ad)/.test(j._navigator&&j._navigator.platform),$=j._navigator&&j._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),J=$?parseInt($[1],10):null;if(E&&J&&J<9){var de=/safari/.test(j._navigator&&j._navigator.userAgent.toLowerCase());j._navigator&&!de&&(j.usingWebAudio=!1)}j.usingWebAudio&&(j.masterGain=void 0===j.ctx.createGain?j.ctx.createGainNode():j.ctx.createGain(),j.masterGain.gain.setValueAtTime(j._muted?0:j._volume,j.ctx.currentTime),j.masterGain.connect(j.ctx.destination)),j._setup()}};void 0!==(B=function(){return{Howler:j,Howl:me}}.apply(at,[]))&&(sn.exports=B),at.Howler=j,at.Howl=me,"undefined"!=typeof global?(global.HowlerGlobal=y,global.Howler=j,global.Howl=me,global.Sound=ce):"undefined"!=typeof window&&(window.HowlerGlobal=y,window.Howler=j,window.Howl=me,window.Sound=ce)}(),function(){"use strict";var j;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(j){var me=this;if(!me.ctx||!me.ctx.listener)return me;for(var ce=me._howls.length-1;ce>=0;ce--)me._howls[ce].stereo(j);return me},HowlerGlobal.prototype.pos=function(j,me,ce){var Oe=this;return Oe.ctx&&Oe.ctx.listener?"number"!=typeof j?Oe._pos:(Oe._pos=[j,me="number"!=typeof me?Oe._pos[1]:me,ce="number"!=typeof ce?Oe._pos[2]:ce],void 0!==Oe.ctx.listener.positionX?(Oe.ctx.listener.positionX.setTargetAtTime(Oe._pos[0],Howler.ctx.currentTime,.1),Oe.ctx.listener.positionY.setTargetAtTime(Oe._pos[1],Howler.ctx.currentTime,.1),Oe.ctx.listener.positionZ.setTargetAtTime(Oe._pos[2],Howler.ctx.currentTime,.1)):Oe.ctx.listener.setPosition(Oe._pos[0],Oe._pos[1],Oe._pos[2]),Oe):Oe},HowlerGlobal.prototype.orientation=function(j,me,ce,Oe,Se,Ye){var Ie=this;if(!Ie.ctx||!Ie.ctx.listener)return Ie;var Me=Ie._orientation;return"number"!=typeof j?Me:(Ie._orientation=[j,me="number"!=typeof me?Me[1]:me,ce="number"!=typeof ce?Me[2]:ce,Oe="number"!=typeof Oe?Me[3]:Oe,Se="number"!=typeof Se?Me[4]:Se,Ye="number"!=typeof Ye?Me[5]:Ye],void 0!==Ie.ctx.listener.forwardX?(Ie.ctx.listener.forwardX.setTargetAtTime(j,Howler.ctx.currentTime,.1),Ie.ctx.listener.forwardY.setTargetAtTime(me,Howler.ctx.currentTime,.1),Ie.ctx.listener.forwardZ.setTargetAtTime(ce,Howler.ctx.currentTime,.1),Ie.ctx.listener.upX.setTargetAtTime(Oe,Howler.ctx.currentTime,.1),Ie.ctx.listener.upY.setTargetAtTime(Se,Howler.ctx.currentTime,.1),Ie.ctx.listener.upZ.setTargetAtTime(Ye,Howler.ctx.currentTime,.1)):Ie.ctx.listener.setOrientation(j,me,ce,Oe,Se,Ye),Ie)},Howl.prototype.init=(j=Howl.prototype.init,function(me){var ce=this;return ce._orientation=me.orientation||[1,0,0],ce._stereo=me.stereo||null,ce._pos=me.pos||null,ce._pannerAttr={coneInnerAngle:void 0!==me.coneInnerAngle?me.coneInnerAngle:360,coneOuterAngle:void 0!==me.coneOuterAngle?me.coneOuterAngle:360,coneOuterGain:void 0!==me.coneOuterGain?me.coneOuterGain:0,distanceModel:void 0!==me.distanceModel?me.distanceModel:"inverse",maxDistance:void 0!==me.maxDistance?me.maxDistance:1e4,panningModel:void 0!==me.panningModel?me.panningModel:"HRTF",refDistance:void 0!==me.refDistance?me.refDistance:1,rolloffFactor:void 0!==me.rolloffFactor?me.rolloffFactor:1},ce._onstereo=me.onstereo?[{fn:me.onstereo}]:[],ce._onpos=me.onpos?[{fn:me.onpos}]:[],ce._onorientation=me.onorientation?[{fn:me.onorientation}]:[],j.call(this,me)}),Howl.prototype.stereo=function(j,me){var ce=this;if(!ce._webAudio)return ce;if("loaded"!==ce._state)return ce._queue.push({event:"stereo",action:function(){ce.stereo(j,me)}}),ce;var Oe=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===me){if("number"!=typeof j)return ce._stereo;ce._stereo=j,ce._pos=[j,0,0]}for(var Se=ce._getSoundIds(me),Ye=0;Ye<Se.length;Ye++){var Ie=ce._soundById(Se[Ye]);if(Ie){if("number"!=typeof j)return Ie._stereo;Ie._stereo=j,Ie._pos=[j,0,0],Ie._node&&(Ie._pannerAttr.panningModel="equalpower",(!Ie._panner||!Ie._panner.pan)&&y(Ie,Oe),"spatial"===Oe?void 0!==Ie._panner.positionX?(Ie._panner.positionX.setValueAtTime(j,Howler.ctx.currentTime),Ie._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),Ie._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):Ie._panner.setPosition(j,0,0):Ie._panner.pan.setValueAtTime(j,Howler.ctx.currentTime)),ce._emit("stereo",Ie._id)}}return ce},Howl.prototype.pos=function(j,me,ce,Oe){var Se=this;if(!Se._webAudio)return Se;if("loaded"!==Se._state)return Se._queue.push({event:"pos",action:function(){Se.pos(j,me,ce,Oe)}}),Se;if(me="number"!=typeof me?0:me,ce="number"!=typeof ce?-.5:ce,void 0===Oe){if("number"!=typeof j)return Se._pos;Se._pos=[j,me,ce]}for(var Ye=Se._getSoundIds(Oe),Ie=0;Ie<Ye.length;Ie++){var Me=Se._soundById(Ye[Ie]);if(Me){if("number"!=typeof j)return Me._pos;Me._pos=[j,me,ce],Me._node&&((!Me._panner||Me._panner.pan)&&y(Me,"spatial"),void 0!==Me._panner.positionX?(Me._panner.positionX.setValueAtTime(j,Howler.ctx.currentTime),Me._panner.positionY.setValueAtTime(me,Howler.ctx.currentTime),Me._panner.positionZ.setValueAtTime(ce,Howler.ctx.currentTime)):Me._panner.setPosition(j,me,ce)),Se._emit("pos",Me._id)}}return Se},Howl.prototype.orientation=function(j,me,ce,Oe){var Se=this;if(!Se._webAudio)return Se;if("loaded"!==Se._state)return Se._queue.push({event:"orientation",action:function(){Se.orientation(j,me,ce,Oe)}}),Se;if(me="number"!=typeof me?Se._orientation[1]:me,ce="number"!=typeof ce?Se._orientation[2]:ce,void 0===Oe){if("number"!=typeof j)return Se._orientation;Se._orientation=[j,me,ce]}for(var Ye=Se._getSoundIds(Oe),Ie=0;Ie<Ye.length;Ie++){var Me=Se._soundById(Ye[Ie]);if(Me){if("number"!=typeof j)return Me._orientation;Me._orientation=[j,me,ce],Me._node&&(Me._panner||(Me._pos||(Me._pos=Se._pos||[0,0,-.5]),y(Me,"spatial")),void 0!==Me._panner.orientationX?(Me._panner.orientationX.setValueAtTime(j,Howler.ctx.currentTime),Me._panner.orientationY.setValueAtTime(me,Howler.ctx.currentTime),Me._panner.orientationZ.setValueAtTime(ce,Howler.ctx.currentTime)):Me._panner.setOrientation(j,me,ce)),Se._emit("orientation",Me._id)}}return Se},Howl.prototype.pannerAttr=function(){var ce,Oe,Se,j=this,me=arguments;if(!j._webAudio)return j;if(0===me.length)return j._pannerAttr;if(1===me.length){if("object"!=typeof me[0])return(Se=j._soundById(parseInt(me[0],10)))?Se._pannerAttr:j._pannerAttr;ce=me[0],void 0===Oe&&(ce.pannerAttr||(ce.pannerAttr={coneInnerAngle:ce.coneInnerAngle,coneOuterAngle:ce.coneOuterAngle,coneOuterGain:ce.coneOuterGain,distanceModel:ce.distanceModel,maxDistance:ce.maxDistance,refDistance:ce.refDistance,rolloffFactor:ce.rolloffFactor,panningModel:ce.panningModel}),j._pannerAttr={coneInnerAngle:void 0!==ce.pannerAttr.coneInnerAngle?ce.pannerAttr.coneInnerAngle:j._coneInnerAngle,coneOuterAngle:void 0!==ce.pannerAttr.coneOuterAngle?ce.pannerAttr.coneOuterAngle:j._coneOuterAngle,coneOuterGain:void 0!==ce.pannerAttr.coneOuterGain?ce.pannerAttr.coneOuterGain:j._coneOuterGain,distanceModel:void 0!==ce.pannerAttr.distanceModel?ce.pannerAttr.distanceModel:j._distanceModel,maxDistance:void 0!==ce.pannerAttr.maxDistance?ce.pannerAttr.maxDistance:j._maxDistance,refDistance:void 0!==ce.pannerAttr.refDistance?ce.pannerAttr.refDistance:j._refDistance,rolloffFactor:void 0!==ce.pannerAttr.rolloffFactor?ce.pannerAttr.rolloffFactor:j._rolloffFactor,panningModel:void 0!==ce.pannerAttr.panningModel?ce.pannerAttr.panningModel:j._panningModel})}else 2===me.length&&(ce=me[0],Oe=parseInt(me[1],10));for(var Ye=j._getSoundIds(Oe),Ie=0;Ie<Ye.length;Ie++)if(Se=j._soundById(Ye[Ie])){var Me=Se._pannerAttr;Me={coneInnerAngle:void 0!==ce.coneInnerAngle?ce.coneInnerAngle:Me.coneInnerAngle,coneOuterAngle:void 0!==ce.coneOuterAngle?ce.coneOuterAngle:Me.coneOuterAngle,coneOuterGain:void 0!==ce.coneOuterGain?ce.coneOuterGain:Me.coneOuterGain,distanceModel:void 0!==ce.distanceModel?ce.distanceModel:Me.distanceModel,maxDistance:void 0!==ce.maxDistance?ce.maxDistance:Me.maxDistance,refDistance:void 0!==ce.refDistance?ce.refDistance:Me.refDistance,rolloffFactor:void 0!==ce.rolloffFactor?ce.rolloffFactor:Me.rolloffFactor,panningModel:void 0!==ce.panningModel?ce.panningModel:Me.panningModel};var Ge=Se._panner;Ge?(Ge.coneInnerAngle=Me.coneInnerAngle,Ge.coneOuterAngle=Me.coneOuterAngle,Ge.coneOuterGain=Me.coneOuterGain,Ge.distanceModel=Me.distanceModel,Ge.maxDistance=Me.maxDistance,Ge.refDistance=Me.refDistance,Ge.rolloffFactor=Me.rolloffFactor,Ge.panningModel=Me.panningModel):(Se._pos||(Se._pos=j._pos||[0,0,-.5]),y(Se,"spatial"))}return j},Sound.prototype.init=function(j){return function(){var me=this,ce=me._parent;me._orientation=ce._orientation,me._stereo=ce._stereo,me._pos=ce._pos,me._pannerAttr=ce._pannerAttr,j.call(this),me._stereo?ce.stereo(me._stereo):me._pos&&ce.pos(me._pos[0],me._pos[1],me._pos[2],me._id)}}(Sound.prototype.init),Sound.prototype.reset=function(j){return function(){var me=this,ce=me._parent;return me._orientation=ce._orientation,me._stereo=ce._stereo,me._pos=ce._pos,me._pannerAttr=ce._pannerAttr,me._stereo?ce.stereo(me._stereo):me._pos?ce.pos(me._pos[0],me._pos[1],me._pos[2],me._id):me._panner&&(me._panner.disconnect(0),me._panner=void 0,ce._refreshBuffer(me)),j.call(this)}}(Sound.prototype.reset);var y=function(j,me){"spatial"===(me=me||"spatial")?(j._panner=Howler.ctx.createPanner(),j._panner.coneInnerAngle=j._pannerAttr.coneInnerAngle,j._panner.coneOuterAngle=j._pannerAttr.coneOuterAngle,j._panner.coneOuterGain=j._pannerAttr.coneOuterGain,j._panner.distanceModel=j._pannerAttr.distanceModel,j._panner.maxDistance=j._pannerAttr.maxDistance,j._panner.refDistance=j._pannerAttr.refDistance,j._panner.rolloffFactor=j._pannerAttr.rolloffFactor,j._panner.panningModel=j._pannerAttr.panningModel,void 0!==j._panner.positionX?(j._panner.positionX.setValueAtTime(j._pos[0],Howler.ctx.currentTime),j._panner.positionY.setValueAtTime(j._pos[1],Howler.ctx.currentTime),j._panner.positionZ.setValueAtTime(j._pos[2],Howler.ctx.currentTime)):j._panner.setPosition(j._pos[0],j._pos[1],j._pos[2]),void 0!==j._panner.orientationX?(j._panner.orientationX.setValueAtTime(j._orientation[0],Howler.ctx.currentTime),j._panner.orientationY.setValueAtTime(j._orientation[1],Howler.ctx.currentTime),j._panner.orientationZ.setValueAtTime(j._orientation[2],Howler.ctx.currentTime)):j._panner.setOrientation(j._orientation[0],j._orientation[1],j._orientation[2])):(j._panner=Howler.ctx.createStereoPanner(),j._panner.pan.setValueAtTime(j._stereo,Howler.ctx.currentTime)),j._panner.connect(j._node),j._paused||j._parent.pause(j._id,!0).play(j._id,!0)}}()},4499:(sn,at,q)=>{"use strict";q.d(at,{X:()=>y});var B=q(273);class y extends B.x{constructor(me){super(),this._value=me}get value(){return this.getValue()}_subscribe(me){const ce=super._subscribe(me);return!ce.closed&&me.next(this._value),ce}getValue(){const{hasError:me,thrownError:ce,_value:Oe}=this;if(me)throw ce;return this._throwIfClosed(),Oe}next(me){super.next(this._value=me)}}},8305:(sn,at,q)=>{"use strict";q.d(at,{y:()=>Me});var B=q(584),y=q(7908),j=q(4816),me=q(4623);var Se=q(5367),Ye=q(5044),Ie=q(8706);let Me=(()=>{class J{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Be=new J;return Be.source=this,Be.operator=Ae,Be}subscribe(Ae,Be,_e){const st=function(J){return J&&J instanceof B.Lv||function(J){return J&&(0,Ye.m)(J.next)&&(0,Ye.m)(J.error)&&(0,Ye.m)(J.complete)}(J)&&(0,y.Nn)(J)}(Ae)?Ae:new B.Hp(Ae,Be,_e);return(0,Ie.x)(()=>{const{operator:Lt,source:Xe}=this;st.add(Lt?Lt.call(st,Xe):Xe?this._subscribe(st):this._trySubscribe(st))}),st}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Be){Ae.error(Be)}}forEach(Ae,Be){return new(Be=Ge(Be))((_e,st)=>{let Lt;Lt=this.subscribe(Xe=>{try{Ae(Xe)}catch(He){st(He),null==Lt||Lt.unsubscribe()}},st,_e)})}_subscribe(Ae){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(Ae)}[j.L](){return this}pipe(...Ae){return function(J){return 0===J.length?me.y:1===J.length?J[0]:function(Ae){return J.reduce((Be,_e)=>_e(Be),Ae)}}(Ae)(this)}toPromise(Ae){return new(Ae=Ge(Ae))((Be,_e)=>{let st;this.subscribe(Lt=>st=Lt,Lt=>_e(Lt),()=>Be(st))})}}return J.create=de=>new J(de),J})();function Ge(J){var de;return null!==(de=null!=J?J:Se.v.Promise)&&void 0!==de?de:Promise}},273:(sn,at,q)=>{"use strict";q.d(at,{x:()=>Se});var B=q(8305),y=q(7908);const me=(0,q(4893).d)(Ie=>function(){Ie(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=q(3980),Oe=q(8706);let Se=(()=>{class Ie extends B.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ge){const E=new Ye(this,this);return E.operator=Ge,E}_throwIfClosed(){if(this.closed)throw new me}next(Ge){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const E=this.observers.slice();for(const $ of E)$.next(Ge)}})}error(Ge){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ge;const{observers:E}=this;for(;E.length;)E.shift().error(Ge)}})}complete(){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ge}=this;for(;Ge.length;)Ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var Ge;return(null===(Ge=this.observers)||void 0===Ge?void 0:Ge.length)>0}_trySubscribe(Ge){return this._throwIfClosed(),super._trySubscribe(Ge)}_subscribe(Ge){return this._throwIfClosed(),this._checkFinalizedStatuses(Ge),this._innerSubscribe(Ge)}_innerSubscribe(Ge){const{hasError:E,isStopped:$,observers:J}=this;return E||$?y.Lc:(J.push(Ge),new y.w0(()=>(0,ce.P)(J,Ge)))}_checkFinalizedStatuses(Ge){const{hasError:E,thrownError:$,isStopped:J}=this;E?Ge.error($):J&&Ge.complete()}asObservable(){const Ge=new B.y;return Ge.source=this,Ge}}return Ie.create=(Me,Ge)=>new Ye(Me,Ge),Ie})();class Ye extends Se{constructor(Me,Ge){super(),this.destination=Me,this.source=Ge}next(Me){var Ge,E;null===(E=null===(Ge=this.destination)||void 0===Ge?void 0:Ge.next)||void 0===E||E.call(Ge,Me)}error(Me){var Ge,E;null===(E=null===(Ge=this.destination)||void 0===Ge?void 0:Ge.error)||void 0===E||E.call(Ge,Me)}complete(){var Me,Ge;null===(Ge=null===(Me=this.destination)||void 0===Me?void 0:Me.complete)||void 0===Ge||Ge.call(Me)}_subscribe(Me){var Ge,E;return null!==(E=null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Me))&&void 0!==E?E:y.Lc}}},584:(sn,at,q)=>{"use strict";q.d(at,{Hp:()=>$,Lv:()=>E});var B=q(5044),y=q(7908),j=q(5367),me=q(5160),ce=q(6921);const Oe=Ie("C",void 0,void 0);function Ie(_e,st,Lt){return{kind:_e,value:st,error:Lt}}var Me=q(2496),Ge=q(8706);class E extends y.w0{constructor(st){super(),this.isStopped=!1,st?(this.destination=st,(0,y.Nn)(st)&&st.add(this)):this.destination=Be}static create(st,Lt,Xe){return new $(st,Lt,Xe)}next(st){this.isStopped?Ae(Ie("N",st,void 0),this):this._next(st)}error(st){this.isStopped?Ae(Ie("E",void 0,st),this):(this.isStopped=!0,this._error(st))}complete(){this.isStopped?Ae(Oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(st){this.destination.next(st)}_error(st){try{this.destination.error(st)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $ extends E{constructor(st,Lt,Xe){let He;if(super(),(0,B.m)(st))He=st;else if(st){let pt;({next:He,error:Lt,complete:Xe}=st),this&&j.v.useDeprecatedNextContext?(pt=Object.create(st),pt.unsubscribe=()=>this.unsubscribe()):pt=st,He=null==He?void 0:He.bind(pt),Lt=null==Lt?void 0:Lt.bind(pt),Xe=null==Xe?void 0:Xe.bind(pt)}this.destination={next:He?J(He):ce.Z,error:J(null!=Lt?Lt:de),complete:Xe?J(Xe):ce.Z}}}function J(_e,st){return(...Lt)=>{try{_e(...Lt)}catch(Xe){j.v.useDeprecatedSynchronousErrorHandling?(0,Ge.O)(Xe):(0,me.h)(Xe)}}}function de(_e){throw _e}function Ae(_e,st){const{onStoppedNotification:Lt}=j.v;Lt&&Me.z.setTimeout(()=>Lt(_e,st))}const Be={closed:!0,next:ce.Z,error:de,complete:ce.Z}},7908:(sn,at,q)=>{"use strict";q.d(at,{Lc:()=>Oe,w0:()=>ce,Nn:()=>Se});var B=q(5044);const j=(0,q(4893).d)(Ie=>function(Ge){Ie(this),this.message=Ge?`${Ge.length} errors occurred during unsubscription:\n${Ge.map((E,$)=>`${$+1}) ${E.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ge});var me=q(3980);class ce{constructor(Me){this.initialTeardown=Me,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Me;if(!this.closed){this.closed=!0;const{_parentage:Ge}=this;if(Ge)if(this._parentage=null,Array.isArray(Ge))for(const J of Ge)J.remove(this);else Ge.remove(this);const{initialTeardown:E}=this;if((0,B.m)(E))try{E()}catch(J){Me=J instanceof j?J.errors:[J]}const{_teardowns:$}=this;if($){this._teardowns=null;for(const J of $)try{Ye(J)}catch(de){Me=null!=Me?Me:[],de instanceof j?Me=[...Me,...de.errors]:Me.push(de)}}if(Me)throw new j(Me)}}add(Me){var Ge;if(Me&&Me!==this)if(this.closed)Ye(Me);else{if(Me instanceof ce){if(Me.closed||Me._hasParent(this))return;Me._addParent(this)}(this._teardowns=null!==(Ge=this._teardowns)&&void 0!==Ge?Ge:[]).push(Me)}}_hasParent(Me){const{_parentage:Ge}=this;return Ge===Me||Array.isArray(Ge)&&Ge.includes(Me)}_addParent(Me){const{_parentage:Ge}=this;this._parentage=Array.isArray(Ge)?(Ge.push(Me),Ge):Ge?[Ge,Me]:Me}_removeParent(Me){const{_parentage:Ge}=this;Ge===Me?this._parentage=null:Array.isArray(Ge)&&(0,me.P)(Ge,Me)}remove(Me){const{_teardowns:Ge}=this;Ge&&(0,me.P)(Ge,Me),Me instanceof ce&&Me._removeParent(this)}}ce.EMPTY=(()=>{const Ie=new ce;return Ie.closed=!0,Ie})();const Oe=ce.EMPTY;function Se(Ie){return Ie instanceof ce||Ie&&"closed"in Ie&&(0,B.m)(Ie.remove)&&(0,B.m)(Ie.add)&&(0,B.m)(Ie.unsubscribe)}function Ye(Ie){(0,B.m)(Ie)?Ie():Ie.unsubscribe()}},5367:(sn,at,q)=>{"use strict";q.d(at,{v:()=>B});const B={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1404:(sn,at,q)=>{"use strict";q.d(at,{z:()=>ce});var B=q(5373),j=q(7613),me=q(7867);function ce(...Oe){return(0,B.J)(1)((0,me.D)(Oe,(0,j.yG)(Oe)))}},5048:(sn,at,q)=>{"use strict";q.d(at,{P:()=>j});var B=q(8305),y=q(9985);function j(me){return new B.y(ce=>{(0,y.Xf)(me()).subscribe(ce)})}},5583:(sn,at,q)=>{"use strict";q.d(at,{E:()=>y});const y=new(q(8305).y)(ce=>ce.complete())},8100:(sn,at,q)=>{"use strict";q.d(at,{D:()=>Ye});var B=q(8305),y=q(886),j=q(9985),me=q(7613),ce=q(8889),Oe=q(2937),Se=q(2857);function Ye(...Ie){const Me=(0,me.jO)(Ie),{args:Ge,keys:E}=(0,y.D)(Ie),$=new B.y(J=>{const{length:de}=Ge;if(!de)return void J.complete();const Ae=new Array(de);let Be=de,_e=de;for(let st=0;st<de;st++){let Lt=!1;(0,j.Xf)(Ge[st]).subscribe(new ce.Q(J,Xe=>{Lt||(Lt=!0,_e--),Ae[st]=Xe},()=>Be--,void 0,()=>{(!Be||!Lt)&&(_e||J.next(E?(0,Se.n)(E,Ae):Ae),J.complete())}))}});return Me?$.pipe((0,Oe.Z)(Me)):$}},7867:(sn,at,q)=>{"use strict";q.d(at,{D:()=>ft});var B=q(9985),y=q(8395),j=q(9947),me=q(8889);function ce(xt,At=0){return(0,j.e)((Ze,Qe)=>{Ze.subscribe(new me.Q(Qe,ut=>(0,y.f)(Qe,xt,()=>Qe.next(ut),At),()=>(0,y.f)(Qe,xt,()=>Qe.complete(),At),ut=>(0,y.f)(Qe,xt,()=>Qe.error(ut),At)))})}function Oe(xt,At=0){return(0,j.e)((Ze,Qe)=>{Qe.add(xt.schedule(()=>Ze.subscribe(Qe),At))})}var Ie=q(8305),Ge=q(5497),E=q(5044);function J(xt,At){if(!xt)throw new Error("Iterable cannot be null");return new Ie.y(Ze=>{(0,y.f)(Ze,At,()=>{const Qe=xt[Symbol.asyncIterator]();(0,y.f)(Ze,At,()=>{Qe.next().then(ut=>{ut.done?Ze.complete():Ze.next(ut.value)})},0,!0)})})}var de=q(1073),Ae=q(2442),Be=q(1537),_e=q(2317),st=q(9908),Lt=q(3754),Xe=q(7751);function ft(xt,At){return At?function(xt,At){if(null!=xt){if((0,de.c)(xt))return function(xt,At){return(0,B.Xf)(xt).pipe(Oe(At),ce(At))}(xt,At);if((0,Be.z)(xt))return function(xt,At){return new Ie.y(Ze=>{let Qe=0;return At.schedule(function(){Qe===xt.length?Ze.complete():(Ze.next(xt[Qe++]),Ze.closed||this.schedule())})})}(xt,At);if((0,Ae.t)(xt))return function(xt,At){return(0,B.Xf)(xt).pipe(Oe(At),ce(At))}(xt,At);if((0,st.D)(xt))return J(xt,At);if((0,_e.T)(xt))return function(xt,At){return new Ie.y(Ze=>{let Qe;return(0,y.f)(Ze,At,()=>{Qe=xt[Ge.h](),(0,y.f)(Ze,At,()=>{let ut,bt;try{({value:ut,done:bt}=Qe.next())}catch(Vt){return void Ze.error(Vt)}bt?Ze.complete():Ze.next(ut)},0,!0)}),()=>(0,E.m)(null==Qe?void 0:Qe.return)&&Qe.return()})}(xt,At);if((0,Xe.L)(xt))return function(xt,At){return J((0,Xe.Q)(xt),At)}(xt,At)}throw(0,Lt.z)(xt)}(xt,At):(0,B.Xf)(xt)}},5077:(sn,at,q)=>{"use strict";q.d(at,{R:()=>Me});var B=q(9985),y=q(8305),j=q(5724),me=q(1537),ce=q(5044),Oe=q(2937);const Se=["addListener","removeListener"],Ye=["addEventListener","removeEventListener"],Ie=["on","off"];function Me(de,Ae,Be,_e){if((0,ce.m)(Be)&&(_e=Be,Be=void 0),_e)return Me(de,Ae,Be).pipe((0,Oe.Z)(_e));const[st,Lt]=function(de){return(0,ce.m)(de.addEventListener)&&(0,ce.m)(de.removeEventListener)}(de)?Ye.map(Xe=>He=>de[Xe](Ae,He,Be)):function(de){return(0,ce.m)(de.addListener)&&(0,ce.m)(de.removeListener)}(de)?Se.map(Ge(de,Ae)):function(de){return(0,ce.m)(de.on)&&(0,ce.m)(de.off)}(de)?Ie.map(Ge(de,Ae)):[];if(!st&&(0,me.z)(de))return(0,j.z)(Xe=>Me(Xe,Ae,Be))((0,B.Xf)(de));if(!st)throw new TypeError("Invalid event target");return new y.y(Xe=>{const He=(...pt)=>Xe.next(1<pt.length?pt:pt[0]);return st(He),()=>Lt(He)})}function Ge(de,Ae){return Be=>_e=>de[Be](Ae,_e)}},9985:(sn,at,q)=>{"use strict";q.d(at,{Xf:()=>$});var B=q(9162),y=q(1537),j=q(2442),me=q(8305),ce=q(1073),Oe=q(9908),Se=q(3754),Ye=q(2317),Ie=q(7751),Me=q(5044),Ge=q(5160),E=q(4816);function $(Xe){if(Xe instanceof me.y)return Xe;if(null!=Xe){if((0,ce.c)(Xe))return function(Xe){return new me.y(He=>{const pt=Xe[E.L]();if((0,Me.m)(pt.subscribe))return pt.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Xe);if((0,y.z)(Xe))return function(Xe){return new me.y(He=>{for(let pt=0;pt<Xe.length&&!He.closed;pt++)He.next(Xe[pt]);He.complete()})}(Xe);if((0,j.t)(Xe))return function(Xe){return new me.y(He=>{Xe.then(pt=>{He.closed||(He.next(pt),He.complete())},pt=>He.error(pt)).then(null,Ge.h)})}(Xe);if((0,Oe.D)(Xe))return _e(Xe);if((0,Ye.T)(Xe))return function(Xe){return new me.y(He=>{for(const pt of Xe)if(He.next(pt),He.closed)return;He.complete()})}(Xe);if((0,Ie.L)(Xe))return function(Xe){return _e((0,Ie.Q)(Xe))}(Xe)}throw(0,Se.z)(Xe)}function _e(Xe){return new me.y(He=>{(function(Xe,He){var pt,ft,xt,At;return(0,B.mG)(this,void 0,void 0,function*(){try{for(pt=(0,B.KL)(Xe);!(ft=yield pt.next()).done;)if(He.next(ft.value),He.closed)return}catch(Ze){xt={error:Ze}}finally{try{ft&&!ft.done&&(At=pt.return)&&(yield At.call(pt))}finally{if(xt)throw xt.error}}He.complete()})})(Xe,He).catch(pt=>He.error(pt))})}},3719:(sn,at,q)=>{"use strict";q.d(at,{T:()=>Oe});var B=q(5373),y=q(9985),j=q(5583),me=q(7613),ce=q(7867);function Oe(...Se){const Ye=(0,me.yG)(Se),Ie=(0,me._6)(Se,1/0),Me=Se;return Me.length?1===Me.length?(0,y.Xf)(Me[0]):(0,B.J)(Ie)((0,ce.D)(Me,Ye)):j.E}},2997:(sn,at,q)=>{"use strict";q.d(at,{of:()=>j});var B=q(7613),y=q(7867);function j(...me){const ce=(0,B.yG)(me);return(0,y.D)(me,ce)}},8889:(sn,at,q)=>{"use strict";q.d(at,{Q:()=>y});var B=q(584);class y extends B.Lv{constructor(me,ce,Oe,Se,Ye){super(me),this.onFinalize=Ye,this._next=ce?function(Ie){try{ce(Ie)}catch(Me){me.error(Me)}}:super._next,this._error=Se?function(Ie){try{Se(Ie)}catch(Me){me.error(Me)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(Ie){me.error(Ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}},2835:(sn,at,q)=>{"use strict";q.d(at,{K:()=>me});var B=q(9985),y=q(8889),j=q(9947);function me(ce){return(0,j.e)((Oe,Se)=>{let Me,Ye=null,Ie=!1;Ye=Oe.subscribe(new y.Q(Se,void 0,void 0,Ge=>{Me=(0,B.Xf)(ce(Ge,me(ce)(Oe))),Ye?(Ye.unsubscribe(),Ye=null,Me.subscribe(Se)):Ie=!0})),Ie&&(Ye.unsubscribe(),Ye=null,Me.subscribe(Se))})}},4799:(sn,at,q)=>{"use strict";q.d(at,{b:()=>j});var B=q(5724),y=q(5044);function j(me,ce){return(0,y.m)(ce)?(0,B.z)(me,ce,1):(0,B.z)(me,1)}},5488:(sn,at,q)=>{"use strict";q.d(at,{x:()=>me});var B=q(4623),y=q(9947),j=q(8889);function me(Oe,Se=B.y){return Oe=null!=Oe?Oe:ce,(0,y.e)((Ye,Ie)=>{let Me,Ge=!0;Ye.subscribe(new j.Q(Ie,E=>{const $=Se(E);(Ge||!Oe(Me,$))&&(Ge=!1,Me=$,Ie.next(E))}))})}function ce(Oe,Se){return Oe===Se}},461:(sn,at,q)=>{"use strict";q.d(at,{h:()=>j});var B=q(9947),y=q(8889);function j(me,ce){return(0,B.e)((Oe,Se)=>{let Ye=0;Oe.subscribe(new y.Q(Se,Ie=>me.call(ce,Ie,Ye++)&&Se.next(Ie)))})}},423:(sn,at,q)=>{"use strict";q.d(at,{x:()=>y});var B=q(9947);function y(j){return(0,B.e)((me,ce)=>{try{me.subscribe(ce)}finally{ce.add(j)}})}},4753:(sn,at,q)=>{"use strict";q.d(at,{U:()=>j});var B=q(9947),y=q(8889);function j(me,ce){return(0,B.e)((Oe,Se)=>{let Ye=0;Oe.subscribe(new y.Q(Se,Ie=>{Se.next(me.call(ce,Ie,Ye++))}))})}},5373:(sn,at,q)=>{"use strict";q.d(at,{J:()=>j});var B=q(5724),y=q(4623);function j(me=1/0){return(0,B.z)(y.y,me)}},5724:(sn,at,q)=>{"use strict";q.d(at,{z:()=>Ye});var B=q(4753),y=q(9985),j=q(9947),ce=(q(8395),q(8889)),Se=q(5044);function Ye(Ie,Me,Ge=1/0){return(0,Se.m)(Me)?Ye((E,$)=>(0,B.U)((J,de)=>Me(E,J,$,de))((0,y.Xf)(Ie(E,$))),Ge):("number"==typeof Me&&(Ge=Me),(0,j.e)((E,$)=>function(Ie,Me,Ge,E,$,J,de,Ae){const Be=[];let _e=0,st=0,Lt=!1;const Xe=()=>{Lt&&!Be.length&&!_e&&Me.complete()},He=ft=>_e<E?pt(ft):Be.push(ft),pt=ft=>{_e++;let xt=!1;(0,y.Xf)(Ge(ft,st++)).subscribe(new ce.Q(Me,At=>{Me.next(At)},()=>{xt=!0},void 0,()=>{if(xt)try{for(_e--;Be.length&&_e<E;){const At=Be.shift();pt(At)}Xe()}catch(At){Me.error(At)}}))};return Ie.subscribe(new ce.Q(Me,He,()=>{Lt=!0,Xe()})),()=>{}}(E,$,Ie,Ge)))}},3174:(sn,at,q)=>{"use strict";q.d(at,{B:()=>Oe});var B=q(7867),y=q(9468),j=q(273),me=q(584),ce=q(9947);function Oe(Ye={}){const{connector:Ie=(()=>new j.x),resetOnError:Me=!0,resetOnComplete:Ge=!0,resetOnRefCountZero:E=!0}=Ye;return $=>{let J=null,de=null,Ae=null,Be=0,_e=!1,st=!1;const Lt=()=>{null==de||de.unsubscribe(),de=null},Xe=()=>{Lt(),J=Ae=null,_e=st=!1},He=()=>{const pt=J;Xe(),null==pt||pt.unsubscribe()};return(0,ce.e)((pt,ft)=>{Be++,!st&&!_e&&Lt();const xt=Ae=null!=Ae?Ae:Ie();ft.add(()=>{Be--,0===Be&&!st&&!_e&&(de=Se(He,E))}),xt.subscribe(ft),J||(J=new me.Hp({next:At=>xt.next(At),error:At=>{st=!0,Lt(),de=Se(Xe,Me,At),xt.error(At)},complete:()=>{_e=!0,Lt(),de=Se(Xe,Ge),xt.complete()}}),(0,B.D)(pt).subscribe(J))})($)}}function Se(Ye,Ie,...Me){return!0===Ie?(Ye(),null):!1===Ie?null:Ie(...Me).pipe((0,y.q)(1)).subscribe(()=>Ye())}},3970:(sn,at,q)=>{"use strict";q.d(at,{O:()=>me});var B=q(1404),y=q(7613),j=q(9947);function me(...ce){const Oe=(0,y.yG)(ce);return(0,j.e)((Se,Ye)=>{(Oe?(0,B.z)(ce,Se,Oe):(0,B.z)(ce,Se)).subscribe(Ye)})}},9468:(sn,at,q)=>{"use strict";q.d(at,{q:()=>me});var B=q(5583),y=q(9947),j=q(8889);function me(ce){return ce<=0?()=>B.E:(0,y.e)((Oe,Se)=>{let Ye=0;Oe.subscribe(new j.Q(Se,Ie=>{++Ye<=ce&&(Se.next(Ie),ce<=Ye&&Se.complete())}))})}},6263:(sn,at,q)=>{"use strict";q.d(at,{R:()=>ce});var B=q(9947),y=q(8889),j=q(9985),me=q(6921);function ce(Oe){return(0,B.e)((Se,Ye)=>{(0,j.Xf)(Oe).subscribe(new y.Q(Ye,()=>Ye.complete(),me.Z)),!Ye.closed&&Se.subscribe(Ye)})}},7384:(sn,at,q)=>{"use strict";q.d(at,{b:()=>ce});var B=q(5044),y=q(9947),j=q(8889),me=q(4623);function ce(Oe,Se,Ye){const Ie=(0,B.m)(Oe)||Se||Ye?{next:Oe,error:Se,complete:Ye}:Oe;return Ie?(0,y.e)((Me,Ge)=>{var E;null===(E=Ie.subscribe)||void 0===E||E.call(Ie);let $=!0;Me.subscribe(new j.Q(Ge,J=>{var de;null===(de=Ie.next)||void 0===de||de.call(Ie,J),Ge.next(J)},()=>{var J;$=!1,null===(J=Ie.complete)||void 0===J||J.call(Ie),Ge.complete()},J=>{var de;$=!1,null===(de=Ie.error)||void 0===de||de.call(Ie,J),Ge.error(J)},()=>{var J,de;$&&(null===(J=Ie.unsubscribe)||void 0===J||J.call(Ie)),null===(de=Ie.finalize)||void 0===de||de.call(Ie)}))}):me.y}},2869:(sn,at,q)=>{"use strict";q.d(at,{o:()=>ce});var B=q(7908);class y extends B.w0{constructor(Se,Ye){super()}schedule(Se,Ye=0){return this}}const j={setInterval(...Oe){const{delegate:Se}=j;return((null==Se?void 0:Se.setInterval)||setInterval)(...Oe)},clearInterval(Oe){const{delegate:Se}=j;return((null==Se?void 0:Se.clearInterval)||clearInterval)(Oe)},delegate:void 0};var me=q(3980);class ce extends y{constructor(Se,Ye){super(Se,Ye),this.scheduler=Se,this.work=Ye,this.pending=!1}schedule(Se,Ye=0){if(this.closed)return this;this.state=Se;const Ie=this.id,Me=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Me,Ie,Ye)),this.pending=!0,this.delay=Ye,this.id=this.id||this.requestAsyncId(Me,this.id,Ye),this}requestAsyncId(Se,Ye,Ie=0){return j.setInterval(Se.flush.bind(Se,this),Ie)}recycleAsyncId(Se,Ye,Ie=0){if(null!=Ie&&this.delay===Ie&&!1===this.pending)return Ye;j.clearInterval(Ye)}execute(Se,Ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(Se,Ye);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,Ye){let Me,Ie=!1;try{this.work(Se)}catch(Ge){Ie=!0,Me=Ge||new Error("Scheduled action threw falsy error")}if(Ie)return this.unsubscribe(),Me}unsubscribe(){if(!this.closed){const{id:Se,scheduler:Ye}=this,{actions:Ie}=Ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(Ie,this),null!=Se&&(this.id=this.recycleAsyncId(Ye,Se,null)),this.delay=null,super.unsubscribe()}}}},3192:(sn,at,q)=>{"use strict";q.d(at,{v:()=>j});const B={now:()=>(B.delegate||Date).now(),delegate:void 0};class y{constructor(ce,Oe=y.now){this.schedulerActionCtor=ce,this.now=Oe}schedule(ce,Oe=0,Se){return new this.schedulerActionCtor(this,ce).schedule(Se,Oe)}}y.now=B.now;class j extends y{constructor(ce,Oe=y.now){super(ce,Oe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:Oe}=this;if(this._active)return void Oe.push(ce);let Se;this._active=!0;do{if(Se=ce.execute(ce.state,ce.delay))break}while(ce=Oe.shift());if(this._active=!1,Se){for(;ce=Oe.shift();)ce.unsubscribe();throw Se}}}},2210:(sn,at,q)=>{"use strict";q.d(at,{z:()=>j,P:()=>me});var B=q(2869);const j=new(q(3192).v)(B.o),me=j},2496:(sn,at,q)=>{"use strict";q.d(at,{z:()=>B});const B={setTimeout(...y){const{delegate:j}=B;return((null==j?void 0:j.setTimeout)||setTimeout)(...y)},clearTimeout(y){const{delegate:j}=B;return((null==j?void 0:j.clearTimeout)||clearTimeout)(y)},delegate:void 0}},5497:(sn,at,q)=>{"use strict";q.d(at,{h:()=>y});const y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(sn,at,q)=>{"use strict";q.d(at,{L:()=>B});const B="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(sn,at,q)=>{"use strict";q.d(at,{jO:()=>me,yG:()=>ce,_6:()=>Oe});var B=q(5044),y=q(7398);function j(Se){return Se[Se.length-1]}function me(Se){return(0,B.m)(j(Se))?Se.pop():void 0}function ce(Se){return(0,y.K)(j(Se))?Se.pop():void 0}function Oe(Se,Ye){return"number"==typeof j(Se)?Se.pop():Ye}},886:(sn,at,q)=>{"use strict";q.d(at,{D:()=>ce});const{isArray:B}=Array,{getPrototypeOf:y,prototype:j,keys:me}=Object;function ce(Se){if(1===Se.length){const Ye=Se[0];if(B(Ye))return{args:Ye,keys:null};if(function(Se){return Se&&"object"==typeof Se&&y(Se)===j}(Ye)){const Ie=me(Ye);return{args:Ie.map(Me=>Ye[Me]),keys:Ie}}}return{args:Se,keys:null}}},3980:(sn,at,q)=>{"use strict";function B(y,j){if(y){const me=y.indexOf(j);0<=me&&y.splice(me,1)}}q.d(at,{P:()=>B})},4893:(sn,at,q)=>{"use strict";function B(y){const me=y(ce=>{Error.call(ce),ce.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}q.d(at,{d:()=>B})},2857:(sn,at,q)=>{"use strict";function B(y,j){return y.reduce((me,ce,Oe)=>(me[ce]=j[Oe],me),{})}q.d(at,{n:()=>B})},8706:(sn,at,q)=>{"use strict";q.d(at,{x:()=>j,O:()=>me});var B=q(5367);let y=null;function j(ce){if(B.v.useDeprecatedSynchronousErrorHandling){const Oe=!y;if(Oe&&(y={errorThrown:!1,error:null}),ce(),Oe){const{errorThrown:Se,error:Ye}=y;if(y=null,Se)throw Ye}}else ce()}function me(ce){B.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=ce)}},8395:(sn,at,q)=>{"use strict";function B(y,j,me,ce=0,Oe=!1){const Se=j.schedule(function(){me(),Oe?y.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(y.add(Se),!Oe)return Se}q.d(at,{f:()=>B})},4623:(sn,at,q)=>{"use strict";function B(y){return y}q.d(at,{y:()=>B})},1537:(sn,at,q)=>{"use strict";q.d(at,{z:()=>B});const B=y=>y&&"number"==typeof y.length&&"function"!=typeof y},9908:(sn,at,q)=>{"use strict";q.d(at,{D:()=>y});var B=q(5044);function y(j){return Symbol.asyncIterator&&(0,B.m)(null==j?void 0:j[Symbol.asyncIterator])}},5044:(sn,at,q)=>{"use strict";function B(y){return"function"==typeof y}q.d(at,{m:()=>B})},1073:(sn,at,q)=>{"use strict";q.d(at,{c:()=>j});var B=q(4816),y=q(5044);function j(me){return(0,y.m)(me[B.L])}},2317:(sn,at,q)=>{"use strict";q.d(at,{T:()=>j});var B=q(5497),y=q(5044);function j(me){return(0,y.m)(null==me?void 0:me[B.h])}},2442:(sn,at,q)=>{"use strict";q.d(at,{t:()=>y});var B=q(5044);function y(j){return(0,B.m)(null==j?void 0:j.then)}},7751:(sn,at,q)=>{"use strict";q.d(at,{Q:()=>j,L:()=>me});var B=q(9162),y=q(5044);function j(ce){return(0,B.FC)(this,arguments,function*(){const Se=ce.getReader();try{for(;;){const{value:Ye,done:Ie}=yield(0,B.qq)(Se.read());if(Ie)return yield(0,B.qq)(void 0);yield yield(0,B.qq)(Ye)}}finally{Se.releaseLock()}})}function me(ce){return(0,y.m)(null==ce?void 0:ce.getReader)}},7398:(sn,at,q)=>{"use strict";q.d(at,{K:()=>y});var B=q(5044);function y(j){return j&&(0,B.m)(j.schedule)}},9947:(sn,at,q)=>{"use strict";q.d(at,{A:()=>y,e:()=>j});var B=q(5044);function y(me){return(0,B.m)(null==me?void 0:me.lift)}function j(me){return ce=>{if(y(ce))return ce.lift(function(Oe){try{return me(Oe,this)}catch(Se){this.error(Se)}});throw new TypeError("Unable to lift unknown Observable type")}}},2937:(sn,at,q)=>{"use strict";q.d(at,{Z:()=>me});var B=q(4753);const{isArray:y}=Array;function me(ce){return(0,B.U)(Oe=>function(ce,Oe){return y(Oe)?ce(...Oe):ce(Oe)}(ce,Oe))}},6921:(sn,at,q)=>{"use strict";function B(){}q.d(at,{Z:()=>B})},5160:(sn,at,q)=>{"use strict";q.d(at,{h:()=>j});var B=q(5367),y=q(2496);function j(me){y.z.setTimeout(()=>{const{onUnhandledError:ce}=B.v;if(!ce)throw me;ce(me)})}},3754:(sn,at,q)=>{"use strict";function B(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}q.d(at,{z:()=>B})},2620:(sn,at,q)=>{"use strict";q.d(at,{i8:()=>y,Dj:()=>j,ZO:()=>me,EH:()=>ce,AG:()=>Oe,Gg:()=>Se,oE:()=>Ye,Tx:()=>Me,qZ:()=>Ge,K5:()=>E,IJ:()=>$,a0:()=>J,uo:()=>de,pj:()=>Ae,Ng:()=>Be,Gz:()=>_e,TT:()=>st,_p:()=>Lt,MP:()=>Xe,LU:()=>He,aw:()=>pt,RC:()=>ft,UB:()=>xt});var B=q(6472);const y=6.5,j=10,me=360,ce=1.05,Oe=75,Se=50,Ye=B.M8C.degToRad(j),Me=B.M8C.degToRad(90),Ge=.66,E=.86,$=56,J=800,de=2*Math.PI,Ae=Math.PI/2,Be=.001,_e=6,st=3,Lt=3,Xe=800,He=10,pt=50,ft=80,xt=[16711680,16753920,16776960,32768,255,8388736]},6678:(sn,at,q)=>{"use strict";q.d(at,{w:()=>B,y:()=>y});var B=(()=>{return(j=B||(B={}))[j.LEVEL_START_1=1]="LEVEL_START_1",j[j.LEVEL_START_2=2]="LEVEL_START_2",j[j.LEVEL_START_3=3]="LEVEL_START_3",j[j.LEVEL_START_4=4]="LEVEL_START_4",j[j.LEVEL_START_5=5]="LEVEL_START_5",j[j.PIECE_MOVE=6]="PIECE_MOVE",j[j.PIECE_NON_MOVE=7]="PIECE_NON_MOVE",j[j.PIECE_REMOVE=8]="PIECE_REMOVE",j[j.PIECE_SELECT=9]="PIECE_SELECT",j[j.MATCH_FAIL=10]="MATCH_FAIL",j[j.MATCH_LONG=11]="MATCH_LONG",j[j.POWER_MOVE_APPEAR=12]="POWER_MOVE_APPEAR",j[j.POWER_MOVE_USE=13]="POWER_MOVE_USE",j[j.LEVEL_END_1=14]="LEVEL_END_1",j[j.LEVEL_END_2=15]="LEVEL_END_2",j[j.LEVEL_END_3=16]="LEVEL_END_3",B;var j})();const y=[{url:"assets/audio/level-start/mixkit-slow-tape-rewind-cinematic-transition-1089.mp3",audioType:B.LEVEL_START_1},{url:"assets/audio/level-start/mixkit-cinematic-laser-gun-thunder-1287.mp3",audioType:B.LEVEL_START_2},{url:"assets/audio/level-start/mixkit-epic-movie-trailer-whoosh-impact-2918.mp3",audioType:B.LEVEL_START_3},{url:"assets/audio/level-start/mixkit-epic-movie-transition-2904.mp3",audioType:B.LEVEL_START_4},{url:"assets/audio/level-start/mixkit-futuristic-machine-starting-2689.mp3",audioType:B.LEVEL_START_5},{url:"assets/audio/piece-move.mp3",audioType:B.PIECE_MOVE},{url:"assets/audio/piece-non-move.mp3",audioType:B.PIECE_NON_MOVE},{url:"assets/audio/piece-remove.mp3",audioType:B.PIECE_REMOVE},{url:"assets/audio/piece-select.mp3",audioType:B.PIECE_SELECT},{url:"assets/audio/match-fail.mp3",audioType:B.MATCH_FAIL},{url:"assets/audio/long-match.mp3",audioType:B.MATCH_LONG},{url:"assets/audio/power-move-appear.mp3",audioType:B.POWER_MOVE_APPEAR},{url:"assets/audio/power-move-use.mp3",audioType:B.POWER_MOVE_USE},{url:"assets/audio/level-complete/Assassins.mp3",audioType:B.LEVEL_END_1},{url:"assets/audio/level-complete/Essence.mp3",audioType:B.LEVEL_END_2},{url:"assets/audio/level-complete/Sk8board.mp3",audioType:B.LEVEL_END_3}]},4830:(sn,at,q)=>{"use strict";q.d(at,{X:()=>Oe});var B=q(6678),y=q(4760),me=q(2620),ce=q(3668);let Oe=(()=>{class Se{constructor(){this.ProgressionMin=48,this.ProgressionMax=71,this._progressionNext=this.ProgressionMin,this._trackVolume=.5}get Volume(){return this._trackVolume}set Volume(Ie){this._trackVolume=Ie,y.Howler.volume(this._trackVolume)}PlayLevelComplete(){switch(Math.floor(3*Math.random())+1){case 1:this.PlayAudio(B.w.LEVEL_END_1);break;case 2:this.PlayAudio(B.w.LEVEL_END_2);break;default:this.PlayAudio(B.w.LEVEL_END_3)}}StopLevelComplete(){this.stopMusic(B.w.LEVEL_END_1),this.stopMusic(B.w.LEVEL_END_2),this.stopMusic(B.w.LEVEL_END_3)}PlayLevelStart(){switch(Math.floor(5*Math.random())+1){case 1:this.PlayAudio(B.w.LEVEL_START_1);break;case 2:this.PlayAudio(B.w.LEVEL_START_2);break;case 3:this.PlayAudio(B.w.LEVEL_START_3);break;case 4:this.PlayAudio(B.w.LEVEL_START_4);break;default:this.PlayAudio(B.w.LEVEL_START_5)}}StartProgression(){this._progressionNext=this.ProgressionMin}PlayAudio(Ie,Me=!1){const Ge=B.y.find(E=>E.audioType===Ie);Ge&&(Ge.howl?this.playLoadedAudio(Ge.howl,Me):(Ge.howl=new y.Howl({src:Ge.url}),Ge.howl.on("load",()=>{Ge.howl&&this.playLoadedAudio(Ge.howl,Me)})))}PlayLongMatch(Ie){this.StartProgression();let Me=0;for(let Ge=0;Ge<Ie-me.TT;Ge++)Me=this.nextProgression;this.PlayAudio(B.w.MATCH_LONG,!0)}playLoadedAudio(Ie,Me){Ie.rate(Me?this.nextProgression:1),Ie.play()}stopMusic(Ie){var Me;const Ge=B.y.find(E=>E.audioType===Ie);Ge&&(null===(Me=Ge.howl)||void 0===Me||Me.stop())}get nextProgression(){return this._progressionNext++,this._progressionNext>this.ProgressionMax&&(this._progressionNext=this.ProgressionMin),Math.pow(2,(this._progressionNext-60)/12)}}return Se.\u0275fac=function(Ie){return new(Ie||Se)},Se.\u0275prov=ce.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},8260:(sn,at,q)=>{"use strict";q.d(at,{N:()=>B});const B={production:!0,includeHelpers:!1}},1629:(sn,at,q)=>{"use strict";var B=q(5427),y=q(3668),j=q(5862);const me=[{path:"game",loadChildren:()=>q.e(20).then(q.bind(q,1020)).then(F=>F.GameModule)},{path:"",redirectTo:"game",pathMatch:"full"}];let ce=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({imports:[[j.Bz.forRoot(me)],j.Bz]}),F})();var Oe=q(1285),Se=q(86),Ye=q(9136);let Ie=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275cmp=y.Xpm({type:F,selectors:[["wgl-about"]],decls:15,vars:0,consts:[["mat-dialog-title","",1,"dialog-header"],["mat-dialog-content",""],["target","_blank","href","https://audionautix.com/"],["target","_blank","href","https://mixkit.co/"],["mat-dialog-actions","","align","center"],["mat-button","","mat-dialog-close","","mat-icon-button","","color","primary","mat-mini-fab",""],["aria-hidden","false","aria-label","CLose"]],template:function(p,X){1&p&&(y.TgZ(0,"h1",0),y._uU(1,"About"),y.qZA(),y.TgZ(2,"div",1),y.TgZ(3,"p"),y._uU(4," Level End Music by "),y.TgZ(5,"a",2),y._uU(6,"audionautix.com"),y.qZA(),y.qZA(),y.TgZ(7,"p"),y._uU(8," Sound effect by "),y.TgZ(9,"a",3),y._uU(10,"mixkit"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(11,"div",4),y.TgZ(12,"button",5),y.TgZ(13,"mat-icon",6),y._uU(14,"close"),y.qZA(),y.qZA(),y.qZA())},directives:[Oe.uh,Oe.xY,Oe.H8,Se.lW,Oe.ZT,Ye.Hw],styles:[".dialog-header[_ngcontent-%COMP%]{text-align:center}"]}),F})();var Me=q(6731),Ge=q(928),E=q(6019);const $=["*",[["mat-toolbar-row"]]],J=["*","mat-toolbar-row"],de=(0,Me.pj)(class{constructor(F){this._elementRef=F}});let Ae=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275dir=y.lG2({type:F,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),F})(),Be=(()=>{class F extends de{constructor(p,X,ct){super(p),this._platform=X,this._document=ct}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return F.\u0275fac=function(p){return new(p||F)(y.Y36(y.SBq),y.Y36(Ge.t4),y.Y36(E.K0))},F.\u0275cmp=y.Xpm({type:F,selectors:[["mat-toolbar"]],contentQueries:function(p,X,ct){if(1&p&&y.Suo(ct,Ae,5),2&p){let Zt;y.iGM(Zt=y.CRH())&&(X._toolbarRows=Zt)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(p,X){2&p&&y.ekj("mat-toolbar-multiple-rows",X._toolbarRows.length>0)("mat-toolbar-single-row",0===X._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[y.qOj],ngContentSelectors:J,decls:2,vars:0,template:function(p,X){1&p&&(y.F$t($),y.Hsn(0),y.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),F})(),st=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({imports:[[Me.BQ],Me.BQ]}),F})();var Lt=q(4830),Xe=q(9618),He=q(8290),pt=q(348),ft=q(1628);q(7867),q(8100),q(4753);const bt=new y.OlP("NgValueAccessor");var zt=q(9555),Hi=q(7908);const za=["sliderWrapper"],wt=(0,Ge.i$)({passive:!1}),v={provide:bt,useExisting:(0,y.Gpc)(()=>oe),multi:!0};class L{}const Z=(0,Me.sb)((0,Me.pj)((0,Me.Id)(class{constructor(F){this._elementRef=F}}),"accent"));let oe=(()=>{class F extends Z{constructor(p,X,ct,Zt,di,Fi,Ur,cs){super(p),this._focusMonitor=X,this._changeDetectorRef=ct,this._dir=Zt,this._ngZone=Fi,this._animationMode=cs,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new y.vpe,this.input=new y.vpe,this.valueChange=new y.vpe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Hi.w0.EMPTY,this._pointerDown=ar=>{this.disabled||this._isSliding||!Ee(ar)&&0!==ar.button||this._ngZone.run(()=>{this._touchId=Ee(ar)?function(F,P){for(let p=0;p<F.touches.length;p++){const X=F.touches[p].target;if(P===X||P.contains(X))return F.touches[p].identifier}}(ar,this._elementRef.nativeElement):void 0;const bs=Ce(ar,this._touchId);if(bs){const mr=this.value;this._isSliding="pointer",this._lastPointerEvent=ar,ar.preventDefault(),this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(ar),this._focusHostElement(),this._updateValueFromPosition(bs),this._valueOnSlideStart=mr,mr!=this.value&&this._emitInputEvent()}})},this._pointerMove=ar=>{if("pointer"===this._isSliding){const bs=Ce(ar,this._touchId);if(bs){ar.preventDefault();const mr=this.value;this._lastPointerEvent=ar,this._updateValueFromPosition(bs),mr!=this.value&&this._emitInputEvent()}}},this._pointerUp=ar=>{"pointer"===this._isSliding&&(!Ee(ar)||"number"!=typeof this._touchId||it(ar.changedTouches,this._touchId))&&(ar.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=Ur,this.tabIndex=parseInt(di)||0,Fi.runOutsideAngular(()=>{const ar=p.nativeElement;ar.addEventListener("mousedown",this._pointerDown,wt),ar.addEventListener("touchstart",this._pointerDown,wt)})}get invert(){return this._invert}set invert(p){this._invert=(0,pt.Ig)(p)}get max(){return this._max}set max(p){this._max=(0,pt.su)(p,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(p){this._min=(0,pt.su)(p,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(p){this._step=(0,pt.su)(p,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(p){this._thumbLabel=(0,pt.Ig)(p)}get tickInterval(){return this._tickInterval}set tickInterval(p){this._tickInterval="auto"===p?"auto":"number"==typeof p||"string"==typeof p?(0,pt.su)(p,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(p){if(p!==this._value){let X=(0,pt.su)(p,0);this._roundToDecimal&&X!==this.min&&X!==this.max&&(X=parseFloat(X.toFixed(this._roundToDecimal))),this._value=X,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(p){this._vertical=(0,pt.Ig)(p)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(p){this._focusHostElement(p)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const X=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${X})`}}_getTrackFillStyles(){const p=this.percent,ct=this.vertical?`1, ${p}, 1`:`${p}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${ct})`,display:0===p?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let p=100*this._tickIntervalPercent,Fi={backgroundSize:this.vertical?`2px ${p}%`:`${p}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${p/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const Ur=this._shouldInvertAxis();let cs;cs=this.vertical?Ur?"Bottom":"Top":Ur?"Right":"Left",Fi[`padding${cs}`]=`${this._getThumbGap()}px`}return Fi}_getThumbContainerStyles(){const p=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?p:!p)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const p=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?p:!p}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(p=>{this._isActive=!!p&&"keyboard"!==p,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const p=this._elementRef.nativeElement;p.removeEventListener("mousedown",this._pointerDown,wt),p.removeEventListener("touchstart",this._pointerDown,wt),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(p){if(this.disabled||(0,ft.Vb)(p)||this._isSliding&&"keyboard"!==this._isSliding)return;const X=this.value;switch(p.keyCode){case ft.Ku:this._increment(10);break;case ft.VM:this._increment(-10);break;case ft.uR:this.value=this.max;break;case ft.Sd:this.value=this.min;break;case ft.oh:this._increment("rtl"==this._getDirection()?1:-1);break;case ft.LH:this._increment(1);break;case ft.SV:this._increment("rtl"==this._getDirection()?-1:1);break;case ft.JH:this._increment(-1);break;default:return}X!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",p.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(p){const X=this._document,ct=Ee(p),di=ct?"touchend":"mouseup";X.addEventListener(ct?"touchmove":"mousemove",this._pointerMove,wt),X.addEventListener(di,this._pointerUp,wt),ct&&X.addEventListener("touchcancel",this._pointerUp,wt);const Fi=this._getWindow();void 0!==Fi&&Fi&&Fi.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const p=this._document;p.removeEventListener("mousemove",this._pointerMove,wt),p.removeEventListener("mouseup",this._pointerUp,wt),p.removeEventListener("touchmove",this._pointerMove,wt),p.removeEventListener("touchend",this._pointerUp,wt),p.removeEventListener("touchcancel",this._pointerUp,wt);const X=this._getWindow();void 0!==X&&X&&X.removeEventListener("blur",this._windowBlur)}_increment(p){this.value=this._clamp((this.value||0)+this.step*p,this.min,this.max)}_updateValueFromPosition(p){if(!this._sliderDimensions)return;let di=this._clamp(((this.vertical?p.y:p.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(di=1-di),0===di)this.value=this.min;else if(1===di)this.value=this.max;else{const Fi=this._calculateValue(di),Ur=Math.round((Fi-this.min)/this.step)*this.step+this.min;this.value=this._clamp(Ur,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){let p=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,Zt=Math.ceil(30/(p*this.step/(this.max-this.min)))*this.step;this._tickIntervalPercent=Zt/p}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(p=this.value){let X=new L;return X.source=this,X.value=p,X}_calculatePercentage(p){return((p||0)-this.min)/(this.max-this.min)}_calculateValue(p){return this.min+p*(this.max-this.min)}_clamp(p,X=0,ct=1){return Math.max(X,Math.min(p,ct))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(p){this._elementRef.nativeElement.focus(p)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(p){this.value=p}registerOnChange(p){this._controlValueAccessorChangeFn=p}registerOnTouched(p){this.onTouched=p}setDisabledState(p){this.disabled=p}}return F.\u0275fac=function(p){return new(p||F)(y.Y36(y.SBq),y.Y36(Xe.tE),y.Y36(y.sBO),y.Y36(He.Is,8),y.$8M("tabindex"),y.Y36(y.R0b),y.Y36(E.K0),y.Y36(zt.Qb,8))},F.\u0275cmp=y.Xpm({type:F,selectors:[["mat-slider"]],viewQuery:function(p,X){if(1&p&&y.Gf(za,5),2&p){let ct;y.iGM(ct=y.CRH())&&(X._sliderWrapper=ct.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(p,X){1&p&&y.NdJ("focus",function(){return X._onFocus()})("blur",function(){return X._onBlur()})("keydown",function(Zt){return X._onKeydown(Zt)})("keyup",function(){return X._onKeyup()})("mouseenter",function(){return X._onMouseenter()})("selectstart",function(Zt){return Zt.preventDefault()}),2&p&&(y.Ikx("tabIndex",X.tabIndex),y.uIk("aria-disabled",X.disabled)("aria-valuemax",X.max)("aria-valuemin",X.min)("aria-valuenow",X.value)("aria-valuetext",null==X.valueText?X.displayValue:X.valueText)("aria-orientation",X.vertical?"vertical":"horizontal"),y.ekj("mat-slider-disabled",X.disabled)("mat-slider-has-ticks",X.tickInterval)("mat-slider-horizontal",!X.vertical)("mat-slider-axis-inverted",X._shouldInvertAxis())("mat-slider-invert-mouse-coords",X._shouldInvertMouseCoords())("mat-slider-sliding",X._isSliding)("mat-slider-thumb-label-showing",X.thumbLabel)("mat-slider-vertical",X.vertical)("mat-slider-min-value",X._isMinValue())("mat-slider-hide-last-tick",X.disabled||X._isMinValue()&&X._getThumbGap()&&X._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===X._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[y._Bn([v]),y.qOj],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(p,X){1&p&&(y.TgZ(0,"div",0,1),y.TgZ(2,"div",2),y._UZ(3,"div",3),y._UZ(4,"div",4),y.qZA(),y.TgZ(5,"div",5),y._UZ(6,"div",6),y.qZA(),y.TgZ(7,"div",7),y._UZ(8,"div",8),y._UZ(9,"div",9),y.TgZ(10,"div",10),y.TgZ(11,"span",11),y._uU(12),y.qZA(),y.qZA(),y.qZA(),y.qZA()),2&p&&(y.xp6(3),y.Q6J("ngStyle",X._getTrackBackgroundStyles()),y.xp6(1),y.Q6J("ngStyle",X._getTrackFillStyles()),y.xp6(1),y.Q6J("ngStyle",X._getTicksContainerStyles()),y.xp6(1),y.Q6J("ngStyle",X._getTicksStyles()),y.xp6(1),y.Q6J("ngStyle",X._getThumbContainerStyles()),y.xp6(5),y.Oqu(X.displayValue))},directives:[E.PC],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),F})();function Ee(F){return"t"===F.type[0]}function Ce(F,P){let p;return p=Ee(F)?"number"==typeof P?it(F.touches,P)||it(F.changedTouches,P):F.touches[0]||F.changedTouches[0]:F,p?{x:p.clientX,y:p.clientY}:void 0}function it(F,P){for(let p=0;p<F.length;p++)if(F[p].identifier===P)return F[p]}let Qt=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({imports:[[E.ez,Me.BQ],Me.BQ]}),F})();function dn(F,P){1&F&&(y.TgZ(0,"mat-icon"),y._uU(1,"volume_up"),y.qZA())}function pi(F,P){1&F&&(y.TgZ(0,"mat-icon"),y._uU(1,"volume_off"),y.qZA())}let jn=(()=>{class F{constructor(p){this.audioManager=p,this.Muted=!1,this._currentVolume=this.audioManager.Volume}volumeChanged(p){this.Muted=!1,this.audioManager.Volume=p.value||0}toggleMute(){this.Muted=!this.Muted,this.Muted?(this._currentVolume=this.audioManager.Volume,this.audioManager.Volume=0):this.audioManager.Volume=this._currentVolume}}return F.\u0275fac=function(p){return new(p||F)(y.Y36(Lt.X))},F.\u0275cmp=y.Xpm({type:F,selectors:[["wgl-gain-control"]],decls:4,vars:3,consts:[["min","0.0","max","1.0","step","0.01",3,"value","input"],["mat-icon-button","","color","accent",3,"click"],[4,"ngIf"]],template:function(p,X){1&p&&(y.TgZ(0,"mat-slider",0),y.NdJ("input",function(Zt){return X.volumeChanged(Zt)}),y.qZA(),y.TgZ(1,"button",1),y.NdJ("click",function(){return X.toggleMute()}),y.YNc(2,dn,2,0,"mat-icon",2),y.YNc(3,pi,2,0,"mat-icon",2),y.qZA()),2&p&&(y.Q6J("value",X.audioManager.Volume),y.xp6(2),y.Q6J("ngIf",!X.Muted),y.xp6(1),y.Q6J("ngIf",X.Muted))},directives:[oe,Se.lW,E.O5,Ye.Hw],styles:[""]}),F})(),$n=(()=>{class F{constructor(p){this.dialog=p,this.ABOUT_DIALOG_ID="about-dialog"}about(){const p=this.dialog.getDialogById(this.ABOUT_DIALOG_ID);p?p.close():this.dialog.open(Ie,{id:this.ABOUT_DIALOG_ID})}}return F.\u0275fac=function(p){return new(p||F)(y.Y36(Oe.uw))},F.\u0275cmp=y.Xpm({type:F,selectors:[["wgl-root"]],decls:11,vars:0,consts:[[1,"main-container"],["color","primary",1,"mat-elevation-z4"],[1,"toolbar-item-spacer"],["mat-icon-button","",3,"click"]],template:function(p,X){1&p&&(y.TgZ(0,"div",0),y.TgZ(1,"mat-toolbar",1),y.TgZ(2,"span"),y._uU(3,"WebGL Demo"),y.qZA(),y._UZ(4,"span",2),y._UZ(5,"wgl-gain-control"),y.TgZ(6,"button",3),y.NdJ("click",function(){return X.about()}),y.TgZ(7,"mat-icon"),y._uU(8,"info"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(9,"main"),y._UZ(10,"router-outlet"),y.qZA(),y.qZA())},directives:[Be,jn,Se.lW,Ye.Hw,j.lC],styles:[".main-container[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:56px 1fr;overflow:hidden}.main-container[_ngcontent-%COMP%]   .toolbar-item-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),F})(),pn=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({imports:[[E.ez,Qt,Se.ot,Ye.Ps,Oe.Is]]}),F})(),si=(()=>{class F{}return F.\u0275fac=function(p){return new(p||F)},F.\u0275mod=y.oAB({type:F,bootstrap:[$n]}),F.\u0275inj=y.cJS({providers:[],imports:[[B.b2,ce,B.t6,zt.PW,pn,st,Se.ot,Ye.Ps]]}),F})();q(8260).N.production&&(0,y.G48)(),B.q6().bootstrapModule(si).catch(F=>console.error(F))},9162:(sn,at,q)=>{"use strict";function Ye(Ze,Qe,ut,bt){return new(ut||(ut=Promise))(function(yt,ni){function Ri(vn){try{Ln(bt.next(vn))}catch(En){ni(En)}}function lr(vn){try{Ln(bt.throw(vn))}catch(En){ni(En)}}function Ln(vn){vn.done?yt(vn.value):function(yt){return yt instanceof ut?yt:new ut(function(ni){ni(yt)})}(vn.value).then(Ri,lr)}Ln((bt=bt.apply(Ze,Qe||[])).next())})}function Be(Ze){return this instanceof Be?(this.v=Ze,this):new Be(Ze)}function _e(Ze,Qe,ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Vt,bt=ut.apply(Ze,Qe||[]),yt=[];return Vt={},ni("next"),ni("throw"),ni("return"),Vt[Symbol.asyncIterator]=function(){return this},Vt;function ni(on){bt[on]&&(Vt[on]=function(zi){return new Promise(function(cr,Oi){yt.push([on,zi,cr,Oi])>1||Ri(on,zi)})})}function Ri(on,zi){try{!function(on){on.value instanceof Be?Promise.resolve(on.value.v).then(Ln,vn):En(yt[0][2],on)}(bt[on](zi))}catch(cr){En(yt[0][3],cr)}}function Ln(on){Ri("next",on)}function vn(on){Ri("throw",on)}function En(on,zi){on(zi),yt.shift(),yt.length&&Ri(yt[0][0],yt[0][1])}}function Lt(Ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Qe=Ze[Symbol.asyncIterator];return Qe?Qe.call(Ze):(Ze=function(Ze){var Qe="function"==typeof Symbol&&Symbol.iterator,ut=Qe&&Ze[Qe],bt=0;if(ut)return ut.call(Ze);if(Ze&&"number"==typeof Ze.length)return{next:function(){return Ze&&bt>=Ze.length&&(Ze=void 0),{value:Ze&&Ze[bt++],done:!Ze}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ze),ut={},bt("next"),bt("throw"),bt("return"),ut[Symbol.asyncIterator]=function(){return this},ut);function bt(yt){ut[yt]=Ze[yt]&&function(ni){return new Promise(function(Ri,lr){!function(yt,ni,Ri,lr){Promise.resolve(lr).then(function(Ln){yt({value:Ln,done:Ri})},ni)}(Ri,lr,(ni=Ze[yt](ni)).done,ni.value)})}}}q.d(at,{mG:()=>Ye,qq:()=>Be,FC:()=>_e,KL:()=>Lt})},9814:(sn,at,q)=>{"use strict";q.d(at,{l3:()=>j,_j:()=>B,LC:()=>y,ZN:()=>_e,jt:()=>ce,vP:()=>Se,SB:()=>Ie,oB:()=>Ye,eR:()=>Ge,X$:()=>me,ZE:()=>st,k1:()=>Lt});class B{}class y{}const j="*";function me(Xe,He){return{type:7,name:Xe,definitions:He,options:{}}}function ce(Xe,He=null){return{type:4,styles:He,timings:Xe}}function Se(Xe,He=null){return{type:2,steps:Xe,options:He}}function Ye(Xe){return{type:6,styles:Xe,offset:null}}function Ie(Xe,He,pt){return{type:0,name:Xe,styles:He,options:pt}}function Ge(Xe,He,pt=null){return{type:1,expr:Xe,animation:He,options:pt}}function Be(Xe){Promise.resolve(null).then(Xe)}class _e{constructor(He=0,pt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=He+pt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}onStart(He){this._onStartFns.push(He)}onDone(He){this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Be(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(He=>He()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(He){this._position=this.totalTime?He*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(He){const pt="start"==He?this._onStartFns:this._onDoneFns;pt.forEach(ft=>ft()),pt.length=0}}class st{constructor(He){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=He;let pt=0,ft=0,xt=0;const At=this.players.length;0==At?Be(()=>this._onFinish()):this.players.forEach(Ze=>{Ze.onDone(()=>{++pt==At&&this._onFinish()}),Ze.onDestroy(()=>{++ft==At&&this._onDestroy()}),Ze.onStart(()=>{++xt==At&&this._onStart()})}),this.totalTime=this.players.reduce((Ze,Qe)=>Math.max(Ze,Qe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}init(){this.players.forEach(He=>He.init())}onStart(He){this._onStartFns.push(He)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(He=>He()),this._onStartFns=[])}onDone(He){this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(He=>He.play())}pause(){this.players.forEach(He=>He.pause())}restart(){this.players.forEach(He=>He.restart())}finish(){this._onFinish(),this.players.forEach(He=>He.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(He=>He.destroy()),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this.players.forEach(He=>He.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(He){const pt=He*this.totalTime;this.players.forEach(ft=>{const xt=ft.totalTime?Math.min(1,pt/ft.totalTime):1;ft.setPosition(xt)})}getPosition(){const He=this.players.reduce((pt,ft)=>null===pt||ft.totalTime>pt.totalTime?ft:pt,null);return null!=He?He.getPosition():0}beforeDestroy(){this.players.forEach(He=>{He.beforeDestroy&&He.beforeDestroy()})}triggerCallback(He){const pt="start"==He?this._onStartFns:this._onDoneFns;pt.forEach(ft=>ft()),pt.length=0}}const Lt="!"},9618:(sn,at,q)=>{"use strict";q.d(at,{Em:()=>Ln,tE:()=>mt,qV:()=>jr,qm:()=>Mn,ic:()=>En,X6:()=>dr,yG:()=>pr});var B=q(6019),y=q(3668),j=q(273),me=q(7908),ce=q(4499),Oe=q(2997),Se=q(1628),Ye=q(2210),Ie=q(9947),Me=q(8889),E=q(461),J=q(7384),de=q(4753),Ae=q(9468),Be=q(5488),_e=q(6263),st=q(348),Lt=q(928);class Ln extends class{constructor(Ve){this._items=Ve,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new j.x,this._typeaheadSubscription=me.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=De=>De.disabled,this._pressedLetters=[],this.tabOut=new j.x,this.change=new j.x,Ve instanceof y.n_E&&Ve.changes.subscribe(De=>{if(this._activeItem){const gt=De.toArray().indexOf(this._activeItem);gt>-1&&gt!==this._activeItemIndex&&(this._activeItemIndex=gt)}})}skipPredicate(Ve){return this._skipPredicateFn=Ve,this}withWrap(Ve=!0){return this._wrap=Ve,this}withVerticalOrientation(Ve=!0){return this._vertical=Ve,this}withHorizontalOrientation(Ve){return this._horizontal=Ve,this}withAllowedModifierKeys(Ve){return this._allowedModifierKeys=Ve,this}withTypeAhead(Ve=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,J.b)(De=>this._pressedLetters.push(De)),function(Rt,Ve=Ye.z){return(0,Ie.e)((De,Je)=>{let gt=null,cn=null,ri=null;const $e=()=>{if(gt){gt.unsubscribe(),gt=null;const he=cn;cn=null,Je.next(he)}};function ke(){const he=ri+Rt,Le=Ve.now();if(Le<he)return gt=this.schedule(void 0,he-Le),void Je.add(gt);$e()}De.subscribe(new Me.Q(Je,he=>{cn=he,ri=Ve.now(),gt||(gt=Ve.schedule(ke,Rt),Je.add(gt))},()=>{$e(),Je.complete()},void 0,()=>{cn=gt=null}))})}(Ve),(0,E.h)(()=>this._pressedLetters.length>0),(0,de.U)(()=>this._pressedLetters.join(""))).subscribe(De=>{const Je=this._getItemsArray();for(let gt=1;gt<Je.length+1;gt++){const cn=(this._activeItemIndex+gt)%Je.length,ri=Je[cn];if(!this._skipPredicateFn(ri)&&0===ri.getLabel().toUpperCase().trim().indexOf(De)){this.setActiveItem(cn);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Ve=!0){return this._homeAndEnd=Ve,this}setActiveItem(Ve){const De=this._activeItem;this.updateActiveItem(Ve),this._activeItem!==De&&this.change.next(this._activeItemIndex)}onKeydown(Ve){const De=Ve.keyCode,gt=["altKey","ctrlKey","metaKey","shiftKey"].every(cn=>!Ve[cn]||this._allowedModifierKeys.indexOf(cn)>-1);switch(De){case Se.Mf:return void this.tabOut.next();case Se.JH:if(this._vertical&&gt){this.setNextItemActive();break}return;case Se.LH:if(this._vertical&&gt){this.setPreviousItemActive();break}return;case Se.SV:if(this._horizontal&&gt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Se.oh:if(this._horizontal&&gt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Se.Sd:if(this._homeAndEnd&&gt){this.setFirstItemActive();break}return;case Se.uR:if(this._homeAndEnd&&gt){this.setLastItemActive();break}return;default:return void((gt||(0,Se.Vb)(Ve,"shiftKey"))&&(Ve.key&&1===Ve.key.length?this._letterKeyStream.next(Ve.key.toLocaleUpperCase()):(De>=Se.A&&De<=Se.Z||De>=Se.xE&&De<=Se.aO)&&this._letterKeyStream.next(String.fromCharCode(De))))}this._pressedLetters=[],Ve.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Ve){const De=this._getItemsArray(),Je="number"==typeof Ve?Ve:De.indexOf(Ve),gt=De[Je];this._activeItem=null==gt?null:gt,this._activeItemIndex=Je}_setActiveItemByDelta(Ve){this._wrap?this._setActiveInWrapMode(Ve):this._setActiveInDefaultMode(Ve)}_setActiveInWrapMode(Ve){const De=this._getItemsArray();for(let Je=1;Je<=De.length;Je++){const gt=(this._activeItemIndex+Ve*Je+De.length)%De.length;if(!this._skipPredicateFn(De[gt]))return void this.setActiveItem(gt)}}_setActiveInDefaultMode(Ve){this._setActiveItemByIndex(this._activeItemIndex+Ve,Ve)}_setActiveItemByIndex(Ve,De){const Je=this._getItemsArray();if(Je[Ve]){for(;this._skipPredicateFn(Je[Ve]);)if(!Je[Ve+=De])return;this.setActiveItem(Ve)}}_getItemsArray(){return this._items instanceof y.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Ve){return this._origin=Ve,this}setActiveItem(Ve){super.setActiveItem(Ve),this.activeItem&&this.activeItem.focus(this._origin)}}let En=(()=>{class Rt{constructor(De){this._platform=De}isDisabled(De){return De.hasAttribute("disabled")}isVisible(De){return function(Rt){return!!(Rt.offsetWidth||Rt.offsetHeight||"function"==typeof Rt.getClientRects&&Rt.getClientRects().length)}(De)&&"visible"===getComputedStyle(De).visibility}isTabbable(De){if(!this._platform.isBrowser)return!1;const Je=function(Rt){try{return Rt.frameElement}catch(Ve){return null}}(function(Rt){return Rt.ownerDocument&&Rt.ownerDocument.defaultView||window}(De));if(Je&&(-1===Mr(Je)||!this.isVisible(Je)))return!1;let gt=De.nodeName.toLowerCase(),cn=Mr(De);return De.hasAttribute("contenteditable")?-1!==cn:!("iframe"===gt||"object"===gt||this._platform.WEBKIT&&this._platform.IOS&&!function(Rt){let Ve=Rt.nodeName.toLowerCase(),De="input"===Ve&&Rt.type;return"text"===De||"password"===De||"select"===Ve||"textarea"===Ve}(De))&&("audio"===gt?!!De.hasAttribute("controls")&&-1!==cn:"video"===gt?-1!==cn&&(null!==cn||this._platform.FIREFOX||De.hasAttribute("controls")):De.tabIndex>=0)}isFocusable(De,Je){return function(Rt){return!function(Rt){return function(Rt){return"input"==Rt.nodeName.toLowerCase()}(Rt)&&"hidden"==Rt.type}(Rt)&&(function(Rt){let Ve=Rt.nodeName.toLowerCase();return"input"===Ve||"select"===Ve||"button"===Ve||"textarea"===Ve}(Rt)||function(Rt){return function(Rt){return"a"==Rt.nodeName.toLowerCase()}(Rt)&&Rt.hasAttribute("href")}(Rt)||Rt.hasAttribute("contenteditable")||fs(Rt))}(De)&&!this.isDisabled(De)&&((null==Je?void 0:Je.ignoreVisibility)||this.isVisible(De))}}return Rt.\u0275fac=function(De){return new(De||Rt)(y.LFG(Lt.t4))},Rt.\u0275prov=y.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();function fs(Rt){if(!Rt.hasAttribute("tabindex")||void 0===Rt.tabIndex)return!1;let Ve=Rt.getAttribute("tabindex");return!(!Ve||isNaN(parseInt(Ve,10)))}function Mr(Rt){if(!fs(Rt))return null;const Ve=parseInt(Rt.getAttribute("tabindex")||"",10);return isNaN(Ve)?-1:Ve}class Wr{constructor(Ve,De,Je,gt,cn=!1){this._element=Ve,this._checker=De,this._ngZone=Je,this._document=gt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,cn||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Ve){this._enabled=Ve,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ve,this._startAnchor),this._toggleAnchorTabIndex(Ve,this._endAnchor))}destroy(){const Ve=this._startAnchor,De=this._endAnchor;Ve&&(Ve.removeEventListener("focus",this.startAnchorListener),Ve.remove()),De&&(De.removeEventListener("focus",this.endAnchorListener),De.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Ve){return new Promise(De=>{this._executeOnStable(()=>De(this.focusInitialElement(Ve)))})}focusFirstTabbableElementWhenReady(Ve){return new Promise(De=>{this._executeOnStable(()=>De(this.focusFirstTabbableElement(Ve)))})}focusLastTabbableElementWhenReady(Ve){return new Promise(De=>{this._executeOnStable(()=>De(this.focusLastTabbableElement(Ve)))})}_getRegionBoundary(Ve){const De=this._element.querySelectorAll(`[cdk-focus-region-${Ve}], [cdkFocusRegion${Ve}], [cdk-focus-${Ve}]`);return"start"==Ve?De.length?De[0]:this._getFirstTabbableElement(this._element):De.length?De[De.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Ve){const De=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(De){if(!this._checker.isFocusable(De)){const Je=this._getFirstTabbableElement(De);return null==Je||Je.focus(Ve),!!Je}return De.focus(Ve),!0}return this.focusFirstTabbableElement(Ve)}focusFirstTabbableElement(Ve){const De=this._getRegionBoundary("start");return De&&De.focus(Ve),!!De}focusLastTabbableElement(Ve){const De=this._getRegionBoundary("end");return De&&De.focus(Ve),!!De}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Ve){if(this._checker.isFocusable(Ve)&&this._checker.isTabbable(Ve))return Ve;const De=Ve.children;for(let Je=0;Je<De.length;Je++){const gt=De[Je].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(De[Je]):null;if(gt)return gt}return null}_getLastTabbableElement(Ve){if(this._checker.isFocusable(Ve)&&this._checker.isTabbable(Ve))return Ve;const De=Ve.children;for(let Je=De.length-1;Je>=0;Je--){const gt=De[Je].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(De[Je]):null;if(gt)return gt}return null}_createAnchor(){const Ve=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Ve),Ve.classList.add("cdk-visually-hidden"),Ve.classList.add("cdk-focus-trap-anchor"),Ve.setAttribute("aria-hidden","true"),Ve}_toggleAnchorTabIndex(Ve,De){Ve?De.setAttribute("tabindex","0"):De.removeAttribute("tabindex")}toggleAnchors(Ve){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ve,this._startAnchor),this._toggleAnchorTabIndex(Ve,this._endAnchor))}_executeOnStable(Ve){this._ngZone.isStable?Ve():this._ngZone.onStable.pipe((0,Ae.q)(1)).subscribe(Ve)}}let jr=(()=>{class Rt{constructor(De,Je,gt){this._checker=De,this._ngZone=Je,this._document=gt}create(De,Je=!1){return new Wr(De,this._checker,this._ngZone,this._document,Je)}}return Rt.\u0275fac=function(De){return new(De||Rt)(y.LFG(En),y.LFG(y.R0b),y.LFG(B.K0))},Rt.\u0275prov=y.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();function dr(Rt){return 0===Rt.offsetX&&0===Rt.offsetY}function pr(Rt){const Ve=Rt.touches&&Rt.touches[0]||Rt.changedTouches&&Rt.changedTouches[0];return!(!Ve||-1!==Ve.identifier||null!=Ve.radiusX&&1!==Ve.radiusX||null!=Ve.radiusY&&1!==Ve.radiusY)}const ii=new y.OlP("cdk-input-modality-detector-options"),Dr={ignoreKeys:[Se.zL,Se.jx,Se.b2,Se.MW,Se.JU]},Ht=(0,Lt.i$)({passive:!0,capture:!0});let In=(()=>{class Rt{constructor(De,Je,gt,cn){this._platform=De,this._mostRecentTarget=null,this._modality=new ce.X(null),this._lastTouchMs=0,this._onKeydown=ri=>{var $e,ke;(null==(ke=null==($e=this._options)?void 0:$e.ignoreKeys)?void 0:ke.some(he=>he===ri.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,Lt.sA)(ri))},this._onMousedown=ri=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dr(ri)?"keyboard":"mouse"),this._mostRecentTarget=(0,Lt.sA)(ri))},this._onTouchstart=ri=>{pr(ri)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,Lt.sA)(ri))},this._options=Cn(Cn({},Dr),cn),this.modalityDetected=this._modality.pipe((0,E.h)((Ve,De)=>1<=De)),this.modalityChanged=this.modalityDetected.pipe((0,Be.x)()),De.isBrowser&&Je.runOutsideAngular(()=>{gt.addEventListener("keydown",this._onKeydown,Ht),gt.addEventListener("mousedown",this._onMousedown,Ht),gt.addEventListener("touchstart",this._onTouchstart,Ht)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ht),document.removeEventListener("mousedown",this._onMousedown,Ht),document.removeEventListener("touchstart",this._onTouchstart,Ht))}}return Rt.\u0275fac=function(De){return new(De||Rt)(y.LFG(Lt.t4),y.LFG(y.R0b),y.LFG(B.K0),y.LFG(ii,8))},Rt.\u0275prov=y.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();const kr=new y.OlP("cdk-focus-monitor-default-options"),Kn=(0,Lt.i$)({passive:!0,capture:!0});let mt=(()=>{class Rt{constructor(De,Je,gt,cn,ri){this._ngZone=De,this._platform=Je,this._inputModalityDetector=gt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new j.x,this._rootNodeFocusAndBlurListener=$e=>{const ke=(0,Lt.sA)($e),he="focus"===$e.type?this._onFocus:this._onBlur;for(let Le=ke;Le;Le=Le.parentElement)he.call(this,$e,Le)},this._document=cn,this._detectionMode=(null==ri?void 0:ri.detectionMode)||0}monitor(De,Je=!1){const gt=(0,st.fI)(De);if(!this._platform.isBrowser||1!==gt.nodeType)return(0,Oe.of)(null);const cn=(0,Lt.kV)(gt)||this._getDocument(),ri=this._elementInfo.get(gt);if(ri)return Je&&(ri.checkChildren=!0),ri.subject;const $e={checkChildren:Je,subject:new j.x,rootNode:cn};return this._elementInfo.set(gt,$e),this._registerGlobalListeners($e),$e.subject}stopMonitoring(De){const Je=(0,st.fI)(De),gt=this._elementInfo.get(Je);gt&&(gt.subject.complete(),this._setClasses(Je),this._elementInfo.delete(Je),this._removeGlobalListeners(gt))}focusVia(De,Je,gt){const cn=(0,st.fI)(De);cn===this._getDocument().activeElement?this._getClosestElementsInfo(cn).forEach(([$e,ke])=>this._originChanged($e,Je,ke)):(this._setOrigin(Je),"function"==typeof cn.focus&&cn.focus(gt))}ngOnDestroy(){this._elementInfo.forEach((De,Je)=>this.stopMonitoring(Je))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(De){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(De)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(De){return 1===this._detectionMode||!!(null==De?void 0:De.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(De,Je){De.classList.toggle("cdk-focused",!!Je),De.classList.toggle("cdk-touch-focused","touch"===Je),De.classList.toggle("cdk-keyboard-focused","keyboard"===Je),De.classList.toggle("cdk-mouse-focused","mouse"===Je),De.classList.toggle("cdk-program-focused","program"===Je)}_setOrigin(De,Je=!1){this._ngZone.runOutsideAngular(()=>{this._origin=De,this._originFromTouchInteraction="touch"===De&&Je,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(De,Je){const gt=this._elementInfo.get(Je),cn=(0,Lt.sA)(De);!gt||!gt.checkChildren&&Je!==cn||this._originChanged(Je,this._getFocusOrigin(cn),gt)}_onBlur(De,Je){const gt=this._elementInfo.get(Je);!gt||gt.checkChildren&&De.relatedTarget instanceof Node&&Je.contains(De.relatedTarget)||(this._setClasses(Je),this._emitOrigin(gt.subject,null))}_emitOrigin(De,Je){this._ngZone.run(()=>De.next(Je))}_registerGlobalListeners(De){if(!this._platform.isBrowser)return;const Je=De.rootNode,gt=this._rootNodeFocusListenerCount.get(Je)||0;gt||this._ngZone.runOutsideAngular(()=>{Je.addEventListener("focus",this._rootNodeFocusAndBlurListener,Kn),Je.addEventListener("blur",this._rootNodeFocusAndBlurListener,Kn)}),this._rootNodeFocusListenerCount.set(Je,gt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,_e.R)(this._stopInputModalityDetector)).subscribe(cn=>{this._setOrigin(cn,!0)}))}_removeGlobalListeners(De){const Je=De.rootNode;if(this._rootNodeFocusListenerCount.has(Je)){const gt=this._rootNodeFocusListenerCount.get(Je);gt>1?this._rootNodeFocusListenerCount.set(Je,gt-1):(Je.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Kn),Je.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Kn),this._rootNodeFocusListenerCount.delete(Je))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(De,Je,gt){this._setClasses(De,Je),this._emitOrigin(gt.subject,Je),this._lastFocusOrigin=Je}_getClosestElementsInfo(De){const Je=[];return this._elementInfo.forEach((gt,cn)=>{(cn===De||gt.checkChildren&&cn.contains(De))&&Je.push([cn,gt])}),Je}}return Rt.\u0275fac=function(De){return new(De||Rt)(y.LFG(y.R0b),y.LFG(Lt.t4),y.LFG(In),y.LFG(B.K0,8),y.LFG(kr,8))},Rt.\u0275prov=y.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})();const et="cdk-high-contrast-black-on-white",Ut="cdk-high-contrast-white-on-black",fn="cdk-high-contrast-active";let Mn=(()=>{class Rt{constructor(De,Je){this._platform=De,this._document=Je}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const De=this._document.createElement("div");De.style.backgroundColor="rgb(1,2,3)",De.style.position="absolute",this._document.body.appendChild(De);const Je=this._document.defaultView||window,gt=Je&&Je.getComputedStyle?Je.getComputedStyle(De):null,cn=(gt&&gt.backgroundColor||"").replace(/ /g,"");switch(De.remove(),cn){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const De=this._document.body.classList;De.remove(fn),De.remove(et),De.remove(Ut),this._hasCheckedHighContrastMode=!0;const Je=this.getHighContrastMode();1===Je?(De.add(fn),De.add(et)):2===Je&&(De.add(fn),De.add(Ut))}}}return Rt.\u0275fac=function(De){return new(De||Rt)(y.LFG(Lt.t4),y.LFG(B.K0))},Rt.\u0275prov=y.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})()},8290:(sn,at,q)=>{"use strict";q.d(at,{vT:()=>Ie,Is:()=>Se});var B=q(3668),y=q(6019);const j=new B.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,B.f3M)(y.K0)}}),ce=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Se=(()=>{class Me{constructor(E){if(this.value="ltr",this.change=new B.vpe,E){const J=E.documentElement?E.documentElement.dir:null;this.value=function(Me){const Ge=(null==Me?void 0:Me.toLowerCase())||"";return"auto"===Ge&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?ce.test(navigator.language)?"rtl":"ltr":"rtl"===Ge?"rtl":"ltr"}((E.body?E.body.dir:null)||J||"ltr")}}ngOnDestroy(){this.change.complete()}}return Me.\u0275fac=function(E){return new(E||Me)(B.LFG(j,8))},Me.\u0275prov=B.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me})(),Ie=(()=>{class Me{}return Me.\u0275fac=function(E){return new(E||Me)},Me.\u0275mod=B.oAB({type:Me}),Me.\u0275inj=B.cJS({}),Me})()},348:(sn,at,q)=>{"use strict";q.d(at,{Eq:()=>ce,Ig:()=>y,HM:()=>Oe,fI:()=>Se,su:()=>j});var B=q(3668);function y(Ie){return null!=Ie&&"false"!=`${Ie}`}function j(Ie,Me=0){return function(Ie){return!isNaN(parseFloat(Ie))&&!isNaN(Number(Ie))}(Ie)?Number(Ie):Me}function ce(Ie){return Array.isArray(Ie)?Ie:[Ie]}function Oe(Ie){return null==Ie?"":"string"==typeof Ie?Ie:`${Ie}px`}function Se(Ie){return Ie instanceof B.SBq?Ie.nativeElement:Ie}},1628:(sn,at,q)=>{"use strict";q.d(at,{A:()=>on,zL:()=>Ye,jx:()=>Se,JH:()=>Lt,uR:()=>de,K5:()=>ce,hY:()=>Ge,Sd:()=>Ae,oh:()=>Be,b2:()=>es,MW:()=>In,aO:()=>Ri,VM:()=>J,Ku:()=>$,SV:()=>st,JU:()=>Oe,L_:()=>E,Mf:()=>j,LH:()=>_e,Z:()=>Ht,xE:()=>xt,Vb:()=>Kr});const j=9,ce=13,Oe=16,Se=17,Ye=18,Ge=27,E=32,$=33,J=34,de=35,Ae=36,Be=37,_e=38,st=39,Lt=40,xt=48,Ri=57,on=65,Ht=90,In=91,es=224;function Kr(ls,...ts){return ts.length?ts.some(br=>ls[br]):ls.altKey||ls.shiftKey||ls.ctrlKey||ls.metaKey}},928:(sn,at,q)=>{"use strict";q.d(at,{t4:()=>me,ud:()=>ce,sA:()=>Lt,ht:()=>st,kV:()=>_e,Oy:()=>Xe,i$:()=>Ge,Mq:()=>J});var B=q(3668),y=q(6019);let j;try{j="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(He){j=!1}let Ie,$,Ae,me=(()=>{class He{constructor(ft){this._platformId=ft,this.isBrowser=this._platformId?(0,y.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!j)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return He.\u0275fac=function(ft){return new(ft||He)(B.LFG(B.Lbi))},He.\u0275prov=B.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})(),ce=(()=>{class He{}return He.\u0275fac=function(ft){return new(ft||He)},He.\u0275mod=B.oAB({type:He}),He.\u0275inj=B.cJS({}),He})();function Ge(He){return function(){if(null==Ie&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ie=!0}))}finally{Ie=Ie||!1}return Ie}()?He:!!He.capture}function J(){if(null==$){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return $=!1,$;if("scrollBehavior"in document.documentElement.style)$=!0;else{const He=Element.prototype.scrollTo;$=!!He&&!/\{\s*\[native code\]\s*\}/.test(He.toString())}}return $}function _e(He){if(function(){if(null==Ae){const He="undefined"!=typeof document?document.head:null;Ae=!(!He||!He.createShadowRoot&&!He.attachShadow)}return Ae}()){const pt=He.getRootNode?He.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&pt instanceof ShadowRoot)return pt}return null}function st(){let He="undefined"!=typeof document&&document?document.activeElement:null;for(;He&&He.shadowRoot;){const pt=He.shadowRoot.activeElement;if(pt===He)break;He=pt}return He}function Lt(He){return He.composedPath?He.composedPath()[0]:He.target}function Xe(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},5711:(sn,at,q)=>{"use strict";q.d(at,{en:()=>$,Pl:()=>st,C5:()=>Me,u0:()=>de,eL:()=>Xe,UE:()=>Ge});var B=q(3668),y=q(6019);class Ie{attach(ft){return this._attachedHost=ft,ft.attach(this)}detach(){let ft=this._attachedHost;null!=ft&&(this._attachedHost=null,ft.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ft){this._attachedHost=ft}}class Me extends Ie{constructor(ft,xt,At,Ze){super(),this.component=ft,this.viewContainerRef=xt,this.injector=At,this.componentFactoryResolver=Ze}}class Ge extends Ie{constructor(ft,xt,At){super(),this.templateRef=ft,this.viewContainerRef=xt,this.context=At}get origin(){return this.templateRef.elementRef}attach(ft,xt=this.context){return this.context=xt,super.attach(ft)}detach(){return this.context=void 0,super.detach()}}class E extends Ie{constructor(ft){super(),this.element=ft instanceof B.SBq?ft.nativeElement:ft}}class ${constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ft){return ft instanceof Me?(this._attachedPortal=ft,this.attachComponentPortal(ft)):ft instanceof Ge?(this._attachedPortal=ft,this.attachTemplatePortal(ft)):this.attachDomPortal&&ft instanceof E?(this._attachedPortal=ft,this.attachDomPortal(ft)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ft){this._disposeFn=ft}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class de extends ${constructor(ft,xt,At,Ze,Qe){super(),this.outletElement=ft,this._componentFactoryResolver=xt,this._appRef=At,this._defaultInjector=Ze,this.attachDomPortal=ut=>{const bt=ut.element,Vt=this._document.createComment("dom-portal");bt.parentNode.insertBefore(Vt,bt),this.outletElement.appendChild(bt),this._attachedPortal=ut,super.setDisposeFn(()=>{Vt.parentNode&&Vt.parentNode.replaceChild(bt,Vt)})},this._document=Qe}attachComponentPortal(ft){const At=(ft.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ft.component);let Ze;return ft.viewContainerRef?(Ze=ft.viewContainerRef.createComponent(At,ft.viewContainerRef.length,ft.injector||ft.viewContainerRef.injector),this.setDisposeFn(()=>Ze.destroy())):(Ze=At.create(ft.injector||this._defaultInjector),this._appRef.attachView(Ze.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Ze.hostView),Ze.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Ze)),this._attachedPortal=ft,Ze}attachTemplatePortal(ft){let xt=ft.viewContainerRef,At=xt.createEmbeddedView(ft.templateRef,ft.context);return At.rootNodes.forEach(Ze=>this.outletElement.appendChild(Ze)),At.detectChanges(),this.setDisposeFn(()=>{let Ze=xt.indexOf(At);-1!==Ze&&xt.remove(Ze)}),this._attachedPortal=ft,At}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ft){return ft.hostView.rootNodes[0]}}let st=(()=>{class pt extends ${constructor(xt,At,Ze){super(),this._componentFactoryResolver=xt,this._viewContainerRef=At,this._isInitialized=!1,this.attached=new B.vpe,this.attachDomPortal=Qe=>{const ut=Qe.element,bt=this._document.createComment("dom-portal");Qe.setAttachedHost(this),ut.parentNode.insertBefore(bt,ut),this._getRootNode().appendChild(ut),this._attachedPortal=Qe,super.setDisposeFn(()=>{bt.parentNode&&bt.parentNode.replaceChild(ut,bt)})},this._document=Ze}get portal(){return this._attachedPortal}set portal(xt){this.hasAttached()&&!xt&&!this._isInitialized||(this.hasAttached()&&super.detach(),xt&&super.attach(xt),this._attachedPortal=xt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(xt){xt.setAttachedHost(this);const At=null!=xt.viewContainerRef?xt.viewContainerRef:this._viewContainerRef,Qe=(xt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(xt.component),ut=At.createComponent(Qe,At.length,xt.injector||At.injector);return At!==this._viewContainerRef&&this._getRootNode().appendChild(ut.hostView.rootNodes[0]),super.setDisposeFn(()=>ut.destroy()),this._attachedPortal=xt,this._attachedRef=ut,this.attached.emit(ut),ut}attachTemplatePortal(xt){xt.setAttachedHost(this);const At=this._viewContainerRef.createEmbeddedView(xt.templateRef,xt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=xt,this._attachedRef=At,this.attached.emit(At),At}_getRootNode(){const xt=this._viewContainerRef.element.nativeElement;return xt.nodeType===xt.ELEMENT_NODE?xt:xt.parentNode}}return pt.\u0275fac=function(xt){return new(xt||pt)(B.Y36(B._Vd),B.Y36(B.s_b),B.Y36(y.K0))},pt.\u0275dir=B.lG2({type:pt,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[B.qOj]}),pt})(),Xe=(()=>{class pt{}return pt.\u0275fac=function(xt){return new(xt||pt)},pt.\u0275mod=B.oAB({type:pt}),pt.\u0275inj=B.cJS({}),pt})()},6019:(sn,at,q)=>{"use strict";q.d(at,{mr:()=>st,ez:()=>go,K0:()=>Se,JJ:()=>ll,Do:()=>Xe,V_:()=>Me,Ye:()=>He,S$:()=>Be,O5:()=>Kr,PC:()=>Zr,b0:()=>Lt,lw:()=>Ye,EM:()=>Go,JF:()=>Wo,NF:()=>_o,w_:()=>Oe,bD:()=>Vo,q:()=>j,Mx:()=>ms,HT:()=>ce});var B=q(3668);let y=null;function j(){return y}function ce(k){y||(y=k)}class Oe{}const Se=new B.OlP("DocumentToken");let Ye=(()=>{class k{historyGo(H){throw new Error("Not implemented")}}return k.\u0275fac=function(H){return new(H||k)},k.\u0275prov=B.Yz7({token:k,factory:function(){return(0,B.LFG)(Ge)},providedIn:"platform"}),k})();const Me=new B.OlP("Location Initialized");let Ge=(()=>{class k extends Ye{constructor(H){super(),this._doc=H,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(H){const se=j().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",H,!1),()=>se.removeEventListener("popstate",H)}onHashChange(H){const se=j().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",H,!1),()=>se.removeEventListener("hashchange",H)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(H){this.location.pathname=H}pushState(H,se,Pe){E()?this._history.pushState(H,se,Pe):this.location.hash=Pe}replaceState(H,se,Pe){E()?this._history.replaceState(H,se,Pe):this.location.hash=Pe}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return k.\u0275fac=function(H){return new(H||k)(B.LFG(Se))},k.\u0275prov=B.Yz7({token:k,factory:function(){return new Ge((0,B.LFG)(Se))},providedIn:"platform"}),k})();function E(){return!!window.history.pushState}function J(k,Q){if(0==k.length)return Q;if(0==Q.length)return k;let H=0;return k.endsWith("/")&&H++,Q.startsWith("/")&&H++,2==H?k+Q.substring(1):1==H?k+Q:k+"/"+Q}function de(k){const Q=k.match(/#|\?|$/),H=Q&&Q.index||k.length;return k.slice(0,H-("/"===k[H-1]?1:0))+k.slice(H)}function Ae(k){return k&&"?"!==k[0]?"?"+k:k}let Be=(()=>{class k{historyGo(H){throw new Error("Not implemented")}}return k.\u0275fac=function(H){return new(H||k)},k.\u0275prov=B.Yz7({token:k,factory:function(){return function(k){const Q=(0,B.LFG)(Se).location;return new Lt((0,B.LFG)(Ye),Q&&Q.origin||"")}()},providedIn:"root"}),k})();const st=new B.OlP("appBaseHref");let Lt=(()=>{class k extends Be{constructor(H,se){if(super(),this._platformLocation=H,this._removeListenerFns=[],null==se&&(se=this._platformLocation.getBaseHrefFromDOM()),null==se)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=se}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return J(this._baseHref,H)}path(H=!1){const se=this._platformLocation.pathname+Ae(this._platformLocation.search),Pe=this._platformLocation.hash;return Pe&&H?`${se}${Pe}`:se}pushState(H,se,Pe,_t){const Ot=this.prepareExternalUrl(Pe+Ae(_t));this._platformLocation.pushState(H,se,Ot)}replaceState(H,se,Pe,_t){const Ot=this.prepareExternalUrl(Pe+Ae(_t));this._platformLocation.replaceState(H,se,Ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(H=0){var se,Pe;null==(Pe=(se=this._platformLocation).historyGo)||Pe.call(se,H)}}return k.\u0275fac=function(H){return new(H||k)(B.LFG(Ye),B.LFG(st,8))},k.\u0275prov=B.Yz7({token:k,factory:k.\u0275fac}),k})(),Xe=(()=>{class k extends Be{constructor(H,se){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(H){const se=J(this._baseHref,H);return se.length>0?"#"+se:se}pushState(H,se,Pe,_t){let Ot=this.prepareExternalUrl(Pe+Ae(_t));0==Ot.length&&(Ot=this._platformLocation.pathname),this._platformLocation.pushState(H,se,Ot)}replaceState(H,se,Pe,_t){let Ot=this.prepareExternalUrl(Pe+Ae(_t));0==Ot.length&&(Ot=this._platformLocation.pathname),this._platformLocation.replaceState(H,se,Ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(H=0){var se,Pe;null==(Pe=(se=this._platformLocation).historyGo)||Pe.call(se,H)}}return k.\u0275fac=function(H){return new(H||k)(B.LFG(Ye),B.LFG(st,8))},k.\u0275prov=B.Yz7({token:k,factory:k.\u0275fac}),k})(),He=(()=>{class k{constructor(H,se){this._subject=new B.vpe,this._urlChangeListeners=[],this._platformStrategy=H;const Pe=this._platformStrategy.getBaseHref();this._platformLocation=se,this._baseHref=de(xt(Pe)),this._platformStrategy.onPopState(_t=>{this._subject.emit({url:this.path(!0),pop:!0,state:_t.state,type:_t.type})})}path(H=!1){return this.normalize(this._platformStrategy.path(H))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(H,se=""){return this.path()==this.normalize(H+Ae(se))}normalize(H){return k.stripTrailingSlash(function(k,Q){return k&&Q.startsWith(k)?Q.substring(k.length):Q}(this._baseHref,xt(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._platformStrategy.prepareExternalUrl(H)}go(H,se="",Pe=null){this._platformStrategy.pushState(Pe,"",H,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ae(se)),Pe)}replaceState(H,se="",Pe=null){this._platformStrategy.replaceState(Pe,"",H,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ae(se)),Pe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(H=0){var se,Pe;null==(Pe=(se=this._platformStrategy).historyGo)||Pe.call(se,H)}onUrlChange(H){this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)}))}_notifyUrlChangeListeners(H="",se){this._urlChangeListeners.forEach(Pe=>Pe(H,se))}subscribe(H,se,Pe){return this._subject.subscribe({next:H,error:se,complete:Pe})}}return k.normalizeQueryParams=Ae,k.joinWithSlash=J,k.stripTrailingSlash=de,k.\u0275fac=function(H){return new(H||k)(B.LFG(Be),B.LFG(Ye))},k.\u0275prov=B.Yz7({token:k,factory:function(){return new He((0,B.LFG)(Be),(0,B.LFG)(Ye))},providedIn:"root"}),k})();function xt(k){return k.replace(/\/index.html$/,"")}var Ze=(()=>((Ze=Ze||{})[Ze.Decimal=0]="Decimal",Ze[Ze.Percent=1]="Percent",Ze[Ze.Currency=2]="Currency",Ze[Ze.Scientific=3]="Scientific",Ze))(),Qe=(()=>((Qe=Qe||{})[Qe.Zero=0]="Zero",Qe[Qe.One=1]="One",Qe[Qe.Two=2]="Two",Qe[Qe.Few=3]="Few",Qe[Qe.Many=4]="Many",Qe[Qe.Other=5]="Other",Qe))(),yt=(()=>((yt=yt||{})[yt.Decimal=0]="Decimal",yt[yt.Group=1]="Group",yt[yt.List=2]="List",yt[yt.PercentSign=3]="PercentSign",yt[yt.PlusSign=4]="PlusSign",yt[yt.MinusSign=5]="MinusSign",yt[yt.Exponential=6]="Exponential",yt[yt.SuperscriptingExponent=7]="SuperscriptingExponent",yt[yt.PerMille=8]="PerMille",yt[yt.Infinity=9]="Infinity",yt[yt.NaN=10]="NaN",yt[yt.TimeSeparator=11]="TimeSeparator",yt[yt.CurrencyDecimal=12]="CurrencyDecimal",yt[yt.CurrencyGroup=13]="CurrencyGroup",yt))();function ai(k,Q){const H=(0,B.cg1)(k),se=H[B.wAp.NumberSymbols][Q];if(void 0===se){if(Q===yt.CurrencyDecimal)return H[B.wAp.NumberSymbols][yt.Decimal];if(Q===yt.CurrencyGroup)return H[B.wAp.NumberSymbols][yt.Group]}return se}const Fr=B.kL8,dt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Qr(k){const Q=parseInt(k);if(isNaN(Q))throw new Error("Invalid integer literal when parsing "+k);return Q}class ks{}let Tr=(()=>{class k extends ks{constructor(H){super(),this.locale=H}getPluralCategory(H,se){switch(Fr(se||this.locale)(H)){case Qe.Zero:return"zero";case Qe.One:return"one";case Qe.Two:return"two";case Qe.Few:return"few";case Qe.Many:return"many";default:return"other"}}}return k.\u0275fac=function(H){return new(H||k)(B.LFG(B.soG))},k.\u0275prov=B.Yz7({token:k,factory:k.\u0275fac}),k})();function ms(k,Q){Q=encodeURIComponent(Q);for(const H of k.split(";")){const se=H.indexOf("="),[Pe,_t]=-1==se?[H,""]:[H.slice(0,se),H.slice(se+1)];if(Pe.trim()===Q)return decodeURIComponent(_t)}return null}let Kr=(()=>{class k{constructor(H,se){this._viewContainer=H,this._context=new ls,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){ts("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){ts("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,se){return!0}}return k.\u0275fac=function(H){return new(H||k)(B.Y36(B.s_b),B.Y36(B.Rgc))},k.\u0275dir=B.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class ls{constructor(){this.$implicit=null,this.ngIf=null}}function ts(k,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,B.AaK)(Q)}'.`)}let Zr=(()=>{class k{constructor(H,se,Pe){this._ngEl=H,this._differs=se,this._renderer=Pe,this._ngStyle=null,this._differ=null}set ngStyle(H){this._ngStyle=H,!this._differ&&H&&(this._differ=this._differs.find(H).create())}ngDoCheck(){if(this._differ){const H=this._differ.diff(this._ngStyle);H&&this._applyChanges(H)}}_setStyle(H,se){const[Pe,_t]=H.split(".");null!=(se=null!=se&&_t?`${se}${_t}`:se)?this._renderer.setStyle(this._ngEl.nativeElement,Pe,se):this._renderer.removeStyle(this._ngEl.nativeElement,Pe)}_applyChanges(H){H.forEachRemovedItem(se=>this._setStyle(se.key,null)),H.forEachAddedItem(se=>this._setStyle(se.key,se.currentValue)),H.forEachChangedItem(se=>this._setStyle(se.key,se.currentValue))}}return k.\u0275fac=function(H){return new(H||k)(B.Y36(B.SBq),B.Y36(B.aQg),B.Y36(B.Qsj))},k.\u0275dir=B.lG2({type:k,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),k})();let ll=(()=>{class k{constructor(H){this._locale=H}transform(H,se,Pe){if(!function(k){return!(null==k||""===k||k!=k)}(H))return null;Pe=Pe||this._locale;try{return function(k,Q,H){return function(k,Q,H,se,Pe,_t,Ot=!1){let bn="",_i=!1;if(isFinite(k)){let or=function(k){let se,Pe,_t,Ot,bn,Q=Math.abs(k)+"",H=0;for((Pe=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),(_t=Q.search(/e/i))>0?(Pe<0&&(Pe=_t),Pe+=+Q.slice(_t+1),Q=Q.substring(0,_t)):Pe<0&&(Pe=Q.length),_t=0;"0"===Q.charAt(_t);_t++);if(_t===(bn=Q.length))se=[0],Pe=1;else{for(bn--;"0"===Q.charAt(bn);)bn--;for(Pe-=_t,se=[],Ot=0;_t<=bn;_t++,Ot++)se[Ot]=Number(Q.charAt(_t))}return Pe>22&&(se=se.splice(0,21),H=Pe-1,Pe=1),{digits:se,exponent:H,integerLen:Pe}}(k);Ot&&(or=function(k){if(0===k.digits[0])return k;const Q=k.digits.length-k.integerLen;return k.exponent?k.exponent+=2:(0===Q?k.digits.push(0,0):1===Q&&k.digits.push(0),k.integerLen+=2),k}(or));let Xi=Q.minInt,Ti=Q.minFrac,tr=Q.maxFrac;if(_t){const Do=_t.match(dt);if(null===Do)throw new Error(`${_t} is not a valid digit info`);const Ua=Do[1],ta=Do[3],na=Do[5];null!=Ua&&(Xi=Qr(Ua)),null!=ta&&(Ti=Qr(ta)),null!=na?tr=Qr(na):null!=ta&&Ti>tr&&(tr=Ti)}!function(k,Q,H){if(Q>H)throw new Error(`The minimum number of digits after fraction (${Q}) is higher than the maximum (${H}).`);let se=k.digits,Pe=se.length-k.integerLen;const _t=Math.min(Math.max(Q,Pe),H);let Ot=_t+k.integerLen,bn=se[Ot];if(Ot>0){se.splice(Math.max(k.integerLen,Ot));for(let Ti=Ot;Ti<se.length;Ti++)se[Ti]=0}else{Pe=Math.max(0,Pe),k.integerLen=1,se.length=Math.max(1,Ot=_t+1),se[0]=0;for(let Ti=1;Ti<Ot;Ti++)se[Ti]=0}if(bn>=5)if(Ot-1<0){for(let Ti=0;Ti>Ot;Ti--)se.unshift(0),k.integerLen++;se.unshift(1),k.integerLen++}else se[Ot-1]++;for(;Pe<Math.max(0,_t);Pe++)se.push(0);let _i=0!==_t;const or=Q+k.integerLen,Xi=se.reduceRight(function(Ti,tr,nr,Yr){return Yr[nr]=(tr+=Ti)<10?tr:tr-10,_i&&(0===Yr[nr]&&nr>=or?Yr.pop():_i=!1),tr>=10?1:0},0);Xi&&(se.unshift(Xi),k.integerLen++)}(or,Ti,tr);let nr=or.digits,Yr=or.integerLen;const qn=or.exponent;let io=[];for(_i=nr.every(Do=>!Do);Yr<Xi;Yr++)nr.unshift(0);for(;Yr<0;Yr++)nr.unshift(0);Yr>0?io=nr.splice(Yr,nr.length):(io=nr,nr=[0]);const jo=[];for(nr.length>=Q.lgSize&&jo.unshift(nr.splice(-Q.lgSize,nr.length).join(""));nr.length>Q.gSize;)jo.unshift(nr.splice(-Q.gSize,nr.length).join(""));nr.length&&jo.unshift(nr.join("")),bn=jo.join(ai(H,se)),io.length&&(bn+=ai(H,Pe)+io.join("")),qn&&(bn+=ai(H,yt.Exponential)+"+"+qn)}else bn=ai(H,yt.Infinity);return bn=k<0&&!_i?Q.negPre+bn+Q.negSuf:Q.posPre+bn+Q.posSuf,bn}(k,function(k,Q="-"){const H={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},se=k.split(";"),Pe=se[0],_t=se[1],Ot=-1!==Pe.indexOf(".")?Pe.split("."):[Pe.substring(0,Pe.lastIndexOf("0")+1),Pe.substring(Pe.lastIndexOf("0")+1)],bn=Ot[0],_i=Ot[1]||"";H.posPre=bn.substr(0,bn.indexOf("#"));for(let Xi=0;Xi<_i.length;Xi++){const Ti=_i.charAt(Xi);"0"===Ti?H.minFrac=H.maxFrac=Xi+1:"#"===Ti?H.maxFrac=Xi+1:H.posSuf+=Ti}const or=bn.split(",");if(H.gSize=or[1]?or[1].length:0,H.lgSize=or[2]||or[1]?(or[2]||or[1]).length:0,_t){const Xi=Pe.length-H.posPre.length-H.posSuf.length,Ti=_t.indexOf("#");H.negPre=_t.substr(0,Ti).replace(/'/g,""),H.negSuf=_t.substr(Ti+Xi).replace(/'/g,"")}else H.negPre=Q+H.posPre,H.negSuf=H.posSuf;return H}(function(k,Q){return(0,B.cg1)(k)[B.wAp.NumberFormats][Q]}(Q,Ze.Decimal),ai(Q,yt.MinusSign)),Q,yt.Group,yt.Decimal,H)}(function(k){if("string"==typeof k&&!isNaN(Number(k)-parseFloat(k)))return Number(k);if("number"!=typeof k)throw new Error(`${k} is not a number`);return k}(H),Pe,se)}catch(_t){throw function(k,Q){return Error(`InvalidPipeArgument: '${Q}' for pipe '${(0,B.AaK)(k)}'`)}(k,_t.message)}}}return k.\u0275fac=function(H){return new(H||k)(B.Y36(B.soG,16))},k.\u0275pipe=B.Yjl({name:"number",type:k,pure:!0}),k})();let go=(()=>{class k{}return k.\u0275fac=function(H){return new(H||k)},k.\u0275mod=B.oAB({type:k}),k.\u0275inj=B.cJS({providers:[{provide:ks,useClass:Tr}]}),k})();const Vo="browser";function _o(k){return k===Vo}let Go=(()=>{class k{}return k.\u0275prov=(0,B.Yz7)({token:k,providedIn:"root",factory:()=>new Co((0,B.LFG)(Se),window)}),k})();class Co{constructor(Q,H){this.document=Q,this.window=H,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const H=function(k,Q){const H=k.getElementById(Q)||k.getElementsByName(Q)[0];if(H)return H;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const se=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let Pe=se.currentNode;for(;Pe;){const _t=Pe.shadowRoot;if(_t){const Ot=_t.getElementById(Q)||_t.querySelector(`[name="${Q}"]`);if(Ot)return Ot}Pe=se.nextNode()}}return null}(this.document,Q);H&&(this.scrollToElement(H),this.attemptFocus(H))}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=Q)}}scrollToElement(Q){const H=Q.getBoundingClientRect(),se=H.left+this.window.pageXOffset,Pe=H.top+this.window.pageYOffset,_t=this.offset();this.window.scrollTo(se-_t[0],Pe-_t[1])}attemptFocus(Q){return Q.focus(),this.document.activeElement===Q}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=xa(this.window.history)||xa(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function xa(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Wo{}},3668:(sn,at,q)=>{"use strict";q.d(at,{deG:()=>jg,tb:()=>ax,AFp:()=>rx,ip1:()=>Rv,CZH:()=>bh,hGG:()=>SE,z2F:()=>pp,sBO:()=>eE,Sil:()=>Pv,_Vd:()=>ns,EJc:()=>cx,SBq:()=>Cl,qLn:()=>ld,vpe:()=>Dl,tBr:()=>nu,XFs:()=>Wn,OlP:()=>us,zs3:()=>xo,ZZ4:()=>zg,aQg:()=>Gg,soG:()=>Hg,YKP:()=>ga,h0i:()=>hs,PXZ:()=>Yw,R0b:()=>_a,FiY:()=>Ll,Lbi:()=>ox,g9A:()=>sx,n_E:()=>Og,Qsj:()=>pv,FYo:()=>cp,JOm:()=>Ra,q3G:()=>Cs,tp0:()=>hc,Rgc:()=>hp,dDg:()=>hx,GfV:()=>vt,s_b:()=>Ng,ifc:()=>Ht,eFA:()=>mx,G48:()=>Qw,Gpc:()=>Ge,f3M:()=>vp,_c5:()=>yE,VLi:()=>Gw,c2e:()=>lx,zSh:()=>Od,wAp:()=>hi,vHH:()=>de,EiD:()=>Fp,mCW:()=>ru,qzn:()=>mc,JVY:()=>h_,pB0:()=>g_,eBb:()=>p_,L6k:()=>f_,LAX:()=>m_,cg1:()=>Pg,kL8:()=>iv,yhl:()=>Dp,dqk:()=>bi,sIi:()=>Du,CqO:()=>sh,QGY:()=>rh,F4k:()=>Wc,RDi:()=>Go,AaK:()=>Ye,z3N:()=>Ya,qOj:()=>Rf,TTD:()=>So,_Bn:()=>Pn,xp6:()=>rm,uIk:()=>os,ekj:()=>Uu,Suo:()=>Fb,Xpm:()=>Ve,lG2:()=>he,Yz7:()=>Oi,cJS:()=>ai,oAB:()=>ri,Yjl:()=>Le,Y36:()=>th,_UZ:()=>kf,qZA:()=>Ko,TgZ:()=>nh,n5z:()=>gi,Ikx:()=>rp,LFG:()=>Ss,$8M:()=>Ki,$Z:()=>Oy,NdJ:()=>oh,CRH:()=>Nb,kcU:()=>Ui,O4$:()=>Vn,oxw:()=>Uf,ALo:()=>Sb,lcZ:()=>Cb,xi3:()=>Db,Hsn:()=>ch,F$t:()=>ug,Q6J:()=>Gc,s9C:()=>uh,iGM:()=>Lb,MAs:()=>Iu,LSH:()=>Bh,Udp:()=>qf,WFA:()=>Vu,d8E:()=>Ig,YNc:()=>Au,W1O:()=>Hb,_uU:()=>Qf,Oqu:()=>nc,hij:()=>Gu,Gf:()=>Ob});var B=q(273),y=q(7908),j=q(8305),me=q(3719),ce=q(3174);function Oe(n){for(let i in n)if(n[i]===Oe)return i;throw Error("Could not find renamed property on target object.")}function Se(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function Ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Ie(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Me=Oe({__forward_ref__:Oe});function Ge(n){return n.__forward_ref__=Ge,n.toString=function(){return Ye(this())},n}function E(n){return $(n)?n():n}function $(n){return"function"==typeof n&&n.hasOwnProperty(Me)&&n.__forward_ref__===Ge}class de extends Error{constructor(i,s){super(function(n,i){return`${n?`NG0${n}: `:""}${i}`}(i,s)),this.code=i}}function _e(n){return"string"==typeof n?n:null==n?"":String(n)}function st(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():_e(n)}function pt(n,i){const s=i?` in ${i}`:"";throw new de("201",`No provider for ${st(n)} found${s}`)}function vn(n,i){null==n&&function(n,i,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${i} <=Actual]`))}(i,n,null,"!=")}function Oi(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ai(n){return{providers:n.providers||[],imports:n.imports||[]}}function Or(n){return fs(n,Fr)||fs(n,jr)}function fs(n,i){return n.hasOwnProperty(i)?n[i]:null}function er(n){return n&&(n.hasOwnProperty(Wr)||n.hasOwnProperty(Ps))?n[Wr]:null}const Fr=Oe({\u0275prov:Oe}),Wr=Oe({\u0275inj:Oe}),jr=Oe({ngInjectableDef:Oe}),Ps=Oe({ngInjectorDef:Oe});var Wn=(()=>((Wn=Wn||{})[Wn.Default=0]="Default",Wn[Wn.Host=1]="Host",Wn[Wn.Self=2]="Self",Wn[Wn.SkipSelf=4]="SkipSelf",Wn[Wn.Optional=8]="Optional",Wn))();let ur;function Cr(n){const i=ur;return ur=n,i}function ps(n,i,s){const a=Or(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Wn.Optional?null:void 0!==i?i:void pt(Ye(n),"Injector")}function pr(n){return{toString:n}.toString()}var ii=(()=>((ii=ii||{})[ii.OnPush=0]="OnPush",ii[ii.Default=1]="Default",ii))(),Ht=(()=>{return(n=Ht||(Ht={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ht;var n})();const In="undefined"!=typeof globalThis&&globalThis,ki="undefined"!=typeof window&&window,Nr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bi=In||"undefined"!=typeof global&&global||ki||Nr,Kn={},mt=[],We=Oe({\u0275cmp:Oe}),et=Oe({\u0275dir:Oe}),Ut=Oe({\u0275pipe:Oe}),fn=Oe({\u0275mod:Oe}),Mn=Oe({\u0275fac:Oe}),Wi=Oe({__NG_ELEMENT_ID__:Oe});let Rt=0;function Ve(n){return pr(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ii.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||mt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ht.Emulated,id:"c",styles:n.styles||mt,_:null,setInput:null,schemas:n.schemas||null,tView:null},c=n.directives,f=n.features,b=n.pipes;return a.id+=Rt++,a.inputs=ke(n.inputs,s),a.outputs=ke(n.outputs),f&&f.forEach(C=>C(a)),a.directiveDefs=c?()=>("function"==typeof c?c():c).map(Je):null,a.pipeDefs=b?()=>("function"==typeof b?b():b).map(gt):null,a})}function Je(n){return dt(n)||function(n){return n[et]||null}(n)}function gt(n){return function(n){return n[Ut]||null}(n)}const cn={};function ri(n){return pr(()=>{const i={type:n.type,bootstrap:n.bootstrap||mt,declarations:n.declarations||mt,imports:n.imports||mt,exports:n.exports||mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(cn[n.id]=n.type),i})}function ke(n,i){if(null==n)return Kn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let c=n[a],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),s[c]=a,i&&(i[c]=f)}return s}const he=Ve;function Le(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function dt(n){return n[We]||null}function ye(n,i){const s=n[fn]||null;if(!s&&!0===i)throw new Error(`Type ${Ye(n)} does not have '\u0275mod' property.`);return s}function xr(n){return Array.isArray(n)&&"object"==typeof n[1]}function $r(n){return Array.isArray(n)&&!0===n[1]}function Vs(n){return 0!=(8&n.flags)}function ho(n){return 2==(2&n.flags)}function fo(n){return 1==(1&n.flags)}function Zr(n){return null!==n.template}function po(n){return 0!=(512&n[2])}function no(n,i){return n.hasOwnProperty(Mn)?n[Mn]:null}class Bo{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function So(){return va}function va(n){return n.type.prototype.ngOnChanges&&(n.setInput=go),ba}function ba(){const n=Ys(this),i=null==n?void 0:n.current;if(i){const s=n.previous;if(s===Kn)n.previous=i;else for(let a in i)s[a]=i[a];n.current=null,this.ngOnChanges(i)}}function go(n,i,s,a){const c=Ys(n)||function(n,i){return n[Vo]=i}(n,{previous:Kn,current:null}),f=c.current||(c.current={}),b=c.previous,C=this.declaredInputs[s],I=b[C];f[C]=new Bo(I&&I.currentValue,i,b===Kn),n[a]=i}So.ngInherit=!0;const Vo="__ngSimpleChanges__";function Ys(n){return n[Vo]||null}const Uo="http://www.w3.org/2000/svg";let zo;function Go(n){zo=n}function sr(n){return!!n.listen}const ea={createRenderer:(n,i)=>void 0!==zo?zo:"undefined"!=typeof document?document:void 0};function k(n){for(;Array.isArray(n);)n=n[0];return n}function se(n,i){return k(i[n])}function Pe(n,i){return k(i[n.index])}function Ot(n,i){return n.data[i]}function bn(n,i){return n[i]}function _i(n,i){const s=i[n];return xr(s)?s:s[0]}function or(n){return 4==(4&n[2])}function Xi(n){return 128==(128&n[2])}function tr(n,i){return null==i?null:n[i]}function nr(n){n[18]=0}function Yr(n,i){n[5]+=i;let s=n,a=n[3];for(;null!==a&&(1===i&&1===s[5]||-1===i&&0===s[5]);)a[5]+=i,s=a,a=a[3]}const qn={lFrame:di(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ta(){return qn.bindingsEnabled}function zt(){return qn.lFrame.lView}function Hi(){return qn.lFrame.tView}function wt(){let n=rs();for(;null!==n&&64===n.type;)n=n.parent;return n}function rs(){return qn.lFrame.currentTNode}function K(n,i){const s=qn.lFrame;s.currentTNode=n,s.isParent=i}function g(){return qn.lFrame.isParent}function v(){qn.lFrame.isParent=!1}function oe(){return qn.isInCheckNoChangesMode}function Ee(n){qn.isInCheckNoChangesMode=n}function Ce(){const n=qn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Qt(){return qn.lFrame.bindingIndex++}function $n(n,i){const s=qn.lFrame;s.bindingIndex=s.bindingRootIndex=n,si(i)}function si(n){qn.lFrame.currentDirectiveIndex=n}function Ir(n){const i=qn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function F(){return qn.lFrame.currentQueryIndex}function P(n){qn.lFrame.currentQueryIndex=n}function p(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function X(n,i,s){if(s&Wn.SkipSelf){let c=i,f=n;for(;!(c=c.parent,null!==c||s&Wn.Host||(c=p(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;i=c,n=f}const a=qn.lFrame=Zt();return a.currentTNode=i,a.lView=n,!0}function ct(n){const i=Zt(),s=n[1];qn.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function Zt(){const n=qn.lFrame,i=null===n?null:n.child;return null===i?di(n):i}function di(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Fi(){const n=qn.lFrame;return qn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ur=Fi;function cs(){const n=Fi();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mr(){return qn.lFrame.selectedIndex}function Is(n){qn.lFrame.selectedIndex=n}function tn(){const n=qn.lFrame;return Ot(n.tView,n.selectedIndex)}function Vn(){qn.lFrame.currentNamespace=Uo}function Ui(){qn.lFrame.currentNamespace=null}function ro(n,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const f=n.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:Y,ngOnDestroy:ee}=f;b&&(n.contentHooks||(n.contentHooks=[])).push(-s,b),C&&((n.contentHooks||(n.contentHooks=[])).push(s,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,C)),I&&(n.viewHooks||(n.viewHooks=[])).push(-s,I),Y&&((n.viewHooks||(n.viewHooks=[])).push(s,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Y)),null!=ee&&(n.destroyHooks||(n.destroyHooks=[])).push(s,ee)}}function gr(n,i,s){Us(n,i,3,s)}function wa(n,i,s,a){(3&n[2])===s&&Us(n,i,s,a)}function _s(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function Us(n,i,s,a){const f=null!=a?a:-1,b=i.length-1;let C=0;for(let I=void 0!==a?65535&n[18]:0;I<b;I++)if("number"==typeof i[I+1]){if(C=i[I],null!=a&&C>=a)break}else i[I]<0&&(n[18]+=65536),(C<f||-1==f)&&(Ea(n,s,i,I),n[18]=(4294901760&n[18])+I+2),I++}function Ea(n,i,s,a){const c=s[a]<0,f=s[a+1],C=n[c?-s[a]:s[a]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{f.call(C)}finally{}}}else try{f.call(C)}finally{}}class zs{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Al(n,i,s){const a=sr(n);let c=0;for(;c<s.length;){const f=s[c];if("number"==typeof f){if(0!==f)break;c++;const b=s[c++],C=s[c++],I=s[c++];a?n.setAttribute(i,C,I,b):i.setAttributeNS(b,C,I)}else{const b=f,C=s[++c];Ma(b)?a&&n.setProperty(i,b,C):a?n.setAttribute(i,b,C):i.setAttribute(b,C),c++}}return c}function $o(n){return 3===n||4===n||6===n}function Ma(n){return 64===n.charCodeAt(0)}function Ks(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const c=i[a];"number"==typeof c?s=c:0===s||sa(n,s,c,null,-1===s||2===s?i[++a]:null)}}return n}function sa(n,i,s,a,c){let f=0,b=n.length;if(-1===i)b=-1;else for(;f<n.length;){const C=n[f++];if("number"==typeof C){if(C===i){b=-1;break}if(C>i){b=f-1;break}}}for(;f<n.length;){const C=n[f];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==c&&(n[f+1]=c));if(a===n[f+1])return void(n[f+2]=c)}f++,null!==a&&f++,null!==c&&f++}-1!==b&&(n.splice(b,0,i),f=b+1),n.splice(f++,0,s),null!==a&&n.splice(f++,0,a),null!==c&&n.splice(f++,0,c)}function rc(n){return-1!==n}function Ao(n){return 32767&n}function hl(n,i){let s=function(n){return n>>16}(n),a=i;for(;s>0;)a=a[15],s--;return a}let sc=!0;function oa(n){const i=sc;return sc=n,i}let xh=0;function Ca(n,i){const s=ac(n,i);if(-1!==s)return s;const a=i[1];a.firstCreatePass&&(n.injectorIndex=i.length,oc(a.data,n),oc(i,null),oc(a.blueprint,null));const c=Rl(n,i),f=n.injectorIndex;if(rc(c)){const b=Ao(c),C=hl(c,i),I=C[1].data;for(let Y=0;Y<8;Y++)i[f+Y]=C[b+Y]|I[b+Y]}return i[f+8]=c,f}function oc(n,i){n.push(0,0,0,0,0,0,0,0,i)}function ac(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Rl(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,c=i;for(;null!==c;){const f=c[1],b=f.type;if(a=2===b?f.declTNode:1===b?c[6]:null,null===a)return-1;if(s++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Il(n,i,s){!function(n,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Wi)&&(a=s[Wi]),null==a&&(a=s[Wi]=xh++);const c=255&a;i.data[n+(c>>5)]|=1<<c}(n,i,s)}function T(n,i,s){if(s&Wn.Optional)return n;pt(i,"NodeInjector")}function w(n,i,s,a){if(s&Wn.Optional&&void 0===a&&(a=null),0==(s&(Wn.Self|Wn.Host))){const c=n[9],f=Cr(void 0);try{return c?c.get(i,a,s&Wn.Optional):ps(i,a,s&Wn.Optional)}finally{Cr(f)}}return T(a,i,s)}function x(n,i,s,a=Wn.Default,c){if(null!==n){const f=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Wi)?n[Wi]:void 0;return"number"==typeof i?i>=0?255&i:z:i}(s);if("function"==typeof f){if(!X(i,n,a))return a&Wn.Host?T(c,s,a):w(i,s,a,c);try{const b=f(a);if(null!=b||a&Wn.Optional)return b;pt(s)}finally{Ur()}}else if("number"==typeof f){let b=null,C=ac(n,i),I=-1,Y=a&Wn.Host?i[16][6]:null;for((-1===C||a&Wn.SkipSelf)&&(I=-1===C?Rl(n,i):i[C+8],-1!==I&&Hn(a,!1)?(b=i[1],C=Ao(I),i=hl(I,i)):C=-1);-1!==C;){const ee=i[1];if(xn(f,C,ee.data)){const pe=ie(C,i,s,b,a,Y);if(pe!==O)return pe}I=i[C+8],-1!==I&&Hn(a,i[1].data[C+8]===Y)&&xn(f,C,i)?(b=ee,C=Ao(I),i=hl(I,i)):C=-1}}}return w(i,s,a,c)}const O={};function z(){return new On(wt(),zt())}function ie(n,i,s,a,c,f){const b=i[1],C=b.data[n+8],ee=be(C,b,s,null==a?ho(C)&&sc:a!=b&&0!=(3&C.type),c&Wn.Host&&f===C);return null!==ee?Fe(i,b,ee,C):O}function be(n,i,s,a,c){const f=n.providerIndexes,b=i.data,C=1048575&f,I=n.directiveStart,ee=f>>20,ze=c?C+ee:n.directiveEnd;for(let lt=a?C:C+ee;lt<ze;lt++){const Nt=b[lt];if(lt<I&&s===Nt||lt>=I&&Nt.type===s)return lt}if(c){const lt=b[I];if(lt&&Zr(lt)&&lt.type===s)return I}return null}function Fe(n,i,s,a){let c=n[s];const f=i.data;if(function(n){return n instanceof zs}(c)){const b=c;b.resolving&&function(n,i){throw new de("200",`Circular dependency in DI detected for ${n}`)}(st(f[s]));const C=oa(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Cr(b.injectImpl):null;X(n,a,Wn.Default);try{c=n[s]=b.factory(void 0,f,n,a),i.firstCreatePass&&s>=a.directiveStart&&function(n,i,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:f}=i.type.prototype;if(a){const b=va(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,b)}c&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,c),f&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,f),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,f))}(s,f[s],i)}finally{null!==I&&Cr(I),oa(C),b.resolving=!1,Ur()}}return c}function xn(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function Hn(n,i){return!(n&Wn.Self||n&Wn.Host&&i)}class On{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return x(this._tNode,this._lView,i,a,s)}}function gi(n){return pr(()=>{const i=n.prototype.constructor,s=i[Mn]||Ni(i),a=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==a;){const f=c[Mn]||Ni(c);if(f&&f!==s)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Ni(n){return $(n)?()=>{const i=Ni(E(n));return i&&i()}:no(n)}function Ki(n){return function(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const f=s[c];if($o(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(f===i)return s[c+1];c+=2}}}return null}(wt(),n)}const Ai="__parameters__";function Io(n,i,s){return pr(()=>{const a=function(n){return function(...s){if(n){const a=n(...s);for(const c in a)this[c]=a[c]}}}(i);function c(...f){if(this instanceof c)return a.apply(this,f),this;const b=new c(...f);return C.annotation=b,C;function C(I,Y,ee){const pe=I.hasOwnProperty(Ai)?I[Ai]:Object.defineProperty(I,Ai,{value:[]})[Ai];for(;pe.length<=ee;)pe.push(null);return(pe[ee]=pe[ee]||[]).push(b),I}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class us{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Oi({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jg=new us("AnalyzeForEntryComponents");function Ns(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(i===n&&(i=n.slice(0,s)),Ns(a,i)):i!==n&&i.push(a)}return i}function Qs(n,i){n.forEach(s=>Array.isArray(s)?Qs(s,i):i(s))}function Ga(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function cc(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Pl(n,i){const s=[];for(let a=0;a<n;a++)s.push(i);return s}function oo(n,i,s){let a=Wa(n,i);return a>=0?n[1|a]=s:(a=~a,function(n,i,s,a){let c=n.length;if(c==i)n.push(s,a);else if(1===c)n.push(a,n[0]),n[0]=s;else{for(c--,n.push(n[c-1],n[c]);c>i;)n[c]=n[c-2],c--;n[i]=s,n[i+1]=a}}(n,a,i,s)),a}function Jc(n,i){const s=Wa(n,i);if(s>=0)return n[1|s]}function Wa(n,i){return function(n,i,s){let a=0,c=n.length>>s;for(;c!==a;){const f=a+(c-a>>1),b=n[f<<s];if(i===b)return f<<s;b>i?c=f:a=f+1}return~(c<<s)}(n,i,1)}const xs={},gl="__NG_DI_FLAG__",ja="ngTempTokenPath",Qc=/\n/gm,id="__source",Yg=Oe({provide:String,useValue:Oe});let eu;function Ta(n){const i=eu;return eu=n,i}function dc(n,i=Wn.Default){if(void 0===eu)throw new Error("inject() must be called from an injection context");return null===eu?ps(n,void 0,i):eu.get(n,i&Wn.Optional?null:void 0,i)}function Ss(n,i=Wn.Default){return(ur||dc)(E(n),i)}const vp=Ss;function Rh(n){const i=[];for(let s=0;s<n.length;s++){const a=E(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let c,f=Wn.Default;for(let b=0;b<a.length;b++){const C=a[b],I=qg(C);"number"==typeof I?-1===I?c=C.token:f|=I:c=C}i.push(Ss(c,f))}else i.push(Ss(a))}return i}function $a(n,i){return n[gl]=i,n.prototype[gl]=i,n}function qg(n){return n[gl]}const nu=$a(Io("Inject",n=>({token:n})),-1),Ll=$a(Io("Optional"),8),hc=$a(Io("SkipSelf"),4);let sd;function pc(n){var i;return(null==(i=function(){if(void 0===sd&&(sd=null,bi.trustedTypes))try{sd=bi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return sd}())?void 0:i.createHTML(n))||n}class Ol{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class a_ extends Ol{getTypeName(){return"HTML"}}class l_ extends Ol{getTypeName(){return"Style"}}class c_ extends Ol{getTypeName(){return"Script"}}class u_ extends Ol{getTypeName(){return"URL"}}class d_ extends Ol{getTypeName(){return"ResourceURL"}}function Ya(n){return n instanceof Ol?n.changingThisBreaksApplicationSecurity:n}function mc(n,i){const s=Dp(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Dp(n){return n instanceof Ol&&n.getTypeName()||null}function h_(n){return new a_(n)}function f_(n){return new l_(n)}function p_(n){return new c_(n)}function m_(n){return new u_(n)}function g_(n){return new d_(n)}class __{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(pc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class y_{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=pc(i),s;const a=this.inertDocument.createElement("body");return a.innerHTML=pc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(i){const s=i.attributes;for(let c=s.length-1;0<c;c--){const b=s.item(c).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&i.removeAttribute(b)}let a=i.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const b_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,x_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ru(n){return(n=String(n)).match(b_)||n.match(x_)?n:"unsafe:"+n}function Aa(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function su(...n){const i={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(i[a]=!0);return i}const Rp=Aa("area,br,col,hr,img,wbr"),Ip=Aa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Pp=Aa("rp,rt"),Oh=su(Rp,su(Ip,Aa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),su(Pp,Aa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),su(Pp,Ip)),Fh=Aa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Nh=Aa("srcset"),Lp=su(Fh,Nh,Aa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Aa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),w_=Aa("script,style,template");class E_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let c=this.checkClobberedElement(s,s.nextSibling);if(c){s=c;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!Oh.hasOwnProperty(s))return this.sanitizedSomething=!0,!w_.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=i.attributes;for(let c=0;c<a.length;c++){const f=a.item(c),b=f.name,C=b.toLowerCase();if(!Lp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=f.value;Fh[C]&&(I=ru(I)),Nh[C]&&(n=I,I=(n=String(n)).split(",").map(i=>ru(i.trim())).join(", ")),this.buf.push(" ",b,'="',Op(I),'"')}var n;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();Oh.hasOwnProperty(s)&&!Rp.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Op(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const M_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S_=/([^\#-~ |!])/g;function Op(n){return n.replace(/&/g,"&amp;").replace(M_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(S_,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ad;function Fp(n,i){let s=null;try{ad=ad||function(n){const i=new y_(n);return function(){try{return!!(new window.DOMParser).parseFromString(pc(""),"text/html")}catch(n){return!1}}()?new __(i):i}(n);let a=i?String(i):"";s=ad.getInertBodyElement(a);let c=5,f=a;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,a=f,f=s.innerHTML,s=ad.getInertBodyElement(a)}while(a!==f);return pc((new E_).sanitizeChildren(kh(s)||s))}finally{if(s){const a=kh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function kh(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Cs=(()=>((Cs=Cs||{})[Cs.NONE=0]="NONE",Cs[Cs.HTML=1]="HTML",Cs[Cs.STYLE=2]="STYLE",Cs[Cs.SCRIPT=3]="SCRIPT",Cs[Cs.URL=4]="URL",Cs[Cs.RESOURCE_URL=5]="RESOURCE_URL",Cs))();function Bh(n){const i=function(){const n=zt();return n&&n[12]}();return i?i.sanitize(Cs.URL,n)||"":mc(n,"URL")?Ya(n):ru(_e(n))}const Bp="__ngContext__";function lo(n,i){n[Bp]=i}function Hh(n){const i=function(n){return n[Bp]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function Hp(n){return n.ngOriginalError}function b0(n,...i){n.error(...i)}class ld{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),a=(n=i)&&n.ngErrorLogger||b0;var n;a(this._console,"ERROR",i),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&Hp(i);for(;s&&Hp(s);)s=Hp(s);return s||null}}const V_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(bi))();function Si(n){return n instanceof Function?n():n}var Ra=(()=>((Ra=Ra||{})[Ra.Important=1]="Important",Ra[Ra.DashCase=2]="DashCase",Ra))();function zh(n,i){return undefined(n,i)}function Xa(n){const i=n[3];return $r(i)?i[3]:i}function Yo(n){return Gh(n[13])}function cd(n){return Gh(n[4])}function Gh(n){for(;null!==n&&!$r(n);)n=n[4];return n}function _l(n,i,s,a,c){if(null!=a){let f,b=!1;$r(a)?f=a:xr(a)&&(b=!0,a=a[0]);const C=k(a);0===n&&null!==s?null==c?qp(i,s,C):Bl(i,s,C,c||null,!0):1===n&&null!==s?Bl(i,s,C,c||null,!0):2===n?function(n,i,s){const a=fd(n,i);a&&function(n,i,s,a){sr(n)?n.removeChild(i,s,a):i.removeChild(s)}(n,a,i,s)}(i,C,b):3===n&&i.destroyNode(C),null!=f&&function(n,i,s,a,c){const f=s[7];f!==k(s)&&_l(i,n,a,f,c);for(let C=10;C<s.length;C++){const I=s[C];yc(I[1],I,n,i,a,f)}}(i,n,f,s,c)}}function dd(n,i,s){return sr(n)?n.createElement(i,s):null===s?n.createElement(i):n.createElementNS(s,i)}function $h(n,i){const s=n[9],a=s.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Yr(c,-1)),s.splice(a,1)}function _c(n,i){if(n.length<=10)return;const s=10+i,a=n[s];if(a){const c=a[17];null!==c&&c!==n&&$h(c,a),i>0&&(n[s-1][4]=a[4]);const f=cc(n,10+i);!function(n,i){yc(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(a[1],a);const b=f[19];null!==b&&b.detachView(f[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Wp(n,i){if(!(256&i[2])){const s=i[11];sr(s)&&s.destroyNode&&yc(n,i,s,3,null,null),function(n){let i=n[13];if(!i)return hd(n[1],n);for(;i;){let s=null;if(xr(i))s=i[13];else{const a=i[10];a&&(s=a)}if(!s){for(;i&&!i[4]&&i!==n;)xr(i)&&hd(i[1],i),i=i[3];null===i&&(i=n),xr(i)&&hd(i[1],i),s=i&&i[4]}i=s}}(i)}}function hd(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const c=i[s[a]];if(!(c instanceof zs)){const f=s[a+1];if(Array.isArray(f))for(let b=0;b<f.length;b+=2){const C=c[f[b]],I=f[b+1];try{I.call(C)}finally{}}else try{f.call(c)}finally{}}}}(n,i),function(n,i){const s=n.cleanup,a=i[7];let c=-1;if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const b=s[f+1],C="function"==typeof b?b(i):k(i[b]),I=a[c=s[f+2]],Y=s[f+3];"boolean"==typeof Y?C.removeEventListener(s[f],I,Y):Y>=0?a[c=Y]():a[c=-Y].unsubscribe(),f+=2}else{const b=a[c=s[f+1]];s[f].call(b)}if(null!==a){for(let f=c+1;f<a.length;f++)a[f]();i[7]=null}}(n,i),1===i[1].type&&sr(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&$r(i[3])){s!==i[3]&&$h(s,i);const a=i[19];null!==a&&a.detachView(n)}}}function $p(n,i,s){return function(n,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[0];if(2&a.flags){const c=n.data[a.directiveStart].encapsulation;if(c===Ht.None||c===Ht.Emulated)return null}return Pe(a,s)}(n,i.parent,s)}function Bl(n,i,s,a,c){sr(n)?n.insertBefore(i,s,a,c):i.insertBefore(s,a,c)}function qp(n,i,s){sr(n)?n.appendChild(i,s):i.appendChild(s)}function Xp(n,i,s,a,c){null!==a?Bl(n,i,s,a,c):qp(n,i,s)}function fd(n,i){return sr(n)?n.parentNode(i):i.parentNode}function Xh(n,i,s){return Zp(n,i,s)}let Zp=function(n,i,s){return 40&n.type?Pe(n,s):null};function du(n,i,s,a){const c=$p(n,a,i),f=i[11],C=Xh(a.parent||i[6],a,i);if(null!=c)if(Array.isArray(s))for(let I=0;I<s.length;I++)Xp(f,c,s[I],C,!1);else Xp(f,c,s,C,!1)}function hu(n,i){if(null!==i){const s=i.type;if(3&s)return Pe(i,n);if(4&s)return md(-1,n[i.index]);if(8&s){const a=i.child;if(null!==a)return hu(n,a);{const c=n[i.index];return $r(c)?md(-1,c):k(c)}}if(32&s)return zh(i,n)()||k(n[i.index]);{const a=Zh(n,i);return null!==a?Array.isArray(a)?a[0]:hu(Xa(n[16]),a):hu(n,i.next)}}return null}function Zh(n,i){return null!==i?n[16][6].projection[i.projection]:null}function md(n,i){const s=10+n+1;if(s<i.length){const a=i[s],c=a[1].firstChild;if(null!==c)return hu(a,c)}return i[7]}function gd(n,i,s,a,c,f,b){for(;null!=s;){const C=a[s.index],I=s.type;if(b&&0===i&&(C&&lo(k(C),a),s.flags|=4),64!=(64&s.flags))if(8&I)gd(n,i,s.child,a,c,f,!1),_l(i,n,c,C,f);else if(32&I){const Y=zh(s,a);let ee;for(;ee=Y();)_l(i,n,c,ee,f);_l(i,n,c,C,f)}else 16&I?Vl(n,i,a,s,c,f):_l(i,n,c,C,f);s=b?s.projectionNext:s.next}}function yc(n,i,s,a,c,f){gd(s,a,n.firstChild,i,c,f,!1)}function Vl(n,i,s,a,c,f){const b=s[16],I=b[6].projection[a.projection];if(Array.isArray(I))for(let Y=0;Y<I.length;Y++)_l(i,n,c,I[Y],f);else gd(n,i,I,b[3],c,f,!0)}function fu(n,i,s){sr(n)?n.setAttribute(i,"style",s):i.style.cssText=s}function Qh(n,i,s){sr(n)?""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s):i.className=s}function Qp(n,i,s){let a=n.length;for(;;){const c=n.indexOf(i,s);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const f=i.length;if(c+f===a||n.charCodeAt(c+f)<=32)return c}s=c+1}}const em="ng-template";function G_(n,i,s){let a=0;for(;a<n.length;){let c=n[a++];if(s&&"class"===c){if(c=n[a],-1!==Qp(c.toLowerCase(),i,0))return!0}else if(1===c){for(;a<n.length&&"string"==typeof(c=n[a++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function tm(n){return 4===n.type&&n.value!==em}function W_(n,i,s){return i===(4!==n.type||s?n.value:em)}function j_(n,i,s){let a=4;const c=n.attrs||[],f=function(n){for(let i=0;i<n.length;i++)if($o(n[i]))return i;return n.length}(c);let b=!1;for(let C=0;C<i.length;C++){const I=i[C];if("number"!=typeof I){if(!b)if(4&a){if(a=2|1&a,""!==I&&!W_(n,I,s)||""===I&&1===i.length){if(ua(a))return!1;b=!0}}else{const Y=8&a?I:i[++C];if(8&a&&null!==n.attrs){if(!G_(n.attrs,Y,s)){if(ua(a))return!1;b=!0}continue}const pe=$_(8&a?"class":I,c,tm(n),s);if(-1===pe){if(ua(a))return!1;b=!0;continue}if(""!==Y){let ze;ze=pe>f?"":c[pe+1].toLowerCase();const lt=8&a?ze:null;if(lt&&-1!==Qp(lt,Y,0)||2&a&&Y!==ze){if(ua(a))return!1;b=!0}}}}else{if(!b&&!ua(a)&&!ua(I))return!1;if(b&&ua(I))continue;b=!1,a=I|1&a}}return ua(a)||b}function ua(n){return 0==(1&n)}function $_(n,i,s,a){if(null===i)return-1;let c=0;if(a||!s){let f=!1;for(;c<i.length;){const b=i[c];if(b===n)return c;if(3===b||6===b)f=!0;else{if(1===b||2===b){let C=i[++c];for(;"string"==typeof C;)C=i[++c];continue}if(4===b)break;if(0===b){c+=4;continue}}c+=f?1:2}return-1}return function(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,n)}function nm(n,i,s=!1){for(let a=0;a<i.length;a++)if(j_(n,i[a],s))return!0;return!1}function K_(n,i){e:for(let s=0;s<i.length;s++){const a=i[s];if(n.length===a.length){for(let c=0;c<n.length;c++)if(n[c]!==a[c])continue e;return!0}}return!1}function im(n,i){return n?":not("+i.trim()+")":i}function Z_(n){let i=n[0],s=1,a=2,c="",f=!1;for(;s<n.length;){let b=n[s];if("string"==typeof b)if(2&a){const C=n[++s];c+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?c+="."+b:4&a&&(c+=" "+b);else""!==c&&!ua(b)&&(i+=im(f,c),c=""),a=b,f=f||!ua(a);s++}return""!==c&&(i+=im(f,c)),i}const Ii={};function rm(n){sm(Hi(),zt(),mr()+n,oe())}function sm(n,i,s,a){if(!a)if(3==(3&i[2])){const f=n.preOrderCheckHooks;null!==f&&gr(i,f,s)}else{const f=n.preOrderHooks;null!==f&&wa(i,f,0,s)}Is(s)}function _d(n,i){return n<<17|i<<2}function da(n){return n>>17&32767}function ef(n){return 2|n}function Za(n){return(131068&n)>>2}function tf(n,i){return-131069&n|i<<2}function nf(n){return 1|n}function wm(n,i){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const c=s[a],f=s[a+1];if(-1!==f){const b=n.data[f];P(c),b.contentQueries(2,i[f],f)}}}function pu(n,i,s,a,c,f,b,C,I,Y){const ee=i.blueprint.slice();return ee[0]=c,ee[2]=140|a,nr(ee),ee[3]=ee[15]=n,ee[8]=s,ee[10]=b||n&&n[10],ee[11]=C||n&&n[11],ee[12]=I||n&&n[12]||null,ee[9]=Y||n&&n[9]||null,ee[6]=f,ee[16]=2==i.type?n[16]:ee,ee}function Ul(n,i,s,a,c){let f=n.data[i];if(null===f)f=function(n,i,s,a,c){const f=rs(),b=g(),I=n.data[i]=function(n,i,s,a,c,f){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?f:f&&f.parent,s,i,a,c);return null===n.firstChild&&(n.firstChild=I),null!==f&&(b?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(n,i,s,a,c),qn.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=s,f.value=a,f.attrs=c;const b=function(){const n=qn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();f.injectorIndex=null===b?-1:b.injectorIndex}return K(f,!0),f}function vc(n,i,s,a){if(0===s)return-1;const c=i.length;for(let f=0;f<s;f++)i.push(a),n.blueprint.push(a),n.data.push(null);return c}function mu(n,i,s){ct(i);try{const a=n.viewQuery;null!==a&&vf(1,a,s);const c=n.template;null!==c&&Em(n,i,c,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wm(n,i),n.staticViewQueries&&vf(2,n.viewQuery,s);const f=n.components;null!==f&&function(n,i){for(let s=0;s<i.length;s++)py(n,i[s])}(i,f)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{i[2]&=-5,cs()}}function bc(n,i,s,a){const c=i[2];if(256==(256&c))return;ct(i);const f=oe();try{nr(i),function(n){qn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Em(n,i,s,2,a);const b=3==(3&c);if(!f)if(b){const Y=n.preOrderCheckHooks;null!==Y&&gr(i,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&wa(i,Y,0,null),_s(i,0)}if(function(n){for(let i=Yo(n);null!==i;i=cd(i)){if(!i[2])continue;const s=i[9];for(let a=0;a<s.length;a++){const c=s[a],f=c[3];0==(1024&c[2])&&Yr(f,1),c[2]|=1024}}}(i),function(n){for(let i=Yo(n);null!==i;i=cd(i))for(let s=10;s<i.length;s++){const a=i[s],c=a[1];Xi(a)&&bc(c,a,c.template,a[8])}}(i),null!==n.contentQueries&&wm(n,i),!f)if(b){const Y=n.contentCheckHooks;null!==Y&&gr(i,Y)}else{const Y=n.contentHooks;null!==Y&&wa(i,Y,1),_s(i,1)}!function(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const c=s[a];if(c<0)Is(~c);else{const f=c,b=s[++a],C=s[++a];$n(b,f),C(2,i[f])}}}finally{Is(-1)}}(n,i);const C=n.components;null!==C&&function(n,i){for(let s=0;s<i.length;s++)Ad(n,i[s])}(i,C);const I=n.viewQuery;if(null!==I&&vf(2,I,a),!f)if(b){const Y=n.viewCheckHooks;null!==Y&&gr(i,Y)}else{const Y=n.viewHooks;null!==Y&&wa(i,Y,2),_s(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),f||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Yr(i[3],-1))}finally{cs()}}function ly(n,i,s,a){const c=i[10],f=!oe(),b=or(i);try{f&&!b&&c.begin&&c.begin(),b&&mu(n,i,a),bc(n,i,s,a)}finally{f&&!b&&c.end&&c.end()}}function Em(n,i,s,a,c){const f=mr(),b=2&a;try{Is(-1),b&&i.length>20&&sm(n,i,20,oe()),s(a,c)}finally{Is(f)}}function Ed(n,i,s){!ta()||(function(n,i,s,a){const c=s.directiveStart,f=s.directiveEnd;n.firstCreatePass||Ca(s,i),lo(a,i);const b=s.initialInputs;for(let C=c;C<f;C++){const I=n.data[C],Y=Zr(I);Y&&Tm(i,s,I);const ee=Fe(i,n,C,s);lo(ee,i),null!==b&&Dd(0,C-c,ee,I,0,b),Y&&(_i(s.index,i)[8]=ee)}}(n,i,s,Pe(s,i)),128==(128&s.flags)&&function(n,i,s){const a=s.directiveStart,c=s.directiveEnd,b=s.index,C=qn.lFrame.currentDirectiveIndex;try{Is(b);for(let I=a;I<c;I++){const Y=n.data[I],ee=i[I];si(I),(null!==Y.hostBindings||0!==Y.hostVars||null!==Y.hostAttrs)&&Cd(Y,ee)}}finally{Is(-1),si(C)}}(n,i,s))}function pf(n,i,s=Pe){const a=i.localNames;if(null!==a){let c=i.index+1;for(let f=0;f<a.length;f+=2){const b=a[f+1],C=-1===b?s(i,n):n[b];n[c++]=C}}}function Md(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=xc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function xc(n,i,s,a,c,f,b,C,I,Y){const ee=20+a,pe=ee+c,ze=function(n,i){const s=[];for(let a=0;a<i;a++)s.push(a<n?null:Ii);return s}(ee,pe),lt="function"==typeof Y?Y():Y;return ze[1]={type:n,blueprint:ze,template:s,queries:null,viewQuery:C,declTNode:i,data:ze.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:lt,incompleteFirstPass:!1}}function Dm(n,i,s,a){const c=bf(i);null===s?c.push(a):(c.push(s),n.firstCreatePass&&xf(n).push(a,c.length-1))}function mf(n,i,s){for(let a in n)if(n.hasOwnProperty(a)){const c=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(i,c):s[a]=[i,c]}return s}function bo(n,i,s,a,c,f,b,C){const I=Pe(i,s);let ee,Y=i.inputs;!C&&null!=Y&&(ee=Y[a])?(wf(n,s,ee,a,c),ho(i)&&function(n,i){const s=_i(i,n);16&s[2]||(s[2]|=64)}(s,i.index)):3&i.type&&(a=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),c=null!=b?b(c,i.value||"",a):c,sr(f)?f.setProperty(I,a,c):Ma(a)||(I.setProperty?I.setProperty(a,c):I[a]=c))}function wc(n,i,s,a){let c=!1;if(ta()){const f=function(n,i,s){const a=n.directiveRegistry;let c=null;if(a)for(let f=0;f<a.length;f++){const b=a[f];nm(s,b.selectors,!1)&&(c||(c=[]),Il(Ca(s,i),n,b.type),Zr(b)?(Sc(n,s),c.unshift(b)):c.push(b))}return c}(n,i,s),b=null===a?null:{"":-1};if(null!==f){c=!0,Wl(s,n.data.length,f.length);for(let ee=0;ee<f.length;ee++){const pe=f[ee];pe.providersResolver&&pe.providersResolver(pe)}let C=!1,I=!1,Y=vc(n,i,f.length,null);for(let ee=0;ee<f.length;ee++){const pe=f[ee];s.mergedAttrs=Ks(s.mergedAttrs,pe.hostAttrs),Tc(n,s,i,Y,pe),Dc(Y,pe,b),null!==pe.contentQueries&&(s.flags|=8),(null!==pe.hostBindings||null!==pe.hostAttrs||0!==pe.hostVars)&&(s.flags|=128);const ze=pe.type.prototype;!C&&(ze.ngOnChanges||ze.ngOnInit||ze.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),C=!0),!I&&(ze.ngOnChanges||ze.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),I=!0),Y++}!function(n,i){const a=i.directiveEnd,c=n.data,f=i.attrs,b=[];let C=null,I=null;for(let Y=i.directiveStart;Y<a;Y++){const ee=c[Y],pe=ee.inputs,ze=null===f||tm(i)?null:Am(pe,f);b.push(ze),C=mf(pe,Y,C),I=mf(ee.outputs,Y,I)}null!==C&&(C.hasOwnProperty("class")&&(i.flags|=16),C.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=b,i.inputs=C,i.outputs=I}(n,s)}b&&function(n,i,s){if(i){const a=n.localNames=[];for(let c=0;c<i.length;c+=2){const f=s[i[c+1]];if(null==f)throw new de("301",`Export of name '${i[c+1]}' not found!`);a.push(i[c],f)}}}(s,a,b)}return s.mergedAttrs=Ks(s.mergedAttrs,s.attrs),c}function gu(n,i,s,a,c,f){const b=f.hostBindings;if(b){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const I=~i.index;(function(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(C)!=I&&C.push(I),C.push(a,c,b)}}function Cd(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Sc(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Dc(n,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=n;Zr(i)&&(s[""]=n)}}function Wl(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function Tc(n,i,s,a,c){n.data[a]=c;const f=c.factory||(c.factory=no(c.type)),b=new zs(f,Zr(c),null);n.blueprint[a]=b,s[a]=b,gu(n,i,0,a,vc(n,s,c.hostVars,Ii),c)}function Tm(n,i,s){const a=Pe(i,n),c=Md(s),f=n[10],b=_u(n,pu(n,c,null,s.onPush?64:16,a,i,f,f.createRenderer(a,s),null,null));n[i.index]=b}function Po(n,i,s,a,c,f){const b=Pe(n,i);!function(n,i,s,a,c,f,b){if(null==f)sr(n)?n.removeAttribute(i,c,s):i.removeAttribute(c);else{const C=null==b?_e(f):b(f,a||"",c);sr(n)?n.setAttribute(i,c,C,s):s?i.setAttributeNS(s,c,C):i.setAttribute(c,C)}}(i[11],b,f,n.value,s,a,c)}function Dd(n,i,s,a,c,f){const b=f[i];if(null!==b){const C=a.setInput;for(let I=0;I<b.length;){const Y=b[I++],ee=b[I++],pe=b[I++];null!==C?a.setInput(s,pe,Y,ee):s[ee]=pe}}}function Am(n,i){let s=null,a=0;for(;a<i.length;){const c=i[a];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===s&&(s=[]),s.push(c,n[c],i[a+1])),a+=2}else a+=2;else a+=4}return s}function _f(n,i,s,a){return new Array(n,!0,!1,i,null,0,a,s,null,null)}function Ad(n,i){const s=_i(i,n);if(Xi(s)){const a=s[1];80&s[2]?bc(a,s,a.template,s[8]):s[5]>0&&Rd(s)}}function Rd(n){for(let a=Yo(n);null!==a;a=cd(a))for(let c=10;c<a.length;c++){const f=a[c];if(1024&f[2]){const b=f[1];bc(b,f,b.template,f[8])}else f[5]>0&&Rd(f)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const c=_i(s[a],n);Xi(c)&&c[5]>0&&Rd(c)}}function py(n,i){const s=_i(i,n),a=s[1];(function(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(a,s),mu(a,s,s[8])}function _u(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Id(n){for(;n;){n[2]|=64;const i=Xa(n);if(po(n)&&!i)return n;n=i}return null}function yu(n,i,s){const a=i[10];a.begin&&a.begin();try{bc(n,i,n.template,s)}catch(c){throw Ic(i,c),c}finally{a.end&&a.end()}}function Ld(n){!function(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],a=Hh(s),c=a[1];ly(c,a,c.template,s)}}(n[8])}function vf(n,i,s){P(0),i(n,s)}const Rc=(()=>Promise.resolve(null))();function bf(n){return n[7]||(n[7]=[])}function xf(n){return n.cleanup||(n.cleanup=[])}function vu(n,i,s){return(null===n||Zr(n))&&(s=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[i.index])),s[11]}function Ic(n,i){const s=n[9],a=s?s.get(ld,null):null;a&&a.handleError(i)}function wf(n,i,s,a,c){for(let f=0;f<s.length;){const b=s[f++],C=s[f++],I=i[b],Y=n.data[b];null!==Y.setInput?Y.setInput(I,c,a,C):I[C]=c}}function ss(n,i,s){const a=se(i,n);!function(n,i,s){sr(n)?n.setValue(i,s):i.textContent=s}(n[11],a,s)}function bu(n,i,s){let a=s?n.styles:null,c=s?n.classes:null,f=0;if(null!==i)for(let b=0;b<i.length;b++){const C=i[b];"number"==typeof C?f=C:1==f?c=Ie(c,C):2==f&&(a=Ie(a,C+": "+i[++b]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=c:n.classesWithoutHost=c}const Pc=new us("INJECTOR",-1);class bl{get(i,s=xs){if(s===xs){const a=new Error(`NullInjectorError: No provider for ${Ye(i)}!`);throw a.name="NullInjectorError",a}return s}}const Od=new us("Set Injector scope."),Lc={},Ia={};let Fd;function xl(){return void 0===Fd&&(Fd=new bl),Fd}function Ef(n,i=null,s=null,a){const c=Nd(n,i,s,a);return c._resolveInjectorDefTypes(),c}function Nd(n,i=null,s=null,a){return new kd(n,s,i||xl(),a)}class kd{constructor(i,s,a,c=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];s&&Qs(s,C=>this.processProvider(C,i,s)),Qs([i],C=>this.processInjectorType(C,[],f)),this.records.set(Pc,Fc(void 0,this));const b=this.records.get(Od);this.scope=null!=b?b.value:null,this.source=c||("object"==typeof i?null:Ye(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=xs,a=Wn.Default){this.assertNotDestroyed();const c=Ta(this),f=Cr(void 0);try{if(!(a&Wn.SkipSelf)){let C=this.records.get(i);if(void 0===C){const I=("function"==typeof(n=i)||"object"==typeof n&&n instanceof us)&&Or(i);C=I&&this.injectableDefInScope(I)?Fc(Oc(i),Lc):null,this.records.set(i,C)}if(null!=C)return this.hydrate(i,C)}return(a&Wn.Self?xl():this.parent).get(i,s=a&Wn.Optional&&s===xs?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[ja]=b[ja]||[]).unshift(Ye(i)),c)throw b;return function(n,i,s,a){const c=n[ja];throw i[id]&&c.unshift(i[id]),n.message=function(n,i,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let c=Ye(i);if(Array.isArray(i))c=i.map(Ye).join(" -> ");else if("object"==typeof i){let f=[];for(let b in i)if(i.hasOwnProperty(b)){let C=i[b];f.push(b+":"+("string"==typeof C?JSON.stringify(C):Ye(C)))}c=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${n.replace(Qc,"\n  ")}`}("\n"+n.message,c,s,a),n.ngTokenPath=c,n[ja]=null,n}(b,i,"R3InjectorError",this.source)}throw b}finally{Cr(f),Ta(c)}var n}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((a,c)=>i.push(Ye(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,s,a){if(!(i=E(i)))return!1;let c=er(i);const f=null==c&&i.ngModule||void 0,b=void 0===f?i:f,C=-1!==a.indexOf(b);if(void 0!==f&&(c=er(f)),null==c)return!1;if(null!=c.imports&&!C){let ee;a.push(b);try{Qs(c.imports,pe=>{this.processInjectorType(pe,s,a)&&(void 0===ee&&(ee=[]),ee.push(pe))})}finally{}if(void 0!==ee)for(let pe=0;pe<ee.length;pe++){const{ngModule:ze,providers:lt}=ee[pe];Qs(lt,Nt=>this.processProvider(Nt,ze,lt||mt))}}this.injectorDefTypes.add(b);const I=no(b)||(()=>new b);this.records.set(b,Fc(I,Lc));const Y=c.providers;if(null!=Y&&!C){const ee=i;Qs(Y,pe=>this.processProvider(pe,ee,Y))}return void 0!==f&&void 0!==i.providers}processProvider(i,s,a){let c=qo(i=E(i))?i:E(i&&i.provide);const f=(n=i,Mf(n)?Fc(void 0,n.useValue):Fc(Bm(n),Lc));var n;if(qo(i)||!0!==i.multi)this.records.get(c);else{let b=this.records.get(c);b||(b=Fc(void 0,Lc,!0),b.factory=()=>Rh(b.multi),this.records.set(c,b)),c=i,b.multi.push(i)}this.records.set(c,f)}hydrate(i,s){return s.value===Lc&&(s.value=Ia,s.value=s.factory()),"object"==typeof s.value&&s.value&&null!==(n=s.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(s.value),s.value;var n}injectableDefInScope(i){if(!i.providedIn)return!1;const s=E(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Oc(n){const i=Or(n),s=null!==i?i.factory:no(n);if(null!==s)return s;if(n instanceof us)throw new Error(`Token ${Ye(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const i=n.length;if(i>0){const a=Pl(i,"?");throw new Error(`Can't resolve all parameters for ${Ye(n)}: (${a.join(", ")}).`)}const s=function(n){const i=n&&(n[Fr]||n[jr]);if(i){const s=function(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Error("unreachable")}function Bm(n,i,s){let a;if(qo(n)){const c=E(n);return no(c)||Oc(c)}if(Mf(n))a=()=>E(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Rh(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))a=()=>Ss(E(n.useExisting));else{const c=E(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return no(c)||Oc(c);a=()=>new c(...Rh(n.deps))}return a}function Fc(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function Mf(n){return null!==n&&"object"==typeof n&&Yg in n}function qo(n){return"function"==typeof n}let xo=(()=>{class n{static create(s,a){var c;if(Array.isArray(s))return Ef({name:""},a,s,"");{const f=null!=(c=s.name)?c:"";return Ef({name:f},s.parent,s.providers,f)}}}return n.THROW_IF_NOT_FOUND=xs,n.NULL=new bl,n.\u0275prov=Oi({token:n,providedIn:"any",factory:()=>Ss(Pc)}),n.__NG_ELEMENT_ID__=-1,n})();function Af(n,i){ro(Hh(n)[1],wt())}function Rf(n){let i=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;i;){let c;if(Zr(n))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");c=i.\u0275dir}if(c){if(s){a.push(c);const b=n;b.inputs=ha(n.inputs),b.declaredInputs=ha(n.declaredInputs),b.outputs=ha(n.outputs);const C=c.hostBindings;C&&El(n,C);const I=c.viewQuery,Y=c.contentQueries;if(I&&by(n,I),Y&&Ym(n,Y),Se(n.inputs,c.inputs),Se(n.declaredInputs,c.declaredInputs),Se(n.outputs,c.outputs),Zr(c)&&c.data.animation){const ee=n.data;ee.animation=(ee.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let b=0;b<f.length;b++){const C=f[b];C&&C.ngInherit&&C(n),C===Rf&&(s=!1)}}i=Object.getPrototypeOf(i)}!function(n){let i=0,s=null;for(let a=n.length-1;a>=0;a--){const c=n[a];c.hostVars=i+=c.hostVars,c.hostAttrs=Ks(c.hostAttrs,s=Ks(s,c.hostAttrs))}}(a)}function ha(n){return n===Kn?{}:n===mt?[]:n}function by(n,i){const s=n.viewQuery;n.viewQuery=s?(a,c)=>{i(a,c),s(a,c)}:i}function Ym(n,i){const s=n.contentQueries;n.contentQueries=s?(a,c,f)=>{i(a,c,f),s(a,c,f)}:i}function El(n,i){const s=n.hostBindings;n.hostBindings=s?(a,c)=>{i(a,c),s(a,c)}:i}let Yd=null;function Nc(){if(!Yd){const n=bi.Symbol;if(n&&n.iterator)Yd=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const a=i[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Yd=a)}}}return Yd}function Du(n){return!!If(n)&&(Array.isArray(n)||!(n instanceof Map)&&Nc()in n)}function If(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Pa(n,i,s){return n[i]=s}function Ws(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function os(n,i,s,a){const c=zt();return Ws(c,Qt(),i)&&(Hi(),Po(tn(),c,n,i,s,a)),os}function ql(n,i,s,a){return Ws(n,Qt(),s)?i+_e(s)+a:Ii}function Au(n,i,s,a,c,f,b,C){const I=zt(),Y=Hi(),ee=n+20,pe=Y.firstCreatePass?function(n,i,s,a,c,f,b,C,I){const Y=i.consts,ee=Ul(i,n,4,b||null,tr(Y,C));wc(i,s,ee,tr(Y,I)),ro(i,ee);const pe=ee.tViews=xc(2,ee,a,c,f,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Y);return null!==i.queries&&(i.queries.template(i,ee),pe.queries=i.queries.embeddedTView(ee)),ee}(ee,Y,I,i,s,a,c,f,b):Y.data[ee];K(pe,!1);const ze=I[11].createComment("");du(Y,I,ze,pe),lo(ze,I),_u(I,I[ee]=_f(ze,I,ze,pe)),fo(pe)&&Ed(Y,I,pe),null!=b&&pf(I,pe,C)}function Iu(n){return bn(qn.lFrame.contextLView,20+n)}function th(n,i=Wn.Default){const s=zt();return null===s?Ss(n,i):x(wt(),s,E(n),i)}function Oy(){throw new Error("invalid")}function Gc(n,i,s){const a=zt();return Ws(a,Qt(),i)&&bo(Hi(),tn(),a,n,i,a[11],s,!1),Gc}function Nf(n,i,s,a,c){const b=c?"class":"style";wf(n,s,i.inputs[b],b,a)}function nh(n,i,s,a){const c=zt(),f=Hi(),b=20+n,C=c[11],I=c[b]=dd(C,i,qn.lFrame.currentNamespace),Y=f.firstCreatePass?function(n,i,s,a,c,f,b){const C=i.consts,Y=Ul(i,n,2,c,tr(C,f));return wc(i,s,Y,tr(C,b)),null!==Y.attrs&&bu(Y,Y.attrs,!1),null!==Y.mergedAttrs&&bu(Y,Y.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,Y),Y}(b,f,c,0,i,s,a):f.data[b];K(Y,!0);const ee=Y.mergedAttrs;null!==ee&&Al(C,I,ee);const pe=Y.classes;null!==pe&&Qh(C,I,pe);const ze=Y.styles;null!==ze&&fu(C,I,ze),64!=(64&Y.flags)&&du(f,c,I,Y),0===qn.lFrame.elementDepthCount&&lo(I,c),qn.lFrame.elementDepthCount++,fo(Y)&&(Ed(f,c,Y),function(n,i,s){if(Vs(i)){const c=i.directiveEnd;for(let f=i.directiveStart;f<c;f++){const b=n.data[f];b.contentQueries&&b.contentQueries(1,s[f],f)}}}(f,Y,c)),null!==a&&pf(c,Y)}function Ko(){let n=wt();g()?v():(n=n.parent,K(n,!1));const i=n;qn.lFrame.elementDepthCount--;const s=Hi();s.firstCreatePass&&(ro(s,n),Vs(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(i)&&Nf(s,i,zt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(i)&&Nf(s,i,zt(),i.stylesWithoutHost,!1)}function kf(n,i,s,a){nh(n,i,s,a),Ko()}function rh(n){return!!n&&"function"==typeof n.then}function Wc(n){return!!n&&"function"==typeof n.subscribe}const sh=Wc;function oh(n,i,s,a){const c=zt(),f=Hi(),b=wt();return Vf(f,c,c[11],b,n,i,!!s,a),oh}function Vu(n,i){const s=wt(),a=zt(),c=Hi();return Vf(c,a,vu(Ir(c.data),s,a),s,n,i,!1),Vu}function Vf(n,i,s,a,c,f,b,C){const I=fo(a),ee=n.firstCreatePass&&xf(n),pe=i[8],ze=bf(i);let lt=!0;if(3&a.type||C){const gn=Pe(a,i),kn=C?C(gn):gn,Kt=ze.length,li=C?rr=>C(k(rr[a.index])):a.index;if(sr(s)){let rr=null;if(!C&&I&&(rr=function(n,i,s,a){const c=n.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const b=c[f];if(b===s&&c[f+1]===a){const C=i[7],I=c[f+2];return C.length>I?C[I]:null}"string"==typeof b&&(f+=2)}return null}(n,i,c,a.index)),null!==rr)(rr.__ngLastListenerFn__||rr).__ngNextListenerFn__=f,rr.__ngLastListenerFn__=f,lt=!1;else{f=ah(a,i,pe,f,!1);const Xr=s.listen(kn,c,f);ze.push(f,Xr),ee&&ee.push(c,li,Kt,Kt+1)}}else f=ah(a,i,pe,f,!0),kn.addEventListener(c,f,b),ze.push(f),ee&&ee.push(c,li,Kt,b)}else f=ah(a,i,pe,f,!1);const Nt=a.outputs;let an;if(lt&&null!==Nt&&(an=Nt[c])){const gn=an.length;if(gn)for(let kn=0;kn<gn;kn+=2){const ya=i[an[kn]][an[kn+1]].subscribe(f),Ku=ze.length;ze.push(f,ya),ee&&ee.push(c,a.index,Ku,-(Ku+1))}}}function Hf(n,i,s,a){try{return!1!==s(a)}catch(c){return Ic(n,c),!1}}function ah(n,i,s,a,c){return function f(b){if(b===Function)return a;const C=2&n.flags?_i(n.index,i):i;0==(32&i[2])&&Id(C);let I=Hf(i,0,a,b),Y=f.__ngNextListenerFn__;for(;Y;)I=Hf(i,0,Y,b)&&I,Y=Y.__ngNextListenerFn__;return c&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function Uf(n=1){return function(n){return(qn.lFrame.contextLView=function(n,i){for(;n>0;)i=i[15],n--;return i}(n,qn.lFrame.contextLView))[8]}(n)}function lh(n,i){let s=null;const a=function(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(n);for(let c=0;c<i.length;c++){const f=i[c];if("*"!==f){if(null===a?nm(n,f,!0):K_(a,f))return c}else s=c}return s}function ug(n){const i=zt()[16][6];if(!i.projection){const a=i.projection=Pl(n?n.length:1,null),c=a.slice();let f=i.child;for(;null!==f;){const b=n?lh(f,n):0;null!==b&&(c[b]?c[b].projectionNext=f:a[b]=f,c[b]=f),f=f.next}}}function ch(n,i=0,s){const a=zt(),c=Hi(),f=Ul(c,20+n,16,null,s||null);null===f.projection&&(f.projection=i),v(),64!=(64&f.flags)&&function(n,i,s){Vl(i[11],0,i,s,$p(n,s,i),Xh(s.parent||i[6],s,i))}(c,a,f)}function uh(n,i,s){return zf(n,"",i,"",s),uh}function zf(n,i,s,a,c){const f=zt(),b=ql(f,i,s,a);return b!==Ii&&bo(Hi(),tn(),f,n,b,f[11],c,!1),zf}function $f(n,i,s,a,c){const f=n[s+1],b=null===i;let C=a?da(f):Za(f),I=!1;for(;0!==C&&(!1===I||b);){const ee=n[C+1];Jl(n[C],i)&&(I=!0,n[C+1]=a?nf(ee):ef(ee)),C=a?da(ee):Za(ee)}I&&(n[s+1]=a?ef(f):nf(f))}function Jl(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Wa(n,i)>=0}function qf(n,i,s){return pa(n,i,s,!1),qf}function Uu(n,i){return pa(n,i,null,!0),Uu}function pa(n,i,s,a){const c=zt(),f=Hi(),b=function(n){const i=qn.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}(2);f.firstUpdatePass&&function(n,i,s,a){const c=n.data;if(null===c[s+1]){const f=c[mr()],b=function(n,i){return i>=n.expandoStartIndex}(n,s);(function(n,i){return 0!=(n.flags&(i?16:32))})(f,a)&&null===i&&!b&&(i=!1),i=function(n,i,s,a){const c=Ir(n);let f=a?i.residualClasses:i.residualStyles;if(null===c)0===(a?i.classBindings:i.styleBindings)&&(s=zu(s=Kf(null,n,i,s,a),i.attrs,a),f=null);else{const b=i.directiveStylingLast;if(-1===b||n[b]!==c)if(s=Kf(c,n,i,s,a),null===f){let I=function(n,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==Za(a))return n[da(a)]}(n,i,a);void 0!==I&&Array.isArray(I)&&(I=Kf(null,n,i,I[1],a),I=zu(I,i.attrs,a),function(n,i,s,a){n[da(s?i.classBindings:i.styleBindings)]=a}(n,i,a,I))}else f=function(n,i,s){let a;const c=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<c;f++)a=zu(a,n[f].hostAttrs,s);return zu(a,i.attrs,s)}(n,i,a)}return void 0!==f&&(a?i.residualClasses=f:i.residualStyles=f),s}(c,f,i,a),function(n,i,s,a,c,f){let b=f?i.classBindings:i.styleBindings,C=da(b),I=Za(b);n[a]=s;let ee,Y=!1;if(Array.isArray(s)){const pe=s;ee=pe[1],(null===ee||Wa(pe,ee)>0)&&(Y=!0)}else ee=s;if(c)if(0!==I){const ze=da(n[C+1]);n[a+1]=_d(ze,C),0!==ze&&(n[ze+1]=tf(n[ze+1],a)),n[C+1]=function(n,i){return 131071&n|i<<17}(n[C+1],a)}else n[a+1]=_d(C,0),0!==C&&(n[C+1]=tf(n[C+1],a)),C=a;else n[a+1]=_d(I,0),0===C?C=a:n[I+1]=tf(n[I+1],a),I=a;Y&&(n[a+1]=ef(n[a+1])),$f(n,ee,a,!0),$f(n,ee,a,!1),function(n,i,s,a,c){const f=c?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof i&&Wa(f,i)>=0&&(s[a+1]=nf(s[a+1]))}(i,ee,n,a,f),b=_d(C,I),f?i.classBindings=b:i.styleBindings=b}(c,f,i,s,b,a)}}(f,n,b,a),i!==Ii&&Ws(c,b,i)&&function(n,i,s,a,c,f,b,C){if(!(3&i.type))return;const I=n.data,Y=I[C+1];$c(function(n){return 1==(1&n)}(Y)?Jf(I,i,s,c,Za(Y),b):void 0)||($c(f)||function(n){return 2==(2&n)}(Y)&&(f=Jf(I,null,s,c,C,b)),function(n,i,s,a,c){const f=sr(n);if(i)c?f?n.addClass(s,a):s.classList.add(a):f?n.removeClass(s,a):s.classList.remove(a);else{let b=-1===a.indexOf("-")?void 0:Ra.DashCase;if(null==c)f?n.removeStyle(s,a,b):s.style.removeProperty(a);else{const C="string"==typeof c&&c.endsWith("!important");C&&(c=c.slice(0,-10),b|=Ra.Important),f?n.setStyle(s,a,c,b):s.style.setProperty(a,c,C?"important":"")}}}(a,b,se(mr(),s),c,f))}(f,f.data[mr()],c,c[11],n,c[b+1]=function(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ye(Ya(n)))),n}(i,s),a,b)}function Kf(n,i,s,a,c){let f=null;const b=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<b&&(f=i[C],a=zu(a,f.hostAttrs,c),f!==n);)C++;return null!==n&&(s.directiveStylingLast=C),a}function zu(n,i,s){const a=s?1:2;let c=-1;if(null!==i)for(let f=0;f<i.length;f++){const b=i[f];"number"==typeof b?c=b:c===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),oo(n,b,!!s||i[++f]))}return void 0===n?null:n}function Jf(n,i,s,a,c,f){const b=null===i;let C;for(;c>0;){const I=n[c],Y=Array.isArray(I),ee=Y?I[1]:I,pe=null===ee;let ze=s[c+1];ze===Ii&&(ze=pe?mt:void 0);let lt=pe?Jc(ze,a):ee===a?ze:void 0;if(Y&&!$c(lt)&&(lt=Jc(I,a)),$c(lt)&&(C=lt,b))return C;const Nt=n[c+1];c=b?da(Nt):Za(Nt)}if(null!==i){let I=f?i.residualClasses:i.residualStyles;null!=I&&(C=Jc(I,a))}return C}function $c(n){return void 0!==n}function Qf(n,i=""){const s=zt(),a=Hi(),c=n+20,f=a.firstCreatePass?Ul(a,c,1,i,null):a.data[c],b=s[c]=function(n,i){return sr(n)?n.createText(i):n.createTextNode(i)}(s[11],i);du(a,s,b,f),K(f,!1)}function nc(n){return Gu("",n,""),nc}function Gu(n,i,s){const a=zt(),c=ql(a,n,i,s);return c!==Ii&&ss(a,mr(),c),Gu}function rp(n,i,s){const a=zt();return Ws(a,Qt(),i)&&bo(Hi(),tn(),a,n,i,a[11],s,!0),rp}function Ig(n,i,s){const a=zt();if(Ws(a,Qt(),i)){const f=Hi(),b=tn();bo(f,b,a,n,i,vu(Ir(f.data),b,a),s,!0)}return Ig}const Yc=void 0;var sb=["en",[["a","p"],["AM","PM"],Yc],[["AM","PM"],Yc,Yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yc,"{1} 'at' {0}",Yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Yu={};function Pg(n){const i=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=rv(i);if(s)return s;const a=i.split("-")[0];if(s=rv(a),s)return s;if("en"===a)return sb;throw new Error(`Missing locale data for the locale "${n}".`)}function iv(n){return Pg(n)[hi.PluralCase]}function rv(n){return n in Yu||(Yu[n]=bi.ng&&bi.ng.common&&bi.ng.common.locales&&bi.ng.common.locales[n]),Yu[n]}var hi=(()=>((hi=hi||{})[hi.LocaleId=0]="LocaleId",hi[hi.DayPeriodsFormat=1]="DayPeriodsFormat",hi[hi.DayPeriodsStandalone=2]="DayPeriodsStandalone",hi[hi.DaysFormat=3]="DaysFormat",hi[hi.DaysStandalone=4]="DaysStandalone",hi[hi.MonthsFormat=5]="MonthsFormat",hi[hi.MonthsStandalone=6]="MonthsStandalone",hi[hi.Eras=7]="Eras",hi[hi.FirstDayOfWeek=8]="FirstDayOfWeek",hi[hi.WeekendRange=9]="WeekendRange",hi[hi.DateFormat=10]="DateFormat",hi[hi.TimeFormat=11]="TimeFormat",hi[hi.DateTimeFormat=12]="DateTimeFormat",hi[hi.NumberSymbols=13]="NumberSymbols",hi[hi.NumberFormats=14]="NumberFormats",hi[hi.CurrencyCode=15]="CurrencyCode",hi[hi.CurrencySymbol=16]="CurrencySymbol",hi[hi.CurrencyName=17]="CurrencyName",hi[hi.Currencies=18]="Currencies",hi[hi.Directionality=19]="Directionality",hi[hi.PluralCase=20]="PluralCase",hi[hi.ExtraData=21]="ExtraData",hi))();const sp="en-US";let sv=sp;function Gt(n,i,s,a,c){if(n=E(n),Array.isArray(n))for(let f=0;f<n.length;f++)Gt(n[f],i,s,a,c);else{const f=Hi(),b=zt();let C=qo(n)?n:E(n.provide),I=Bm(n);const Y=wt(),ee=1048575&Y.providerIndexes,pe=Y.directiveStart,ze=Y.providerIndexes>>20;if(qo(n)||!n.multi){const lt=new zs(I,c,th),Nt=Tn(C,i,c?ee:ee+ze,pe);-1===Nt?(Il(Ca(Y,b),f,C),oi(f,n,i.length),i.push(C),Y.directiveStart++,Y.directiveEnd++,c&&(Y.providerIndexes+=1048576),s.push(lt),b.push(lt)):(s[Nt]=lt,b[Nt]=lt)}else{const lt=Tn(C,i,ee+ze,pe),Nt=Tn(C,i,ee,ee+ze),an=lt>=0&&s[lt],gn=Nt>=0&&s[Nt];if(c&&!gn||!c&&!an){Il(Ca(Y,b),f,C);const kn=function(n,i,s,a,c){const f=new zs(n,s,th);return f.multi=[],f.index=i,f.componentProviders=0,Qn(f,c,a&&!s),f}(c?Pi:An,s.length,c,a,I);!c&&gn&&(s[Nt].providerFactory=kn),oi(f,n,i.length,0),i.push(C),Y.directiveStart++,Y.directiveEnd++,c&&(Y.providerIndexes+=1048576),s.push(kn),b.push(kn)}else oi(f,n,lt>-1?lt:Nt,Qn(s[c?Nt:lt],I,!c&&a));!c&&a&&gn&&s[Nt].componentProviders++}}}function oi(n,i,s,a){const c=qo(i),f=function(n){return!!n.useClass}(i);if(c||f){const I=(f?E(i.useClass):i).prototype.ngOnDestroy;if(I){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!c&&i.multi){const ee=Y.indexOf(s);-1===ee?Y.push(s,[a,I]):Y[ee+1].push(a,I)}else Y.push(s,I)}}}function Qn(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function Tn(n,i,s,a){for(let c=s;c<a;c++)if(i[c]===n)return c;return-1}function An(n,i,s,a){return tt(this.multi,[])}function Pi(n,i,s,a){const c=this.multi;let f;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=Fe(s,s[1],this.providerFactory.index,a);f=C.slice(0,b),tt(c,f);for(let I=b;I<C.length;I++)f.push(C[I])}else f=[],tt(c,f);return f}function tt(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function Pn(n,i=[]){return s=>{s.providersResolver=(a,c)=>function(n,i,s){const a=Hi();if(a.firstCreatePass){const c=Zr(n);Gt(s,a.data,a.blueprint,c,!0),Gt(i,a.data,a.blueprint,c,!1)}}(a,c?c(n):n,i)}}class Xt{}class Fo{resolveComponentFactory(i){throw function(n){const i=Error(`No component factory found for ${Ye(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let ns=(()=>{class n{}return n.NULL=new Fo,n})();function Ba(){return Mo(wt(),zt())}function Mo(n,i){return new Cl(Pe(n,i))}let Cl=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Ba,n})();function fv(n){return n instanceof Cl?n.nativeElement:n}class cp{}let pv=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function(){const n=zt(),s=_i(wt().index,n);return function(n){return n[11]}(xr(s)?s:n)}(),n})(),xe=(()=>{class n{}return n.\u0275prov=Oi({token:n,providedIn:"root",factory:()=>null}),n})();class vt{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Ft=new vt("13.0.3"),Pt={};function Yt(n,i,s,a,c=!1){for(;null!==s;){const f=i[s.index];if(null!==f&&a.push(k(f)),$r(f))for(let C=10;C<f.length;C++){const I=f[C],Y=I[1].firstChild;null!==Y&&Yt(I[1],I,Y,a)}const b=s.type;if(8&b)Yt(n,i,s.child,a);else if(32&b){const C=zh(s,i);let I;for(;I=C();)a.push(I)}else if(16&b){const C=Zh(i,s);if(Array.isArray(C))a.push(...C);else{const I=Xa(i[16]);Yt(I[1],I,C,a,!0)}}s=c?s.projectionNext:s.next}return a}class vi{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return Yt(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if($r(i)){const s=i[8],a=s?s.indexOf(this):-1;a>-1&&(_c(i,a),cc(s,a))}this._attachedToViewContainer=!1}Wp(this._lView[1],this._lView)}onDestroy(i){Dm(this._lView[1],this._lView,null,i)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,i,s){Ee(!0);try{yu(n,i,s)}finally{Ee(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,yc(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class Li extends vi{constructor(i){super(i),this._view=i}detectChanges(){Ld(this._view)}checkNoChanges(){!function(n){Ee(!0);try{Ld(n)}finally{Ee(!1)}}(this._view)}get context(){return null}}class Yi extends ns{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=dt(i);return new ds(s,this.ngModule)}}function $i(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}const fr=new us("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>V_});class ds extends Xt{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=i.selectors.map(Z_).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return $i(this.componentDef.inputs)}get outputs(){return $i(this.componentDef.outputs)}create(i,s,a,c){const f=(c=c||this.ngModule)?function(n,i){return{get:(s,a,c)=>{const f=n.get(s,Pt,c);return f!==Pt||a===Pt?f:i.get(s,a,c)}}}(i,c.injector):i,b=f.get(cp,ea),C=f.get(xe,null),I=b.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ee=a?function(n,i,s){if(sr(n))return n.selectRootElement(i,s===Ht.ShadowDom);let a="string"==typeof i?n.querySelector(i):i;return a.textContent="",a}(I,a,this.componentDef.encapsulation):dd(b.createRenderer(null,this.componentDef),Y,function(n){const i=n.toLowerCase();return"svg"===i?Uo:"math"===i?"http://www.w3.org/1998/MathML/":null}(Y)),pe=this.componentDef.onPush?576:528,ze=function(n,i){return{components:[],scheduler:n||V_,clean:Rc,playerHandler:i||null,flags:0}}(),lt=xc(0,null,null,1,0,null,null,null,null,null),Nt=pu(null,lt,ze,pe,null,null,b,I,C,f);let an,gn;ct(Nt);try{const kn=function(n,i,s,a,c,f){const b=s[1];s[20]=n;const I=Ul(b,20,2,"#host",null),Y=I.mergedAttrs=i.hostAttrs;null!==Y&&(bu(I,Y,!0),null!==n&&(Al(c,n,Y),null!==I.classes&&Qh(c,n,I.classes),null!==I.styles&&fu(c,n,I.styles)));const ee=a.createRenderer(n,i),pe=pu(s,Md(i),null,i.onPush?64:16,s[20],I,a,ee,f||null,null);return b.firstCreatePass&&(Il(Ca(I,s),b,i.type),Sc(b,I),Wl(I,s.length,1)),_u(s,pe),s[20]=pe}(ee,this.componentDef,Nt,b,I);if(ee)if(a)Al(I,ee,["ng-version",Ft.full]);else{const{attrs:Kt,classes:li}=function(n){const i=[],s=[];let a=1,c=2;for(;a<n.length;){let f=n[a];if("string"==typeof f)2===c?""!==f&&i.push(f,n[++a]):8===c&&s.push(f);else{if(!ua(c))break;c=f}a++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);Kt&&Al(I,ee,Kt),li&&li.length>0&&Qh(I,ee,li.join(" "))}if(gn=Ot(lt,20),void 0!==s){const Kt=gn.projection=[];for(let li=0;li<this.ngContentSelectors.length;li++){const rr=s[li];Kt.push(null!=rr?Array.from(rr):null)}}an=function(n,i,s,a,c){const f=s[1],b=function(n,i,s){const a=wt();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Tc(n,a,i,vc(n,i,1,null),s));const c=Fe(i,n,a.directiveStart,a);lo(c,i);const f=Pe(a,i);return f&&lo(f,i),c}(f,s,i);if(a.components.push(b),n[8]=b,c&&c.forEach(I=>I(b,i)),i.contentQueries){const I=wt();i.contentQueries(1,b,I.directiveStart)}const C=wt();return!f.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Is(C.index),gu(s[1],C,0,C.directiveStart,C.directiveEnd,i),Cd(i,b)),b}(kn,this.componentDef,Nt,ze,[Af]),mu(lt,Nt,null)}finally{cs()}return new Er(this.componentType,an,Mo(gn,Nt),Nt,gn)}}class Er extends class{}{constructor(i,s,a,c,f){super(),this.location=a,this._rootLView=c,this._tNode=f,this.instance=s,this.hostView=this.changeDetectorRef=new Li(c),this.componentType=i}get injector(){return new On(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class hs{}class ga{}const sl=new Map;class vb extends hs{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Yi(this);const a=ye(i);this._bootstrapComponents=Si(a.bootstrap),this._r3Injector=Nd(i,s,[{provide:hs,useValue:this},{provide:ns,useValue:this.componentFactoryResolver}],Ye(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=xo.THROW_IF_NOT_FOUND,a=Wn.Default){return i===xo||i===hs||i===Pc?this:this._r3Injector.get(i,s,a)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class _v extends ga{constructor(i){super(),this.moduleType=i,null!==ye(i)&&function(n){const i=new Set;!function s(a){const c=ye(a,!0),f=c.id;null!==f&&(function(n,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${n} - ${Ye(i)} vs ${Ye(i.name)}`)}(f,sl.get(f),a),sl.set(f,a));const b=Si(c.imports);for(const C of b)i.has(C)||(i.add(C),s(C))}(n)}(i)}create(i){return new vb(this.moduleType,i)}}function up(n,i){const s=n[i];return s===Ii?void 0:s}function xb(n,i,s,a,c,f,b){const C=i+s;return function(n,i,s,a){const c=Ws(n,i,s);return Ws(n,i+1,a)||c}(n,C,c,f)?Pa(n,C+2,b?a.call(b,c,f):a(c,f)):up(n,C+2)}function Sb(n,i){const s=Hi();let a;const c=n+20;s.firstCreatePass?(a=function(n,i){if(i)for(let s=i.length-1;s>=0;s--){const a=i[s];if(n===a.name)return a}}(i,s.pipeRegistry),s.data[c]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(c,a.onDestroy)):a=s.data[c];const f=a.factory||(a.factory=no(a.type)),b=Cr(th);try{const C=oa(!1),I=f();return oa(C),function(n,i,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),i[s]=a}(s,zt(),c,I),I}finally{Cr(b)}}function Cb(n,i,s){const a=n+20,c=zt(),f=bn(c,a);return dp(c,a)?function(n,i,s,a,c,f){const b=i+s;return Ws(n,b,c)?Pa(n,b+1,f?a.call(f,c):a(c)):up(n,b+1)}(c,Ce(),i,f.transform,s,f):f.transform(s)}function Db(n,i,s,a){const c=n+20,f=zt(),b=bn(f,c);return dp(f,c)?xb(f,Ce(),i,b.transform,s,a,b):b.transform(s,a)}function dp(n,i){return n[1].data[i].pure}function yv(n){return i=>{setTimeout(n,void 0,i)}}const Dl=class extends B.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,a){var I,Y,ee;let c=i,f=s||(()=>null),b=a;if(i&&"object"==typeof i){const pe=i;c=null==(I=pe.next)?void 0:I.bind(pe),f=null==(Y=pe.error)?void 0:Y.bind(pe),b=null==(ee=pe.complete)?void 0:ee.bind(pe)}this.__isAsync&&(f=yv(f),c&&(c=yv(c)),b&&(b=yv(b)));const C=super.subscribe({next:c,error:f,complete:b});return i instanceof y.w0&&i.add(C),C}};function tw(){return this._results[Nc()]()}class Og{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Nc(),a=Og.prototype;a[s]||(a[s]=tw)}get changes(){return this._changes||(this._changes=new Dl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const a=this;a.dirty=!1;const c=Ns(i);(this._changesDetected=!function(n,i,s){if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],f=i[a];if(s&&(c=s(c),f=s(f)),f!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let hp=(()=>{class n{}return n.__NG_ELEMENT_ID__=rw,n})();const nw=hp,iw=class extends nw{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(i){const s=this._declarationTContainer.tViews,a=pu(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(a[19]=f.createEmbeddedView(s)),mu(s,a,i),new vi(a)}};function rw(){return Fg(wt(),zt())}function Fg(n,i){return 4&n.type?new iw(i,n,Mo(n,i)):null}let Ng=(()=>{class n{}return n.__NG_ELEMENT_ID__=sw,n})();function sw(){return Rb(wt(),zt())}const ow=Ng,Tb=class extends ow{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return Mo(this._hostTNode,this._hostLView)}get injector(){return new On(this._hostTNode,this._hostLView)}get parentInjector(){const i=Rl(this._hostTNode,this._hostLView);if(rc(i)){const s=hl(i,this._hostLView),a=Ao(i);return new On(s[1].data[a+8],s)}return new On(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Ab(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,a){const c=i.createEmbeddedView(s||{});return this.insert(c,a),c}createComponent(i,s,a,c,f){const b=i&&!("function"==typeof i);let C;if(b)C=s;else{const pe=s||{};C=pe.index,a=pe.injector,c=pe.projectableNodes,f=pe.ngModuleRef}const I=b?i:new ds(dt(i)),Y=a||this.parentInjector;if(!f&&null==I.ngModule&&Y){const pe=Y.get(hs,null);pe&&(f=pe)}const ee=I.create(Y,c,void 0,f);return this.insert(ee.hostView,C),ee}insert(i,s){const a=i._lView,c=a[1];if($r(a[3])){const ee=this.indexOf(i);if(-1!==ee)this.detach(ee);else{const pe=a[3],ze=new Tb(pe,pe[6],pe[3]);ze.detach(ze.indexOf(i))}}const f=this._adjustIndex(s),b=this._lContainer;!function(n,i,s,a){const c=10+a,f=s.length;a>0&&(s[c-1][4]=i),a<f-10?(i[4]=s[c],Ga(s,10+a,i)):(s.push(i),i[4]=null),i[3]=s;const b=i[17];null!==b&&s!==b&&function(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(b,i);const C=i[19];null!==C&&C.insertView(n),i[2]|=128}(c,a,b,f);const C=md(f,b),I=a[11],Y=fd(I,b[7]);return null!==Y&&function(n,i,s,a,c,f){a[0]=c,a[6]=i,yc(n,a,s,1,c,f)}(c,b[6],I,a,Y,C),i.attachToViewContainerRef(),Ga(vv(b),f,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Ab(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=_c(this._lContainer,s);a&&(cc(vv(this._lContainer),s),Wp(a[1],a))}detach(i){const s=this._adjustIndex(i,-1),a=_c(this._lContainer,s);return a&&null!=cc(vv(this._lContainer),s)?new vi(a):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Ab(n){return n[8]}function vv(n){return n[8]||(n[8]=[])}function Rb(n,i){let s;const a=i[n.index];if($r(a))s=a;else{let c;if(8&n.type)c=k(a);else{const f=i[11];c=f.createComment("");const b=Pe(n,i);Bl(f,fd(f,b),c,function(n,i){return sr(n)?n.nextSibling(i):i.nextSibling}(f,b),!1)}i[n.index]=s=_f(a,i,c,n),_u(i,s)}return new Tb(s,n,i)}class bv{constructor(i){this.queryList=i,this.matches=null}clone(){return new bv(this.queryList)}setDirty(){this.queryList.setDirty()}}class xv{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const a=null!==i.contentQueries?i.contentQueries[0]:s.length,c=[];for(let f=0;f<a;f++){const b=s.getByIndex(f);c.push(this.queries[b.indexInDeclarationView].clone())}return new xv(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Vb(i,s).matches&&this.queries[s].setDirty()}}class Ib{constructor(i,s,a=null){this.predicate=i,this.flags=s,this.read=a}}class wv{constructor(i=[]){this.queries=i}elementStart(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(i,c);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new wv(s):null}template(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Ev{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Ev(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const f=a[c];this.matchTNodeWithReadOption(i,s,cw(s,f)),this.matchTNodeWithReadOption(i,s,be(s,i,f,!1,!1))}else a===hp?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,be(s,i,a,!1,!1))}matchTNodeWithReadOption(i,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Cl||c===Ng||c===hp&&4&s.type)this.addMatch(s.index,-2);else{const f=be(s,i,c,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function cw(n,i){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===i)return s[a+1];return null}function dw(n,i,s,a){return-1===s?function(n,i){return 11&n.type?Mo(n,i):4&n.type?Fg(n,i):null}(i,n):-2===s?function(n,i,s){return s===Cl?Mo(i,n):s===hp?Fg(i,n):s===Ng?Rb(i,n):void 0}(n,i,a):Fe(n,n[1],s,i)}function Pb(n,i,s,a){const c=i[19].queries[a];if(null===c.matches){const f=n.data,b=s.matches,C=[];for(let I=0;I<b.length;I+=2){const Y=b[I];C.push(Y<0?null:dw(i,f[Y],b[I+1],s.metadata.read))}c.matches=C}return c.matches}function Mv(n,i,s,a){const c=n.queries.getByIndex(s),f=c.matches;if(null!==f){const b=Pb(n,i,c,s);for(let C=0;C<f.length;C+=2){const I=f[C];if(I>0)a.push(b[C/2]);else{const Y=f[C+1],ee=i[-I];for(let pe=10;pe<ee.length;pe++){const ze=ee[pe];ze[17]===ze[3]&&Mv(ze[1],ze,Y,a)}if(null!==ee[9]){const pe=ee[9];for(let ze=0;ze<pe.length;ze++){const lt=pe[ze];Mv(lt[1],lt,Y,a)}}}}}return a}function Lb(n){const i=zt(),s=Hi(),a=F();P(a+1);const c=Vb(s,a);if(n.dirty&&or(i)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const f=c.crossesNgTemplate?Mv(s,i,a,[]):Pb(s,i,c,a);n.reset(f,fv),n.notifyOnChanges()}return!0}return!1}function Ob(n,i,s){const a=Hi();a.firstCreatePass&&(Bb(a,new Ib(n,i,s),-1),2==(2&i)&&(a.staticViewQueries=!0)),kb(a,zt(),i)}function Fb(n,i,s,a){const c=Hi();if(c.firstCreatePass){const f=wt();Bb(c,new Ib(i,s,a),f.index),function(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(c,n),2==(2&s)&&(c.staticContentQueries=!0)}kb(c,zt(),s)}function Nb(){return n=zt(),i=F(),n[19].queries[i].queryList;var n,i}function kb(n,i,s){const a=new Og(4==(4&s));Dm(n,i,a,a.destroy),null===i[19]&&(i[19]=new xv),i[19].queries.push(new bv(a))}function Bb(n,i,s){null===n.queries&&(n.queries=new wv),n.queries.track(new Ev(i,s))}function Vb(n,i){return n.queries.getByIndex(i)}function Hb(n,i){return Fg(n,i)}function Vg(...n){}const Rv=new us("Application Initializer");let bh=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Vg,this.reject=Vg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(rh(f))s.push(f);else if(sh(f)){const b=new Promise((C,I)=>{f.subscribe({complete:C,error:I})});s.push(b)}}Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ss(Rv,8))},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})();const rx=new us("AppId"),Lw={provide:rx,useFactory:function(){return`${Iv()}${Iv()}${Iv()}`},deps:[]};function Iv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sx=new us("Platform Initializer"),ox=new us("Platform ID"),ax=new us("appBootstrapListener");let lx=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})();const Hg=new us("LocaleId"),cx=new us("DefaultCurrencyCode");class Ow{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let Pv=(()=>{class n{compileModuleSync(s){return new _v(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=Si(ye(s).declarations).reduce((b,C)=>{const I=dt(C);return I&&b.push(new ds(I)),b},[]);return new Ow(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})();const Nw=(()=>Promise.resolve(0))();function Lv(n){"undefined"==typeof Zone?Nw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class _a{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dl(!1),this.onMicrotaskEmpty=new Dl(!1),this.onStable=new Dl(!1),this.onError=new Dl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let n=bi.requestAnimationFrame,i=bi.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(n){const i=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(bi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Fv(n),n.isCheckStableRunning=!0,Ov(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Fv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,f,b,C)=>{try{return ux(n),s.invokeTask(c,f,b,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&i(),dx(n)}},onInvoke:(s,a,c,f,b,C,I)=>{try{return ux(n),s.invoke(c,f,b,C,I)}finally{n.shouldCoalesceRunChangeDetection&&i(),dx(n)}},onHasTask:(s,a,c,f)=>{s.hasTask(c,f),a===c&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,Fv(n),Ov(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,c,f)=>(s.handleError(c,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_a.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_a.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,c){const f=this._inner,b=f.scheduleEventTask("NgZoneEvent: "+c,i,Bw,Vg,Vg);try{return f.runTask(b,s,a)}finally{f.cancelTask(b)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const Bw={};function Ov(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Fv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ux(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dx(n){n._nesting--,Ov(n)}class Uw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dl,this.onMicrotaskEmpty=new Dl,this.onStable=new Dl,this.onError=new Dl}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,c){return i.apply(s,a)}}let hx=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_a.assertNotInAngularZone(),Lv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Lv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,c){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ss(_a))},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})(),fx=(()=>{class n{constructor(){this._applications=new Map,Nv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Nv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})();class zw{addToWindow(i){}findTestabilityInTree(i,s,a){return null}}function Gw(n){Nv=n}let al,Nv=new zw;const px=new us("AllowMultipleToken");class Yw{constructor(i,s){this.name=i,this.token=s}}function mx(n,i,s=[]){const a=`Platform: ${i}`,c=new us(a);return(f=[])=>{let b=gx();if(!b||b.injector.get(px,!1))if(n)n(s.concat(f).concat({provide:c,useValue:!0}));else{const C=s.concat(f).concat({provide:c,useValue:!0},{provide:Od,useValue:"platform"});!function(n){if(al&&!al.destroyed&&!al.injector.get(px,!1))throw new de("400","");al=n.get(_x);const i=n.get(sx,null);i&&i.forEach(s=>s())}(xo.create({providers:C,name:a}))}return function(n){const i=gx();if(!i)throw new de("401","");return i}()}}function gx(){return al&&!al.destroyed?al:null}let _x=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const C=function(n,i){let s;return s="noop"===n?new Uw:("zone.js"===n?void 0:n)||new _a({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),I=[{provide:_a,useValue:C}];return C.run(()=>{const Y=xo.create({providers:I,parent:this.injector,name:s.moduleType.name}),ee=s.create(Y),pe=ee.injector.get(ld,null);if(!pe)throw new de("402","");return C.runOutsideAngular(()=>{const ze=C.onError.subscribe({next:lt=>{pe.handleError(lt)}});ee.onDestroy(()=>{kv(this._modules,ee),ze.unsubscribe()})}),function(n,i,s){try{const a=s();return rh(a)?a.catch(c=>{throw i.runOutsideAngular(()=>n.handleError(c)),c}):a}catch(a){throw i.runOutsideAngular(()=>n.handleError(a)),a}}(pe,C,()=>{const ze=ee.injector.get(bh);return ze.runInitializers(),ze.donePromise.then(()=>(function(n){vn(n,"Expected localeId to be defined"),"string"==typeof n&&(sv=n.toLowerCase().replace(/_/g,"-"))}(ee.injector.get(Hg,sp)||sp),this._moduleDoBootstrap(ee),ee))})})}bootstrapModule(s,a=[]){const c=yx({},a);return function(n,i,s){const a=new _v(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(s){const a=s.injector.get(pp);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new de("403","");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de("404","");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ss(xo))},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})();function yx(n,i){return Array.isArray(i)?i.reduce(yx,n):Cn(Cn({},n),i)}let pp=(()=>{class n{constructor(s,a,c,f,b){this._zone=s,this._injector=a,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new j.y(Y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Y.next(this._stable),Y.complete()})}),I=new j.y(Y=>{let ee;this._zone.runOutsideAngular(()=>{ee=this._zone.onStable.subscribe(()=>{_a.assertNotInAngularZone(),Lv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Y.next(!0))})})});const pe=this._zone.onUnstable.subscribe(()=>{_a.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Y.next(!1)}))});return()=>{ee.unsubscribe(),pe.unsubscribe()}});this.isStable=(0,me.T)(C,I.pipe((0,ce.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new de("405","");let c;c=s instanceof Xt?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(c.componentType);const f=function(n){return n.isBoundToModule}(c)?void 0:this._injector.get(hs),C=c.create(xo.NULL,[],a||c.selector,f),I=C.location.nativeElement,Y=C.injector.get(hx,null),ee=Y&&C.injector.get(fx);return Y&&ee&&ee.registerApplication(I,Y),C.onDestroy(()=>{this.detachView(C.hostView),kv(this.components,C),ee&&ee.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new de("101","");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;kv(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(ax,[]).concat(this._bootstrapListeners).forEach(c=>c(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Ss(_a),Ss(xo),Ss(ld),Ss(ns),Ss(bh))},n.\u0275prov=Oi({token:n,factory:n.\u0275fac}),n})();function kv(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}let bx=!0;function Qw(){bx=!1}let eE=(()=>{class n{}return n.__NG_ELEMENT_ID__=tE,n})();function tE(n){return function(n,i,s){if(ho(n)&&!s){const a=_i(n.index,i);return new vi(a,a)}return 47&n.type?new vi(i[16],i):null}(wt(),zt(),16==(16&n))}class Dx{constructor(){}supports(i){return Du(i)}create(i){return new lE(i)}}const aE=(n,i)=>i;class lE{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||aE}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,c=0,f=null;for(;s||a;){const b=!a||s&&s.currentIndex<Ax(a,c,f)?s:a,C=Ax(b,c,f),I=b.currentIndex;if(b===a)c--,a=a._nextRemoved;else if(s=s._next,null==b.previousIndex)c++;else{f||(f=[]);const Y=C-c,ee=I-c;if(Y!=ee){for(let ze=0;ze<Y;ze++){const lt=ze<f.length?f[ze]:f[ze]=0,Nt=lt+ze;ee<=Nt&&Nt<Y&&(f[ze]=lt+1)}f[b.previousIndex]=ee-Y}}C!==I&&i(b,C,I)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Du(i))throw new Error(`Error trying to diff '${Ye(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,f,b,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let C=0;C<this.length;C++)f=i[C],b=this._trackByFn(C,f),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,f,b,C)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,b,C),a=!0),s=s._next}else c=0,function(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[Nc()]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,C=>{b=this._trackByFn(c,C),null!==s&&Object.is(s.trackById,b)?(a&&(s=this._verifyReinsertion(s,C,b,c)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,b,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,c){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,f,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,f,c)):i=this._addAfter(new cE(s,a),f,c),i}_verifyReinsertion(i,s,a,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?i=this._reinsertAfter(f,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,f=i._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const c=null===s?this._itHead:s._next;return i._next=c,i._prev=s,null===c?this._itTail=i:c._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new Tx),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tx),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class cE{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uE{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Tx{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new uE,this.map.set(s,a)),a.add(i)}get(i,s){const c=this.map.get(i);return c?c.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ax(n,i,s){const a=n.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+i+c}class Rx{constructor(){}supports(i){return i instanceof Map||If(i)}create(){return new dE}}class dE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||If(i)))throw new Error(`Error trying to diff '${Ye(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,s);const f=c._prev,b=c._next;return f&&(f._next=b),b&&(b._prev=f),c._next=null,c._prev=null,c}const a=new hE(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class hE{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ix(){return new zg([new Dx])}let zg=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Ix()),deps:[[n,new hc,new Ll]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${s}' of type '${function(n){return n.name||typeof n}(s)}'`)}}return n.\u0275prov=Oi({token:n,providedIn:"root",factory:Ix}),n})();function Px(){return new Gg([new Rx])}let Gg=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Px()),deps:[[n,new hc,new Ll]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(a)return a;throw new Error(`Cannot find a differ supporting object '${s}'`)}}return n.\u0275prov=Oi({token:n,providedIn:"root",factory:Px}),n})();const pE=[new Rx],gE=new zg([new Dx]),_E=new Gg(pE),yE=mx(null,"core",[{provide:ox,useValue:"unknown"},{provide:_x,deps:[xo]},{provide:fx,deps:[]},{provide:lx,deps:[]}]),EE=[{provide:pp,useClass:pp,deps:[_a,xo,ld,ns,bh]},{provide:fr,deps:[_a],useFactory:function(n){let i=[];return n.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(s){i.push(s)}}},{provide:bh,useClass:bh,deps:[[new Ll,Rv]]},{provide:Pv,useClass:Pv,deps:[]},Lw,{provide:zg,useFactory:function(){return gE},deps:[]},{provide:Gg,useFactory:function(){return _E},deps:[]},{provide:Hg,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||sp},deps:[[new nu(Hg),new Ll,new hc]]},{provide:cx,useValue:"USD"}];let SE=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ss(pp))},n.\u0275mod=ri({type:n}),n.\u0275inj=ai({providers:EE}),n})()},86:(sn,at,q)=>{"use strict";q.d(at,{lW:()=>Ge,ot:()=>$});var B=q(3668),y=q(6731),j=q(9618),me=q(9555);const ce=["mat-button",""],Oe=["*"],Ie=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Me=(0,y.pj)((0,y.Id)((0,y.Kr)(class{constructor(J){this._elementRef=J}})));let Ge=(()=>{class J extends Me{constructor(Ae,Be,_e){super(Ae),this._focusMonitor=Be,this._animationMode=_e,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const st of Ie)this._hasHostAttributes(st)&&this._getHostElement().classList.add(st);Ae.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Ae,Be){Ae?this._focusMonitor.focusVia(this._getHostElement(),Ae,Be):this._getHostElement().focus(Be)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Ae){return Ae.some(Be=>this._getHostElement().hasAttribute(Be))}}return J.\u0275fac=function(Ae){return new(Ae||J)(B.Y36(B.SBq),B.Y36(j.tE),B.Y36(me.Qb,8))},J.\u0275cmp=B.Xpm({type:J,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Ae,Be){if(1&Ae&&B.Gf(y.wG,5),2&Ae){let _e;B.iGM(_e=B.CRH())&&(Be.ripple=_e.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Ae,Be){2&Ae&&(B.uIk("disabled",Be.disabled||null),B.ekj("_mat-animation-noopable","NoopAnimations"===Be._animationMode)("mat-button-disabled",Be.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[B.qOj],attrs:ce,ngContentSelectors:Oe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Ae,Be){1&Ae&&(B.F$t(),B.TgZ(0,"span",0),B.Hsn(1),B.qZA(),B._UZ(2,"span",1),B._UZ(3,"span",2)),2&Ae&&(B.xp6(2),B.ekj("mat-button-ripple-round",Be.isRoundButton||Be.isIconButton),B.Q6J("matRippleDisabled",Be._isRippleDisabled())("matRippleCentered",Be.isIconButton)("matRippleTrigger",Be._getHostElement()))},directives:[y.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),J})(),$=(()=>{class J{}return J.\u0275fac=function(Ae){return new(Ae||J)},J.\u0275mod=B.oAB({type:J}),J.\u0275inj=B.cJS({imports:[[y.si,y.BQ],y.BQ]}),J})()},6731:(sn,at,q)=>{"use strict";q.d(at,{BQ:()=>Lt,wG:()=>Ls,si:()=>Cr,pj:()=>xt,Kr:()=>At,Id:()=>ft,sb:()=>Ze});var B=q(3668),y=q(9618),j=q(8290),ce=q(6019),Oe=q(928),Se=q(348),Ye=q(9555);const st=new B.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Lt=(()=>{class mt{constructor(et,Ut,fn){this._sanityChecks=Ut,this._document=fn,this._hasDoneGlobalChecks=!1,et._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(et){return!(0,Oe.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[et])}}return mt.\u0275fac=function(et){return new(et||mt)(B.LFG(y.qm),B.LFG(st,8),B.LFG(ce.K0))},mt.\u0275mod=B.oAB({type:mt}),mt.\u0275inj=B.cJS({imports:[[j.vT],j.vT]}),mt})();function ft(mt){return class extends mt{constructor(...We){super(...We),this._disabled=!1}get disabled(){return this._disabled}set disabled(We){this._disabled=(0,Se.Ig)(We)}}}function xt(mt,We){return class extends mt{constructor(...et){super(...et),this.defaultColor=We,this.color=We}get color(){return this._color}set color(et){const Ut=et||this.defaultColor;Ut!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Ut&&this._elementRef.nativeElement.classList.add(`mat-${Ut}`),this._color=Ut)}}}function At(mt){return class extends mt{constructor(...We){super(...We),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(We){this._disableRipple=(0,Se.Ig)(We)}}}function Ze(mt,We=0){return class extends mt{constructor(...et){super(...et),this._tabIndex=We,this.defaultTabIndex=We}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(et){this._tabIndex=null!=et?(0,Se.su)(et):this.defaultTabIndex}}}class fs{constructor(We,et,Ut){this._renderer=We,this.element=et,this.config=Ut,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Mr={enterDuration:225,exitDuration:150},er=(0,Oe.i$)({passive:!0}),Fr=["mousedown","touchstart"],Wr=["mouseup","mouseleave","touchend","touchcancel"];class jr{constructor(We,et,Ut,fn){this._target=We,this._ngZone=et,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,fn.isBrowser&&(this._containerElement=(0,Se.fI)(Ut))}fadeInRipple(We,et,Ut={}){const fn=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Mn=Cn(Cn({},Mr),Ut.animation);Ut.centered&&(We=fn.left+fn.width/2,et=fn.top+fn.height/2);const Wi=Ut.radius||function(mt,We,et){const Ut=Math.max(Math.abs(mt-et.left),Math.abs(mt-et.right)),fn=Math.max(Math.abs(We-et.top),Math.abs(We-et.bottom));return Math.sqrt(Ut*Ut+fn*fn)}(We,et,fn),Rt=We-fn.left,Ve=et-fn.top,De=Mn.enterDuration,Je=document.createElement("div");Je.classList.add("mat-ripple-element"),Je.style.left=Rt-Wi+"px",Je.style.top=Ve-Wi+"px",Je.style.height=2*Wi+"px",Je.style.width=2*Wi+"px",null!=Ut.color&&(Je.style.backgroundColor=Ut.color),Je.style.transitionDuration=`${De}ms`,this._containerElement.appendChild(Je),window.getComputedStyle(Je).getPropertyValue("opacity"),Je.style.transform="scale(1)";const gt=new fs(this,Je,Ut);return gt.state=0,this._activeRipples.add(gt),Ut.persistent||(this._mostRecentTransientRipple=gt),this._runTimeoutOutsideZone(()=>{const cn=gt===this._mostRecentTransientRipple;gt.state=1,!Ut.persistent&&(!cn||!this._isPointerDown)&&gt.fadeOut()},De),gt}fadeOutRipple(We){const et=this._activeRipples.delete(We);if(We===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!et)return;const Ut=We.element,fn=Cn(Cn({},Mr),We.config.animation);Ut.style.transitionDuration=`${fn.exitDuration}ms`,Ut.style.opacity="0",We.state=2,this._runTimeoutOutsideZone(()=>{We.state=3,Ut.remove()},fn.exitDuration)}fadeOutAll(){this._activeRipples.forEach(We=>We.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(We=>{We.config.persistent||We.fadeOut()})}setupTriggerEvents(We){const et=(0,Se.fI)(We);!et||et===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=et,this._registerEvents(Fr))}handleEvent(We){"mousedown"===We.type?this._onMousedown(We):"touchstart"===We.type?this._onTouchStart(We):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Wr),this._pointerUpEventsRegistered=!0)}_onMousedown(We){const et=(0,y.X6)(We),Ut=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!et&&!Ut&&(this._isPointerDown=!0,this.fadeInRipple(We.clientX,We.clientY,this._target.rippleConfig))}_onTouchStart(We){if(!this._target.rippleDisabled&&!(0,y.yG)(We)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const et=We.changedTouches;for(let Ut=0;Ut<et.length;Ut++)this.fadeInRipple(et[Ut].clientX,et[Ut].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(We=>{!We.config.persistent&&(1===We.state||We.config.terminateOnPointerUp&&0===We.state)&&We.fadeOut()}))}_runTimeoutOutsideZone(We,et=0){this._ngZone.runOutsideAngular(()=>setTimeout(We,et))}_registerEvents(We){this._ngZone.runOutsideAngular(()=>{We.forEach(et=>{this._triggerElement.addEventListener(et,this,er)})})}_removeTriggerEvents(){this._triggerElement&&(Fr.forEach(We=>{this._triggerElement.removeEventListener(We,this,er)}),this._pointerUpEventsRegistered&&Wr.forEach(We=>{this._triggerElement.removeEventListener(We,this,er)}))}}const ur=new B.OlP("mat-ripple-global-options");let Ls=(()=>{class mt{constructor(et,Ut,fn,Mn,Wi){this._elementRef=et,this._animationMode=Wi,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Mn||{},this._rippleRenderer=new jr(this,Ut,et,fn)}get disabled(){return this._disabled}set disabled(et){et&&this.fadeOutAllNonPersistent(),this._disabled=et,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(et){this._trigger=et,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Cn(Cn(Cn({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(et,Ut=0,fn){return"number"==typeof et?this._rippleRenderer.fadeInRipple(et,Ut,Cn(Cn({},this.rippleConfig),fn)):this._rippleRenderer.fadeInRipple(0,0,Cn(Cn({},this.rippleConfig),et))}}return mt.\u0275fac=function(et){return new(et||mt)(B.Y36(B.SBq),B.Y36(B.R0b),B.Y36(Oe.t4),B.Y36(ur,8),B.Y36(Ye.Qb,8))},mt.\u0275dir=B.lG2({type:mt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(et,Ut){2&et&&B.ekj("mat-ripple-unbounded",Ut.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),mt})(),Cr=(()=>{class mt{}return mt.\u0275fac=function(et){return new(et||mt)},mt.\u0275mod=B.oAB({type:mt}),mt.\u0275inj=B.cJS({imports:[[Lt,Oe.ud],Lt]}),mt})()},1285:(sn,at,q)=>{"use strict";q.d(at,{WI:()=>vs,uw:()=>xr,H8:()=>po,ZT:()=>ho,xY:()=>Zr,Is:()=>Rr,so:()=>Bs,uh:()=>fo});var B=q(348),y=q(3668),j=q(273),me=q(2997),ce=q(8305),Oe=q(5077),Se=q(2869),Ye=q(7908);const Ie={schedule(we){let G=requestAnimationFrame,V=cancelAnimationFrame;const{delegate:ne}=Ie;ne&&(G=ne.requestAnimationFrame,V=ne.cancelAnimationFrame);const Te=G(je=>{V=void 0,we(je)});return new Ye.w0(()=>null==V?void 0:V(Te))},requestAnimationFrame(...we){const{delegate:G}=Ie;return((null==G?void 0:G.requestAnimationFrame)||requestAnimationFrame)(...we)},cancelAnimationFrame(...we){const{delegate:G}=Ie;return((null==G?void 0:G.cancelAnimationFrame)||cancelAnimationFrame)(...we)},delegate:void 0};var Ge=q(3192);new class extends Ge.v{flush(G){this._active=!0,this._scheduled=void 0;const{actions:V}=this;let ne,Te=-1;G=G||V.shift();const je=V.length;do{if(ne=G.execute(G.state,G.delay))break}while(++Te<je&&(G=V.shift()));if(this._active=!1,ne){for(;++Te<je&&(G=V.shift());)G.unsubscribe();throw ne}}}(class extends Se.o{constructor(G,V){super(G,V),this.scheduler=G,this.work=V}requestAsyncId(G,V,ne=0){return null!==ne&&ne>0?super.requestAsyncId(G,V,ne):(G.actions.push(this),G._scheduled||(G._scheduled=Ie.requestAnimationFrame(()=>G.flush(void 0))))}recycleAsyncId(G,V,ne=0){if(null!=ne&&ne>0||null==ne&&this.delay>0)return super.recycleAsyncId(G,V,ne);0===G.actions.length&&(Ie.cancelAnimationFrame(V),G._scheduled=void 0)}});let Ae,de=1;const Be={};function _e(we){return we in Be&&(delete Be[we],!0)}const st={setImmediate(we){const G=de++;return Be[G]=!0,Ae||(Ae=Promise.resolve()),Ae.then(()=>_e(G)&&we()),G},clearImmediate(we){_e(we)}},{setImmediate:Xe,clearImmediate:He}=st,pt={setImmediate(...we){const{delegate:G}=pt;return((null==G?void 0:G.setImmediate)||Xe)(...we)},clearImmediate(we){const{delegate:G}=pt;return((null==G?void 0:G.clearImmediate)||He)(we)},delegate:void 0};new class extends Ge.v{flush(G){this._active=!0,this._scheduled=void 0;const{actions:V}=this;let ne,Te=-1;G=G||V.shift();const je=V.length;do{if(ne=G.execute(G.state,G.delay))break}while(++Te<je&&(G=V.shift()));if(this._active=!1,ne){for(;++Te<je&&(G=V.shift());)G.unsubscribe();throw ne}}}(class extends Se.o{constructor(G,V){super(G,V),this.scheduler=G,this.work=V}requestAsyncId(G,V,ne=0){return null!==ne&&ne>0?super.requestAsyncId(G,V,ne):(G.actions.push(this),G._scheduled||(G._scheduled=pt.setImmediate(G.flush.bind(G,void 0))))}recycleAsyncId(G,V,ne=0){if(null!=ne&&ne>0||null==ne&&this.delay>0)return super.recycleAsyncId(G,V,ne);0===G.actions.length&&(pt.clearImmediate(V),G._scheduled=void 0)}});var Qe=q(2210),ut=q(9947),bt=q(9985),Vt=q(8889),ni=q(7398);function Ln(we,G=Qe.P){return function(we){return(0,ut.e)((G,V)=>{let ne=!1,Te=null,je=null,It=!1;const ln=()=>{if(null==je||je.unsubscribe(),je=null,ne){ne=!1;const Bn=Te;Te=null,V.next(Bn)}It&&V.complete()},rn=()=>{je=null,It&&V.complete()};G.subscribe(new Vt.Q(V,Bn=>{ne=!0,Te=Bn,je||(0,bt.Xf)(we()).subscribe(je=new Vt.Q(V,ln,rn))},()=>{It=!0,(!ne||!je||je.closed)&&V.complete()}))})}(()=>function(we=0,G,V=Qe.P){let ne=-1;return null!=G&&((0,ni.K)(G)?V=G:ne=G),new ce.y(Te=>{let je=function(we){return we instanceof Date&&!isNaN(we)}(we)?+we-V.now():we;je<0&&(je=0);let It=0;return V.schedule(function(){Te.closed||(Te.next(It++),0<=ne?this.schedule(void 0,ne):Te.complete())},je)})}(we,G))}var vn=q(461),En=q(928),on=q(6019),zi=q(8290);let Sr=(()=>{class we{constructor(V,ne,Te){this._ngZone=V,this._platform=ne,this._scrolled=new j.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Te}register(V){this.scrollContainers.has(V)||this.scrollContainers.set(V,V.elementScrolled().subscribe(()=>this._scrolled.next(V)))}deregister(V){const ne=this.scrollContainers.get(V);ne&&(ne.unsubscribe(),this.scrollContainers.delete(V))}scrolled(V=20){return this._platform.isBrowser?new ce.y(ne=>{this._globalSubscription||this._addGlobalListener();const Te=V>0?this._scrolled.pipe(Ln(V)).subscribe(ne):this._scrolled.subscribe(ne);return this._scrolledCount++,()=>{Te.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,me.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((V,ne)=>this.deregister(ne)),this._scrolled.complete()}ancestorScrolled(V,ne){const Te=this.getAncestorScrollContainers(V);return this.scrolled(ne).pipe((0,vn.h)(je=>!je||Te.indexOf(je)>-1))}getAncestorScrollContainers(V){const ne=[];return this.scrollContainers.forEach((Te,je)=>{this._scrollableContainsElement(je,V)&&ne.push(je)}),ne}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(V,ne){let Te=(0,B.fI)(ne),je=V.getElementRef().nativeElement;do{if(Te==je)return!0}while(Te=Te.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const V=this._getWindow();return(0,Oe.R)(V.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(y.R0b),y.LFG(En.t4),y.LFG(on.K0,8))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Wr=(()=>{class we{constructor(V,ne,Te){this._platform=V,this._change=new j.x,this._changeListener=je=>{this._change.next(je)},this._document=Te,ne.runOutsideAngular(()=>{if(V.isBrowser){const je=this._getWindow();je.addEventListener("resize",this._changeListener),je.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const V=this._getWindow();V.removeEventListener("resize",this._changeListener),V.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const V={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),V}getViewportRect(){const V=this.getViewportScrollPosition(),{width:ne,height:Te}=this.getViewportSize();return{top:V.top,left:V.left,bottom:V.top+Te,right:V.left+ne,height:Te,width:ne}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const V=this._document,ne=this._getWindow(),Te=V.documentElement,je=Te.getBoundingClientRect();return{top:-je.top||V.body.scrollTop||ne.scrollY||Te.scrollTop||0,left:-je.left||V.body.scrollLeft||ne.scrollX||Te.scrollLeft||0}}change(V=20){return V>0?this._change.pipe(Ln(V)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const V=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:V.innerWidth,height:V.innerHeight}:{width:0,height:0}}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(En.t4),y.LFG(y.R0b),y.LFG(on.K0,8))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Cr=(()=>{class we{}return we.\u0275fac=function(V){return new(V||we)},we.\u0275mod=y.oAB({type:we}),we.\u0275inj=y.cJS({}),we})(),ps=(()=>{class we{}return we.\u0275fac=function(V){return new(V||we)},we.\u0275mod=y.oAB({type:we}),we.\u0275inj=y.cJS({imports:[[zi.vT,En.ud,Cr],zi.vT,Cr]}),we})();var dr=q(5711),pr=q(3719),ii=q(9468),Dr=q(6263);const Mi=(0,En.Mq)();class Ht{constructor(G,V){this._viewportRuler=G,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=V}attach(){}enable(){if(this._canBeEnabled()){const G=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=G.style.left||"",this._previousHTMLStyles.top=G.style.top||"",G.style.left=(0,B.HM)(-this._previousScrollPosition.left),G.style.top=(0,B.HM)(-this._previousScrollPosition.top),G.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const G=this._document.documentElement,ne=G.style,Te=this._document.body.style,je=ne.scrollBehavior||"",It=Te.scrollBehavior||"";this._isEnabled=!1,ne.left=this._previousHTMLStyles.left,ne.top=this._previousHTMLStyles.top,G.classList.remove("cdk-global-scrollblock"),Mi&&(ne.scrollBehavior=Te.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Mi&&(ne.scrollBehavior=je,Te.scrollBehavior=It)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const V=this._document.body,ne=this._viewportRuler.getViewportSize();return V.scrollHeight>ne.height||V.scrollWidth>ne.width}}class ki{constructor(G,V,ne,Te){this._scrollDispatcher=G,this._ngZone=V,this._viewportRuler=ne,this._config=Te,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(G){this._overlayRef=G}enable(){if(this._scrollSubscription)return;const G=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=G.subscribe(()=>{const V=this._viewportRuler.getViewportScrollPosition().top;Math.abs(V-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=G.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Nr{enable(){}disable(){}attach(){}}function fi(we,G){return G.some(V=>we.bottom<V.top||we.top>V.bottom||we.right<V.left||we.left>V.right)}function bi(we,G){return G.some(V=>we.top<V.top||we.bottom>V.bottom||we.left<V.left||we.right>V.right)}class Bi{constructor(G,V,ne,Te){this._scrollDispatcher=G,this._viewportRuler=V,this._ngZone=ne,this._config=Te,this._scrollSubscription=null}attach(G){this._overlayRef=G}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const V=this._overlayRef.overlayElement.getBoundingClientRect(),{width:ne,height:Te}=this._viewportRuler.getViewportSize();fi(V,[{width:ne,height:Te,bottom:Te,right:ne,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let kr=(()=>{class we{constructor(V,ne,Te,je){this._scrollDispatcher=V,this._viewportRuler=ne,this._ngZone=Te,this.noop=()=>new Nr,this.close=It=>new ki(this._scrollDispatcher,this._ngZone,this._viewportRuler,It),this.block=()=>new Ht(this._viewportRuler,this._document),this.reposition=It=>new Bi(this._scrollDispatcher,this._viewportRuler,this._ngZone,It),this._document=je}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(Sr),y.LFG(Wr),y.LFG(y.R0b),y.LFG(on.K0))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();class Kn{constructor(G){if(this.scrollStrategy=new Nr,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,G){const V=Object.keys(G);for(const ne of V)void 0!==G[ne]&&(this[ne]=G[ne])}}}class et{constructor(G,V){this.connectionPair=G,this.scrollableViewProperties=V}}let Mn=(()=>{class we{constructor(V){this._attachedOverlays=[],this._document=V}ngOnDestroy(){this.detach()}add(V){this.remove(V),this._attachedOverlays.push(V)}remove(V){const ne=this._attachedOverlays.indexOf(V);ne>-1&&this._attachedOverlays.splice(ne,1),0===this._attachedOverlays.length&&this.detach()}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(on.K0))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Wi=(()=>{class we extends Mn{constructor(V){super(V),this._keydownListener=ne=>{const Te=this._attachedOverlays;for(let je=Te.length-1;je>-1;je--)if(Te[je]._keydownEvents.observers.length>0){Te[je]._keydownEvents.next(ne);break}}}add(V){super.add(V),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(on.K0))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Rt=(()=>{class we extends Mn{constructor(V,ne){super(V),this._platform=ne,this._cursorStyleIsSet=!1,this._pointerDownListener=Te=>{this._pointerDownEventTarget=(0,En.sA)(Te)},this._clickListener=Te=>{const je=(0,En.sA)(Te),It="click"===Te.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:je;this._pointerDownEventTarget=null;const ln=this._attachedOverlays.slice();for(let rn=ln.length-1;rn>-1;rn--){const Bn=ln[rn];if(!(Bn._outsidePointerEvents.observers.length<1)&&Bn.hasAttached()){if(Bn.overlayElement.contains(je)||Bn.overlayElement.contains(It))break;Bn._outsidePointerEvents.next(Te)}}}}add(V){if(super.add(V),!this._isAttached){const ne=this._document.body;ne.addEventListener("pointerdown",this._pointerDownListener,!0),ne.addEventListener("click",this._clickListener,!0),ne.addEventListener("auxclick",this._clickListener,!0),ne.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=ne.style.cursor,ne.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const V=this._document.body;V.removeEventListener("pointerdown",this._pointerDownListener,!0),V.removeEventListener("click",this._clickListener,!0),V.removeEventListener("auxclick",this._clickListener,!0),V.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(V.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(on.K0),y.LFG(En.t4))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),Ve=(()=>{class we{constructor(V,ne){this._platform=ne,this._document=V}ngOnDestroy(){var V;null==(V=this._containerElement)||V.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const V="cdk-overlay-container";if(this._platform.isBrowser||(0,En.Oy)()){const Te=this._document.querySelectorAll(`.${V}[platform="server"], .${V}[platform="test"]`);for(let je=0;je<Te.length;je++)Te[je].remove()}const ne=this._document.createElement("div");ne.classList.add(V),(0,En.Oy)()?ne.setAttribute("platform","test"):this._platform.isBrowser||ne.setAttribute("platform","server"),this._document.body.appendChild(ne),this._containerElement=ne}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(on.K0),y.LFG(En.t4))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();class De{constructor(G,V,ne,Te,je,It,ln,rn,Bn){this._portalOutlet=G,this._host=V,this._pane=ne,this._config=Te,this._ngZone=je,this._keyboardDispatcher=It,this._document=ln,this._location=rn,this._outsideClickDispatcher=Bn,this._backdropElement=null,this._backdropClick=new j.x,this._attachments=new j.x,this._detachments=new j.x,this._locationChanges=Ye.w0.EMPTY,this._backdropClickHandler=Zi=>this._backdropClick.next(Zi),this._keydownEvents=new j.x,this._outsidePointerEvents=new j.x,Te.scrollStrategy&&(this._scrollStrategy=Te.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Te.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(G){let V=this._portalOutlet.attach(G);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ii.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),V}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const G=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),G}dispose(){var V;const G=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(V=this._host)||V.remove(),this._previousHostParent=this._pane=this._host=null,G&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(G){G!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=G,this.hasAttached()&&(G.attach(this),this.updatePosition()))}updateSize(G){this._config=Cn(Cn({},this._config),G),this._updateElementSize()}setDirection(G){this._config=eo(Cn({},this._config),{direction:G}),this._updateElementDirection()}addPanelClass(G){this._pane&&this._toggleClasses(this._pane,G,!0)}removePanelClass(G){this._pane&&this._toggleClasses(this._pane,G,!1)}getDirection(){const G=this._config.direction;return G?"string"==typeof G?G:G.value:"ltr"}updateScrollStrategy(G){G!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=G,this.hasAttached()&&(G.attach(this),G.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const G=this._pane.style;G.width=(0,B.HM)(this._config.width),G.height=(0,B.HM)(this._config.height),G.minWidth=(0,B.HM)(this._config.minWidth),G.minHeight=(0,B.HM)(this._config.minHeight),G.maxWidth=(0,B.HM)(this._config.maxWidth),G.maxHeight=(0,B.HM)(this._config.maxHeight)}_togglePointerEvents(G){this._pane.style.pointerEvents=G?"":"none"}_attachBackdrop(){const G="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(G)})}):this._backdropElement.classList.add(G)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const G=this._backdropElement;if(!G)return;let V;const ne=()=>{G&&(G.removeEventListener("click",this._backdropClickHandler),G.removeEventListener("transitionend",ne),this._disposeBackdrop(G)),this._config.backdropClass&&this._toggleClasses(G,this._config.backdropClass,!1),clearTimeout(V)};G.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{G.addEventListener("transitionend",ne)}),G.style.pointerEvents="none",V=this._ngZone.runOutsideAngular(()=>setTimeout(ne,500))}_toggleClasses(G,V,ne){const Te=(0,B.Eq)(V||[]).filter(je=>!!je);Te.length&&(ne?G.classList.add(...Te):G.classList.remove(...Te))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const G=this._ngZone.onStable.pipe((0,Dr.R)((0,pr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),G.unsubscribe())})})}_disposeScrollStrategy(){const G=this._scrollStrategy;G&&(G.disable(),G.detach&&G.detach())}_disposeBackdrop(G){G&&(G.remove(),this._backdropElement===G&&(this._backdropElement=null))}}const Je="cdk-overlay-connected-position-bounding-box",gt=/([A-Za-z%]+)$/;class cn{constructor(G,V,ne,Te,je){this._viewportRuler=V,this._document=ne,this._platform=Te,this._overlayContainer=je,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new j.x,this._resizeSubscription=Ye.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(G)}get positions(){return this._preferredPositions}attach(G){this._validatePositions(),G.hostElement.classList.add(Je),this._overlayRef=G,this._boundingBox=G.hostElement,this._pane=G.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const G=this._originRect,V=this._overlayRect,ne=this._viewportRect,Te=[];let je;for(let It of this._preferredPositions){let ln=this._getOriginPoint(G,It),rn=this._getOverlayPoint(ln,V,It),Bn=this._getOverlayFit(rn,V,ne,It);if(Bn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(It,ln);this._canFitWithFlexibleDimensions(Bn,rn,ne)?Te.push({position:It,origin:ln,overlayRect:V,boundingBoxRect:this._calculateBoundingBoxRect(ln,It)}):(!je||je.overlayFit.visibleArea<Bn.visibleArea)&&(je={overlayFit:Bn,overlayPoint:rn,originPoint:ln,position:It,overlayRect:V})}if(Te.length){let It=null,ln=-1;for(const rn of Te){const Bn=rn.boundingBoxRect.width*rn.boundingBoxRect.height*(rn.position.weight||1);Bn>ln&&(ln=Bn,It=rn)}return this._isPushed=!1,void this._applyPosition(It.position,It.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(je.position,je.originPoint);this._applyPosition(je.position,je.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ri(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Je),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const G=this._lastPosition||this._preferredPositions[0],V=this._getOriginPoint(this._originRect,G);this._applyPosition(G,V)}}withScrollableContainers(G){return this._scrollables=G,this}withPositions(G){return this._preferredPositions=G,-1===G.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(G){return this._viewportMargin=G,this}withFlexibleDimensions(G=!0){return this._hasFlexibleDimensions=G,this}withGrowAfterOpen(G=!0){return this._growAfterOpen=G,this}withPush(G=!0){return this._canPush=G,this}withLockedPosition(G=!0){return this._positionLocked=G,this}setOrigin(G){return this._origin=G,this}withDefaultOffsetX(G){return this._offsetX=G,this}withDefaultOffsetY(G){return this._offsetY=G,this}withTransformOriginOn(G){return this._transformOriginSelector=G,this}_getOriginPoint(G,V){let ne,Te;if("center"==V.originX)ne=G.left+G.width/2;else{const je=this._isRtl()?G.right:G.left,It=this._isRtl()?G.left:G.right;ne="start"==V.originX?je:It}return Te="center"==V.originY?G.top+G.height/2:"top"==V.originY?G.top:G.bottom,{x:ne,y:Te}}_getOverlayPoint(G,V,ne){let Te,je;return Te="center"==ne.overlayX?-V.width/2:"start"===ne.overlayX?this._isRtl()?-V.width:0:this._isRtl()?0:-V.width,je="center"==ne.overlayY?-V.height/2:"top"==ne.overlayY?0:-V.height,{x:G.x+Te,y:G.y+je}}_getOverlayFit(G,V,ne,Te){const je=ke(V);let{x:It,y:ln}=G,rn=this._getOffset(Te,"x"),Bn=this._getOffset(Te,"y");rn&&(It+=rn),Bn&&(ln+=Bn);let $s=0-ln,Os=ln+je.height-ne.height,Ms=this._subtractOverflows(je.width,0-It,It+je.width-ne.width),to=this._subtractOverflows(je.height,$s,Os),mo=Ms*to;return{visibleArea:mo,isCompletelyWithinViewport:je.width*je.height===mo,fitsInViewportVertically:to===je.height,fitsInViewportHorizontally:Ms==je.width}}_canFitWithFlexibleDimensions(G,V,ne){if(this._hasFlexibleDimensions){const Te=ne.bottom-V.y,je=ne.right-V.x,It=$e(this._overlayRef.getConfig().minHeight),ln=$e(this._overlayRef.getConfig().minWidth),Bn=G.fitsInViewportHorizontally||null!=ln&&ln<=je;return(G.fitsInViewportVertically||null!=It&&It<=Te)&&Bn}return!1}_pushOverlayOnScreen(G,V,ne){if(this._previousPushAmount&&this._positionLocked)return{x:G.x+this._previousPushAmount.x,y:G.y+this._previousPushAmount.y};const Te=ke(V),je=this._viewportRect,It=Math.max(G.x+Te.width-je.width,0),ln=Math.max(G.y+Te.height-je.height,0),rn=Math.max(je.top-ne.top-G.y,0),Bn=Math.max(je.left-ne.left-G.x,0);let Zi=0,Hr=0;return Zi=Te.width<=je.width?Bn||-It:G.x<this._viewportMargin?je.left-ne.left-G.x:0,Hr=Te.height<=je.height?rn||-ln:G.y<this._viewportMargin?je.top-ne.top-G.y:0,this._previousPushAmount={x:Zi,y:Hr},{x:G.x+Zi,y:G.y+Hr}}_applyPosition(G,V){if(this._setTransformOrigin(G),this._setOverlayElementStyles(V,G),this._setBoundingBoxStyles(V,G),G.panelClass&&this._addPanelClasses(G.panelClass),this._lastPosition=G,this._positionChanges.observers.length){const ne=this._getScrollVisibility(),Te=new et(G,ne);this._positionChanges.next(Te)}this._isInitialRender=!1}_setTransformOrigin(G){if(!this._transformOriginSelector)return;const V=this._boundingBox.querySelectorAll(this._transformOriginSelector);let ne,Te=G.overlayY;ne="center"===G.overlayX?"center":this._isRtl()?"start"===G.overlayX?"right":"left":"start"===G.overlayX?"left":"right";for(let je=0;je<V.length;je++)V[je].style.transformOrigin=`${ne} ${Te}`}_calculateBoundingBoxRect(G,V){const ne=this._viewportRect,Te=this._isRtl();let je,It,ln,Zi,Hr,$s;if("top"===V.overlayY)It=G.y,je=ne.height-It+this._viewportMargin;else if("bottom"===V.overlayY)ln=ne.height-G.y+2*this._viewportMargin,je=ne.height-ln+this._viewportMargin;else{const Os=Math.min(ne.bottom-G.y+ne.top,G.y),Ms=this._lastBoundingBoxSize.height;je=2*Os,It=G.y-Os,je>Ms&&!this._isInitialRender&&!this._growAfterOpen&&(It=G.y-Ms/2)}if("end"===V.overlayX&&!Te||"start"===V.overlayX&&Te)$s=ne.width-G.x+this._viewportMargin,Zi=G.x-this._viewportMargin;else if("start"===V.overlayX&&!Te||"end"===V.overlayX&&Te)Hr=G.x,Zi=ne.right-G.x;else{const Os=Math.min(ne.right-G.x+ne.left,G.x),Ms=this._lastBoundingBoxSize.width;Zi=2*Os,Hr=G.x-Os,Zi>Ms&&!this._isInitialRender&&!this._growAfterOpen&&(Hr=G.x-Ms/2)}return{top:It,left:Hr,bottom:ln,right:$s,width:Zi,height:je}}_setBoundingBoxStyles(G,V){const ne=this._calculateBoundingBoxRect(G,V);!this._isInitialRender&&!this._growAfterOpen&&(ne.height=Math.min(ne.height,this._lastBoundingBoxSize.height),ne.width=Math.min(ne.width,this._lastBoundingBoxSize.width));const Te={};if(this._hasExactPosition())Te.top=Te.left="0",Te.bottom=Te.right=Te.maxHeight=Te.maxWidth="",Te.width=Te.height="100%";else{const je=this._overlayRef.getConfig().maxHeight,It=this._overlayRef.getConfig().maxWidth;Te.height=(0,B.HM)(ne.height),Te.top=(0,B.HM)(ne.top),Te.bottom=(0,B.HM)(ne.bottom),Te.width=(0,B.HM)(ne.width),Te.left=(0,B.HM)(ne.left),Te.right=(0,B.HM)(ne.right),Te.alignItems="center"===V.overlayX?"center":"end"===V.overlayX?"flex-end":"flex-start",Te.justifyContent="center"===V.overlayY?"center":"bottom"===V.overlayY?"flex-end":"flex-start",je&&(Te.maxHeight=(0,B.HM)(je)),It&&(Te.maxWidth=(0,B.HM)(It))}this._lastBoundingBoxSize=ne,ri(this._boundingBox.style,Te)}_resetBoundingBoxStyles(){ri(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ri(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(G,V){const ne={},Te=this._hasExactPosition(),je=this._hasFlexibleDimensions,It=this._overlayRef.getConfig();if(Te){const Zi=this._viewportRuler.getViewportScrollPosition();ri(ne,this._getExactOverlayY(V,G,Zi)),ri(ne,this._getExactOverlayX(V,G,Zi))}else ne.position="static";let ln="",rn=this._getOffset(V,"x"),Bn=this._getOffset(V,"y");rn&&(ln+=`translateX(${rn}px) `),Bn&&(ln+=`translateY(${Bn}px)`),ne.transform=ln.trim(),It.maxHeight&&(Te?ne.maxHeight=(0,B.HM)(It.maxHeight):je&&(ne.maxHeight="")),It.maxWidth&&(Te?ne.maxWidth=(0,B.HM)(It.maxWidth):je&&(ne.maxWidth="")),ri(this._pane.style,ne)}_getExactOverlayY(G,V,ne){let Te={top:"",bottom:""},je=this._getOverlayPoint(V,this._overlayRect,G);this._isPushed&&(je=this._pushOverlayOnScreen(je,this._overlayRect,ne));let It=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return je.y-=It,"bottom"===G.overlayY?Te.bottom=this._document.documentElement.clientHeight-(je.y+this._overlayRect.height)+"px":Te.top=(0,B.HM)(je.y),Te}_getExactOverlayX(G,V,ne){let It,Te={left:"",right:""},je=this._getOverlayPoint(V,this._overlayRect,G);return this._isPushed&&(je=this._pushOverlayOnScreen(je,this._overlayRect,ne)),It=this._isRtl()?"end"===G.overlayX?"left":"right":"end"===G.overlayX?"right":"left","right"===It?Te.right=this._document.documentElement.clientWidth-(je.x+this._overlayRect.width)+"px":Te.left=(0,B.HM)(je.x),Te}_getScrollVisibility(){const G=this._getOriginRect(),V=this._pane.getBoundingClientRect(),ne=this._scrollables.map(Te=>Te.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bi(G,ne),isOriginOutsideView:fi(G,ne),isOverlayClipped:bi(V,ne),isOverlayOutsideView:fi(V,ne)}}_subtractOverflows(G,...V){return V.reduce((ne,Te)=>ne-Math.max(Te,0),G)}_getNarrowedViewportRect(){const G=this._document.documentElement.clientWidth,V=this._document.documentElement.clientHeight,ne=this._viewportRuler.getViewportScrollPosition();return{top:ne.top+this._viewportMargin,left:ne.left+this._viewportMargin,right:ne.left+G-this._viewportMargin,bottom:ne.top+V-this._viewportMargin,width:G-2*this._viewportMargin,height:V-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(G,V){return"x"===V?null==G.offsetX?this._offsetX:G.offsetX:null==G.offsetY?this._offsetY:G.offsetY}_validatePositions(){}_addPanelClasses(G){this._pane&&(0,B.Eq)(G).forEach(V=>{""!==V&&-1===this._appliedPanelClasses.indexOf(V)&&(this._appliedPanelClasses.push(V),this._pane.classList.add(V))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(G=>{this._pane.classList.remove(G)}),this._appliedPanelClasses=[])}_getOriginRect(){const G=this._origin;if(G instanceof y.SBq)return G.nativeElement.getBoundingClientRect();if(G instanceof Element)return G.getBoundingClientRect();const V=G.width||0,ne=G.height||0;return{top:G.y,bottom:G.y+ne,left:G.x,right:G.x+V,height:ne,width:V}}}function ri(we,G){for(let V in G)G.hasOwnProperty(V)&&(we[V]=G[V]);return we}function $e(we){if("number"!=typeof we&&null!=we){const[G,V]=we.split(gt);return V&&"px"!==V?null:parseFloat(G)}return we||null}function ke(we){return{top:Math.floor(we.top),right:Math.floor(we.right),bottom:Math.floor(we.bottom),left:Math.floor(we.left),width:Math.floor(we.width),height:Math.floor(we.height)}}const he="cdk-global-overlay-wrapper";class Le{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(G){const V=G.getConfig();this._overlayRef=G,this._width&&!V.width&&G.updateSize({width:this._width}),this._height&&!V.height&&G.updateSize({height:this._height}),G.hostElement.classList.add(he),this._isDisposed=!1}top(G=""){return this._bottomOffset="",this._topOffset=G,this._alignItems="flex-start",this}left(G=""){return this._rightOffset="",this._leftOffset=G,this._justifyContent="flex-start",this}bottom(G=""){return this._topOffset="",this._bottomOffset=G,this._alignItems="flex-end",this}right(G=""){return this._leftOffset="",this._rightOffset=G,this._justifyContent="flex-end",this}width(G=""){return this._overlayRef?this._overlayRef.updateSize({width:G}):this._width=G,this}height(G=""){return this._overlayRef?this._overlayRef.updateSize({height:G}):this._height=G,this}centerHorizontally(G=""){return this.left(G),this._justifyContent="center",this}centerVertically(G=""){return this.top(G),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const G=this._overlayRef.overlayElement.style,V=this._overlayRef.hostElement.style,ne=this._overlayRef.getConfig(),{width:Te,height:je,maxWidth:It,maxHeight:ln}=ne,rn=!("100%"!==Te&&"100vw"!==Te||It&&"100%"!==It&&"100vw"!==It),Bn=!("100%"!==je&&"100vh"!==je||ln&&"100%"!==ln&&"100vh"!==ln);G.position=this._cssPosition,G.marginLeft=rn?"0":this._leftOffset,G.marginTop=Bn?"0":this._topOffset,G.marginBottom=this._bottomOffset,G.marginRight=this._rightOffset,rn?V.justifyContent="flex-start":"center"===this._justifyContent?V.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?V.justifyContent="flex-end":"flex-end"===this._justifyContent&&(V.justifyContent="flex-start"):V.justifyContent=this._justifyContent,V.alignItems=Bn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const G=this._overlayRef.overlayElement.style,V=this._overlayRef.hostElement,ne=V.style;V.classList.remove(he),ne.justifyContent=ne.alignItems=G.marginTop=G.marginBottom=G.marginLeft=G.marginRight=G.position="",this._overlayRef=null,this._isDisposed=!0}}let dt=(()=>{class we{constructor(V,ne,Te,je){this._viewportRuler=V,this._document=ne,this._platform=Te,this._overlayContainer=je}global(){return new Le}flexibleConnectedTo(V){return new cn(V,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(Wr),y.LFG(on.K0),y.LFG(En.t4),y.LFG(Ve))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),_n=0,nt=(()=>{class we{constructor(V,ne,Te,je,It,ln,rn,Bn,Zi,Hr,$s){this.scrollStrategies=V,this._overlayContainer=ne,this._componentFactoryResolver=Te,this._positionBuilder=je,this._keyboardDispatcher=It,this._injector=ln,this._ngZone=rn,this._document=Bn,this._directionality=Zi,this._location=Hr,this._outsideClickDispatcher=$s}create(V){const ne=this._createHostElement(),Te=this._createPaneElement(ne),je=this._createPortalOutlet(Te),It=new Kn(V);return It.direction=It.direction||this._directionality.value,new De(je,ne,Te,It,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(V){const ne=this._document.createElement("div");return ne.id="cdk-overlay-"+_n++,ne.classList.add("cdk-overlay-pane"),V.appendChild(ne),ne}_createHostElement(){const V=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(V),V}_createPortalOutlet(V){return this._appRef||(this._appRef=this._injector.get(y.z2F)),new dr.u0(V,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(kr),y.LFG(Ve),y.LFG(y._Vd),y.LFG(dt),y.LFG(Wi),y.LFG(y.zs3),y.LFG(y.R0b),y.LFG(on.K0),y.LFG(zi.Is),y.LFG(on.Ye),y.LFG(Rt))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac}),we})();const en={provide:new y.OlP("cdk-connected-overlay-scroll-strategy"),deps:[nt],useFactory:function(we){return()=>we.scrollStrategies.reposition()}};let Zn=(()=>{class we{}return we.\u0275fac=function(V){return new(V||we)},we.\u0275mod=y.oAB({type:we}),we.\u0275inj=y.cJS({providers:[nt,en],imports:[[zi.vT,dr.eL,ps],ps]}),we})();var qi=q(6731),xi=q(5048),vr=q(3970),Br=q(9618),un=q(9814),is=q(1628),Qr=q(9555);function ks(we,G){}class Vr{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Tr={dialogContainer:(0,un.X$)("dialogContainer",[(0,un.SB)("void, exit",(0,un.oB)({opacity:0,transform:"scale(0.7)"})),(0,un.SB)("enter",(0,un.oB)({transform:"none"})),(0,un.eR)("* => enter",(0,un.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,un.oB)({transform:"none",opacity:1}))),(0,un.eR)("* => void, * => exit",(0,un.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,un.oB)({opacity:0})))])};let ms=(()=>{class we extends dr.en{constructor(V,ne,Te,je,It,ln,rn,Bn){super(),this._elementRef=V,this._focusTrapFactory=ne,this._changeDetectorRef=Te,this._config=It,this._interactivityChecker=ln,this._ngZone=rn,this._focusMonitor=Bn,this._animationStateChanged=new y.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=Zi=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(Zi)),this._ariaLabelledBy=It.ariaLabelledBy||null,this._document=je}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(V){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(V)}attachTemplatePortal(V){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(V)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(V,ne){this._interactivityChecker.isFocusable(V)||(V.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{V.addEventListener("blur",()=>V.removeAttribute("tabindex")),V.addEventListener("mousedown",()=>V.removeAttribute("tabindex"))})),V.focus(ne)}_focusByCssSelector(V,ne){let Te=this._elementRef.nativeElement.querySelector(V);Te&&this._forceFocus(Te,ne)}_trapFocus(){const V=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||V.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(ne=>{ne||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const V=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&V&&"function"==typeof V.focus){const ne=(0,En.ht)(),Te=this._elementRef.nativeElement;(!ne||ne===this._document.body||ne===Te||Te.contains(ne))&&(this._focusMonitor?(this._focusMonitor.focusVia(V,this._closeInteractionType),this._closeInteractionType=null):V.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,En.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const V=this._elementRef.nativeElement,ne=(0,En.ht)();return V===ne||V.contains(ne)}}return we.\u0275fac=function(V){return new(V||we)(y.Y36(y.SBq),y.Y36(Br.qV),y.Y36(y.sBO),y.Y36(on.K0,8),y.Y36(Vr),y.Y36(Br.ic),y.Y36(y.R0b),y.Y36(Br.tE))},we.\u0275dir=y.lG2({type:we,viewQuery:function(V,ne){if(1&V&&y.Gf(dr.Pl,7),2&V){let Te;y.iGM(Te=y.CRH())&&(ne._portalOutlet=Te.first)}},features:[y.qOj]}),we})(),gs=(()=>{class we extends ms{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:V,totalTime:ne}){"enter"===V?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:ne})):"exit"===V&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:ne}))}_onAnimationStart({toState:V,totalTime:ne}){"enter"===V?this._animationStateChanged.next({state:"opening",totalTime:ne}):("exit"===V||"void"===V)&&this._animationStateChanged.next({state:"closing",totalTime:ne})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return we.\u0275fac=function(){let G;return function(ne){return(G||(G=y.n5z(we)))(ne||we)}}(),we.\u0275cmp=y.Xpm({type:we,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(V,ne){1&V&&y.WFA("@dialogContainer.start",function(je){return ne._onAnimationStart(je)})("@dialogContainer.done",function(je){return ne._onAnimationDone(je)}),2&V&&(y.Ikx("id",ne._id),y.uIk("role",ne._config.role)("aria-labelledby",ne._config.ariaLabel?null:ne._ariaLabelledBy)("aria-label",ne._config.ariaLabel)("aria-describedby",ne._config.ariaDescribedBy||null),y.d8E("@dialogContainer",ne._state))},features:[y.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(V,ne){1&V&&y.YNc(0,ks,0,0,"ng-template",0)},directives:[dr.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Tr.dialogContainer]}}),we})(),Vi=0;class Bs{constructor(G,V,ne="mat-dialog-"+Vi++){this._overlayRef=G,this._containerInstance=V,this.id=ne,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new j.x,this._afterClosed=new j.x,this._beforeClosed=new j.x,this._state=0,V._id=ne,V._animationStateChanged.pipe((0,vn.h)(Te=>"opened"===Te.state),(0,ii.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),V._animationStateChanged.pipe((0,vn.h)(Te=>"closed"===Te.state),(0,ii.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),G.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),G.keydownEvents().pipe((0,vn.h)(Te=>Te.keyCode===is.hY&&!this.disableClose&&!(0,is.Vb)(Te))).subscribe(Te=>{Te.preventDefault(),Rs(this,"keyboard")}),G.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Rs(this,"mouse")})}close(G){this._result=G,this._containerInstance._animationStateChanged.pipe((0,vn.h)(V=>"closing"===V.state),(0,ii.q)(1)).subscribe(V=>{this._beforeClosed.next(G),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),V.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(G){let V=this._getPositionStrategy();return G&&(G.left||G.right)?G.left?V.left(G.left):V.right(G.right):V.centerHorizontally(),G&&(G.top||G.bottom)?G.top?V.top(G.top):V.bottom(G.bottom):V.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(G="",V=""){return this._overlayRef.updateSize({width:G,height:V}),this._overlayRef.updatePosition(),this}addPanelClass(G){return this._overlayRef.addPanelClass(G),this}removePanelClass(G){return this._overlayRef.removePanelClass(G),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Rs(we,G,V){return void 0!==we._containerInstance&&(we._containerInstance._closeInteractionType=G),we.close(V)}const vs=new y.OlP("MatDialogData"),es=new y.OlP("mat-dialog-default-options"),Kr=new y.OlP("mat-dialog-scroll-strategy"),br={provide:Kr,deps:[nt],useFactory:function(we){return()=>we.scrollStrategies.block()}};let Ar=(()=>{class we{constructor(V,ne,Te,je,It,ln,rn,Bn,Zi,Hr){this._overlay=V,this._injector=ne,this._defaultOptions=Te,this._parentDialog=je,this._overlayContainer=It,this._dialogRefConstructor=rn,this._dialogContainerType=Bn,this._dialogDataToken=Zi,this._animationMode=Hr,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new j.x,this._afterOpenedAtThisLevel=new j.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,xi.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,vr.O)(void 0))),this._scrollStrategy=ln}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const V=this._parentDialog;return V?V._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(V,ne){if(ne=function(we,G){return Cn(Cn({},G),we)}(ne,this._defaultOptions||new Vr),ne.id&&this.getDialogById(ne.id),this._dialogAnimatingOpen)return this._lastDialogRef;const Te=this._createOverlay(ne),je=this._attachDialogContainer(Te,ne);if("NoopAnimations"!==this._animationMode){const ln=je._animationStateChanged.subscribe(rn=>{"opening"===rn.state&&(this._dialogAnimatingOpen=!0),"opened"===rn.state&&(this._dialogAnimatingOpen=!1,ln.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new Ye.w0),this._animationStateSubscriptions.add(ln)}const It=this._attachDialogContent(V,je,Te,ne);return this._lastDialogRef=It,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(It),It.afterClosed().subscribe(()=>this._removeOpenDialog(It)),this.afterOpened.next(It),je._initializeWithAttachedContent(),It}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(V){return this.openDialogs.find(ne=>ne.id===V)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(V){const ne=this._getOverlayConfig(V);return this._overlay.create(ne)}_getOverlayConfig(V){const ne=new Kn({positionStrategy:this._overlay.position().global(),scrollStrategy:V.scrollStrategy||this._scrollStrategy(),panelClass:V.panelClass,hasBackdrop:V.hasBackdrop,direction:V.direction,minWidth:V.minWidth,minHeight:V.minHeight,maxWidth:V.maxWidth,maxHeight:V.maxHeight,disposeOnNavigation:V.closeOnNavigation});return V.backdropClass&&(ne.backdropClass=V.backdropClass),ne}_attachDialogContainer(V,ne){const je=y.zs3.create({parent:ne&&ne.viewContainerRef&&ne.viewContainerRef.injector||this._injector,providers:[{provide:Vr,useValue:ne}]}),It=new dr.C5(this._dialogContainerType,ne.viewContainerRef,je,ne.componentFactoryResolver);return V.attach(It).instance}_attachDialogContent(V,ne,Te,je){const It=new this._dialogRefConstructor(Te,ne,je.id);if(V instanceof y.Rgc)ne.attachTemplatePortal(new dr.UE(V,null,{$implicit:je.data,dialogRef:It}));else{const ln=this._createInjector(je,It,ne),rn=ne.attachComponentPortal(new dr.C5(V,je.viewContainerRef,ln));It.componentInstance=rn.instance}return It.updateSize(je.width,je.height).updatePosition(je.position),It}_createInjector(V,ne,Te){const je=V&&V.viewContainerRef&&V.viewContainerRef.injector,It=[{provide:this._dialogContainerType,useValue:Te},{provide:this._dialogDataToken,useValue:V.data},{provide:this._dialogRefConstructor,useValue:ne}];return V.direction&&(!je||!je.get(zi.Is,null,y.XFs.Optional))&&It.push({provide:zi.Is,useValue:{value:V.direction,change:(0,me.of)()}}),y.zs3.create({parent:je||this._injector,providers:It})}_removeOpenDialog(V){const ne=this.openDialogs.indexOf(V);ne>-1&&(this.openDialogs.splice(ne,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Te,je)=>{Te?je.setAttribute("aria-hidden",Te):je.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const V=this._overlayContainer.getContainerElement();if(V.parentElement){const ne=V.parentElement.children;for(let Te=ne.length-1;Te>-1;Te--){let je=ne[Te];je!==V&&"SCRIPT"!==je.nodeName&&"STYLE"!==je.nodeName&&!je.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(je,je.getAttribute("aria-hidden")),je.setAttribute("aria-hidden","true"))}}}_closeDialogs(V){let ne=V.length;for(;ne--;)V[ne].close()}}return we.\u0275fac=function(V){y.$Z()},we.\u0275dir=y.lG2({type:we}),we})(),xr=(()=>{class we extends Ar{constructor(V,ne,Te,je,It,ln,rn,Bn){super(V,ne,je,ln,rn,It,Bs,gs,vs,Bn)}}return we.\u0275fac=function(V){return new(V||we)(y.LFG(nt),y.LFG(y.zs3),y.LFG(on.Ye,8),y.LFG(es,8),y.LFG(Kr),y.LFG(we,12),y.LFG(Ve),y.LFG(Qr.Qb,8))},we.\u0275prov=y.Yz7({token:we,factory:we.\u0275fac}),we})(),Vs=0,ho=(()=>{class we{constructor(V,ne,Te){this.dialogRef=V,this._elementRef=ne,this._dialog=Te,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=Eo(this._elementRef,this._dialog.openDialogs))}ngOnChanges(V){const ne=V._matDialogClose||V._matDialogCloseResult;ne&&(this.dialogResult=ne.currentValue)}_onButtonClick(V){Rs(this.dialogRef,0===V.screenX&&0===V.screenY?"keyboard":"mouse",this.dialogResult)}}return we.\u0275fac=function(V){return new(V||we)(y.Y36(Bs,8),y.Y36(y.SBq),y.Y36(xr))},we.\u0275dir=y.lG2({type:we,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(V,ne){1&V&&y.NdJ("click",function(je){return ne._onButtonClick(je)}),2&V&&y.uIk("aria-label",ne.ariaLabel||null)("type",ne.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[y.TTD]}),we})(),fo=(()=>{class we{constructor(V,ne,Te){this._dialogRef=V,this._elementRef=ne,this._dialog=Te,this.id="mat-dialog-title-"+Vs++}ngOnInit(){this._dialogRef||(this._dialogRef=Eo(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const V=this._dialogRef._containerInstance;V&&!V._ariaLabelledBy&&(V._ariaLabelledBy=this.id)})}}return we.\u0275fac=function(V){return new(V||we)(y.Y36(Bs,8),y.Y36(y.SBq),y.Y36(xr))},we.\u0275dir=y.lG2({type:we,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(V,ne){2&V&&y.Ikx("id",ne.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),we})(),Zr=(()=>{class we{}return we.\u0275fac=function(V){return new(V||we)},we.\u0275dir=y.lG2({type:we,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),we})(),po=(()=>{class we{}return we.\u0275fac=function(V){return new(V||we)},we.\u0275dir=y.lG2({type:we,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),we})();function Eo(we,G){let V=we.nativeElement.parentElement;for(;V&&!V.classList.contains("mat-dialog-container");)V=V.parentElement;return V?G.find(ne=>ne.id===V.id):null}let Rr=(()=>{class we{}return we.\u0275fac=function(V){return new(V||we)},we.\u0275mod=y.oAB({type:we}),we.\u0275inj=y.cJS({providers:[xr,br],imports:[[Zn,dr.eL,qi.BQ],qi.BQ]}),we})()},9136:(sn,at,q)=>{"use strict";q.d(at,{Hw:()=>dt,Ps:()=>_n});var B=q(3668),y=q(6731),j=q(348),me=q(6019),ce=q(8305),Oe=q(5044),Ye=q(2997),Ie=q(8100),Me=q(7908),Ge=q(7384),E=q(4753),$=q(2835),J=q(423),de=q(3174),Ae=q(9468),Be=q(4799),_e=q(461);class st{}class Xe{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(le=>{const fe=le.indexOf(":");if(fe>0){const rt=le.slice(0,fe),St=rt.toLowerCase(),en=le.slice(fe+1).trim();this.maybeSetNormalizedName(rt,St),this.headers.has(St)?this.headers.get(St).push(en):this.headers.set(St,[en])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(le=>{let fe=ye[le];const rt=le.toLowerCase();"string"==typeof fe&&(fe=[fe]),fe.length>0&&(this.headers.set(rt,fe),this.maybeSetNormalizedName(le,rt))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const le=this.headers.get(ye.toLowerCase());return le&&le.length>0?le[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,le){return this.clone({name:ye,value:le,op:"a"})}set(ye,le){return this.clone({name:ye,value:le,op:"s"})}delete(ye,le){return this.clone({name:ye,value:le,op:"d"})}maybeSetNormalizedName(ye,le){this.normalizedNames.has(le)||this.normalizedNames.set(le,ye)}init(){this.lazyInit&&(this.lazyInit instanceof Xe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(le=>{this.headers.set(le,ye.headers.get(le)),this.normalizedNames.set(le,ye.normalizedNames.get(le))})}clone(ye){const le=new Xe;return le.lazyInit=this.lazyInit&&this.lazyInit instanceof Xe?this.lazyInit:this,le.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),le}applyUpdate(ye){const le=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let fe=ye.value;if("string"==typeof fe&&(fe=[fe]),0===fe.length)return;this.maybeSetNormalizedName(ye.name,le);const rt=("a"===ye.op?this.headers.get(le):void 0)||[];rt.push(...fe),this.headers.set(le,rt);break;case"d":const St=ye.value;if(St){let en=this.headers.get(le);if(!en)return;en=en.filter(Zn=>-1===St.indexOf(Zn)),0===en.length?(this.headers.delete(le),this.normalizedNames.delete(le)):this.headers.set(le,en)}else this.headers.delete(le),this.normalizedNames.delete(le)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(le=>ye(this.normalizedNames.get(le),this.headers.get(le)))}}class He{encodeKey(ye){return At(ye)}encodeValue(ye){return At(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const ft=/%(\d[a-f0-9])/gi,xt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function At(nt){return encodeURIComponent(nt).replace(ft,(ye,le)=>{var fe;return null!=(fe=xt[le])?fe:ye})}function Ze(nt){return`${nt}`}class Qe{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new He,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(nt,ye){const le=new Map;return nt.length>0&&nt.replace(/^\?/,"").split("&").forEach(rt=>{const St=rt.indexOf("="),[en,Zn]=-1==St?[ye.decodeKey(rt),""]:[ye.decodeKey(rt.slice(0,St)),ye.decodeValue(rt.slice(St+1))],Sn=le.get(en)||[];Sn.push(Zn),le.set(en,Sn)}),le}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(le=>{const fe=ye.fromObject[le];this.map.set(le,Array.isArray(fe)?fe:[fe])})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const le=this.map.get(ye);return le?le[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,le){return this.clone({param:ye,value:le,op:"a"})}appendAll(ye){const le=[];return Object.keys(ye).forEach(fe=>{const rt=ye[fe];Array.isArray(rt)?rt.forEach(St=>{le.push({param:fe,value:St,op:"a"})}):le.push({param:fe,value:rt,op:"a"})}),this.clone(le)}set(ye,le){return this.clone({param:ye,value:le,op:"s"})}delete(ye,le){return this.clone({param:ye,value:le,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const le=this.encoder.encodeKey(ye);return this.map.get(ye).map(fe=>le+"="+this.encoder.encodeValue(fe)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const le=new Qe({encoder:this.encoder});return le.cloneFrom=this.cloneFrom||this,le.updates=(this.updates||[]).concat(ye),le}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const le=("a"===ye.op?this.map.get(ye.param):void 0)||[];le.push(Ze(ye.value)),this.map.set(ye.param,le);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let fe=this.map.get(ye.param)||[];const rt=fe.indexOf(Ze(ye.value));-1!==rt&&fe.splice(rt,1),fe.length>0?this.map.set(ye.param,fe):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class bt{constructor(){this.map=new Map}set(ye,le){return this.map.set(ye,le),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}keys(){return this.map.keys()}}function yt(nt){return"undefined"!=typeof ArrayBuffer&&nt instanceof ArrayBuffer}function ni(nt){return"undefined"!=typeof Blob&&nt instanceof Blob}function Ri(nt){return"undefined"!=typeof FormData&&nt instanceof FormData}class Ln{constructor(ye,le,fe,rt){let St;if(this.url=le,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function(nt){switch(nt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||rt?(this.body=void 0!==fe?fe:null,St=rt):St=fe,St&&(this.reportProgress=!!St.reportProgress,this.withCredentials=!!St.withCredentials,St.responseType&&(this.responseType=St.responseType),St.headers&&(this.headers=St.headers),St.context&&(this.context=St.context),St.params&&(this.params=St.params)),this.headers||(this.headers=new Xe),this.context||(this.context=new bt),this.params){const en=this.params.toString();if(0===en.length)this.urlWithParams=le;else{const Zn=le.indexOf("?");this.urlWithParams=le+(-1===Zn?"?":Zn<le.length-1?"&":"")+en}}else this.params=new Qe,this.urlWithParams=le}serializeBody(){return null===this.body?null:yt(this.body)||ni(this.body)||Ri(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Qe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ri(this.body)?null:ni(this.body)?this.body.type||null:yt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){var vr;const le=ye.method||this.method,fe=ye.url||this.url,rt=ye.responseType||this.responseType,St=void 0!==ye.body?ye.body:this.body,en=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,Zn=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let Sn=ye.headers||this.headers,qi=ye.params||this.params;const xi=null!=(vr=ye.context)?vr:this.context;return void 0!==ye.setHeaders&&(Sn=Object.keys(ye.setHeaders).reduce((Br,un)=>Br.set(un,ye.setHeaders[un]),Sn)),ye.setParams&&(qi=Object.keys(ye.setParams).reduce((Br,un)=>Br.set(un,ye.setParams[un]),qi)),new Ln(le,fe,St,{params:qi,headers:Sn,context:xi,reportProgress:Zn,responseType:rt,withCredentials:en})}}var vn=(()=>((vn=vn||{})[vn.Sent=0]="Sent",vn[vn.UploadProgress=1]="UploadProgress",vn[vn.ResponseHeader=2]="ResponseHeader",vn[vn.DownloadProgress=3]="DownloadProgress",vn[vn.Response=4]="Response",vn[vn.User=5]="User",vn))();class zi extends class{constructor(ye,le=200,fe="OK"){this.headers=ye.headers||new Xe,this.status=void 0!==ye.status?ye.status:le,this.statusText=ye.statusText||fe,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(ye={}){super(ye),this.type=vn.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new zi({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}function Oi(nt,ye){return{body:ye,headers:nt.headers,context:nt.context,observe:nt.observe,params:nt.params,reportProgress:nt.reportProgress,responseType:nt.responseType,withCredentials:nt.withCredentials}}let Gi=(()=>{class nt{constructor(le){this.handler=le}request(le,fe,rt={}){let St;if(le instanceof Ln)St=le;else{let Sn,qi;Sn=rt.headers instanceof Xe?rt.headers:new Xe(rt.headers),rt.params&&(qi=rt.params instanceof Qe?rt.params:new Qe({fromObject:rt.params})),St=new Ln(le,fe,void 0!==rt.body?rt.body:null,{headers:Sn,context:rt.context,params:qi,reportProgress:rt.reportProgress,responseType:rt.responseType||"json",withCredentials:rt.withCredentials})}const en=(0,Ye.of)(St).pipe((0,Be.b)(Sn=>this.handler.handle(Sn)));if(le instanceof Ln||"events"===rt.observe)return en;const Zn=en.pipe((0,_e.h)(Sn=>Sn instanceof zi));switch(rt.observe||"body"){case"body":switch(St.responseType){case"arraybuffer":return Zn.pipe((0,E.U)(Sn=>{if(null!==Sn.body&&!(Sn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Sn.body}));case"blob":return Zn.pipe((0,E.U)(Sn=>{if(null!==Sn.body&&!(Sn.body instanceof Blob))throw new Error("Response is not a Blob.");return Sn.body}));case"text":return Zn.pipe((0,E.U)(Sn=>{if(null!==Sn.body&&"string"!=typeof Sn.body)throw new Error("Response is not a string.");return Sn.body}));default:return Zn.pipe((0,E.U)(Sn=>Sn.body))}case"response":return Zn;default:throw new Error(`Unreachable: unhandled observe type ${rt.observe}}`)}}delete(le,fe={}){return this.request("DELETE",le,fe)}get(le,fe={}){return this.request("GET",le,fe)}head(le,fe={}){return this.request("HEAD",le,fe)}jsonp(le,fe){return this.request("JSONP",le,{params:(new Qe).append(fe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(le,fe={}){return this.request("OPTIONS",le,fe)}patch(le,fe,rt={}){return this.request("PATCH",le,Oi(rt,fe))}post(le,fe,rt={}){return this.request("POST",le,Oi(rt,fe))}put(le,fe,rt={}){return this.request("PUT",le,Oi(rt,fe))}}return nt.\u0275fac=function(le){return new(le||nt)(B.LFG(st))},nt.\u0275prov=B.Yz7({token:nt,factory:nt.\u0275fac}),nt})();var bi=q(5427);const Bi=["*"];let kr;function mt(nt){var ye;return(null==(ye=function(){if(void 0===kr&&(kr=null,"undefined"!=typeof window)){const nt=window;void 0!==nt.trustedTypes&&(kr=nt.trustedTypes.createPolicy("angular#components",{createHTML:ye=>ye}))}return kr}())?void 0:ye.createHTML(nt))||nt}function We(nt){return Error(`Unable to find icon with the name "${nt}"`)}function Ut(nt){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${nt}".`)}function fn(nt){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${nt}".`)}class Mn{constructor(ye,le,fe){this.url=ye,this.svgText=le,this.options=fe}}let Wi=(()=>{class nt{constructor(le,fe,rt,St){this._httpClient=le,this._sanitizer=fe,this._errorHandler=St,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=rt}addSvgIcon(le,fe,rt){return this.addSvgIconInNamespace("",le,fe,rt)}addSvgIconLiteral(le,fe,rt){return this.addSvgIconLiteralInNamespace("",le,fe,rt)}addSvgIconInNamespace(le,fe,rt,St){return this._addSvgIconConfig(le,fe,new Mn(rt,null,St))}addSvgIconResolver(le){return this._resolvers.push(le),this}addSvgIconLiteralInNamespace(le,fe,rt,St){const en=this._sanitizer.sanitize(B.q3G.HTML,rt);if(!en)throw fn(rt);const Zn=mt(en);return this._addSvgIconConfig(le,fe,new Mn("",Zn,St))}addSvgIconSet(le,fe){return this.addSvgIconSetInNamespace("",le,fe)}addSvgIconSetLiteral(le,fe){return this.addSvgIconSetLiteralInNamespace("",le,fe)}addSvgIconSetInNamespace(le,fe,rt){return this._addSvgIconSetConfig(le,new Mn(fe,null,rt))}addSvgIconSetLiteralInNamespace(le,fe,rt){const St=this._sanitizer.sanitize(B.q3G.HTML,fe);if(!St)throw fn(fe);const en=mt(St);return this._addSvgIconSetConfig(le,new Mn("",en,rt))}registerFontClassAlias(le,fe=le){return this._fontCssClassesByAlias.set(le,fe),this}classNameForFontAlias(le){return this._fontCssClassesByAlias.get(le)||le}setDefaultFontSetClass(le){return this._defaultFontSetClass=le,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(le){const fe=this._sanitizer.sanitize(B.q3G.RESOURCE_URL,le);if(!fe)throw Ut(le);const rt=this._cachedIconsByUrl.get(fe);return rt?(0,Ye.of)(De(rt)):this._loadSvgIconFromConfig(new Mn(le,null)).pipe((0,Ge.b)(St=>this._cachedIconsByUrl.set(fe,St)),(0,E.U)(St=>De(St)))}getNamedSvgIcon(le,fe=""){const rt=Je(fe,le);let St=this._svgIconConfigs.get(rt);if(St)return this._getSvgFromConfig(St);if(St=this._getIconConfigFromResolvers(fe,le),St)return this._svgIconConfigs.set(rt,St),this._getSvgFromConfig(St);const en=this._iconSetConfigs.get(fe);return en?this._getSvgFromIconSetConfigs(le,en):function(nt,ye){const le=(0,Oe.m)(nt)?nt:()=>nt,fe=rt=>rt.error(le());return new ce.y(fe)}(We(rt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(le){return le.svgText?(0,Ye.of)(De(this._svgElementFromConfig(le))):this._loadSvgIconFromConfig(le).pipe((0,E.U)(fe=>De(fe)))}_getSvgFromIconSetConfigs(le,fe){const rt=this._extractIconWithNameFromAnySet(le,fe);if(rt)return(0,Ye.of)(rt);const St=fe.filter(en=>!en.svgText).map(en=>this._loadSvgIconSetFromConfig(en).pipe((0,$.K)(Zn=>{const qi=`Loading icon set URL: ${this._sanitizer.sanitize(B.q3G.RESOURCE_URL,en.url)} failed: ${Zn.message}`;return this._errorHandler.handleError(new Error(qi)),(0,Ye.of)(null)})));return(0,Ie.D)(St).pipe((0,E.U)(()=>{const en=this._extractIconWithNameFromAnySet(le,fe);if(!en)throw We(le);return en}))}_extractIconWithNameFromAnySet(le,fe){for(let rt=fe.length-1;rt>=0;rt--){const St=fe[rt];if(St.svgText&&St.svgText.toString().indexOf(le)>-1){const en=this._svgElementFromConfig(St),Zn=this._extractSvgIconFromSet(en,le,St.options);if(Zn)return Zn}}return null}_loadSvgIconFromConfig(le){return this._fetchIcon(le).pipe((0,Ge.b)(fe=>le.svgText=fe),(0,E.U)(()=>this._svgElementFromConfig(le)))}_loadSvgIconSetFromConfig(le){return le.svgText?(0,Ye.of)(null):this._fetchIcon(le).pipe((0,Ge.b)(fe=>le.svgText=fe))}_extractSvgIconFromSet(le,fe,rt){const St=le.querySelector(`[id="${fe}"]`);if(!St)return null;const en=St.cloneNode(!0);if(en.removeAttribute("id"),"svg"===en.nodeName.toLowerCase())return this._setSvgAttributes(en,rt);if("symbol"===en.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(en),rt);const Zn=this._svgElementFromString(mt("<svg></svg>"));return Zn.appendChild(en),this._setSvgAttributes(Zn,rt)}_svgElementFromString(le){const fe=this._document.createElement("DIV");fe.innerHTML=le;const rt=fe.querySelector("svg");if(!rt)throw Error("<svg> tag not found");return rt}_toSvgElement(le){const fe=this._svgElementFromString(mt("<svg></svg>")),rt=le.attributes;for(let St=0;St<rt.length;St++){const{name:en,value:Zn}=rt[St];"id"!==en&&fe.setAttribute(en,Zn)}for(let St=0;St<le.childNodes.length;St++)le.childNodes[St].nodeType===this._document.ELEMENT_NODE&&fe.appendChild(le.childNodes[St].cloneNode(!0));return fe}_setSvgAttributes(le,fe){return le.setAttribute("fit",""),le.setAttribute("height","100%"),le.setAttribute("width","100%"),le.setAttribute("preserveAspectRatio","xMidYMid meet"),le.setAttribute("focusable","false"),fe&&fe.viewBox&&le.setAttribute("viewBox",fe.viewBox),le}_fetchIcon(le){var qi;const{url:fe,options:rt}=le,St=null!=(qi=null==rt?void 0:rt.withCredentials)&&qi;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==fe)throw Error(`Cannot fetch icon from URL "${fe}".`);const en=this._sanitizer.sanitize(B.q3G.RESOURCE_URL,fe);if(!en)throw Ut(fe);const Zn=this._inProgressUrlFetches.get(en);if(Zn)return Zn;const Sn=this._httpClient.get(en,{responseType:"text",withCredentials:St}).pipe((0,E.U)(xi=>mt(xi)),(0,J.x)(()=>this._inProgressUrlFetches.delete(en)),(0,de.B)());return this._inProgressUrlFetches.set(en,Sn),Sn}_addSvgIconConfig(le,fe,rt){return this._svgIconConfigs.set(Je(le,fe),rt),this}_addSvgIconSetConfig(le,fe){const rt=this._iconSetConfigs.get(le);return rt?rt.push(fe):this._iconSetConfigs.set(le,[fe]),this}_svgElementFromConfig(le){if(!le.svgElement){const fe=this._svgElementFromString(le.svgText);this._setSvgAttributes(fe,le.options),le.svgElement=fe}return le.svgElement}_getIconConfigFromResolvers(le,fe){for(let rt=0;rt<this._resolvers.length;rt++){const St=this._resolvers[rt](fe,le);if(St)return gt(St)?new Mn(St.url,null,St.options):new Mn(St,null)}}}return nt.\u0275fac=function(le){return new(le||nt)(B.LFG(Gi,8),B.LFG(bi.H7),B.LFG(me.K0,8),B.LFG(B.qLn))},nt.\u0275prov=B.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt})();function De(nt){return nt.cloneNode(!0)}function Je(nt,ye){return nt+":"+ye}function gt(nt){return!(!nt.url||!nt.options)}const cn=(0,y.pj)(class{constructor(nt){this._elementRef=nt}}),ri=new B.OlP("mat-icon-location",{providedIn:"root",factory:function(){const nt=(0,B.f3M)(me.K0),ye=nt?nt.location:null;return{getPathname:()=>ye?ye.pathname+ye.search:""}}}),ke=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],he=ke.map(nt=>`[${nt}]`).join(", "),Le=/^url\(['"]?#(.*?)['"]?\)$/;let dt=(()=>{class nt extends cn{constructor(le,fe,rt,St,en){super(le),this._iconRegistry=fe,this._location=St,this._errorHandler=en,this._inline=!1,this._currentIconFetch=Me.w0.EMPTY,rt||le.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(le){this._inline=(0,j.Ig)(le)}get svgIcon(){return this._svgIcon}set svgIcon(le){le!==this._svgIcon&&(le?this._updateSvgIcon(le):this._svgIcon&&this._clearSvgElement(),this._svgIcon=le)}get fontSet(){return this._fontSet}set fontSet(le){const fe=this._cleanupFontValue(le);fe!==this._fontSet&&(this._fontSet=fe,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(le){const fe=this._cleanupFontValue(le);fe!==this._fontIcon&&(this._fontIcon=fe,this._updateFontIconClasses())}_splitIconName(le){if(!le)return["",""];const fe=le.split(":");switch(fe.length){case 1:return["",fe[0]];case 2:return fe;default:throw Error(`Invalid icon name: "${le}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const le=this._elementsWithExternalReferences;if(le&&le.size){const fe=this._location.getPathname();fe!==this._previousPath&&(this._previousPath=fe,this._prependPathToReferences(fe))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(le){this._clearSvgElement();const fe=le.querySelectorAll("style");for(let St=0;St<fe.length;St++)fe[St].textContent+=" ";const rt=this._location.getPathname();this._previousPath=rt,this._cacheChildrenWithExternalReferences(le),this._prependPathToReferences(rt),this._elementRef.nativeElement.appendChild(le)}_clearSvgElement(){const le=this._elementRef.nativeElement;let fe=le.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();fe--;){const rt=le.childNodes[fe];(1!==rt.nodeType||"svg"===rt.nodeName.toLowerCase())&&rt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const le=this._elementRef.nativeElement,fe=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();fe!=this._previousFontSetClass&&(this._previousFontSetClass&&le.classList.remove(this._previousFontSetClass),fe&&le.classList.add(fe),this._previousFontSetClass=fe),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&le.classList.remove(this._previousFontIconClass),this.fontIcon&&le.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(le){return"string"==typeof le?le.trim().split(" ")[0]:le}_prependPathToReferences(le){const fe=this._elementsWithExternalReferences;fe&&fe.forEach((rt,St)=>{rt.forEach(en=>{St.setAttribute(en.name,`url('${le}#${en.value}')`)})})}_cacheChildrenWithExternalReferences(le){const fe=le.querySelectorAll(he),rt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let St=0;St<fe.length;St++)ke.forEach(en=>{const Zn=fe[St],Sn=Zn.getAttribute(en),qi=Sn?Sn.match(Le):null;if(qi){let xi=rt.get(Zn);xi||(xi=[],rt.set(Zn,xi)),xi.push({name:en,value:qi[1]})}})}_updateSvgIcon(le){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),le){const[fe,rt]=this._splitIconName(le);fe&&(this._svgNamespace=fe),rt&&(this._svgName=rt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(rt,fe).pipe((0,Ae.q)(1)).subscribe(St=>this._setSvgElement(St),St=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${fe}:${rt}! ${St.message}`))})}}}return nt.\u0275fac=function(le){return new(le||nt)(B.Y36(B.SBq),B.Y36(Wi),B.$8M("aria-hidden"),B.Y36(ri),B.Y36(B.qLn))},nt.\u0275cmp=B.Xpm({type:nt,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(le,fe){2&le&&(B.uIk("data-mat-icon-type",fe._usingFontIcon()?"font":"svg")("data-mat-icon-name",fe._svgName||fe.fontIcon)("data-mat-icon-namespace",fe._svgNamespace||fe.fontSet),B.ekj("mat-icon-inline",fe.inline)("mat-icon-no-color","primary"!==fe.color&&"accent"!==fe.color&&"warn"!==fe.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[B.qOj],ngContentSelectors:Bi,decls:1,vars:0,template:function(le,fe){1&le&&(B.F$t(),B.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),nt})(),_n=(()=>{class nt{}return nt.\u0275fac=function(le){return new(le||nt)},nt.\u0275mod=B.oAB({type:nt}),nt.\u0275inj=B.cJS({imports:[[y.BQ],y.BQ]}),nt})()},9555:(sn,at,q)=>{"use strict";q.d(at,{Qb:()=>zt,PW:()=>rs});var B=q(3668),y=q(5427),j=q(9814);function me(){return"undefined"!=typeof window&&void 0!==window.document}function ce(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Oe(K){switch(K.length){case 0:return new j.ZN;case 1:return K[0];default:return new j.ZE(K)}}function Se(K,g,v,L,Z={},oe={}){const Ee=[],Ce=[];let it=-1,qe=null;if(L.forEach(Qt=>{const dn=Qt.offset,pi=dn==it,jn=pi&&qe||{};Object.keys(Qt).forEach($n=>{let pn=$n,si=Qt[$n];if("offset"!==$n)switch(pn=g.normalizePropertyName(pn,Ee),si){case j.k1:si=Z[$n];break;case j.l3:si=oe[$n];break;default:si=g.normalizeStyleValue($n,pn,si,Ee)}jn[pn]=si}),pi||Ce.push(jn),qe=jn,it=dn}),Ee.length){const Qt="\n - ";throw new Error(`Unable to animate due to the following errors:${Qt}${Ee.join(Qt)}`)}return Ce}function Ye(K,g,v,L){switch(g){case"start":K.onStart(()=>L(v&&Ie(v,"start",K)));break;case"done":K.onDone(()=>L(v&&Ie(v,"done",K)));break;case"destroy":K.onDestroy(()=>L(v&&Ie(v,"destroy",K)))}}function Ie(K,g,v){const L=v.totalTime,oe=Me(K.element,K.triggerName,K.fromState,K.toState,g||K.phaseName,null==L?K.totalTime:L,!!v.disabled),Ee=K._data;return null!=Ee&&(oe._data=Ee),oe}function Me(K,g,v,L,Z="",oe=0,Ee){return{element:K,triggerName:g,fromState:v,toState:L,phaseName:Z,totalTime:oe,disabled:!!Ee}}function Ge(K,g,v){let L;return K instanceof Map?(L=K.get(g),L||K.set(g,L=v)):(L=K[g],L||(L=K[g]=v)),L}function E(K){const g=K.indexOf(":");return[K.substring(1,g),K.substr(g+1)]}let $=(K,g)=>!1,J=(K,g)=>!1,de=(K,g,v)=>[];const Ae=ce();(Ae||"undefined"!=typeof Element)&&($=me()?(K,g)=>{for(;g&&g!==document.documentElement;){if(g===K)return!0;g=g.parentNode||g.host}return!1}:(K,g)=>K.contains(g),J=(()=>{if(Ae||Element.prototype.matches)return(K,g)=>K.matches(g);{const K=Element.prototype,g=K.matchesSelector||K.mozMatchesSelector||K.msMatchesSelector||K.oMatchesSelector||K.webkitMatchesSelector;return g?(v,L)=>g.apply(v,[L]):J}})(),de=(K,g,v)=>{let L=[];if(v){const Z=K.querySelectorAll(g);for(let oe=0;oe<Z.length;oe++)L.push(Z[oe])}else{const Z=K.querySelector(g);Z&&L.push(Z)}return L});let _e=null,st=!1;function Lt(K){_e||(_e=("undefined"!=typeof document?document.body:null)||{},st=!!_e.style&&"WebkitAppearance"in _e.style);let g=!0;return _e.style&&!function(K){return"ebkit"==K.substring(1,6)}(K)&&(g=K in _e.style,!g&&st&&(g="Webkit"+K.charAt(0).toUpperCase()+K.substr(1)in _e.style)),g}const He=J,pt=$,ft=de;function xt(K){const g={};return Object.keys(K).forEach(v=>{const L=v.replace(/([a-z])([A-Z])/g,"$1-$2");g[L]=K[v]}),g}let At=(()=>{class K{validateStyleProperty(v){return Lt(v)}matchesElement(v,L){return He(v,L)}containsElement(v,L){return pt(v,L)}query(v,L,Z){return ft(v,L,Z)}computeStyle(v,L,Z){return Z||""}animate(v,L,Z,oe,Ee,Ce=[],it){return new j.ZN(Z,oe)}}return K.\u0275fac=function(v){return new(v||K)},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac}),K})(),Ze=(()=>{class K{}return K.NOOP=new At,K})();const Vt="ng-enter",yt="ng-leave",lr="ng-trigger",Ln=".ng-trigger",vn="ng-animating",En=".ng-animating";function on(K){if("number"==typeof K)return K;const g=K.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:zi(parseFloat(g[1]),g[2])}function zi(K,g){return"s"===g?1e3*K:K}function cr(K,g,v){return K.hasOwnProperty("duration")?K:function(K,g,v){let Z,oe=0,Ee="";if("string"==typeof K){const Ce=K.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ce)return g.push(`The provided timing value "${K}" is invalid.`),{duration:0,delay:0,easing:""};Z=zi(parseFloat(Ce[1]),Ce[2]);const it=Ce[3];null!=it&&(oe=zi(parseFloat(it),Ce[4]));const qe=Ce[5];qe&&(Ee=qe)}else Z=K;if(!v){let Ce=!1,it=g.length;Z<0&&(g.push("Duration values below 0 are not allowed for this animation step."),Ce=!0),oe<0&&(g.push("Delay values below 0 are not allowed for this animation step."),Ce=!0),Ce&&g.splice(it,0,`The provided timing value "${K}" is invalid.`)}return{duration:Z,delay:oe,easing:Ee}}(K,g,v)}function Gi(K,g={}){return Object.keys(K).forEach(v=>{g[v]=K[v]}),g}function Or(K,g,v={}){if(g)for(let L in K)v[L]=K[L];else Gi(K,v);return v}function fs(K,g,v){return v?g+":"+v+";":""}function Mr(K){let g="";for(let v=0;v<K.style.length;v++){const L=K.style.item(v);g+=fs(0,L,K.style.getPropertyValue(L))}for(const v in K.style)K.style.hasOwnProperty(v)&&!v.startsWith("_")&&(g+=fs(0,ps(v),K.style[v]));K.setAttribute("style",g)}function Sr(K,g,v){K.style&&(Object.keys(g).forEach(L=>{const Z=Cr(L);v&&!v.hasOwnProperty(L)&&(v[L]=K.style[Z]),K.style[Z]=g[L]}),ce()&&Mr(K))}function er(K,g){K.style&&(Object.keys(g).forEach(v=>{const L=Cr(v);K.style[L]=""}),ce()&&Mr(K))}function Fr(K){return Array.isArray(K)?1==K.length?K[0]:(0,j.vP)(K):K}const jr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ps(K){let g=[];if("string"==typeof K){let v;for(;v=jr.exec(K);)g.push(v[1]);jr.lastIndex=0}return g}function Wn(K,g,v){const L=K.toString(),Z=L.replace(jr,(oe,Ee)=>{let Ce=g[Ee];return g.hasOwnProperty(Ee)||(v.push(`Please provide a value for the animation param ${Ee}`),Ce=""),Ce.toString()});return Z==L?K:Z}function ur(K){const g=[];let v=K.next();for(;!v.done;)g.push(v.value),v=K.next();return g}const Ls=/-+([a-z0-9])/g;function Cr(K){return K.replace(Ls,(...g)=>g[1].toUpperCase())}function ps(K){return K.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function dr(K,g){return 0===K||0===g}function pr(K,g,v){const L=Object.keys(v);if(L.length&&g.length){let oe=g[0],Ee=[];if(L.forEach(Ce=>{oe.hasOwnProperty(Ce)||Ee.push(Ce),oe[Ce]=v[Ce]}),Ee.length)for(var Z=1;Z<g.length;Z++){let Ce=g[Z];Ee.forEach(function(it){Ce[it]=Dr(K,it)})}}return g}function ii(K,g,v){switch(g.type){case 7:return K.visitTrigger(g,v);case 0:return K.visitState(g,v);case 1:return K.visitTransition(g,v);case 2:return K.visitSequence(g,v);case 3:return K.visitGroup(g,v);case 4:return K.visitAnimate(g,v);case 5:return K.visitKeyframes(g,v);case 6:return K.visitStyle(g,v);case 8:return K.visitReference(g,v);case 9:return K.visitAnimateChild(g,v);case 10:return K.visitAnimateRef(g,v);case 11:return K.visitQuery(g,v);case 12:return K.visitStagger(g,v);default:throw new Error(`Unable to resolve animation metadata node #${g.type}`)}}function Dr(K,g){return window.getComputedStyle(K)[g]}function Ht(K,g){const v=[];return"string"==typeof K?K.split(/\s*,\s*/).forEach(L=>function(K,g,v){if(":"==K[0]){const it=function(K,g){switch(K){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(v,L)=>parseFloat(L)>parseFloat(v);case":decrement":return(v,L)=>parseFloat(L)<parseFloat(v);default:return g.push(`The transition alias value "${K}" is not supported`),"* => *"}}(K,v);if("function"==typeof it)return void g.push(it);K=it}const L=K.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return v.push(`The provided transition expression "${K}" is not supported`),g;const Z=L[1],oe=L[2],Ee=L[3];g.push(bi(Z,Ee));"<"==oe[0]&&!("*"==Z&&"*"==Ee)&&g.push(bi(Ee,Z))}(L,v,g)):v.push(K),v}const Nr=new Set(["true","1"]),fi=new Set(["false","0"]);function bi(K,g){const v=Nr.has(K)||fi.has(K),L=Nr.has(g)||fi.has(g);return(Z,oe)=>{let Ee="*"==K||K==Z,Ce="*"==g||g==oe;return!Ee&&v&&"boolean"==typeof Z&&(Ee=Z?Nr.has(K):fi.has(K)),!Ce&&L&&"boolean"==typeof oe&&(Ce=oe?Nr.has(g):fi.has(g)),Ee&&Ce}}const kr=new RegExp("s*:selfs*,?","g");function Kn(K,g,v){return new We(K).build(g,v)}class We{constructor(g){this._driver=g}build(g,v){const L=new fn(v);return this._resetContextStyleTimingState(L),ii(this,Fr(g),L)}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles={},g.collectedStyles[""]={},g.currentTime=0}visitTrigger(g,v){let L=v.queryCount=0,Z=v.depCount=0;const oe=[],Ee=[];return"@"==g.name.charAt(0)&&v.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),g.definitions.forEach(Ce=>{if(this._resetContextStyleTimingState(v),0==Ce.type){const it=Ce,qe=it.name;qe.toString().split(/\s*,\s*/).forEach(Qt=>{it.name=Qt,oe.push(this.visitState(it,v))}),it.name=qe}else if(1==Ce.type){const it=this.visitTransition(Ce,v);L+=it.queryCount,Z+=it.depCount,Ee.push(it)}else v.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:g.name,states:oe,transitions:Ee,queryCount:L,depCount:Z,options:null}}visitState(g,v){const L=this.visitStyle(g.styles,v),Z=g.options&&g.options.params||null;if(L.containsDynamicStyles){const oe=new Set,Ee=Z||{};if(L.styles.forEach(Ce=>{if(Wi(Ce)){const it=Ce;Object.keys(it).forEach(qe=>{Ps(it[qe]).forEach(Qt=>{Ee.hasOwnProperty(Qt)||oe.add(Qt)})})}}),oe.size){const Ce=ur(oe.values());v.errors.push(`state("${g.name}", ...) must define default values for all the following style substitutions: ${Ce.join(", ")}`)}}return{type:0,name:g.name,style:L,options:Z?{params:Z}:null}}visitTransition(g,v){v.queryCount=0,v.depCount=0;const L=ii(this,Fr(g.animation),v);return{type:1,matchers:Ht(g.expr,v.errors),animation:L,queryCount:v.queryCount,depCount:v.depCount,options:Ve(g.options)}}visitSequence(g,v){return{type:2,steps:g.steps.map(L=>ii(this,L,v)),options:Ve(g.options)}}visitGroup(g,v){const L=v.currentTime;let Z=0;const oe=g.steps.map(Ee=>{v.currentTime=L;const Ce=ii(this,Ee,v);return Z=Math.max(Z,v.currentTime),Ce});return v.currentTime=Z,{type:3,steps:oe,options:Ve(g.options)}}visitAnimate(g,v){const L=function(K,g){let v=null;if(K.hasOwnProperty("duration"))v=K;else if("number"==typeof K)return De(cr(K,g).duration,0,"");const L=K;if(L.split(/\s+/).some(oe=>"{"==oe.charAt(0)&&"{"==oe.charAt(1))){const oe=De(0,0,"");return oe.dynamic=!0,oe.strValue=L,oe}return v=v||cr(L,g),De(v.duration,v.delay,v.easing)}(g.timings,v.errors);v.currentAnimateTimings=L;let Z,oe=g.styles?g.styles:(0,j.oB)({});if(5==oe.type)Z=this.visitKeyframes(oe,v);else{let Ee=g.styles,Ce=!1;if(!Ee){Ce=!0;const qe={};L.easing&&(qe.easing=L.easing),Ee=(0,j.oB)(qe)}v.currentTime+=L.duration+L.delay;const it=this.visitStyle(Ee,v);it.isEmptyStep=Ce,Z=it}return v.currentAnimateTimings=null,{type:4,timings:L,style:Z,options:null}}visitStyle(g,v){const L=this._makeStyleAst(g,v);return this._validateStyleAst(L,v),L}_makeStyleAst(g,v){const L=[];Array.isArray(g.styles)?g.styles.forEach(Ee=>{"string"==typeof Ee?Ee==j.l3?L.push(Ee):v.errors.push(`The provided style string value ${Ee} is not allowed.`):L.push(Ee)}):L.push(g.styles);let Z=!1,oe=null;return L.forEach(Ee=>{if(Wi(Ee)){const Ce=Ee,it=Ce.easing;if(it&&(oe=it,delete Ce.easing),!Z)for(let qe in Ce)if(Ce[qe].toString().indexOf("{{")>=0){Z=!0;break}}}),{type:6,styles:L,easing:oe,offset:g.offset,containsDynamicStyles:Z,options:null}}_validateStyleAst(g,v){const L=v.currentAnimateTimings;let Z=v.currentTime,oe=v.currentTime;L&&oe>0&&(oe-=L.duration+L.delay),g.styles.forEach(Ee=>{"string"!=typeof Ee&&Object.keys(Ee).forEach(Ce=>{if(!this._driver.validateStyleProperty(Ce))return void v.errors.push(`The provided animation property "${Ce}" is not a supported CSS property for animations`);const it=v.collectedStyles[v.currentQuerySelector],qe=it[Ce];let Qt=!0;qe&&(oe!=Z&&oe>=qe.startTime&&Z<=qe.endTime&&(v.errors.push(`The CSS property "${Ce}" that exists between the times of "${qe.startTime}ms" and "${qe.endTime}ms" is also being animated in a parallel animation between the times of "${oe}ms" and "${Z}ms"`),Qt=!1),oe=qe.startTime),Qt&&(it[Ce]={startTime:oe,endTime:Z}),v.options&&function(K,g,v){const L=g.params||{},Z=Ps(K);Z.length&&Z.forEach(oe=>{L.hasOwnProperty(oe)||v.push(`Unable to resolve the local animation param ${oe} in the given list of values`)})}(Ee[Ce],v.options,v.errors)})})}visitKeyframes(g,v){const L={type:5,styles:[],options:null};if(!v.currentAnimateTimings)return v.errors.push("keyframes() must be placed inside of a call to animate()"),L;let oe=0;const Ee=[];let Ce=!1,it=!1,qe=0;const Qt=g.steps.map(Ir=>{const F=this._makeStyleAst(Ir,v);let P=null!=F.offset?F.offset:function(K){if("string"==typeof K)return null;let g=null;if(Array.isArray(K))K.forEach(v=>{if(Wi(v)&&v.hasOwnProperty("offset")){const L=v;g=parseFloat(L.offset),delete L.offset}});else if(Wi(K)&&K.hasOwnProperty("offset")){const v=K;g=parseFloat(v.offset),delete v.offset}return g}(F.styles),p=0;return null!=P&&(oe++,p=F.offset=P),it=it||p<0||p>1,Ce=Ce||p<qe,qe=p,Ee.push(p),F});it&&v.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Ce&&v.errors.push("Please ensure that all keyframe offsets are in order");const dn=g.steps.length;let pi=0;oe>0&&oe<dn?v.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==oe&&(pi=1/(dn-1));const jn=dn-1,$n=v.currentTime,pn=v.currentAnimateTimings,si=pn.duration;return Qt.forEach((Ir,F)=>{const P=pi>0?F==jn?1:pi*F:Ee[F],p=P*si;v.currentTime=$n+pn.delay+p,pn.duration=p,this._validateStyleAst(Ir,v),Ir.offset=P,L.styles.push(Ir)}),L}visitReference(g,v){return{type:8,animation:ii(this,Fr(g.animation),v),options:Ve(g.options)}}visitAnimateChild(g,v){return v.depCount++,{type:9,options:Ve(g.options)}}visitAnimateRef(g,v){return{type:10,animation:this.visitReference(g.animation,v),options:Ve(g.options)}}visitQuery(g,v){const L=v.currentQuerySelector,Z=g.options||{};v.queryCount++,v.currentQuery=g;const[oe,Ee]=function(K){const g=!!K.split(/\s*,\s*/).find(v=>":self"==v);return g&&(K=K.replace(kr,"")),K=K.replace(/@\*/g,Ln).replace(/@\w+/g,v=>Ln+"-"+v.substr(1)).replace(/:animating/g,En),[K,g]}(g.selector);v.currentQuerySelector=L.length?L+" "+oe:oe,Ge(v.collectedStyles,v.currentQuerySelector,{});const Ce=ii(this,Fr(g.animation),v);return v.currentQuery=null,v.currentQuerySelector=L,{type:11,selector:oe,limit:Z.limit||0,optional:!!Z.optional,includeSelf:Ee,animation:Ce,originalSelector:g.selector,options:Ve(g.options)}}visitStagger(g,v){v.currentQuery||v.errors.push("stagger() can only be used inside of query()");const L="full"===g.timings?{duration:0,delay:0,easing:"full"}:cr(g.timings,v.errors,!0);return{type:12,animation:ii(this,Fr(g.animation),v),timings:L,options:null}}}class fn{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Wi(K){return!Array.isArray(K)&&"object"==typeof K}function Ve(K){return K?(K=Gi(K)).params&&(K.params=function(K){return K?Gi(K):null}(K.params)):K={},K}function De(K,g,v){return{duration:K,delay:g,easing:v}}function Je(K,g,v,L,Z,oe,Ee=null,Ce=!1){return{type:1,element:K,keyframes:g,preStyleProps:v,postStyleProps:L,duration:Z,delay:oe,totalTime:Z+oe,easing:Ee,subTimeline:Ce}}class gt{constructor(){this._map=new Map}consume(g){let v=this._map.get(g);return v?this._map.delete(g):v=[],v}append(g,v){let L=this._map.get(g);L||this._map.set(g,L=[]),L.push(...v)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const $e=new RegExp(":enter","g"),he=new RegExp(":leave","g");function Le(K,g,v,L,Z,oe={},Ee={},Ce,it,qe=[]){return(new dt).buildKeyframes(K,g,v,L,Z,oe,Ee,Ce,it,qe)}class dt{buildKeyframes(g,v,L,Z,oe,Ee,Ce,it,qe,Qt=[]){qe=qe||new gt;const dn=new nt(g,v,qe,Z,oe,Qt,[]);dn.options=it,dn.currentTimeline.setStyles([Ee],null,dn.errors,it),ii(this,L,dn);const pi=dn.timelines.filter(jn=>jn.containsAnimation());if(pi.length&&Object.keys(Ce).length){const jn=pi[pi.length-1];jn.allowOnlyTimelineStyles()||jn.setStyles([Ce],null,dn.errors,it)}return pi.length?pi.map(jn=>jn.buildKeyframes()):[Je(v,[],[],[],0,0,"",!1)]}visitTrigger(g,v){}visitState(g,v){}visitTransition(g,v){}visitAnimateChild(g,v){const L=v.subInstructions.consume(v.element);if(L){const Z=v.createSubContext(g.options),oe=v.currentTimeline.currentTime,Ee=this._visitSubInstructions(L,Z,Z.options);oe!=Ee&&v.transformIntoNewTimeline(Ee)}v.previousNode=g}visitAnimateRef(g,v){const L=v.createSubContext(g.options);L.transformIntoNewTimeline(),this.visitReference(g.animation,L),v.transformIntoNewTimeline(L.currentTimeline.currentTime),v.previousNode=g}_visitSubInstructions(g,v,L){let oe=v.currentTimeline.currentTime;const Ee=null!=L.duration?on(L.duration):null,Ce=null!=L.delay?on(L.delay):null;return 0!==Ee&&g.forEach(it=>{const qe=v.appendInstructionToTimeline(it,Ee,Ce);oe=Math.max(oe,qe.duration+qe.delay)}),oe}visitReference(g,v){v.updateOptions(g.options,!0),ii(this,g.animation,v),v.previousNode=g}visitSequence(g,v){const L=v.subContextCount;let Z=v;const oe=g.options;if(oe&&(oe.params||oe.delay)&&(Z=v.createSubContext(oe),Z.transformIntoNewTimeline(),null!=oe.delay)){6==Z.previousNode.type&&(Z.currentTimeline.snapshotCurrentStyles(),Z.previousNode=_n);const Ee=on(oe.delay);Z.delayNextStep(Ee)}g.steps.length&&(g.steps.forEach(Ee=>ii(this,Ee,Z)),Z.currentTimeline.applyStylesToKeyframe(),Z.subContextCount>L&&Z.transformIntoNewTimeline()),v.previousNode=g}visitGroup(g,v){const L=[];let Z=v.currentTimeline.currentTime;const oe=g.options&&g.options.delay?on(g.options.delay):0;g.steps.forEach(Ee=>{const Ce=v.createSubContext(g.options);oe&&Ce.delayNextStep(oe),ii(this,Ee,Ce),Z=Math.max(Z,Ce.currentTimeline.currentTime),L.push(Ce.currentTimeline)}),L.forEach(Ee=>v.currentTimeline.mergeTimelineCollectedStyles(Ee)),v.transformIntoNewTimeline(Z),v.previousNode=g}_visitTiming(g,v){if(g.dynamic){const L=g.strValue;return cr(v.params?Wn(L,v.params,v.errors):L,v.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,v){const L=v.currentAnimateTimings=this._visitTiming(g.timings,v),Z=v.currentTimeline;L.delay&&(v.incrementTime(L.delay),Z.snapshotCurrentStyles());const oe=g.style;5==oe.type?this.visitKeyframes(oe,v):(v.incrementTime(L.duration),this.visitStyle(oe,v),Z.applyStylesToKeyframe()),v.currentAnimateTimings=null,v.previousNode=g}visitStyle(g,v){const L=v.currentTimeline,Z=v.currentAnimateTimings;!Z&&L.getCurrentStyleProperties().length&&L.forwardFrame();const oe=Z&&Z.easing||g.easing;g.isEmptyStep?L.applyEmptyStep(oe):L.setStyles(g.styles,oe,v.errors,v.options),v.previousNode=g}visitKeyframes(g,v){const L=v.currentAnimateTimings,Z=v.currentTimeline.duration,oe=L.duration,Ce=v.createSubContext().currentTimeline;Ce.easing=L.easing,g.styles.forEach(it=>{Ce.forwardTime((it.offset||0)*oe),Ce.setStyles(it.styles,it.easing,v.errors,v.options),Ce.applyStylesToKeyframe()}),v.currentTimeline.mergeTimelineCollectedStyles(Ce),v.transformIntoNewTimeline(Z+oe),v.previousNode=g}visitQuery(g,v){const L=v.currentTimeline.currentTime,Z=g.options||{},oe=Z.delay?on(Z.delay):0;oe&&(6===v.previousNode.type||0==L&&v.currentTimeline.getCurrentStyleProperties().length)&&(v.currentTimeline.snapshotCurrentStyles(),v.previousNode=_n);let Ee=L;const Ce=v.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!Z.optional,v.errors);v.currentQueryTotal=Ce.length;let it=null;Ce.forEach((qe,Qt)=>{v.currentQueryIndex=Qt;const dn=v.createSubContext(g.options,qe);oe&&dn.delayNextStep(oe),qe===v.element&&(it=dn.currentTimeline),ii(this,g.animation,dn),dn.currentTimeline.applyStylesToKeyframe(),Ee=Math.max(Ee,dn.currentTimeline.currentTime)}),v.currentQueryIndex=0,v.currentQueryTotal=0,v.transformIntoNewTimeline(Ee),it&&(v.currentTimeline.mergeTimelineCollectedStyles(it),v.currentTimeline.snapshotCurrentStyles()),v.previousNode=g}visitStagger(g,v){const L=v.parentContext,Z=v.currentTimeline,oe=g.timings,Ee=Math.abs(oe.duration),Ce=Ee*(v.currentQueryTotal-1);let it=Ee*v.currentQueryIndex;switch(oe.duration<0?"reverse":oe.easing){case"reverse":it=Ce-it;break;case"full":it=L.currentStaggerTime}const Qt=v.currentTimeline;it&&Qt.delayNextStep(it);const dn=Qt.currentTime;ii(this,g.animation,v),v.previousNode=g,L.currentStaggerTime=Z.currentTime-dn+(Z.startTime-L.currentTimeline.startTime)}}const _n={};class nt{constructor(g,v,L,Z,oe,Ee,Ce,it){this._driver=g,this.element=v,this.subInstructions=L,this._enterClassName=Z,this._leaveClassName=oe,this.errors=Ee,this.timelines=Ce,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_n,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=it||new ye(this._driver,v,0),Ce.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,v){if(!g)return;const L=g;let Z=this.options;null!=L.duration&&(Z.duration=on(L.duration)),null!=L.delay&&(Z.delay=on(L.delay));const oe=L.params;if(oe){let Ee=Z.params;Ee||(Ee=this.options.params={}),Object.keys(oe).forEach(Ce=>{(!v||!Ee.hasOwnProperty(Ce))&&(Ee[Ce]=Wn(oe[Ce],Ee,this.errors))})}}_copyOptions(){const g={};if(this.options){const v=this.options.params;if(v){const L=g.params={};Object.keys(v).forEach(Z=>{L[Z]=v[Z]})}}return g}createSubContext(g=null,v,L){const Z=v||this.element,oe=new nt(this._driver,Z,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Z,L||0));return oe.previousNode=this.previousNode,oe.currentAnimateTimings=this.currentAnimateTimings,oe.options=this._copyOptions(),oe.updateOptions(g),oe.currentQueryIndex=this.currentQueryIndex,oe.currentQueryTotal=this.currentQueryTotal,oe.parentContext=this,this.subContextCount++,oe}transformIntoNewTimeline(g){return this.previousNode=_n,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,v,L){const Z={duration:null!=v?v:g.duration,delay:this.currentTimeline.currentTime+(null!=L?L:0)+g.delay,easing:""},oe=new le(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,Z,g.stretchStartingKeyframe);return this.timelines.push(oe),Z}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,v,L,Z,oe,Ee){let Ce=[];if(Z&&Ce.push(this.element),g.length>0){g=(g=g.replace($e,"."+this._enterClassName)).replace(he,"."+this._leaveClassName);let qe=this._driver.query(this.element,g,1!=L);0!==L&&(qe=L<0?qe.slice(qe.length+L,qe.length):qe.slice(0,L)),Ce.push(...qe)}return!oe&&0==Ce.length&&Ee.push(`\`query("${v}")\` returned zero elements. (Use \`query("${v}", { optional: true })\` if you wish to allow this.)`),Ce}}class ye{constructor(g,v,L,Z){this._driver=g,this.element=v,this.startTime=L,this._elementTimelineStylesLookup=Z,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(v),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(v,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const v=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||v?(this.forwardTime(this.currentTime+g),v&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,v){return this.applyStylesToKeyframe(),new ye(this._driver,g,v||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,v){this._localTimelineStyles[g]=v,this._globalTimelineStyles[g]=v,this._styleSummary[g]={time:this.currentTime,value:v}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&(this._previousKeyframe.easing=g),Object.keys(this._globalTimelineStyles).forEach(v=>{this._backFill[v]=this._globalTimelineStyles[v]||j.l3,this._currentKeyframe[v]=j.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,v,L,Z){v&&(this._previousKeyframe.easing=v);const oe=Z&&Z.params||{},Ee=function(K,g){const v={};let L;return K.forEach(Z=>{"*"===Z?(L=L||Object.keys(g),L.forEach(oe=>{v[oe]=j.l3})):Or(Z,!1,v)}),v}(g,this._globalTimelineStyles);Object.keys(Ee).forEach(Ce=>{const it=Wn(Ee[Ce],oe,L);this._pendingStyles[Ce]=it,this._localTimelineStyles.hasOwnProperty(Ce)||(this._backFill[Ce]=this._globalTimelineStyles.hasOwnProperty(Ce)?this._globalTimelineStyles[Ce]:j.l3),this._updateStyle(Ce,it)})}applyStylesToKeyframe(){const g=this._pendingStyles,v=Object.keys(g);0!=v.length&&(this._pendingStyles={},v.forEach(L=>{this._currentKeyframe[L]=g[L]}),Object.keys(this._localTimelineStyles).forEach(L=>{this._currentKeyframe.hasOwnProperty(L)||(this._currentKeyframe[L]=this._localTimelineStyles[L])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(g=>{const v=this._localTimelineStyles[g];this._pendingStyles[g]=v,this._updateStyle(g,v)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let v in this._currentKeyframe)g.push(v);return g}mergeTimelineCollectedStyles(g){Object.keys(g._styleSummary).forEach(v=>{const L=this._styleSummary[v],Z=g._styleSummary[v];(!L||Z.time>L.time)&&this._updateStyle(v,Z.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,v=new Set,L=1===this._keyframes.size&&0===this.duration;let Z=[];this._keyframes.forEach((Ce,it)=>{const qe=Or(Ce,!0);Object.keys(qe).forEach(Qt=>{const dn=qe[Qt];dn==j.k1?g.add(Qt):dn==j.l3&&v.add(Qt)}),L||(qe.offset=it/this.duration),Z.push(qe)});const oe=g.size?ur(g.values()):[],Ee=v.size?ur(v.values()):[];if(L){const Ce=Z[0],it=Gi(Ce);Ce.offset=0,it.offset=1,Z=[Ce,it]}return Je(this.element,Z,oe,Ee,this.duration,this.startTime,this.easing,!1)}}class le extends ye{constructor(g,v,L,Z,oe,Ee,Ce=!1){super(g,v,Ee.delay),this.keyframes=L,this.preStyleProps=Z,this.postStyleProps=oe,this._stretchStartingKeyframe=Ce,this.timings={duration:Ee.duration,delay:Ee.delay,easing:Ee.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:v,duration:L,easing:Z}=this.timings;if(this._stretchStartingKeyframe&&v){const oe=[],Ee=L+v,Ce=v/Ee,it=Or(g[0],!1);it.offset=0,oe.push(it);const qe=Or(g[0],!1);qe.offset=fe(Ce),oe.push(qe);const Qt=g.length-1;for(let dn=1;dn<=Qt;dn++){let pi=Or(g[dn],!1);pi.offset=fe((v+pi.offset*L)/Ee),oe.push(pi)}L=Ee,v=0,Z="",g=oe}return Je(this.element,g,this.preStyleProps,this.postStyleProps,L,v,Z,!0)}}function fe(K,g=3){const v=Math.pow(10,g-1);return Math.round(K*v)/v}class en{}class Sn extends en{normalizePropertyName(g,v){return Cr(g)}normalizeStyleValue(g,v,L,Z){let oe="";const Ee=L.toString().trim();if(qi[v]&&0!==L&&"0"!==L)if("number"==typeof L)oe="px";else{const Ce=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Ce&&0==Ce[1].length&&Z.push(`Please provide a CSS unit value for ${g}:${L}`)}return Ee+oe}}const qi=(()=>function(K){const g={};return K.forEach(v=>g[v]=!0),g}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vr(K,g,v,L,Z,oe,Ee,Ce,it,qe,Qt,dn,pi){return{type:0,element:K,triggerName:g,isRemovalTransition:Z,fromState:v,fromStyles:oe,toState:L,toStyles:Ee,timelines:Ce,queriedElements:it,preStyleProps:qe,postStyleProps:Qt,totalTime:dn,errors:pi}}const Br={};class un{constructor(g,v,L){this._triggerName=g,this.ast=v,this._stateStyles=L}match(g,v,L,Z){return function(K,g,v,L,Z){return K.some(oe=>oe(g,v,L,Z))}(this.ast.matchers,g,v,L,Z)}buildStyles(g,v,L){const Z=this._stateStyles["*"],oe=this._stateStyles[g],Ee=Z?Z.buildStyles(v,L):{};return oe?oe.buildStyles(v,L):Ee}build(g,v,L,Z,oe,Ee,Ce,it,qe,Qt){const dn=[],pi=this.ast.options&&this.ast.options.params||Br,$n=this.buildStyles(L,Ce&&Ce.params||Br,dn),pn=it&&it.params||Br,si=this.buildStyles(Z,pn,dn),Ir=new Set,F=new Map,P=new Map,p="void"===Z,X={params:Cn(Cn({},pi),pn)},ct=Qt?[]:Le(g,v,this.ast.animation,oe,Ee,$n,si,X,qe,dn);let Zt=0;if(ct.forEach(Fi=>{Zt=Math.max(Fi.duration+Fi.delay,Zt)}),dn.length)return vr(v,this._triggerName,L,Z,p,$n,si,[],[],F,P,Zt,dn);ct.forEach(Fi=>{const Ur=Fi.element,cs=Ge(F,Ur,{});Fi.preStyleProps.forEach(bs=>cs[bs]=!0);const ar=Ge(P,Ur,{});Fi.postStyleProps.forEach(bs=>ar[bs]=!0),Ur!==v&&Ir.add(Ur)});const di=ur(Ir.values());return vr(v,this._triggerName,L,Z,p,$n,si,ct,di,F,P,Zt)}}class Qr{constructor(g,v,L){this.styles=g,this.defaultParams=v,this.normalizer=L}buildStyles(g,v){const L={},Z=Gi(this.defaultParams);return Object.keys(g).forEach(oe=>{const Ee=g[oe];null!=Ee&&(Z[oe]=Ee)}),this.styles.styles.forEach(oe=>{if("string"!=typeof oe){const Ee=oe;Object.keys(Ee).forEach(Ce=>{let it=Ee[Ce];it.length>1&&(it=Wn(it,Z,v));const qe=this.normalizer.normalizePropertyName(Ce,v);it=this.normalizer.normalizeStyleValue(Ce,qe,it,v),L[qe]=it})}}),L}}class Vr{constructor(g,v,L){this.name=g,this.ast=v,this._normalizer=L,this.transitionFactories=[],this.states={},v.states.forEach(Z=>{this.states[Z.name]=new Qr(Z.style,Z.options&&Z.options.params||{},L)}),ys(this.states,"true","1"),ys(this.states,"false","0"),v.transitions.forEach(Z=>{this.transitionFactories.push(new un(g,Z,this.states))}),this.fallbackTransition=function(K,g,v){return new un(K,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ee,Ce)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,v,L,Z){return this.transitionFactories.find(Ee=>Ee.match(g,v,L,Z))||null}matchStyles(g,v,L){return this.fallbackTransition.buildStyles(g,v,L)}}function ys(K,g,v){K.hasOwnProperty(g)?K.hasOwnProperty(v)||(K[v]=K[g]):K.hasOwnProperty(v)&&(K[g]=K[v])}const ms=new gt;class gs{constructor(g,v,L){this.bodyNode=g,this._driver=v,this._normalizer=L,this._animations={},this._playersById={},this.players=[]}register(g,v){const L=[],Z=Kn(this._driver,v,L);if(L.length)throw new Error(`Unable to build the animation due to the following errors: ${L.join("\n")}`);this._animations[g]=Z}_buildPlayer(g,v,L){const Z=g.element,oe=Se(0,this._normalizer,0,g.keyframes,v,L);return this._driver.animate(Z,oe,g.duration,g.delay,g.easing,[],!0)}create(g,v,L={}){const Z=[],oe=this._animations[g];let Ee;const Ce=new Map;if(oe?(Ee=Le(this._driver,v,oe,Vt,yt,{},{},L,ms,Z),Ee.forEach(Qt=>{const dn=Ge(Ce,Qt.element,{});Qt.postStyleProps.forEach(pi=>dn[pi]=null)})):(Z.push("The requested animation doesn't exist or has already been destroyed"),Ee=[]),Z.length)throw new Error(`Unable to create the animation due to the following errors: ${Z.join("\n")}`);Ce.forEach((Qt,dn)=>{Object.keys(Qt).forEach(pi=>{Qt[pi]=this._driver.computeStyle(dn,pi,j.l3)})});const qe=Oe(Ee.map(Qt=>{const dn=Ce.get(Qt.element);return this._buildPlayer(Qt,{},dn)}));return this._playersById[g]=qe,qe.onDestroy(()=>this.destroy(g)),this.players.push(qe),qe}destroy(g){const v=this._getPlayer(g);v.destroy(),delete this._playersById[g];const L=this.players.indexOf(v);L>=0&&this.players.splice(L,1)}_getPlayer(g){const v=this._playersById[g];if(!v)throw new Error(`Unable to find the timeline player referenced by ${g}`);return v}listen(g,v,L,Z){const oe=Me(v,"","","");return Ye(this._getPlayer(g),L,oe,Z),()=>{}}command(g,v,L,Z){if("register"==L)return void this.register(g,Z[0]);if("create"==L)return void this.create(g,v,Z[0]||{});const oe=this._getPlayer(g);switch(L){case"play":oe.play();break;case"pause":oe.pause();break;case"reset":oe.reset();break;case"restart":oe.restart();break;case"finish":oe.finish();break;case"init":oe.init();break;case"setPosition":oe.setPosition(parseFloat(Z[0]));break;case"destroy":this.destroy(g)}}}const Vi="ng-animate-queued",Rs="ng-animate-disabled",vs=".ng-animate-disabled",ls=[],ts={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},br={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ar="__ng_removed";class xr{constructor(g,v=""){this.namespaceId=v;const L=g&&g.hasOwnProperty("value");if(this.value=null!=(K=L?g.value:g)?K:null,L){const oe=Gi(g);delete oe.value,this.options=oe}else this.options={};var K;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(g){const v=g.params;if(v){const L=this.options.params;Object.keys(v).forEach(Z=>{null==L[Z]&&(L[Z]=v[Z])})}}}const $r="void",Vs=new xr($r);class ho{constructor(g,v,L){this.id=g,this.hostElement=v,this._engine=L,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,It(v,this._hostClassName)}listen(g,v,L,Z){if(!this._triggers.hasOwnProperty(v))throw new Error(`Unable to listen on the animation trigger event "${L}" because the animation trigger "${v}" doesn't exist!`);if(null==L||0==L.length)throw new Error(`Unable to listen on the animation trigger "${v}" because the provided event is undefined!`);if("start"!=(K=L)&&"done"!=K)throw new Error(`The provided animation trigger event "${L}" for the animation trigger "${v}" is not supported!`);var K;const oe=Ge(this._elementListeners,g,[]),Ee={name:v,phase:L,callback:Z};oe.push(Ee);const Ce=Ge(this._engine.statesByElement,g,{});return Ce.hasOwnProperty(v)||(It(g,lr),It(g,lr+"-"+v),Ce[v]=Vs),()=>{this._engine.afterFlush(()=>{const it=oe.indexOf(Ee);it>=0&&oe.splice(it,1),this._triggers[v]||delete Ce[v]})}}register(g,v){return!this._triggers[g]&&(this._triggers[g]=v,!0)}_getTrigger(g){const v=this._triggers[g];if(!v)throw new Error(`The provided animation trigger "${g}" has not been registered!`);return v}trigger(g,v,L,Z=!0){const oe=this._getTrigger(v),Ee=new Zr(this.id,v,g);let Ce=this._engine.statesByElement.get(g);Ce||(It(g,lr),It(g,lr+"-"+v),this._engine.statesByElement.set(g,Ce={}));let it=Ce[v];const qe=new xr(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&it&&qe.absorbOptions(it.options),Ce[v]=qe,it||(it=Vs),qe.value!==$r&&it.value===qe.value){if(!function(K,g){const v=Object.keys(K),L=Object.keys(g);if(v.length!=L.length)return!1;for(let Z=0;Z<v.length;Z++){const oe=v[Z];if(!g.hasOwnProperty(oe)||K[oe]!==g[oe])return!1}return!0}(it.params,qe.params)){const pn=[],si=oe.matchStyles(it.value,it.params,pn),Ir=oe.matchStyles(qe.value,qe.params,pn);pn.length?this._engine.reportError(pn):this._engine.afterFlush(()=>{er(g,si),Sr(g,Ir)})}return}const pi=Ge(this._engine.playersByElement,g,[]);pi.forEach(pn=>{pn.namespaceId==this.id&&pn.triggerName==v&&pn.queued&&pn.destroy()});let jn=oe.matchTransition(it.value,qe.value,g,qe.params),$n=!1;if(!jn){if(!Z)return;jn=oe.fallbackTransition,$n=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:v,transition:jn,fromState:it,toState:qe,player:Ee,isFallbackTransition:$n}),$n||(It(g,Vi),Ee.onStart(()=>{ln(g,Vi)})),Ee.onDone(()=>{let pn=this.players.indexOf(Ee);pn>=0&&this.players.splice(pn,1);const si=this._engine.playersByElement.get(g);if(si){let Ir=si.indexOf(Ee);Ir>=0&&si.splice(Ir,1)}}),this.players.push(Ee),pi.push(Ee),Ee}deregister(g){delete this._triggers[g],this._engine.statesByElement.forEach((v,L)=>{delete v[g]}),this._elementListeners.forEach((v,L)=>{this._elementListeners.set(L,v.filter(Z=>Z.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const v=this._engine.playersByElement.get(g);v&&(v.forEach(L=>L.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,v){const L=this._engine.driver.query(g,Ln,!0);L.forEach(Z=>{if(Z[Ar])return;const oe=this._engine.fetchNamespacesByElement(Z);oe.size?oe.forEach(Ee=>Ee.triggerLeaveAnimation(Z,v,!1,!0)):this.clearElementCache(Z)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(Z=>this.clearElementCache(Z)))}triggerLeaveAnimation(g,v,L,Z){const oe=this._engine.statesByElement.get(g);if(oe){const Ee=[];if(Object.keys(oe).forEach(Ce=>{if(this._triggers[Ce]){const it=this.trigger(g,Ce,$r,Z);it&&Ee.push(it)}}),Ee.length)return this._engine.markElementAsRemoved(this.id,g,!0,v),L&&Oe(Ee).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const v=this._elementListeners.get(g),L=this._engine.statesByElement.get(g);if(v&&L){const Z=new Set;v.forEach(oe=>{const Ee=oe.name;if(Z.has(Ee))return;Z.add(Ee);const it=this._triggers[Ee].fallbackTransition,qe=L[Ee]||Vs,Qt=new xr($r),dn=new Zr(this.id,Ee,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:Ee,transition:it,fromState:qe,toState:Qt,player:dn,isFallbackTransition:!0})})}}removeNode(g,v){const L=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,v),this.triggerLeaveAnimation(g,v,!0))return;let Z=!1;if(L.totalAnimations){const oe=L.players.length?L.playersByQueriedElement.get(g):[];if(oe&&oe.length)Z=!0;else{let Ee=g;for(;Ee=Ee.parentNode;)if(L.statesByElement.get(Ee)){Z=!0;break}}}if(this.prepareLeaveAnimationListeners(g),Z)L.markElementAsRemoved(this.id,g,!1,v);else{const oe=g[Ar];(!oe||oe===ts)&&(L.afterFlush(()=>this.clearElementCache(g)),L.destroyInnerAnimations(g),L._onRemovalComplete(g,v))}}insertNode(g,v){It(g,this._hostClassName)}drainQueuedTransitions(g){const v=[];return this._queue.forEach(L=>{const Z=L.player;if(Z.destroyed)return;const oe=L.element,Ee=this._elementListeners.get(oe);Ee&&Ee.forEach(Ce=>{if(Ce.name==L.triggerName){const it=Me(oe,L.triggerName,L.fromState.value,L.toState.value);it._data=g,Ye(L.player,Ce.phase,it,Ce.callback)}}),Z.markedForDestroy?this._engine.afterFlush(()=>{Z.destroy()}):v.push(L)}),this._queue=[],v.sort((L,Z)=>{const oe=L.transition.ast.depCount,Ee=Z.transition.ast.depCount;return 0==oe||0==Ee?oe-Ee:this._engine.driver.containsElement(L.element,Z.element)?1:-1})}destroy(g){this.players.forEach(v=>v.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}elementContainsData(g){let v=!1;return this._elementListeners.has(g)&&(v=!0),v=!!this._queue.find(L=>L.element===g)||v,v}}class fo{constructor(g,v,L){this.bodyNode=g,this.driver=v,this._normalizer=L,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Z,oe)=>{}}_onRemovalComplete(g,v){this.onRemovalComplete(g,v)}get queuedPlayers(){const g=[];return this._namespaceList.forEach(v=>{v.players.forEach(L=>{L.queued&&g.push(L)})}),g}createNamespace(g,v){const L=new ho(g,v,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,v)?this._balanceNamespaceList(L,v):(this.newHostElements.set(v,L),this.collectEnterElement(v)),this._namespaceLookup[g]=L}_balanceNamespaceList(g,v){const L=this._namespaceList.length-1;if(L>=0){let Z=!1;for(let oe=L;oe>=0;oe--)if(this.driver.containsElement(this._namespaceList[oe].hostElement,v)){this._namespaceList.splice(oe+1,0,g),Z=!0;break}Z||this._namespaceList.splice(0,0,g)}else this._namespaceList.push(g);return this.namespacesByHostElement.set(v,g),g}register(g,v){let L=this._namespaceLookup[g];return L||(L=this.createNamespace(g,v)),L}registerTrigger(g,v,L){let Z=this._namespaceLookup[g];Z&&Z.register(v,L)&&this.totalAnimations++}destroy(g,v){if(!g)return;const L=this._fetchNamespace(g);this.afterFlush(()=>{this.namespacesByHostElement.delete(L.hostElement),delete this._namespaceLookup[g];const Z=this._namespaceList.indexOf(L);Z>=0&&this._namespaceList.splice(Z,1)}),this.afterFlushAnimationsDone(()=>L.destroy(v))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const v=new Set,L=this.statesByElement.get(g);if(L){const Z=Object.keys(L);for(let oe=0;oe<Z.length;oe++){const Ee=L[Z[oe]].namespaceId;if(Ee){const Ce=this._fetchNamespace(Ee);Ce&&v.add(Ce)}}}return v}trigger(g,v,L,Z){if(Rr(v)){const oe=this._fetchNamespace(g);if(oe)return oe.trigger(v,L,Z),!0}return!1}insertNode(g,v,L,Z){if(!Rr(v))return;const oe=v[Ar];if(oe&&oe.setForRemoval){oe.setForRemoval=!1,oe.setForMove=!0;const Ee=this.collectedLeaveElements.indexOf(v);Ee>=0&&this.collectedLeaveElements.splice(Ee,1)}if(g){const Ee=this._fetchNamespace(g);Ee&&Ee.insertNode(v,L)}Z&&this.collectEnterElement(v)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,v){v?this.disabledNodes.has(g)||(this.disabledNodes.add(g),It(g,Rs)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),ln(g,Rs))}removeNode(g,v,L,Z){if(Rr(v)){const oe=g?this._fetchNamespace(g):null;if(oe?oe.removeNode(v,Z):this.markElementAsRemoved(g,v,!1,Z),L){const Ee=this.namespacesByHostElement.get(v);Ee&&Ee.id!==g&&Ee.removeNode(v,Z)}}else this._onRemovalComplete(v,Z)}markElementAsRemoved(g,v,L,Z){this.collectedLeaveElements.push(v),v[Ar]={namespaceId:g,setForRemoval:Z,hasAnimation:L,removedBeforeQueried:!1}}listen(g,v,L,Z,oe){return Rr(v)?this._fetchNamespace(g).listen(v,L,Z,oe):()=>{}}_buildInstruction(g,v,L,Z,oe){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,L,Z,g.fromState.options,g.toState.options,v,oe)}destroyInnerAnimations(g){let v=this.driver.query(g,Ln,!0);v.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(v=this.driver.query(g,En,!0),v.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(g){const v=this.playersByElement.get(g);v&&v.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(g){const v=this.playersByQueriedElement.get(g);v&&v.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return Oe(this.players).onDone(()=>g());g()})}processLeaveNode(g){const v=g[Ar];if(v&&v.setForRemoval){if(g[Ar]=ts,v.namespaceId){this.destroyInnerAnimations(g);const L=this._fetchNamespace(v.namespaceId);L&&L.clearElementCache(g)}this._onRemovalComplete(g,v.setForRemoval)}this.driver.matchesElement(g,vs)&&this.markElementAsDisabled(g,!1),this.driver.query(g,vs,!0).forEach(L=>{this.markElementAsDisabled(L,!1)})}flush(g=-1){let v=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,Z)=>this._balanceNamespaceList(L,Z)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)It(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{v=this._flushAnimations(L,g)}finally{for(let Z=0;Z<L.length;Z++)L[Z]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],v.length?Oe(v).onDone(()=>{L.forEach(Z=>Z())}):L.forEach(Z=>Z())}}reportError(g){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${g.join("\n")}`)}_flushAnimations(g,v){const L=new gt,Z=[],oe=new Map,Ee=[],Ce=new Map,it=new Map,qe=new Map,Qt=new Set;this.disabledNodes.forEach(tn=>{Qt.add(tn);const Vn=this.driver.query(tn,".ng-animate-queued",!0);for(let ci=0;ci<Vn.length;ci++)Qt.add(Vn[ci])});const dn=this.bodyNode,pi=Array.from(this.statesByElement.keys()),jn=ne(pi,this.collectedEnterElements),$n=new Map;let pn=0;jn.forEach((tn,Vn)=>{const ci=Vt+pn++;$n.set(Vn,ci),tn.forEach(Ui=>It(Ui,ci))});const si=[],Ir=new Set,F=new Set;for(let tn=0;tn<this.collectedLeaveElements.length;tn++){const Vn=this.collectedLeaveElements[tn],ci=Vn[Ar];ci&&ci.setForRemoval&&(si.push(Vn),Ir.add(Vn),ci.hasAnimation?this.driver.query(Vn,".ng-star-inserted",!0).forEach(Ui=>Ir.add(Ui)):F.add(Vn))}const P=new Map,p=ne(pi,Array.from(Ir));p.forEach((tn,Vn)=>{const ci=yt+pn++;P.set(Vn,ci),tn.forEach(Ui=>It(Ui,ci))}),g.push(()=>{jn.forEach((tn,Vn)=>{const ci=$n.get(Vn);tn.forEach(Ui=>ln(Ui,ci))}),p.forEach((tn,Vn)=>{const ci=P.get(Vn);tn.forEach(Ui=>ln(Ui,ci))}),si.forEach(tn=>{this.processLeaveNode(tn)})});const X=[],ct=[];for(let tn=this._namespaceList.length-1;tn>=0;tn--)this._namespaceList[tn].drainQueuedTransitions(v).forEach(ci=>{const Ui=ci.player,Pr=ci.element;if(X.push(Ui),this.collectedEnterElements.length){const _s=Pr[Ar];if(_s&&_s.setForMove)return void Ui.destroy()}const qs=!dn||!this.driver.containsElement(dn,Pr),Xs=P.get(Pr),ro=$n.get(Pr),gr=this._buildInstruction(ci,L,ro,Xs,qs);if(gr.errors&&gr.errors.length)ct.push(gr);else{if(qs)return Ui.onStart(()=>er(Pr,gr.fromStyles)),Ui.onDestroy(()=>Sr(Pr,gr.toStyles)),void Z.push(Ui);if(ci.isFallbackTransition)return Ui.onStart(()=>er(Pr,gr.fromStyles)),Ui.onDestroy(()=>Sr(Pr,gr.toStyles)),void Z.push(Ui);gr.timelines.forEach(_s=>_s.stretchStartingKeyframe=!0),L.append(Pr,gr.timelines),Ee.push({instruction:gr,player:Ui,element:Pr}),gr.queriedElements.forEach(_s=>Ge(Ce,_s,[]).push(Ui)),gr.preStyleProps.forEach((_s,Us)=>{const Ea=Object.keys(_s);if(Ea.length){let hr=it.get(Us);hr||it.set(Us,hr=new Set),Ea.forEach(zs=>hr.add(zs))}}),gr.postStyleProps.forEach((_s,Us)=>{const Ea=Object.keys(_s);let hr=qe.get(Us);hr||qe.set(Us,hr=new Set),Ea.forEach(zs=>hr.add(zs))})}});if(ct.length){const tn=[];ct.forEach(Vn=>{tn.push(`@${Vn.triggerName} has failed due to:\n`),Vn.errors.forEach(ci=>tn.push(`- ${ci}\n`))}),X.forEach(Vn=>Vn.destroy()),this.reportError(tn)}const Zt=new Map,di=new Map;Ee.forEach(tn=>{const Vn=tn.element;L.has(Vn)&&(di.set(Vn,Vn),this._beforeAnimationBuild(tn.player.namespaceId,tn.instruction,Zt))}),Z.forEach(tn=>{const Vn=tn.element;this._getPreviousPlayers(Vn,!1,tn.namespaceId,tn.triggerName,null).forEach(Ui=>{Ge(Zt,Vn,[]).push(Ui),Ui.destroy()})});const Fi=si.filter(tn=>$s(tn,it,qe)),Ur=new Map;V(Ur,this.driver,F,qe,j.l3).forEach(tn=>{$s(tn,it,qe)&&Fi.push(tn)});const ar=new Map;jn.forEach((tn,Vn)=>{V(ar,this.driver,new Set(tn),it,j.k1)}),Fi.forEach(tn=>{const Vn=Ur.get(tn),ci=ar.get(tn);Ur.set(tn,Cn(Cn({},Vn),ci))});const bs=[],mr=[],Is={};Ee.forEach(tn=>{const{element:Vn,player:ci,instruction:Ui}=tn;if(L.has(Vn)){if(Qt.has(Vn))return ci.onDestroy(()=>Sr(Vn,Ui.toStyles)),ci.disabled=!0,ci.overrideTotalTime(Ui.totalTime),void Z.push(ci);let Pr=Is;if(di.size>1){let Xs=Vn;const ro=[];for(;Xs=Xs.parentNode;){const gr=di.get(Xs);if(gr){Pr=gr;break}ro.push(Xs)}ro.forEach(gr=>di.set(gr,Pr))}const qs=this._buildAnimation(ci.namespaceId,Ui,Zt,oe,ar,Ur);if(ci.setRealPlayer(qs),Pr===Is)bs.push(ci);else{const Xs=this.playersByElement.get(Pr);Xs&&Xs.length&&(ci.parentPlayer=Oe(Xs)),Z.push(ci)}}else er(Vn,Ui.fromStyles),ci.onDestroy(()=>Sr(Vn,Ui.toStyles)),mr.push(ci),Qt.has(Vn)&&Z.push(ci)}),mr.forEach(tn=>{const Vn=oe.get(tn.element);if(Vn&&Vn.length){const ci=Oe(Vn);tn.setRealPlayer(ci)}}),Z.forEach(tn=>{tn.parentPlayer?tn.syncPlayerEvents(tn.parentPlayer):tn.destroy()});for(let tn=0;tn<si.length;tn++){const Vn=si[tn],ci=Vn[Ar];if(ln(Vn,yt),ci&&ci.hasAnimation)continue;let Ui=[];if(Ce.size){let qs=Ce.get(Vn);qs&&qs.length&&Ui.push(...qs);let Xs=this.driver.query(Vn,En,!0);for(let ro=0;ro<Xs.length;ro++){let gr=Ce.get(Xs[ro]);gr&&gr.length&&Ui.push(...gr)}}const Pr=Ui.filter(qs=>!qs.destroyed);Pr.length?rn(this,Vn,Pr):this.processLeaveNode(Vn)}return si.length=0,bs.forEach(tn=>{this.players.push(tn),tn.onDone(()=>{tn.destroy();const Vn=this.players.indexOf(tn);this.players.splice(Vn,1)}),tn.play()}),bs}elementContainsData(g,v){let L=!1;const Z=v[Ar];return Z&&Z.setForRemoval&&(L=!0),this.playersByElement.has(v)&&(L=!0),this.playersByQueriedElement.has(v)&&(L=!0),this.statesByElement.has(v)&&(L=!0),this._fetchNamespace(g).elementContainsData(v)||L}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,v,L,Z,oe){let Ee=[];if(v){const Ce=this.playersByQueriedElement.get(g);Ce&&(Ee=Ce)}else{const Ce=this.playersByElement.get(g);if(Ce){const it=!oe||oe==$r;Ce.forEach(qe=>{qe.queued||!it&&qe.triggerName!=Z||Ee.push(qe)})}}return(L||Z)&&(Ee=Ee.filter(Ce=>!(L&&L!=Ce.namespaceId||Z&&Z!=Ce.triggerName))),Ee}_beforeAnimationBuild(g,v,L){const oe=v.element,Ee=v.isRemovalTransition?void 0:g,Ce=v.isRemovalTransition?void 0:v.triggerName;for(const it of v.timelines){const qe=it.element,Qt=qe!==oe,dn=Ge(L,qe,[]);this._getPreviousPlayers(qe,Qt,Ee,Ce,v.toState).forEach(jn=>{const $n=jn.getRealPlayer();$n.beforeDestroy&&$n.beforeDestroy(),jn.destroy(),dn.push(jn)})}er(oe,v.fromStyles)}_buildAnimation(g,v,L,Z,oe,Ee){const Ce=v.triggerName,it=v.element,qe=[],Qt=new Set,dn=new Set,pi=v.timelines.map($n=>{const pn=$n.element;Qt.add(pn);const si=pn[Ar];if(si&&si.removedBeforeQueried)return new j.ZN($n.duration,$n.delay);const Ir=pn!==it,F=function(K){const g=[];return Zi(K,g),g}((L.get(pn)||ls).map(Zt=>Zt.getRealPlayer())).filter(Zt=>!!Zt.element&&Zt.element===pn),P=oe.get(pn),p=Ee.get(pn),X=Se(0,this._normalizer,0,$n.keyframes,P,p),ct=this._buildPlayer($n,X,F);if($n.subTimeline&&Z&&dn.add(pn),Ir){const Zt=new Zr(g,Ce,pn);Zt.setRealPlayer(ct),qe.push(Zt)}return ct});qe.forEach($n=>{Ge(this.playersByQueriedElement,$n.element,[]).push($n),$n.onDone(()=>function(K,g,v){let L;if(K instanceof Map){if(L=K.get(g),L){if(L.length){const Z=L.indexOf(v);L.splice(Z,1)}0==L.length&&K.delete(g)}}else if(L=K[g],L){if(L.length){const Z=L.indexOf(v);L.splice(Z,1)}0==L.length&&delete K[g]}return L}(this.playersByQueriedElement,$n.element,$n))}),Qt.forEach($n=>It($n,vn));const jn=Oe(pi);return jn.onDestroy(()=>{Qt.forEach($n=>ln($n,vn)),Sr(it,v.toStyles)}),dn.forEach($n=>{Ge(Z,$n,[]).push(jn)}),jn}_buildPlayer(g,v,L){return v.length>0?this.driver.animate(g.element,v,g.duration,g.delay,g.easing,L):new j.ZN(g.duration,g.delay)}}class Zr{constructor(g,v,L){this.namespaceId=g,this.triggerName=v,this.element=L,this._player=new j.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,Object.keys(this._queuedCallbacks).forEach(v=>{this._queuedCallbacks[v].forEach(L=>Ye(g,v,void 0,L))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const v=this._player;v.triggerCallback&&g.onStart(()=>v.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,v){Ge(this._queuedCallbacks,g,[]).push(v)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const v=this._player;v.triggerCallback&&v.triggerCallback(g)}}function Rr(K){return K&&1===K.nodeType}function G(K,g){const v=K.style.display;return K.style.display=null!=g?g:"none",v}function V(K,g,v,L,Z){const oe=[];v.forEach(it=>oe.push(G(it)));const Ee=[];L.forEach((it,qe)=>{const Qt={};it.forEach(dn=>{const pi=Qt[dn]=g.computeStyle(qe,dn,Z);(!pi||0==pi.length)&&(qe[Ar]=br,Ee.push(qe))}),K.set(qe,Qt)});let Ce=0;return v.forEach(it=>G(it,oe[Ce++])),Ee}function ne(K,g){const v=new Map;if(K.forEach(Ce=>v.set(Ce,[])),0==g.length)return v;const Z=new Set(g),oe=new Map;function Ee(Ce){if(!Ce)return 1;let it=oe.get(Ce);if(it)return it;const qe=Ce.parentNode;return it=v.has(qe)?qe:Z.has(qe)?1:Ee(qe),oe.set(Ce,it),it}return g.forEach(Ce=>{const it=Ee(Ce);1!==it&&v.get(it).push(Ce)}),v}const Te="$$classes";function It(K,g){if(K.classList)K.classList.add(g);else{let v=K[Te];v||(v=K[Te]={}),v[g]=!0}}function ln(K,g){if(K.classList)K.classList.remove(g);else{let v=K[Te];v&&delete v[g]}}function rn(K,g,v){Oe(v).onDone(()=>K.processLeaveNode(g))}function Zi(K,g){for(let v=0;v<K.length;v++){const L=K[v];L instanceof j.ZE?Zi(L.players,g):g.push(L)}}function $s(K,g,v){const L=v.get(K);if(!L)return!1;let Z=g.get(K);return Z?L.forEach(oe=>Z.add(oe)):g.set(K,L),v.delete(K),!0}class Os{constructor(g,v,L){this.bodyNode=g,this._driver=v,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(Z,oe)=>{},this._transitionEngine=new fo(g,v,L),this._timelineEngine=new gs(g,v,L),this._transitionEngine.onRemovalComplete=(Z,oe)=>this.onRemovalComplete(Z,oe)}registerTrigger(g,v,L,Z,oe){const Ee=g+"-"+Z;let Ce=this._triggerCache[Ee];if(!Ce){const it=[],qe=Kn(this._driver,oe,it);if(it.length)throw new Error(`The animation trigger "${Z}" has failed to build due to the following errors:\n - ${it.join("\n - ")}`);Ce=function(K,g,v){return new Vr(K,g,v)}(Z,qe,this._normalizer),this._triggerCache[Ee]=Ce}this._transitionEngine.registerTrigger(v,Z,Ce)}register(g,v){this._transitionEngine.register(g,v)}destroy(g,v){this._transitionEngine.destroy(g,v)}onInsert(g,v,L,Z){this._transitionEngine.insertNode(g,v,L,Z)}onRemove(g,v,L,Z){this._transitionEngine.removeNode(g,v,Z||!1,L)}disableAnimations(g,v){this._transitionEngine.markElementAsDisabled(g,v)}process(g,v,L,Z){if("@"==L.charAt(0)){const[oe,Ee]=E(L);this._timelineEngine.command(oe,v,Ee,Z)}else this._transitionEngine.trigger(g,v,L,Z)}listen(g,v,L,Z,oe){if("@"==L.charAt(0)){const[Ee,Ce]=E(L);return this._timelineEngine.listen(Ee,v,Ce,oe)}return this._transitionEngine.listen(g,v,L,Z,oe)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Ms(K,g){let v=null,L=null;return Array.isArray(g)&&g.length?(v=mo(g[0]),g.length>1&&(L=mo(g[g.length-1]))):g&&(v=mo(g)),v||L?new to(K,v,L):null}let to=(()=>{class K{constructor(v,L,Z){this._element=v,this._startStyles=L,this._endStyles=Z,this._state=0;let oe=K.initialStylesByElement.get(v);oe||K.initialStylesByElement.set(v,oe={}),this._initialStyles=oe}start(){this._state<1&&(this._startStyles&&Sr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sr(this._element,this._initialStyles),this._endStyles&&(Sr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(K.initialStylesByElement.delete(this._element),this._startStyles&&(er(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(er(this._element,this._endStyles),this._endStyles=null),Sr(this._element,this._initialStyles),this._state=3)}}return K.initialStylesByElement=new WeakMap,K})();function mo(K){let g=null;const v=Object.keys(K);for(let L=0;L<v.length;L++){const Z=v[L];ko(Z)&&(g=g||{},g[Z]=K[Z])}return g}function ko(K){return"display"===K||"position"===K}const Jo="animation",no="animationend";class So{constructor(g,v,L,Z,oe,Ee,Ce){this._element=g,this._name=v,this._duration=L,this._delay=Z,this._easing=oe,this._fillMode=Ee,this._onDoneFn=Ce,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=it=>this._handleCallback(it)}apply(){(function(K,g){const v=_o(K,"").trim();let L=0;v.length&&(function(K,g){let v=0;for(let L=0;L<K.length;L++)","===K.charAt(L)&&v++;return v}(v)+1,g=`${v}, ${g}`),Hs(K,"",g)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ho(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){va(this._element,this._name,"paused")}resume(){va(this._element,this._name,"running")}setPosition(g){const v=Vo(this._element,this._name);this._position=g*this._duration,Hs(this._element,"Delay",`-${this._position}ms`,v)}getPosition(){return this._position}_handleCallback(g){const v=g._ngTestManualTimestamp||Date.now(),L=1e3*parseFloat(g.elapsedTime.toFixed(3));g.animationName==this._name&&Math.max(v-this._startTime,0)>=this._delay&&L>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ho(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(K,g){const L=_o(K,"").split(","),Z=Ys(L,g);Z>=0&&(L.splice(Z,1),Hs(K,"",L.join(",")))}(this._element,this._name))}}function va(K,g,v){Hs(K,"PlayState",v,Vo(K,g))}function Vo(K,g){const v=_o(K,"");return v.indexOf(",")>0?Ys(v.split(","),g):Ys([v],g)}function Ys(K,g){for(let v=0;v<K.length;v++)if(K[v].indexOf(g)>=0)return v;return-1}function Ho(K,g,v){v?K.removeEventListener(no,g):K.addEventListener(no,g)}function Hs(K,g,v,L){const Z=Jo+g;if(null!=L){const oe=K.style[Z];if(oe.length){const Ee=oe.split(",");Ee[L]=v,v=Ee.join(",")}}K.style[Z]=v}function _o(K,g){return K.style[Jo+g]||""}class zo{constructor(g,v,L,Z,oe,Ee,Ce,it){this.element=g,this.keyframes=v,this.animationName=L,this._duration=Z,this._delay=oe,this._finalStyles=Ce,this._specialStyles=it,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ee||"linear",this.totalTime=Z+oe,this._buildStyler()}onStart(g){this._onStartFns.push(g)}onDone(g){this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(g=>g()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(g=>g()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(g){this._styler.setPosition(g)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new So(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(g){const v="start"==g?this._onStartFns:this._onDoneFns;v.forEach(L=>L()),v.length=0}beforeDestroy(){this.init();const g={};if(this.hasStarted()){const v=this._state>=3;Object.keys(this._finalStyles).forEach(L=>{"offset"!=L&&(g[L]=v?this._finalStyles[L]:Dr(this.element,L))})}this.currentSnapshot=g}}class Go extends j.ZN{constructor(g,v){super(),this.element=g,this._startingStyles={},this.__initialized=!1,this._styles=xt(v)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(g=>{this._startingStyles[g]=this.element.style[g]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(g=>this.element.style.setProperty(g,this._styles[g])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(g=>{const v=this._startingStyles[g];v?this.element.style.setProperty(g,v):this.element.style.removeProperty(g)}),this._startingStyles=null,super.destroy())}}class sr{constructor(){this._count=0}validateStyleProperty(g){return Lt(g)}matchesElement(g,v){return He(g,v)}containsElement(g,v){return pt(g,v)}query(g,v,L){return ft(g,v,L)}computeStyle(g,v,L){return window.getComputedStyle(g)[v]}buildKeyframeElement(g,v,L){L=L.map(Ce=>xt(Ce));let Z=`@keyframes ${v} {\n`,oe="";L.forEach(Ce=>{oe=" ";const it=parseFloat(Ce.offset);Z+=`${oe}${100*it}% {\n`,oe+=" ",Object.keys(Ce).forEach(qe=>{const Qt=Ce[qe];switch(qe){case"offset":return;case"easing":return void(Qt&&(Z+=`${oe}animation-timing-function: ${Qt};\n`));default:return void(Z+=`${oe}${qe}: ${Qt};\n`)}}),Z+=`${oe}}\n`}),Z+="}\n";const Ee=document.createElement("style");return Ee.textContent=Z,Ee}animate(g,v,L,Z,oe,Ee=[],Ce){const it=Ee.filter(si=>si instanceof zo),qe={};dr(L,Z)&&it.forEach(si=>{let Ir=si.currentSnapshot;Object.keys(Ir).forEach(F=>qe[F]=Ir[F])});const Qt=function(K){let g={};return K&&(Array.isArray(K)?K:[K]).forEach(L=>{Object.keys(L).forEach(Z=>{"offset"==Z||"easing"==Z||(g[Z]=L[Z])})}),g}(v=pr(g,v,qe));if(0==L)return new Go(g,Qt);const dn="gen_css_kf_"+this._count++,pi=this.buildKeyframeElement(g,dn,v);(function(K){var v;const g=null==(v=K.getRootNode)?void 0:v.call(K);return"undefined"!=typeof ShadowRoot&&g instanceof ShadowRoot?g:document.head})(g).appendChild(pi);const $n=Ms(g,v),pn=new zo(g,v,dn,L,Z,oe,Qt,$n);return pn.onDestroy(()=>{var K;(K=pi).parentNode.removeChild(K)}),pn}}class se{constructor(g,v,L,Z){this.element=g,this.keyframes=v,this.options=L,this._specialStyles=Z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(g,v,L){return g.animate(v,L)}onStart(g){this._onStartFns.push(g)}onDone(g){this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(v=>{"offset"!=v&&(g[v]=this._finished?this._finalKeyframe[v]:Dr(this.element,v))}),this.currentSnapshot=g}triggerCallback(g){const v="start"==g?this._onStartFns:this._onDoneFns;v.forEach(L=>L()),v.length=0}}class Pe{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ot().toString()),this._cssKeyframesDriver=new sr}validateStyleProperty(g){return Lt(g)}matchesElement(g,v){return He(g,v)}containsElement(g,v){return pt(g,v)}query(g,v,L){return ft(g,v,L)}computeStyle(g,v,L){return window.getComputedStyle(g)[v]}overrideWebAnimationsSupport(g){this._isNativeImpl=g}animate(g,v,L,Z,oe,Ee=[],Ce){if(!Ce&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(g,v,L,Z,oe,Ee);const Qt={duration:L,delay:Z,fill:0==Z?"both":"forwards"};oe&&(Qt.easing=oe);const dn={},pi=Ee.filter($n=>$n instanceof se);dr(L,Z)&&pi.forEach($n=>{let pn=$n.currentSnapshot;Object.keys(pn).forEach(si=>dn[si]=pn[si])});const jn=Ms(g,v=pr(g,v=v.map($n=>Or($n,!1)),dn));return new se(g,v,Qt,jn)}}function Ot(){return me()&&Element.prototype.animate||{}}var bn=q(6019);let _i=(()=>{class K extends j._j{constructor(v,L){super(),this._nextAnimationId=0,this._renderer=v.createRenderer(L.body,{id:"0",encapsulation:B.ifc.None,styles:[],data:{animation:[]}})}build(v){const L=this._nextAnimationId.toString();this._nextAnimationId++;const Z=Array.isArray(v)?(0,j.vP)(v):v;return Ti(this._renderer,null,L,"register",[Z]),new or(L,this._renderer)}}return K.\u0275fac=function(v){return new(v||K)(B.LFG(B.FYo),B.LFG(bn.K0))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac}),K})();class or extends j.LC{constructor(g,v){super(),this._id=g,this._renderer=v}create(g,v){return new Xi(this._id,g,v||{},this._renderer)}}class Xi{constructor(g,v,L,Z){this.id=g,this.element=v,this._renderer=Z,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",L)}_listen(g,v){return this._renderer.listen(this.element,`@@${this.id}:${g}`,v)}_command(g,...v){return Ti(this._renderer,this.element,this.id,g,v)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){var g,v;return null!=(v=null==(g=this._renderer.engine.players[+this.id])?void 0:g.getPosition())?v:0}}function Ti(K,g,v,L,Z){return K.setProperty(g,`@@${v}:${L}`,Z)}const nr="@.disabled";let Yr=(()=>{class K{constructor(v,L,Z){this.delegate=v,this.engine=L,this._zone=Z,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),L.onRemovalComplete=(oe,Ee)=>{const Ce=null==Ee?void 0:Ee.parentNode(oe);Ce&&Ee.removeChild(Ce,oe)}}createRenderer(v,L){const oe=this.delegate.createRenderer(v,L);if(!(v&&L&&L.data&&L.data.animation)){let Qt=this._rendererCache.get(oe);return Qt||(Qt=new qn("",oe,this.engine),this._rendererCache.set(oe,Qt)),Qt}const Ee=L.id,Ce=L.id+"-"+this._currentId;this._currentId++,this.engine.register(Ce,v);const it=Qt=>{Array.isArray(Qt)?Qt.forEach(it):this.engine.registerTrigger(Ee,Ce,v,Qt.name,Qt)};return L.data.animation.forEach(it),new io(this,Ce,oe,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(v,L,Z){v>=0&&v<this._microtaskId?this._zone.run(()=>L(Z)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(oe=>{const[Ee,Ce]=oe;Ee(Ce)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([L,Z]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return K.\u0275fac=function(v){return new(v||K)(B.LFG(B.FYo),B.LFG(Os),B.LFG(B.R0b))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac}),K})();class qn{constructor(g,v,L){this.namespaceId=g,this.delegate=v,this.engine=L,this.destroyNode=this.delegate.destroyNode?Z=>v.destroyNode(Z):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(g,v){return this.delegate.createElement(g,v)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,v){this.delegate.appendChild(g,v),this.engine.onInsert(this.namespaceId,v,g,!1)}insertBefore(g,v,L,Z=!0){this.delegate.insertBefore(g,v,L),this.engine.onInsert(this.namespaceId,v,g,Z)}removeChild(g,v,L){this.engine.onRemove(this.namespaceId,v,this.delegate,L)}selectRootElement(g,v){return this.delegate.selectRootElement(g,v)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,v,L,Z){this.delegate.setAttribute(g,v,L,Z)}removeAttribute(g,v,L){this.delegate.removeAttribute(g,v,L)}addClass(g,v){this.delegate.addClass(g,v)}removeClass(g,v){this.delegate.removeClass(g,v)}setStyle(g,v,L,Z){this.delegate.setStyle(g,v,L,Z)}removeStyle(g,v,L){this.delegate.removeStyle(g,v,L)}setProperty(g,v,L){"@"==v.charAt(0)&&v==nr?this.disableAnimations(g,!!L):this.delegate.setProperty(g,v,L)}setValue(g,v){this.delegate.setValue(g,v)}listen(g,v,L){return this.delegate.listen(g,v,L)}disableAnimations(g,v){this.engine.disableAnimations(g,v)}}class io extends qn{constructor(g,v,L,Z){super(v,L,Z),this.factory=g,this.namespaceId=v}setProperty(g,v,L){"@"==v.charAt(0)?"."==v.charAt(1)&&v==nr?this.disableAnimations(g,L=void 0===L||!!L):this.engine.process(this.namespaceId,g,v.substr(1),L):this.delegate.setProperty(g,v,L)}listen(g,v,L){if("@"==v.charAt(0)){const Z=function(K){switch(K){case"body":return document.body;case"document":return document;case"window":return window;default:return K}}(g);let oe=v.substr(1),Ee="";return"@"!=oe.charAt(0)&&([oe,Ee]=function(K){const g=K.indexOf(".");return[K.substring(0,g),K.substr(g+1)]}(oe)),this.engine.listen(this.namespaceId,Z,oe,Ee,Ce=>{this.factory.scheduleListenerCallback(Ce._data||-1,L,Ce)})}return this.delegate.listen(g,v,L)}}let Ua=(()=>{class K extends Os{constructor(v,L,Z){super(v.body,L,Z)}ngOnDestroy(){this.flush()}}return K.\u0275fac=function(v){return new(v||K)(B.LFG(bn.K0),B.LFG(Ze),B.LFG(en))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac}),K})();const zt=new B.OlP("AnimationModuleType"),Hi=[{provide:j._j,useClass:_i},{provide:en,useFactory:function(){return new Sn}},{provide:Os,useClass:Ua},{provide:B.FYo,useFactory:function(K,g,v){return new Yr(K,g,v)},deps:[y.se,Os,B.R0b]}],za=[{provide:Ze,useFactory:function(){return"function"==typeof Ot()?new Pe:new sr}},{provide:zt,useValue:"BrowserAnimations"},...Hi],wt=[{provide:Ze,useClass:At},{provide:zt,useValue:"NoopAnimations"},...Hi];let rs=(()=>{class K{static withConfig(v){return{ngModule:K,providers:v.disableAnimations?wt:za}}}return K.\u0275fac=function(v){return new(v||K)},K.\u0275mod=B.oAB({type:K}),K.\u0275inj=B.cJS({providers:za,imports:[y.b2]}),K})()},5427:(sn,at,q)=>{"use strict";q.d(at,{b2:()=>Wr,H7:()=>Je,t6:()=>De,q6:()=>er,se:()=>Vt});var B=q(6019),y=q(3668);class j extends B.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends j{static makeCurrent(){(0,B.HT)(new me)}onAndCancel(ke,he,Le){return ke.addEventListener(he,Le,!1),()=>{ke.removeEventListener(he,Le,!1)}}dispatchEvent(ke,he){ke.dispatchEvent(he)}remove(ke){ke.parentNode&&ke.parentNode.removeChild(ke)}createElement(ke,he){return(he=he||this.getDefaultDocument()).createElement(ke)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ke){return ke.nodeType===Node.ELEMENT_NODE}isShadowRoot(ke){return ke instanceof DocumentFragment}getGlobalEventTarget(ke,he){return"window"===he?window:"document"===he?ke:"body"===he?ke.body:null}getBaseHref(ke){const he=(ce=ce||document.querySelector("base"),ce?ce.getAttribute("href"):null);return null==he?null:function($e){Se=Se||document.createElement("a"),Se.setAttribute("href",$e);const ke=Se.pathname;return"/"===ke.charAt(0)?ke:`/${ke}`}(he)}resetBaseElement(){ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(ke){return(0,B.Mx)(document.cookie,ke)}}let Se,ce=null;const Ie=new y.OlP("TRANSITION_ID"),Ge=[{provide:y.ip1,useFactory:function($e,ke,he){return()=>{he.get(y.CZH).donePromise.then(()=>{const Le=(0,B.q)(),dt=ke.querySelectorAll(`style[ng-transition="${$e}"]`);for(let _n=0;_n<dt.length;_n++)Le.remove(dt[_n])})}},deps:[Ie,B.K0,y.zs3],multi:!0}];class E{static init(){(0,y.VLi)(new E)}addToWindow(ke){y.dqk.getAngularTestability=(Le,dt=!0)=>{const _n=ke.findTestabilityInTree(Le,dt);if(null==_n)throw new Error("Could not find testability for element.");return _n},y.dqk.getAllAngularTestabilities=()=>ke.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>ke.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(Le=>{const dt=y.dqk.getAllAngularTestabilities();let _n=dt.length,nt=!1;const ye=function(le){nt=nt||le,_n--,0==_n&&Le(nt)};dt.forEach(function(le){le.whenStable(ye)})})}findTestabilityInTree(ke,he,Le){if(null==he)return null;const dt=ke.getTestability(he);return null!=dt?dt:Le?(0,B.q)().isShadowRoot(he)?this.findTestabilityInTree(ke,he.host,!0):this.findTestabilityInTree(ke,he.parentElement,!0):null}}let $=(()=>{class $e{build(){return new XMLHttpRequest}}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const J=new y.OlP("EventManagerPlugins");let de=(()=>{class $e{constructor(he,Le){this._zone=Le,this._eventNameToPlugin=new Map,he.forEach(dt=>dt.manager=this),this._plugins=he.slice().reverse()}addEventListener(he,Le,dt){return this._findPluginFor(Le).addEventListener(he,Le,dt)}addGlobalEventListener(he,Le,dt){return this._findPluginFor(Le).addGlobalEventListener(he,Le,dt)}getZone(){return this._zone}_findPluginFor(he){const Le=this._eventNameToPlugin.get(he);if(Le)return Le;const dt=this._plugins;for(let _n=0;_n<dt.length;_n++){const nt=dt[_n];if(nt.supports(he))return this._eventNameToPlugin.set(he,nt),nt}throw new Error(`No event manager plugin found for event ${he}`)}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(J),y.LFG(y.R0b))},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class Ae{constructor(ke){this._doc=ke}addGlobalEventListener(ke,he,Le){const dt=(0,B.q)().getGlobalEventTarget(this._doc,ke);if(!dt)throw new Error(`Unsupported event target ${dt} for event ${he}`);return this.addEventListener(dt,he,Le)}}let Be=(()=>{class $e{constructor(){this._stylesSet=new Set}addStyles(he){const Le=new Set;he.forEach(dt=>{this._stylesSet.has(dt)||(this._stylesSet.add(dt),Le.add(dt))}),this.onStylesAdded(Le)}onStylesAdded(he){}getAllStyles(){return Array.from(this._stylesSet)}}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),_e=(()=>{class $e extends Be{constructor(he){super(),this._doc=he,this._hostNodes=new Map,this._hostNodes.set(he.head,[])}_addStylesToHost(he,Le,dt){he.forEach(_n=>{const nt=this._doc.createElement("style");nt.textContent=_n,dt.push(Le.appendChild(nt))})}addHost(he){const Le=[];this._addStylesToHost(this._stylesSet,he,Le),this._hostNodes.set(he,Le)}removeHost(he){const Le=this._hostNodes.get(he);Le&&Le.forEach(st),this._hostNodes.delete(he)}onStylesAdded(he){this._hostNodes.forEach((Le,dt)=>{this._addStylesToHost(he,dt,Le)})}ngOnDestroy(){this._hostNodes.forEach(he=>he.forEach(st))}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(B.K0))},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})();function st($e){(0,B.q)().remove($e)}const Lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xe=/%COMP%/g;function Qe($e,ke,he){for(let Le=0;Le<ke.length;Le++){let dt=ke[Le];Array.isArray(dt)?Qe($e,dt,he):(dt=dt.replace(Xe,$e),he.push(dt))}return he}function ut($e){return ke=>{if("__ngUnwrap__"===ke)return $e;!1===$e(ke)&&(ke.preventDefault(),ke.returnValue=!1)}}let Vt=(()=>{class $e{constructor(he,Le,dt){this.eventManager=he,this.sharedStylesHost=Le,this.appId=dt,this.rendererByCompId=new Map,this.defaultRenderer=new yt(he)}createRenderer(he,Le){if(!he||!Le)return this.defaultRenderer;switch(Le.encapsulation){case y.ifc.Emulated:{let dt=this.rendererByCompId.get(Le.id);return dt||(dt=new lr(this.eventManager,this.sharedStylesHost,Le,this.appId),this.rendererByCompId.set(Le.id,dt)),dt.applyToHost(he),dt}case 1:case y.ifc.ShadowDom:return new Ln(this.eventManager,this.sharedStylesHost,he,Le);default:if(!this.rendererByCompId.has(Le.id)){const dt=Qe(Le.id,Le.styles,[]);this.sharedStylesHost.addStyles(dt),this.rendererByCompId.set(Le.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(de),y.LFG(_e),y.LFG(y.AFp))},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class yt{constructor(ke){this.eventManager=ke,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ke,he){return he?document.createElementNS(Lt[he]||he,ke):document.createElement(ke)}createComment(ke){return document.createComment(ke)}createText(ke){return document.createTextNode(ke)}appendChild(ke,he){ke.appendChild(he)}insertBefore(ke,he,Le){ke&&ke.insertBefore(he,Le)}removeChild(ke,he){ke&&ke.removeChild(he)}selectRootElement(ke,he){let Le="string"==typeof ke?document.querySelector(ke):ke;if(!Le)throw new Error(`The selector "${ke}" did not match any elements`);return he||(Le.textContent=""),Le}parentNode(ke){return ke.parentNode}nextSibling(ke){return ke.nextSibling}setAttribute(ke,he,Le,dt){if(dt){he=dt+":"+he;const _n=Lt[dt];_n?ke.setAttributeNS(_n,he,Le):ke.setAttribute(he,Le)}else ke.setAttribute(he,Le)}removeAttribute(ke,he,Le){if(Le){const dt=Lt[Le];dt?ke.removeAttributeNS(dt,he):ke.removeAttribute(`${Le}:${he}`)}else ke.removeAttribute(he)}addClass(ke,he){ke.classList.add(he)}removeClass(ke,he){ke.classList.remove(he)}setStyle(ke,he,Le,dt){dt&(y.JOm.DashCase|y.JOm.Important)?ke.style.setProperty(he,Le,dt&y.JOm.Important?"important":""):ke.style[he]=Le}removeStyle(ke,he,Le){Le&y.JOm.DashCase?ke.style.removeProperty(he):ke.style[he]=""}setProperty(ke,he,Le){ke[he]=Le}setValue(ke,he){ke.nodeValue=he}listen(ke,he,Le){return"string"==typeof ke?this.eventManager.addGlobalEventListener(ke,he,ut(Le)):this.eventManager.addEventListener(ke,he,ut(Le))}}class lr extends yt{constructor(ke,he,Le,dt){super(ke),this.component=Le;const _n=Qe(dt+"-"+Le.id,Le.styles,[]);he.addStyles(_n),this.contentAttr="_ngcontent-%COMP%".replace(Xe,dt+"-"+Le.id),this.hostAttr="_nghost-%COMP%".replace(Xe,dt+"-"+Le.id)}applyToHost(ke){super.setAttribute(ke,this.hostAttr,"")}createElement(ke,he){const Le=super.createElement(ke,he);return super.setAttribute(Le,this.contentAttr,""),Le}}class Ln extends yt{constructor(ke,he,Le,dt){super(ke),this.sharedStylesHost=he,this.hostEl=Le,this.shadowRoot=Le.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _n=Qe(dt.id,dt.styles,[]);for(let nt=0;nt<_n.length;nt++){const ye=document.createElement("style");ye.textContent=_n[nt],this.shadowRoot.appendChild(ye)}}nodeOrShadowRoot(ke){return ke===this.hostEl?this.shadowRoot:ke}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ke,he){return super.appendChild(this.nodeOrShadowRoot(ke),he)}insertBefore(ke,he,Le){return super.insertBefore(this.nodeOrShadowRoot(ke),he,Le)}removeChild(ke,he){return super.removeChild(this.nodeOrShadowRoot(ke),he)}parentNode(ke){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ke)))}}let vn=(()=>{class $e extends Ae{constructor(he){super(he)}supports(he){return!0}addEventListener(he,Le,dt){return he.addEventListener(Le,dt,!1),()=>this.removeEventListener(he,Le,dt)}removeEventListener(he,Le,dt){return he.removeEventListener(Le,dt)}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(B.K0))},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const En=["alt","control","meta","shift"],zi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Oi={alt:$e=>$e.altKey,control:$e=>$e.ctrlKey,meta:$e=>$e.metaKey,shift:$e=>$e.shiftKey};let Gi=(()=>{class $e extends Ae{constructor(he){super(he)}supports(he){return null!=$e.parseEventName(he)}addEventListener(he,Le,dt){const _n=$e.parseEventName(Le),nt=$e.eventCallback(_n.fullKey,dt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,B.q)().onAndCancel(he,_n.domEventName,nt))}static parseEventName(he){const Le=he.toLowerCase().split("."),dt=Le.shift();if(0===Le.length||"keydown"!==dt&&"keyup"!==dt)return null;const _n=$e._normalizeKey(Le.pop());let nt="";if(En.forEach(le=>{const fe=Le.indexOf(le);fe>-1&&(Le.splice(fe,1),nt+=le+".")}),nt+=_n,0!=Le.length||0===_n.length)return null;const ye={};return ye.domEventName=dt,ye.fullKey=nt,ye}static getEventFullKey(he){let Le="",dt=function($e){let ke=$e.key;if(null==ke){if(ke=$e.keyIdentifier,null==ke)return"Unidentified";ke.startsWith("U+")&&(ke=String.fromCharCode(parseInt(ke.substring(2),16)),3===$e.location&&cr.hasOwnProperty(ke)&&(ke=cr[ke]))}return zi[ke]||ke}(he);return dt=dt.toLowerCase()," "===dt?dt="space":"."===dt&&(dt="dot"),En.forEach(_n=>{_n!=dt&&Oi[_n](he)&&(Le+=_n+".")}),Le+=dt,Le}static eventCallback(he,Le,dt){return _n=>{$e.getEventFullKey(_n)===he&&dt.runGuarded(()=>Le(_n))}}static _normalizeKey(he){return"esc"===he?"escape":he}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(B.K0))},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const er=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:B.bD},{provide:y.g9A,useValue:function(){me.makeCurrent(),E.init()},multi:!0},{provide:B.K0,useFactory:function(){return(0,y.RDi)(document),document},deps:[]}]),Fr=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function(){return new y.qLn},deps:[]},{provide:J,useClass:vn,multi:!0,deps:[B.K0,y.R0b,y.Lbi]},{provide:J,useClass:Gi,multi:!0,deps:[B.K0]},{provide:Vt,useClass:Vt,deps:[de,_e,y.AFp]},{provide:y.FYo,useExisting:Vt},{provide:Be,useExisting:_e},{provide:_e,useClass:_e,deps:[B.K0]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b]},{provide:de,useClass:de,deps:[J,y.R0b]},{provide:B.JF,useClass:$,deps:[]}];let Wr=(()=>{class $e{constructor(he){if(he)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(he){return{ngModule:$e,providers:[{provide:y.AFp,useValue:he.appId},{provide:Ie,useExisting:y.AFp},Ge]}}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG($e,12))},$e.\u0275mod=y.oAB({type:$e}),$e.\u0275inj=y.cJS({providers:Fr,imports:[B.ez,y.hGG]}),$e})();"undefined"!=typeof window&&window;const fn={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Mn=new y.OlP("HammerGestureConfig"),Wi=new y.OlP("HammerLoader");let Rt=(()=>{class $e{constructor(){this.events=[],this.overrides={}}buildHammer(he){const Le=new Hammer(he,this.options);Le.get("pinch").set({enable:!0}),Le.get("rotate").set({enable:!0});for(const dt in this.overrides)Le.get(dt).set(this.overrides[dt]);return Le}}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),Ve=(()=>{class $e extends Ae{constructor(he,Le,dt,_n){super(he),this._config=Le,this.console=dt,this.loader=_n,this._loaderPromise=null}supports(he){return!(!fn.hasOwnProperty(he.toLowerCase())&&!this.isCustomEvent(he)||!window.Hammer&&!this.loader)}addEventListener(he,Le,dt){const _n=this.manager.getZone();if(Le=Le.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let nt=!1,ye=()=>{nt=!0};return this._loaderPromise.then(()=>{window.Hammer?nt||(ye=this.addEventListener(he,Le,dt)):ye=()=>{}}).catch(()=>{ye=()=>{}}),()=>{ye()}}return _n.runOutsideAngular(()=>{const nt=this._config.buildHammer(he),ye=function(le){_n.runGuarded(function(){dt(le)})};return nt.on(Le,ye),()=>{nt.off(Le,ye),"function"==typeof nt.destroy&&nt.destroy()}})}isCustomEvent(he){return this._config.events.indexOf(he)>-1}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(B.K0),y.LFG(Mn),y.LFG(y.c2e),y.LFG(Wi,8))},$e.\u0275prov=y.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),De=(()=>{class $e{}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275mod=y.oAB({type:$e}),$e.\u0275inj=y.cJS({providers:[{provide:J,useClass:Ve,multi:!0,deps:[B.K0,Mn,y.c2e,[new y.FiY,Wi]]},{provide:Mn,useClass:Rt,deps:[]}]}),$e})(),Je=(()=>{class $e{}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=y.Yz7({token:$e,factory:function(he){let Le=null;return Le=he?new(he||$e):y.LFG(cn),Le},providedIn:"root"}),$e})(),cn=(()=>{class $e extends Je{constructor(he){super(),this._doc=he}sanitize(he,Le){if(null==Le)return null;switch(he){case y.q3G.NONE:return Le;case y.q3G.HTML:return(0,y.qzn)(Le,"HTML")?(0,y.z3N)(Le):(0,y.EiD)(this._doc,String(Le)).toString();case y.q3G.STYLE:return(0,y.qzn)(Le,"Style")?(0,y.z3N)(Le):Le;case y.q3G.SCRIPT:if((0,y.qzn)(Le,"Script"))return(0,y.z3N)(Le);throw new Error("unsafe value used in a script context");case y.q3G.URL:return(0,y.yhl)(Le),(0,y.qzn)(Le,"URL")?(0,y.z3N)(Le):(0,y.mCW)(String(Le));case y.q3G.RESOURCE_URL:if((0,y.qzn)(Le,"ResourceURL"))return(0,y.z3N)(Le);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${he} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(he){return(0,y.JVY)(he)}bypassSecurityTrustStyle(he){return(0,y.L6k)(he)}bypassSecurityTrustScript(he){return(0,y.eBb)(he)}bypassSecurityTrustUrl(he){return(0,y.LAX)(he)}bypassSecurityTrustResourceUrl(he){return(0,y.pB0)(he)}}return $e.\u0275fac=function(he){return new(he||$e)(y.LFG(B.K0))},$e.\u0275prov=y.Yz7({token:$e,factory:function(he){let Le=null;return Le=he?new he:function($e){return new cn($e.get(B.K0))}(y.LFG(y.zs3)),Le},providedIn:"root"}),$e})()},5862:(sn,at,q)=>{"use strict";q.d(at,{Bz:()=>hl,lC:()=>Co});var B=q(6019),y=q(3668),j=q(8305),me=q(886),ce=q(7867),Oe=q(4623),Se=q(2937),Ye=q(7613),Ie=q(2857),Me=q(8889),Ge=q(8395);function J(T,w,x){T?(0,Ge.f)(x,T,w):w()}const Ae=(0,q(4893).d)(T=>function(){T(this),this.name="EmptyError",this.message="no elements in sequence"});var Be=q(7908),_e=q(9947);function st(){return(0,_e.e)((T,w)=>{let x=null;T._refCount++;const O=new Me.Q(w,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(x=null);const z=T._connection,ie=x;x=null,z&&(!ie||z===ie)&&z.unsubscribe(),w.unsubscribe()});T.subscribe(O),O.closed||(x=T.connect())})}class Lt extends j.y{constructor(w,x){super(),this.source=w,this.subjectFactory=x,this._subject=null,this._refCount=0,this._connection=null,(0,_e.A)(w)&&(this.lift=w.lift)}_subscribe(w){return this.getSubject().subscribe(w)}getSubject(){const w=this._subject;return(!w||w.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:w}=this;this._subject=this._connection=null,null==w||w.unsubscribe()}connect(){let w=this._connection;if(!w){w=this._connection=new Be.w0;const x=this.getSubject();w.add(this.source.subscribe(new Me.Q(x,void 0,()=>{this._teardown(),x.complete()},O=>{this._teardown(),x.error(O)},()=>this._teardown()))),w.closed&&(this._connection=null,w=Be.w0.EMPTY)}return w}refCount(){return st()(this)}}var Xe=q(2997),He=q(4499),pt=q(1404),ft=q(5048),xt=q(5583),At=q(273),Ze=q(9985);function Qe(T,w){return(0,_e.e)((x,O)=>{let z=null,ie=0,be=!1;const Fe=()=>be&&!z&&O.complete();x.subscribe(new Me.Q(O,Ct=>{null==z||z.unsubscribe();let xn=0;const Hn=ie++;(0,Ze.Xf)(T(Ct,Hn)).subscribe(z=new Me.Q(O,On=>O.next(w?w(Ct,On,Hn,xn++):On),()=>{z=null,Fe()}))},()=>{be=!0,Fe()}))})}function ut(T,w,x,O,z){return(ie,be)=>{let Fe=x,Ct=w,xn=0;ie.subscribe(new Me.Q(be,Hn=>{const On=xn++;Ct=Fe?T(Ct,Hn,On):(Fe=!0,Hn),O&&be.next(Ct)},z&&(()=>{Fe&&be.next(Ct),be.complete()})))}}function bt(T,w){return(0,_e.e)(ut(T,w,arguments.length>=2,!0))}var Vt=q(461);function yt(T){return T<=0?()=>xt.E:(0,_e.e)((w,x)=>{let O=[];w.subscribe(new Me.Q(x,z=>{O.push(z),T<O.length&&O.shift()},()=>{for(const z of O)x.next(z);x.complete()},void 0,()=>{O=null}))})}function ni(T=Ri){return(0,_e.e)((w,x)=>{let O=!1;w.subscribe(new Me.Q(x,z=>{O=!0,x.next(z)},()=>O?x.complete():x.error(T())))})}function Ri(){return new Ae}function lr(T){return(0,_e.e)((w,x)=>{let O=!1;w.subscribe(new Me.Q(x,z=>{O=!0,x.next(z)},()=>{O||x.next(T),x.complete()}))})}var vn=q(9468);function En(T,w){const x=arguments.length>=2;return O=>O.pipe(T?(0,Vt.h)((z,ie)=>T(z,ie,O)):Oe.y,(0,vn.q)(1),x?lr(w):ni(()=>new Ae))}var on=q(4753),zi=q(3970),cr=q(2835),Oi=q(4799),Gi=q(5724),ai=q(7384),Or=q(423),fs=q(5373);class Mr{constructor(w,x){this.id=w,this.url=x}}class Sr extends Mr{constructor(w,x,O="imperative",z=null){super(w,x),this.navigationTrigger=O,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class er extends Mr{constructor(w,x,O){super(w,x),this.urlAfterRedirects=O}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fr extends Mr{constructor(w,x,O){super(w,x),this.reason=O}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wr extends Mr{constructor(w,x,O){super(w,x),this.error=O}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jr extends Mr{constructor(w,x,O,z){super(w,x),this.urlAfterRedirects=O,this.state=z}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ps extends Mr{constructor(w,x,O,z){super(w,x),this.urlAfterRedirects=O,this.state=z}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wn extends Mr{constructor(w,x,O,z,ie){super(w,x),this.urlAfterRedirects=O,this.state=z,this.shouldActivate=ie}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ur extends Mr{constructor(w,x,O,z){super(w,x),this.urlAfterRedirects=O,this.state=z}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ls extends Mr{constructor(w,x,O,z){super(w,x),this.urlAfterRedirects=O,this.state=z}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cr{constructor(w){this.route=w}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ps{constructor(w){this.route=w}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dr{constructor(w){this.snapshot=w}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pr{constructor(w){this.snapshot=w}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ii{constructor(w){this.snapshot=w}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dr{constructor(w){this.snapshot=w}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(w,x,O){this.routerEvent=w,this.position=x,this.anchor=O}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class In{constructor(w){this.params=w||{}}has(w){return Object.prototype.hasOwnProperty.call(this.params,w)}get(w){if(this.has(w)){const x=this.params[w];return Array.isArray(x)?x[0]:x}return null}getAll(w){if(this.has(w)){const x=this.params[w];return Array.isArray(x)?x:[x]}return[]}get keys(){return Object.keys(this.params)}}function ki(T){return new In(T)}const Nr="ngNavigationCancelingError";function fi(T){const w=Error("NavigationCancelingError: "+T);return w[Nr]=!0,w}function Bi(T,w,x){const O=x.path.split("/");if(O.length>T.length||"full"===x.pathMatch&&(w.hasChildren()||O.length<T.length))return null;const z={};for(let ie=0;ie<O.length;ie++){const be=O[ie],Fe=T[ie];if(be.startsWith(":"))z[be.substring(1)]=Fe;else if(be!==Fe.path)return null}return{consumed:T.slice(0,O.length),posParams:z}}function Kn(T,w){const x=T?Object.keys(T):void 0,O=w?Object.keys(w):void 0;if(!x||!O||x.length!=O.length)return!1;let z;for(let ie=0;ie<x.length;ie++)if(z=x[ie],!mt(T[z],w[z]))return!1;return!0}function mt(T,w){if(Array.isArray(T)&&Array.isArray(w)){if(T.length!==w.length)return!1;const x=[...T].sort(),O=[...w].sort();return x.every((z,ie)=>O[ie]===z)}return T===w}function We(T){return Array.prototype.concat.apply([],T)}function et(T){return T.length>0?T[T.length-1]:null}function fn(T,w){for(const x in T)T.hasOwnProperty(x)&&w(T[x],x)}function Mn(T){return(0,y.CqO)(T)?T:(0,y.QGY)(T)?(0,ce.D)(Promise.resolve(T)):(0,Xe.of)(T)}const Rt={exact:function gt(T,w,x){if(!nt(T.segments,w.segments)||!ke(T.segments,w.segments,x)||T.numberOfChildren!==w.numberOfChildren)return!1;for(const O in w.children)if(!T.children[O]||!gt(T.children[O],w.children[O],x))return!1;return!0},subset:ri},Ve={exact:function(T,w){return Kn(T,w)},subset:function(T,w){return Object.keys(w).length<=Object.keys(T).length&&Object.keys(w).every(x=>mt(T[x],w[x]))},ignored:()=>!0};function De(T,w,x){return Rt[x.paths](T.root,w.root,x.matrixParams)&&Ve[x.queryParams](T.queryParams,w.queryParams)&&!("exact"===x.fragment&&T.fragment!==w.fragment)}function ri(T,w,x){return $e(T,w,w.segments,x)}function $e(T,w,x,O){if(T.segments.length>x.length){const z=T.segments.slice(0,x.length);return!(!nt(z,x)||w.hasChildren()||!ke(z,x,O))}if(T.segments.length===x.length){if(!nt(T.segments,x)||!ke(T.segments,x,O))return!1;for(const z in w.children)if(!T.children[z]||!ri(T.children[z],w.children[z],O))return!1;return!0}{const z=x.slice(0,T.segments.length),ie=x.slice(T.segments.length);return!!(nt(T.segments,z)&&ke(T.segments,z,O)&&T.children[Ht])&&$e(T.children[Ht],w,ie,O)}}function ke(T,w,x){return w.every((O,z)=>Ve[x](T[z].parameters,O.parameters))}class he{constructor(w,x,O){this.root=w,this.queryParams=x,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return rt.serialize(this)}}class Le{constructor(w,x){this.segments=w,this.children=x,this.parent=null,fn(x,(O,z)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return St(this)}}class dt{constructor(w,x){this.path=w,this.parameters=x}get parameterMap(){return this._parameterMap||(this._parameterMap=ki(this.parameters)),this._parameterMap}toString(){return un(this)}}function nt(T,w){return T.length===w.length&&T.every((x,O)=>x.path===w[O].path)}class le{}class fe{parse(w){const x=new Vi(w);return new he(x.parseRootSegment(),x.parseQueryParams(),x.parseFragment())}serialize(w){const x=`/${en(w.root,!0)}`,O=function(T){const w=Object.keys(T).map(x=>{const O=T[x];return Array.isArray(O)?O.map(z=>`${Sn(x)}=${Sn(z)}`).join("&"):`${Sn(x)}=${Sn(O)}`}).filter(x=>!!x);return w.length?`?${w.join("&")}`:""}(w.queryParams);var T;return`${x}${O}${"string"==typeof w.fragment?`#${T=w.fragment,encodeURI(T)}`:""}`}}const rt=new fe;function St(T){return T.segments.map(w=>un(w)).join("/")}function en(T,w){if(!T.hasChildren())return St(T);if(w){const x=T.children[Ht]?en(T.children[Ht],!1):"",O=[];return fn(T.children,(z,ie)=>{ie!==Ht&&O.push(`${ie}:${en(z,!1)}`)}),O.length>0?`${x}(${O.join("//")})`:x}{const x=function(T,w){let x=[];return fn(T.children,(O,z)=>{z===Ht&&(x=x.concat(w(O,z)))}),fn(T.children,(O,z)=>{z!==Ht&&(x=x.concat(w(O,z)))}),x}(T,(O,z)=>z===Ht?[en(T.children[Ht],!1)]:[`${z}:${en(O,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Ht]?`${St(T)}/${x[0]}`:`${St(T)}/(${x.join("//")})`}}function Zn(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sn(T){return Zn(T).replace(/%3B/gi,";")}function xi(T){return Zn(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vr(T){return decodeURIComponent(T)}function Br(T){return vr(T.replace(/\+/g,"%20"))}function un(T){return`${xi(T.path)}${function(T){return Object.keys(T).map(w=>`;${xi(w)}=${xi(T[w])}`).join("")}(T.parameters)}`}const ks=/^[^\/()?;=#]+/;function Vr(T){const w=T.match(ks);return w?w[0]:""}const Tr=/^[^=?&#]+/,ms=/^[^&#]+/;class Vi{constructor(w){this.url=w,this.remaining=w}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){const w={};if(this.consumeOptional("?"))do{this.parseQueryParam(w)}while(this.consumeOptional("&"));return w}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const w=[];for(this.peekStartsWith("(")||w.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),w.push(this.parseSegment());let x={};this.peekStartsWith("/(")&&(this.capture("/"),x=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(w.length>0||Object.keys(x).length>0)&&(O[Ht]=new Le(w,x)),O}parseSegment(){const w=Vr(this.remaining);if(""===w&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(w),new dt(vr(w),this.parseMatrixParams())}parseMatrixParams(){const w={};for(;this.consumeOptional(";");)this.parseParam(w);return w}parseParam(w){const x=Vr(this.remaining);if(!x)return;this.capture(x);let O="";if(this.consumeOptional("=")){const z=Vr(this.remaining);z&&(O=z,this.capture(O))}w[vr(x)]=vr(O)}parseQueryParam(w){const x=function(T){const w=T.match(Tr);return w?w[0]:""}(this.remaining);if(!x)return;this.capture(x);let O="";if(this.consumeOptional("=")){const be=function(T){const w=T.match(ms);return w?w[0]:""}(this.remaining);be&&(O=be,this.capture(O))}const z=Br(x),ie=Br(O);if(w.hasOwnProperty(z)){let be=w[z];Array.isArray(be)||(be=[be],w[z]=be),be.push(ie)}else w[z]=ie}parseParens(w){const x={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Vr(this.remaining),z=this.remaining[O.length];if("/"!==z&&")"!==z&&";"!==z)throw new Error(`Cannot parse url '${this.url}'`);let ie;O.indexOf(":")>-1?(ie=O.substr(0,O.indexOf(":")),this.capture(ie),this.capture(":")):w&&(ie=Ht);const be=this.parseChildren();x[ie]=1===Object.keys(be).length?be[Ht]:new Le([],be),this.consumeOptional("//")}return x}peekStartsWith(w){return this.remaining.startsWith(w)}consumeOptional(w){return!!this.peekStartsWith(w)&&(this.remaining=this.remaining.substring(w.length),!0)}capture(w){if(!this.consumeOptional(w))throw new Error(`Expected "${w}".`)}}class Bs{constructor(w){this._root=w}get root(){return this._root.value}parent(w){const x=this.pathFromRoot(w);return x.length>1?x[x.length-2]:null}children(w){const x=Rs(w,this._root);return x?x.children.map(O=>O.value):[]}firstChild(w){const x=Rs(w,this._root);return x&&x.children.length>0?x.children[0].value:null}siblings(w){const x=vs(w,this._root);return x.length<2?[]:x[x.length-2].children.map(z=>z.value).filter(z=>z!==w)}pathFromRoot(w){return vs(w,this._root).map(x=>x.value)}}function Rs(T,w){if(T===w.value)return w;for(const x of w.children){const O=Rs(T,x);if(O)return O}return null}function vs(T,w){if(T===w.value)return[w];for(const x of w.children){const O=vs(T,x);if(O.length)return O.unshift(w),O}return[]}class es{constructor(w,x){this.value=w,this.children=x}toString(){return`TreeNode(${this.value})`}}function Kr(T){const w={};return T&&T.children.forEach(x=>w[x.value.outlet]=x),w}class ls extends Bs{constructor(w,x){super(w),this.snapshot=x,fo(this,w)}toString(){return this.snapshot.toString()}}function ts(T,w){const x=function(T,w){const be=new Vs([],{},{},"",{},Ht,w,null,T.root,-1,{});return new ho("",new es(be,[]))}(T,w),O=new He.X([new dt("",{})]),z=new He.X({}),ie=new He.X({}),be=new He.X({}),Fe=new He.X(""),Ct=new Ar(O,z,be,Fe,ie,Ht,w,x.root);return Ct.snapshot=x.root,new ls(new es(Ct,[]),x)}class Ar{constructor(w,x,O,z,ie,be,Fe,Ct){this.url=w,this.params=x,this.queryParams=O,this.fragment=z,this.data=ie,this.outlet=be,this.component=Fe,this._futureSnapshot=Ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,on.U)(w=>ki(w)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,on.U)(w=>ki(w)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xr(T,w="emptyOnly"){const x=T.pathFromRoot;let O=0;if("always"!==w)for(O=x.length-1;O>=1;){const z=x[O],ie=x[O-1];if(z.routeConfig&&""===z.routeConfig.path)O--;else{if(ie.component)break;O--}}return function(T){return T.reduce((w,x)=>({params:Cn(Cn({},w.params),x.params),data:Cn(Cn({},w.data),x.data),resolve:Cn(Cn({},w.resolve),x._resolvedData)}),{params:{},data:{},resolve:{}})}(x.slice(O))}class Vs{constructor(w,x,O,z,ie,be,Fe,Ct,xn,Hn,On){this.url=w,this.params=x,this.queryParams=O,this.fragment=z,this.data=ie,this.outlet=be,this.component=Fe,this.routeConfig=Ct,this._urlSegment=xn,this._lastPathIndex=Hn,this._resolve=On}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ho extends Bs{constructor(w,x){super(x),this.url=w,fo(this,x)}toString(){return Zr(this._root)}}function fo(T,w){w.value._routerState=T,w.children.forEach(x=>fo(T,x))}function Zr(T){const w=T.children.length>0?` { ${T.children.map(Zr).join(", ")} } `:"";return`${T.value}${w}`}function po(T){if(T.snapshot){const w=T.snapshot,x=T._futureSnapshot;T.snapshot=x,Kn(w.queryParams,x.queryParams)||T.queryParams.next(x.queryParams),w.fragment!==x.fragment&&T.fragment.next(x.fragment),Kn(w.params,x.params)||T.params.next(x.params),function(T,w){if(T.length!==w.length)return!1;for(let x=0;x<T.length;++x)if(!Kn(T[x],w[x]))return!1;return!0}(w.url,x.url)||T.url.next(x.url),Kn(w.data,x.data)||T.data.next(x.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function Eo(T,w){const x=Kn(T.params,w.params)&&function(T,w){return nt(T,w)&&T.every((x,O)=>Kn(x.parameters,w[O].parameters))}(T.url,w.url);return x&&!(!T.parent!=!w.parent)&&(!T.parent||Eo(T.parent,w.parent))}function we(T,w,x){if(x&&T.shouldReuseRoute(w.value,x.value.snapshot)){const O=x.value;O._futureSnapshot=w.value;const z=function(T,w,x){return w.children.map(O=>{for(const z of x.children)if(T.shouldReuseRoute(O.value,z.value.snapshot))return we(T,O,z);return we(T,O)})}(T,w,x);return new es(O,z)}{if(T.shouldAttach(w.value)){const ie=T.retrieve(w.value);if(null!==ie){const be=ie.route;return be.value._futureSnapshot=w.value,be.children=w.children.map(Fe=>we(T,Fe)),be}}const O=function(T){return new Ar(new He.X(T.url),new He.X(T.params),new He.X(T.queryParams),new He.X(T.fragment),new He.X(T.data),T.outlet,T.component,T)}(w.value),z=w.children.map(ie=>we(T,ie));return new es(O,z)}}function Te(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function je(T){return"object"==typeof T&&null!=T&&T.outlets}function It(T,w,x,O,z){let ie={};return O&&fn(O,(be,Fe)=>{ie[Fe]=Array.isArray(be)?be.map(Ct=>`${Ct}`):`${be}`}),new he(x.root===T?w:ln(x.root,T,w),ie,z)}function ln(T,w,x){const O={};return fn(T.children,(z,ie)=>{O[ie]=z===w?x:ln(z,w,x)}),new Le(T.segments,O)}class rn{constructor(w,x,O){if(this.isAbsolute=w,this.numberOfDoubleDots=x,this.commands=O,w&&O.length>0&&Te(O[0]))throw new Error("Root segment cannot have matrix parameters");const z=O.find(je);if(z&&z!==et(O))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zi{constructor(w,x,O){this.segmentGroup=w,this.processChildren=x,this.index=O}}function Ms(T,w,x){if(T||(T=new Le([],{})),0===T.segments.length&&T.hasChildren())return to(T,w,x);const O=function(T,w,x){let O=0,z=w;const ie={match:!1,pathIndex:0,commandIndex:0};for(;z<T.segments.length;){if(O>=x.length)return ie;const be=T.segments[z],Fe=x[O];if(je(Fe))break;const Ct=`${Fe}`,xn=O<x.length-1?x[O+1]:null;if(z>0&&void 0===Ct)break;if(Ct&&xn&&"object"==typeof xn&&void 0===xn.outlets){if(!no(Ct,xn,be))return ie;O+=2}else{if(!no(Ct,{},be))return ie;O++}z++}return{match:!0,pathIndex:z,commandIndex:O}}(T,w,x),z=x.slice(O.commandIndex);if(O.match&&O.pathIndex<T.segments.length){const ie=new Le(T.segments.slice(0,O.pathIndex),{});return ie.children[Ht]=new Le(T.segments.slice(O.pathIndex),T.children),to(ie,0,z)}return O.match&&0===z.length?new Le(T.segments,{}):O.match&&!T.hasChildren()?ko(T,w,x):O.match?to(T,0,z):ko(T,w,x)}function to(T,w,x){if(0===x.length)return new Le(T.segments,{});{const O=function(T){return je(T[0])?T[0].outlets:{[Ht]:T}}(x),z={};return fn(O,(ie,be)=>{"string"==typeof ie&&(ie=[ie]),null!==ie&&(z[be]=Ms(T.children[be],w,ie))}),fn(T.children,(ie,be)=>{void 0===O[be]&&(z[be]=ie)}),new Le(T.segments,z)}}function ko(T,w,x){const O=T.segments.slice(0,w);let z=0;for(;z<x.length;){const ie=x[z];if(je(ie)){const Ct=ll(ie.outlets);return new Le(O,Ct)}if(0===z&&Te(x[0])){O.push(new dt(T.segments[w].path,Jo(x[0]))),z++;continue}const be=je(ie)?ie.outlets[Ht]:`${ie}`,Fe=z<x.length-1?x[z+1]:null;be&&Fe&&Te(Fe)?(O.push(new dt(be,Jo(Fe))),z+=2):(O.push(new dt(be,{})),z++)}return new Le(O,{})}function ll(T){const w={};return fn(T,(x,O)=>{"string"==typeof x&&(x=[x]),null!==x&&(w[O]=ko(new Le([],{}),0,x))}),w}function Jo(T){const w={};return fn(T,(x,O)=>w[O]=`${x}`),w}function no(T,w,x){return T==x.path&&Kn(w,x.parameters)}class So{constructor(w,x,O,z){this.routeReuseStrategy=w,this.futureState=x,this.currState=O,this.forwardEvent=z}activate(w){const x=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(x,O,w),po(this.futureState.root),this.activateChildRoutes(x,O,w)}deactivateChildRoutes(w,x,O){const z=Kr(x);w.children.forEach(ie=>{const be=ie.value.outlet;this.deactivateRoutes(ie,z[be],O),delete z[be]}),fn(z,(ie,be)=>{this.deactivateRouteAndItsChildren(ie,O)})}deactivateRoutes(w,x,O){const z=w.value,ie=x?x.value:null;if(z===ie)if(z.component){const be=O.getContext(z.outlet);be&&this.deactivateChildRoutes(w,x,be.children)}else this.deactivateChildRoutes(w,x,O);else ie&&this.deactivateRouteAndItsChildren(x,O)}deactivateRouteAndItsChildren(w,x){w.value.component&&this.routeReuseStrategy.shouldDetach(w.value.snapshot)?this.detachAndStoreRouteSubtree(w,x):this.deactivateRouteAndOutlet(w,x)}detachAndStoreRouteSubtree(w,x){const O=x.getContext(w.value.outlet),z=O&&w.value.component?O.children:x,ie=Kr(w);for(const be of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[be],z);if(O&&O.outlet){const be=O.outlet.detach(),Fe=O.children.onOutletDeactivated();this.routeReuseStrategy.store(w.value.snapshot,{componentRef:be,route:w,contexts:Fe})}}deactivateRouteAndOutlet(w,x){const O=x.getContext(w.value.outlet),z=O&&w.value.component?O.children:x,ie=Kr(w);for(const be of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[be],z);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(w,x,O){const z=Kr(x);w.children.forEach(ie=>{this.activateRoutes(ie,z[ie.value.outlet],O),this.forwardEvent(new Dr(ie.value.snapshot))}),w.children.length&&this.forwardEvent(new pr(w.value.snapshot))}activateRoutes(w,x,O){const z=w.value,ie=x?x.value:null;if(po(z),z===ie)if(z.component){const be=O.getOrCreateContext(z.outlet);this.activateChildRoutes(w,x,be.children)}else this.activateChildRoutes(w,x,O);else if(z.component){const be=O.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Fe=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),be.children.onOutletReAttached(Fe.contexts),be.attachRef=Fe.componentRef,be.route=Fe.route.value,be.outlet&&be.outlet.attach(Fe.componentRef,Fe.route.value),po(Fe.route.value),this.activateChildRoutes(w,null,be.children)}else{const Fe=function(T){for(let w=T.parent;w;w=w.parent){const x=w.routeConfig;if(x&&x._loadedConfig)return x._loadedConfig;if(x&&x.component)return null}return null}(z.snapshot),Ct=Fe?Fe.module.componentFactoryResolver:null;be.attachRef=null,be.route=z,be.resolver=Ct,be.outlet&&be.outlet.activateWith(z,Ct),this.activateChildRoutes(w,null,be.children)}}else this.activateChildRoutes(w,null,O)}}class ba{constructor(w,x){this.routes=w,this.module=x}}function go(T){return"function"==typeof T}function Ys(T){return T instanceof he}const Uo=Symbol("INITIAL_VALUE");function Qo(){return Qe(T=>function(...T){const w=(0,Ye.yG)(T),x=(0,Ye.jO)(T),{args:O,keys:z}=(0,me.D)(T);if(0===O.length)return(0,ce.D)([],w);const ie=new j.y(function(T,w,x=Oe.y){return O=>{J(w,()=>{const{length:z}=T,ie=new Array(z);let be=z,Fe=z;for(let Ct=0;Ct<z;Ct++)J(w,()=>{const xn=(0,ce.D)(T[Ct],w);let Hn=!1;xn.subscribe(new Me.Q(O,On=>{ie[Ct]=On,Hn||(Hn=!0,Fe--),Fe||O.next(x(ie.slice()))},()=>{--be||O.complete()}))},O)},O)}}(O,w,z?be=>(0,Ie.n)(z,be):Oe.y));return x?ie.pipe((0,Se.Z)(x)):ie}(T.map(w=>w.pipe((0,vn.q)(1),(0,zi.O)(Uo)))).pipe(bt((w,x)=>{let O=!1;return x.reduce((z,ie,be)=>z!==Uo?z:(ie===Uo&&(O=!0),O||!1!==ie&&be!==x.length-1&&!Ys(ie)?z:ie),w)},Uo),(0,Vt.h)(w=>w!==Uo),(0,on.U)(w=>Ys(w)?w:!0===w),(0,vn.q)(1)))}class zo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Go,this.attachRef=null}}class Go{constructor(){this.contexts=new Map}onChildOutletCreated(w,x){const O=this.getOrCreateContext(w);O.outlet=x,this.contexts.set(w,O)}onChildOutletDestroyed(w){const x=this.getContext(w);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let x=this.getContext(w);return x||(x=new zo,this.contexts.set(w,x)),x}getContext(w){return this.contexts.get(w)||null}}let Co=(()=>{class T{constructor(x,O,z,ie,be){this.parentContexts=x,this.location=O,this.resolver=z,this.changeDetector=be,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=ie||Ht,x.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const x=this.parentContexts.getContext(this.name);x&&x.route&&(x.attachRef?this.attach(x.attachRef,x.route):this.activateWith(x.route,x.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const x=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(x.instance),x}attach(x,O){this.activated=x,this._activatedRoute=O,this.location.insert(x.hostView),this.attachEvents.emit(x.instance)}deactivate(){if(this.activated){const x=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(x)}}activateWith(x,O){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=x;const be=(O=O||this.resolver).resolveComponentFactory(x._futureSnapshot.routeConfig.component),Fe=this.parentContexts.getOrCreateContext(this.name).children,Ct=new xa(x,Fe,this.location.injector);this.activated=this.location.createComponent(be,this.location.length,Ct),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(x){return new(x||T)(y.Y36(Go),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},T.\u0275dir=y.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class xa{constructor(w,x,O){this.route=w,this.childContexts=x,this.parent=O}get(w,x){return w===Ar?this.route:w===Go?this.childContexts:this.parent.get(w,x)}}let sr=(()=>{class T{}return T.\u0275fac=function(x){return new(x||T)},T.\u0275cmp=y.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(x,O){1&x&&y._UZ(0,"router-outlet")},directives:[Co],encapsulation:2}),T})();function ea(T,w=""){for(let x=0;x<T.length;x++){const O=T[x];Wo(O,k(w,O))}}function Wo(T,w){T.children&&ea(T.children,w)}function k(T,w){return w?T||w.path?T&&!w.path?`${T}/`:!T&&w.path?w.path:`${T}/${w.path}`:"":T}function Q(T){const w=T.children&&T.children.map(Q),x=w?eo(Cn({},T),{children:w}):Cn({},T);return!x.component&&(w||x.loadChildren)&&x.outlet&&x.outlet!==Ht&&(x.component=sr),x}function H(T){return T.outlet||Ht}function se(T,w){const x=T.filter(O=>H(O)===w);return x.push(...T.filter(O=>H(O)!==w)),x}const Pe={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _t(T,w,x){var Fe;if(""===w.path)return"full"===w.pathMatch&&(T.hasChildren()||x.length>0)?Cn({},Pe):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const z=(w.matcher||Bi)(x,T,w);if(!z)return Cn({},Pe);const ie={};fn(z.posParams,(Ct,xn)=>{ie[xn]=Ct.path});const be=z.consumed.length>0?Cn(Cn({},ie),z.consumed[z.consumed.length-1].parameters):ie;return{matched:!0,consumedSegments:z.consumed,lastChild:z.consumed.length,parameters:be,positionalParamSegments:null!=(Fe=z.posParams)?Fe:{}}}function Ot(T,w,x,O,z="corrected"){if(x.length>0&&function(T,w,x){return x.some(O=>Ti(T,w,O)&&H(O)!==Ht)}(T,x,O)){const be=new Le(w,function(T,w,x,O){const z={};z[Ht]=O,O._sourceSegment=T,O._segmentIndexShift=w.length;for(const ie of x)if(""===ie.path&&H(ie)!==Ht){const be=new Le([],{});be._sourceSegment=T,be._segmentIndexShift=w.length,z[H(ie)]=be}return z}(T,w,O,new Le(x,T.children)));return be._sourceSegment=T,be._segmentIndexShift=w.length,{segmentGroup:be,slicedSegments:[]}}if(0===x.length&&function(T,w,x){return x.some(O=>Ti(T,w,O))}(T,x,O)){const be=new Le(T.segments,function(T,w,x,O,z,ie){const be={};for(const Fe of O)if(Ti(T,x,Fe)&&!z[H(Fe)]){const Ct=new Le([],{});Ct._sourceSegment=T,Ct._segmentIndexShift="legacy"===ie?T.segments.length:w.length,be[H(Fe)]=Ct}return Cn(Cn({},z),be)}(T,w,x,O,T.children,z));return be._sourceSegment=T,be._segmentIndexShift=w.length,{segmentGroup:be,slicedSegments:x}}const ie=new Le(T.segments,T.children);return ie._sourceSegment=T,ie._segmentIndexShift=w.length,{segmentGroup:ie,slicedSegments:x}}function Ti(T,w,x){return(!(T.hasChildren()||w.length>0)||"full"!==x.pathMatch)&&""===x.path}function tr(T,w,x,O){return!!(H(T)===O||O!==Ht&&Ti(w,x,T))&&("**"===T.path||_t(w,T,x).matched)}function nr(T,w,x){return 0===w.length&&!T.children[x]}class Yr{constructor(w){this.segmentGroup=w||null}}class qn{constructor(w){this.urlTree=w}}function io(T){return new j.y(w=>w.error(new Yr(T)))}function jo(T){return new j.y(w=>w.error(new qn(T)))}function Do(T){return new j.y(w=>w.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T}'`)))}class na{constructor(w,x,O,z,ie){this.configLoader=x,this.urlSerializer=O,this.urlTree=z,this.config=ie,this.allowRedirects=!0,this.ngModule=w.get(y.h0i)}apply(){const w=Ot(this.urlTree.root,[],[],this.config).segmentGroup,x=new Le(w.segments,w.children);return this.expandSegmentGroup(this.ngModule,this.config,x,Ht).pipe((0,on.U)(ie=>this.createUrlTree(zt(ie),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,cr.K)(ie=>{if(ie instanceof qn)return this.allowRedirects=!1,this.match(ie.urlTree);throw ie instanceof Yr?this.noMatchError(ie):ie}))}match(w){return this.expandSegmentGroup(this.ngModule,this.config,w.root,Ht).pipe((0,on.U)(z=>this.createUrlTree(zt(z),w.queryParams,w.fragment))).pipe((0,cr.K)(z=>{throw z instanceof Yr?this.noMatchError(z):z}))}noMatchError(w){return new Error(`Cannot match any routes. URL Segment: '${w.segmentGroup}'`)}createUrlTree(w,x,O){const z=w.segments.length>0?new Le([],{[Ht]:w}):w;return new he(z,x,O)}expandSegmentGroup(w,x,O,z){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(w,x,O).pipe((0,on.U)(ie=>new Le([],ie))):this.expandSegment(w,O,x,O.segments,z,!0)}expandChildren(w,x,O){const z=[];for(const ie of Object.keys(O.children))"primary"===ie?z.unshift(ie):z.push(ie);return(0,ce.D)(z).pipe((0,Oi.b)(ie=>{const be=O.children[ie],Fe=se(x,ie);return this.expandSegmentGroup(w,Fe,be,ie).pipe((0,on.U)(Ct=>({segment:Ct,outlet:ie})))}),bt((ie,be)=>(ie[be.outlet]=be.segment,ie),{}),function(T,w){const x=arguments.length>=2;return O=>O.pipe(T?(0,Vt.h)((z,ie)=>T(z,ie,O)):Oe.y,yt(1),x?lr(w):ni(()=>new Ae))}())}expandSegment(w,x,O,z,ie,be){return(0,ce.D)(O).pipe((0,Oi.b)(Fe=>this.expandSegmentAgainstRoute(w,x,O,Fe,z,ie,be).pipe((0,cr.K)(xn=>{if(xn instanceof Yr)return(0,Xe.of)(null);throw xn}))),En(Fe=>!!Fe),(0,cr.K)((Fe,Ct)=>{if(Fe instanceof Ae||"EmptyError"===Fe.name){if(nr(x,z,ie))return(0,Xe.of)(new Le([],{}));throw new Yr(x)}throw Fe}))}expandSegmentAgainstRoute(w,x,O,z,ie,be,Fe){return tr(z,x,ie,be)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(w,x,z,ie,be):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(w,x,O,z,ie,be):io(x):io(x)}expandSegmentAgainstRouteUsingRedirect(w,x,O,z,ie,be){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(w,O,z,be):this.expandRegularSegmentAgainstRouteUsingRedirect(w,x,O,z,ie,be)}expandWildCardWithParamsAgainstRouteUsingRedirect(w,x,O,z){const ie=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?jo(ie):this.lineralizeSegments(O,ie).pipe((0,Gi.z)(be=>{const Fe=new Le(be,{});return this.expandSegment(w,Fe,x,be,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(w,x,O,z,ie,be){const{matched:Fe,consumedSegments:Ct,lastChild:xn,positionalParamSegments:Hn}=_t(x,z,ie);if(!Fe)return io(x);const On=this.applyRedirectCommands(Ct,z.redirectTo,Hn);return z.redirectTo.startsWith("/")?jo(On):this.lineralizeSegments(z,On).pipe((0,Gi.z)(gi=>this.expandSegment(w,x,O,gi.concat(ie.slice(xn)),be,!1)))}matchSegmentAgainstRoute(w,x,O,z,ie){if("**"===O.path)return O.loadChildren?(O._loadedConfig?(0,Xe.of)(O._loadedConfig):this.configLoader.load(w.injector,O)).pipe((0,on.U)(gi=>(O._loadedConfig=gi,new Le(z,{})))):(0,Xe.of)(new Le(z,{}));const{matched:be,consumedSegments:Fe,lastChild:Ct}=_t(x,O,z);if(!be)return io(x);const xn=z.slice(Ct);return this.getChildConfig(w,O,z).pipe((0,Gi.z)(On=>{const gi=On.module,Ni=On.routes,{segmentGroup:Ki,slicedSegments:Zs}=Ot(x,Fe,xn,Ni),Ai=new Le(Ki.segments,Ki.children);if(0===Zs.length&&Ai.hasChildren())return this.expandChildren(gi,Ni,Ai).pipe((0,on.U)(Io=>new Le(Fe,Io)));if(0===Ni.length&&0===Zs.length)return(0,Xe.of)(new Le(Fe,{}));const Ro=H(O)===ie;return this.expandSegment(gi,Ai,Ni,Zs,Ro?Ht:ie,!0).pipe((0,on.U)(Da=>new Le(Fe.concat(Da.segments),Da.children)))}))}getChildConfig(w,x,O){return x.children?(0,Xe.of)(new ba(x.children,w)):x.loadChildren?void 0!==x._loadedConfig?(0,Xe.of)(x._loadedConfig):this.runCanLoadGuards(w.injector,x,O).pipe((0,Gi.z)(z=>{return z?this.configLoader.load(w.injector,x).pipe((0,on.U)(ie=>(x._loadedConfig=ie,ie))):(T=x,new j.y(w=>w.error(fi(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))));var T})):(0,Xe.of)(new ba([],w))}runCanLoadGuards(w,x,O){const z=x.canLoad;if(!z||0===z.length)return(0,Xe.of)(!0);const ie=z.map(be=>{const Fe=w.get(be);let Ct;if((T=Fe)&&go(T.canLoad))Ct=Fe.canLoad(x,O);else{if(!go(Fe))throw new Error("Invalid CanLoad guard");Ct=Fe(x,O)}var T;return Mn(Ct)});return(0,Xe.of)(ie).pipe(Qo(),(0,ai.b)(be=>{if(!Ys(be))return;const Fe=fi(`Redirecting to "${this.urlSerializer.serialize(be)}"`);throw Fe.url=be,Fe}),(0,on.U)(be=>!0===be))}lineralizeSegments(w,x){let O=[],z=x.root;for(;;){if(O=O.concat(z.segments),0===z.numberOfChildren)return(0,Xe.of)(O);if(z.numberOfChildren>1||!z.children[Ht])return Do(w.redirectTo);z=z.children[Ht]}}applyRedirectCommands(w,x,O){return this.applyRedirectCreatreUrlTree(x,this.urlSerializer.parse(x),w,O)}applyRedirectCreatreUrlTree(w,x,O,z){const ie=this.createSegmentGroup(w,x.root,O,z);return new he(ie,this.createQueryParams(x.queryParams,this.urlTree.queryParams),x.fragment)}createQueryParams(w,x){const O={};return fn(w,(z,ie)=>{if("string"==typeof z&&z.startsWith(":")){const Fe=z.substring(1);O[ie]=x[Fe]}else O[ie]=z}),O}createSegmentGroup(w,x,O,z){const ie=this.createSegments(w,x.segments,O,z);let be={};return fn(x.children,(Fe,Ct)=>{be[Ct]=this.createSegmentGroup(w,Fe,O,z)}),new Le(ie,be)}createSegments(w,x,O,z){return x.map(ie=>ie.path.startsWith(":")?this.findPosParam(w,ie,z):this.findOrReturn(ie,O))}findPosParam(w,x,O){const z=O[x.path.substring(1)];if(!z)throw new Error(`Cannot redirect to '${w}'. Cannot find '${x.path}'.`);return z}findOrReturn(w,x){let O=0;for(const z of x){if(z.path===w.path)return x.splice(O),z;O++}return w}}function zt(T){const w={};for(const O of Object.keys(T.children)){const ie=zt(T.children[O]);(ie.segments.length>0||ie.hasChildren())&&(w[O]=ie)}return function(T){if(1===T.numberOfChildren&&T.children[Ht]){const w=T.children[Ht];return new Le(T.segments.concat(w.segments),w.children)}return T}(new Le(T.segments,w))}class za{constructor(w){this.path=w,this.route=this.path[this.path.length-1]}}class wt{constructor(w,x){this.component=w,this.route=x}}function rs(T,w,x){const O=T._root;return v(O,w?w._root:null,x,[O.value])}function K(T,w,x){const O=function(T){if(!T)return null;for(let w=T.parent;w;w=w.parent){const x=w.routeConfig;if(x&&x._loadedConfig)return x._loadedConfig}return null}(w);return(O?O.module.injector:x).get(T)}function v(T,w,x,O,z={canDeactivateChecks:[],canActivateChecks:[]}){const ie=Kr(w);return T.children.forEach(be=>{(function(T,w,x,O,z={canDeactivateChecks:[],canActivateChecks:[]}){const ie=T.value,be=w?w.value:null,Fe=x?x.getContext(T.value.outlet):null;if(be&&ie.routeConfig===be.routeConfig){const Ct=function(T,w,x){if("function"==typeof x)return x(T,w);switch(x){case"pathParamsChange":return!nt(T.url,w.url);case"pathParamsOrQueryParamsChange":return!nt(T.url,w.url)||!Kn(T.queryParams,w.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eo(T,w)||!Kn(T.queryParams,w.queryParams);default:return!Eo(T,w)}}(be,ie,ie.routeConfig.runGuardsAndResolvers);Ct?z.canActivateChecks.push(new za(O)):(ie.data=be.data,ie._resolvedData=be._resolvedData),v(T,w,ie.component?Fe?Fe.children:null:x,O,z),Ct&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&z.canDeactivateChecks.push(new wt(Fe.outlet.component,be))}else be&&oe(w,Fe,z),z.canActivateChecks.push(new za(O)),v(T,null,ie.component?Fe?Fe.children:null:x,O,z)})(be,ie[be.value.outlet],x,O.concat([be.value]),z),delete ie[be.value.outlet]}),fn(ie,(be,Fe)=>oe(be,x.getContext(Fe),z)),z}function oe(T,w,x){const O=Kr(T),z=T.value;fn(O,(ie,be)=>{oe(ie,z.component?w?w.children.getContext(be):null:w,x)}),x.canDeactivateChecks.push(new wt(z.component&&w&&w.outlet&&w.outlet.isActivated?w.outlet.component:null,z))}class $n{}function pn(T){return new j.y(w=>w.error(T))}class Ir{constructor(w,x,O,z,ie,be){this.rootComponentType=w,this.config=x,this.urlTree=O,this.url=z,this.paramsInheritanceStrategy=ie,this.relativeLinkResolution=be}recognize(){const w=Ot(this.urlTree.root,[],[],this.config.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution).segmentGroup,x=this.processSegmentGroup(this.config,w,Ht);if(null===x)return null;const O=new Vs([],Object.freeze({}),Object.freeze(Cn({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new es(O,x),ie=new ho(this.url,z);return this.inheritParamsAndData(ie._root),ie}inheritParamsAndData(w){const x=w.value,O=xr(x,this.paramsInheritanceStrategy);x.params=Object.freeze(O.params),x.data=Object.freeze(O.data),w.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(w,x,O){return 0===x.segments.length&&x.hasChildren()?this.processChildren(w,x):this.processSegment(w,x,x.segments,O)}processChildren(w,x){const O=[];for(const ie of Object.keys(x.children)){const be=x.children[ie],Fe=se(w,ie),Ct=this.processSegmentGroup(Fe,be,ie);if(null===Ct)return null;O.push(...Ct)}const z=X(O);return z.sort((w,x)=>w.value.outlet===Ht?-1:x.value.outlet===Ht?1:w.value.outlet.localeCompare(x.value.outlet)),z}processSegment(w,x,O,z){for(const ie of w){const be=this.processSegmentAgainstRoute(ie,x,O,z);if(null!==be)return be}return nr(x,O,z)?[]:null}processSegmentAgainstRoute(w,x,O,z){if(w.redirectTo||!tr(w,x,O,z))return null;let ie,be=[],Fe=[];if("**"===w.path){const Ni=O.length>0?et(O).parameters:{};ie=new Vs(O,Ni,Object.freeze(Cn({},this.urlTree.queryParams)),this.urlTree.fragment,Fi(w),H(w),w.component,w,Zt(x),di(x)+O.length,Ur(w))}else{const Ni=_t(x,w,O);if(!Ni.matched)return null;be=Ni.consumedSegments,Fe=O.slice(Ni.lastChild),ie=new Vs(be,Ni.parameters,Object.freeze(Cn({},this.urlTree.queryParams)),this.urlTree.fragment,Fi(w),H(w),w.component,w,Zt(x),di(x)+be.length,Ur(w))}const Ct=(T=w).children?T.children:T.loadChildren?T._loadedConfig.routes:[],{segmentGroup:xn,slicedSegments:Hn}=Ot(x,be,Fe,Ct.filter(Ni=>void 0===Ni.redirectTo),this.relativeLinkResolution);var T;if(0===Hn.length&&xn.hasChildren()){const Ni=this.processChildren(Ct,xn);return null===Ni?null:[new es(ie,Ni)]}if(0===Ct.length&&0===Hn.length)return[new es(ie,[])];const On=H(w)===z,gi=this.processSegment(Ct,xn,Hn,On?Ht:z);return null===gi?null:[new es(ie,gi)]}}function p(T){const w=T.value.routeConfig;return w&&""===w.path&&void 0===w.redirectTo}function X(T){const w=[],x=new Set;for(const O of T){if(!p(O)){w.push(O);continue}const z=w.find(ie=>O.value.routeConfig===ie.value.routeConfig);void 0!==z?(z.children.push(...O.children),x.add(z)):w.push(O)}for(const O of x){const z=X(O.children);w.push(new es(O.value,z))}return w.filter(O=>!x.has(O))}function Zt(T){let w=T;for(;w._sourceSegment;)w=w._sourceSegment;return w}function di(T){let w=T,x=w._segmentIndexShift?w._segmentIndexShift:0;for(;w._sourceSegment;)w=w._sourceSegment,x+=w._segmentIndexShift?w._segmentIndexShift:0;return x-1}function Fi(T){return T.data||{}}function Ur(T){return T.resolve||{}}function tn(T){return Qe(w=>{const x=T(w);return x?(0,ce.D)(x).pipe((0,on.U)(()=>w)):(0,Xe.of)(w)})}class Ui extends class{shouldDetach(w){return!1}store(w,x){}shouldAttach(w){return!1}retrieve(w){return null}shouldReuseRoute(w,x){return w.routeConfig===x.routeConfig}}{}const Pr=new y.OlP("ROUTES");class qs{constructor(w,x,O,z){this.injector=w,this.compiler=x,this.onLoadStartListener=O,this.onLoadEndListener=z}load(w,x){if(x._loader$)return x._loader$;this.onLoadStartListener&&this.onLoadStartListener(x);const z=this.loadModuleFactory(x.loadChildren).pipe((0,on.U)(ie=>{this.onLoadEndListener&&this.onLoadEndListener(x);const be=ie.create(w);return new ba(We(be.injector.get(Pr,void 0,y.XFs.Self|y.XFs.Optional)).map(Q),be)}),(0,cr.K)(ie=>{throw x._loader$=void 0,ie}));return x._loader$=new Lt(z,()=>new At.x).pipe(st()),x._loader$}loadModuleFactory(w){return Mn(w()).pipe((0,Gi.z)(x=>x instanceof y.YKP?(0,Xe.of)(x):(0,ce.D)(this.compiler.compileModuleAsync(x))))}}class ro{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,x){return w}}function gr(T){throw T}function wa(T,w,x){return w.parse("/")}function _s(T,w){return(0,Xe.of)(null)}const Us={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ea={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hr=(()=>{class T{constructor(x,O,z,ie,be,Fe,Ct){this.rootComponentType=x,this.urlSerializer=O,this.rootContexts=z,this.location=ie,this.config=Ct,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new At.x,this.errorHandler=gr,this.malformedUriErrorHandler=wa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_s,afterPreactivation:_s},this.urlHandlingStrategy=new ro,this.routeReuseStrategy=new Ui,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=be.get(y.h0i),this.console=be.get(y.c2e);const On=be.get(y.R0b);this.isNgZoneEnabled=On instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(Ct),this.currentUrlTree=new he(new Le([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qs(be,Fe,gi=>this.triggerEvent(new Cr(gi)),gi=>this.triggerEvent(new ps(gi))),this.routerState=ts(this.currentUrlTree,this.rootComponentType),this.transitions=new He.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var x;return null==(x=this.location.getState())?void 0:x.\u0275routerPageId}setupNavigations(x){const O=this.events;return x.pipe((0,Vt.h)(z=>0!==z.id),(0,on.U)(z=>eo(Cn({},z),{extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),Qe(z=>{let ie=!1,be=!1;return(0,Xe.of)(z).pipe((0,ai.b)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.currentRawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?eo(Cn({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qe(Fe=>{const Ct=this.browserUrlTree.toString(),xn=!this.navigated||Fe.extractedUrl.toString()!==Ct||Ct!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||xn)&&this.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return cl(Fe.source)&&(this.browserUrlTree=Fe.extractedUrl),(0,Xe.of)(Fe).pipe(Qe(On=>{const gi=this.transitions.getValue();return O.next(new Sr(On.id,this.serializeUrl(On.extractedUrl),On.source,On.restoredState)),gi!==this.transitions.getValue()?xt.E:Promise.resolve(On)}),function(T,w,x,O){return Qe(z=>function(T,w,x,O,z){return new na(T,w,x,O,z).apply()}(T,w,x,z.extractedUrl,O).pipe((0,on.U)(ie=>eo(Cn({},z),{urlAfterRedirects:ie}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ai.b)(On=>{this.currentNavigation=eo(Cn({},this.currentNavigation),{finalUrl:On.urlAfterRedirects})}),function(T,w,x,O,z){return(0,Gi.z)(ie=>function(T,w,x,O,z="emptyOnly",ie="legacy"){try{const be=new Ir(T,w,x,O,z,ie).recognize();return null===be?pn(new $n):(0,Xe.of)(be)}catch(be){return pn(be)}}(T,w,ie.urlAfterRedirects,x(ie.urlAfterRedirects),O,z).pipe((0,on.U)(be=>eo(Cn({},ie),{targetSnapshot:be}))))}(this.rootComponentType,this.config,On=>this.serializeUrl(On),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ai.b)(On=>{if("eager"===this.urlUpdateStrategy){if(!On.extras.skipLocationChange){const Ni=this.urlHandlingStrategy.merge(On.urlAfterRedirects,On.rawUrl);this.setBrowserUrl(Ni,On)}this.browserUrlTree=On.urlAfterRedirects}const gi=new jr(On.id,this.serializeUrl(On.extractedUrl),this.serializeUrl(On.urlAfterRedirects),On.targetSnapshot);O.next(gi)}));if(xn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:gi,extractedUrl:Ni,source:Ki,restoredState:Zs,extras:Ai}=Fe,Ro=new Sr(gi,this.serializeUrl(Ni),Ki,Zs);O.next(Ro);const aa=ts(Ni,this.rootComponentType).snapshot;return(0,Xe.of)(eo(Cn({},Fe),{targetSnapshot:aa,urlAfterRedirects:Ni,extras:eo(Cn({},Ai),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Fe.rawUrl,Fe.resolve(null),xt.E}),tn(Fe=>{const{targetSnapshot:Ct,id:xn,extractedUrl:Hn,rawUrl:On,extras:{skipLocationChange:gi,replaceUrl:Ni}}=Fe;return this.hooks.beforePreactivation(Ct,{navigationId:xn,appliedUrlTree:Hn,rawUrlTree:On,skipLocationChange:!!gi,replaceUrl:!!Ni})}),(0,ai.b)(Fe=>{const Ct=new Ps(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(Ct)}),(0,on.U)(Fe=>eo(Cn({},Fe),{guards:rs(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)})),function(T,w){return(0,Gi.z)(x=>{const{targetSnapshot:O,currentSnapshot:z,guards:{canActivateChecks:ie,canDeactivateChecks:be}}=x;return 0===be.length&&0===ie.length?(0,Xe.of)(eo(Cn({},x),{guardsResult:!0})):function(T,w,x,O){return(0,ce.D)(T).pipe((0,Gi.z)(z=>function(T,w,x,O,z){const ie=w&&w.routeConfig?w.routeConfig.canDeactivate:null;if(!ie||0===ie.length)return(0,Xe.of)(!0);const be=ie.map(Fe=>{const Ct=K(Fe,w,z);let xn;if(function(T){return T&&go(T.canDeactivate)}(Ct))xn=Mn(Ct.canDeactivate(T,w,x,O));else{if(!go(Ct))throw new Error("Invalid CanDeactivate guard");xn=Mn(Ct(T,w,x,O))}return xn.pipe(En())});return(0,Xe.of)(be).pipe(Qo())}(z.component,z.route,x,w,O)),En(z=>!0!==z,!0))}(be,O,z,T).pipe((0,Gi.z)(Fe=>Fe&&function(T){return"boolean"==typeof T}(Fe)?function(T,w,x,O){return(0,ce.D)(w).pipe((0,Oi.b)(z=>(0,pt.z)(function(T,w){return null!==T&&w&&w(new dr(T)),(0,Xe.of)(!0)}(z.route.parent,O),function(T,w){return null!==T&&w&&w(new ii(T)),(0,Xe.of)(!0)}(z.route,O),function(T,w,x){const O=w[w.length-1],ie=w.slice(0,w.length-1).reverse().map(be=>function(T){const w=T.routeConfig?T.routeConfig.canActivateChild:null;return w&&0!==w.length?{node:T,guards:w}:null}(be)).filter(be=>null!==be).map(be=>(0,ft.P)(()=>{const Fe=be.guards.map(Ct=>{const xn=K(Ct,be.node,x);let Hn;if(function(T){return T&&go(T.canActivateChild)}(xn))Hn=Mn(xn.canActivateChild(O,T));else{if(!go(xn))throw new Error("Invalid CanActivateChild guard");Hn=Mn(xn(O,T))}return Hn.pipe(En())});return(0,Xe.of)(Fe).pipe(Qo())}));return(0,Xe.of)(ie).pipe(Qo())}(T,z.path,x),function(T,w,x){const O=w.routeConfig?w.routeConfig.canActivate:null;if(!O||0===O.length)return(0,Xe.of)(!0);const z=O.map(ie=>(0,ft.P)(()=>{const be=K(ie,w,x);let Fe;if(function(T){return T&&go(T.canActivate)}(be))Fe=Mn(be.canActivate(w,T));else{if(!go(be))throw new Error("Invalid CanActivate guard");Fe=Mn(be(w,T))}return Fe.pipe(En())}));return(0,Xe.of)(z).pipe(Qo())}(T,z.route,x))),En(z=>!0!==z,!0))}(O,ie,T,w):(0,Xe.of)(Fe)),(0,on.U)(Fe=>eo(Cn({},x),{guardsResult:Fe})))})}(this.ngModule.injector,Fe=>this.triggerEvent(Fe)),(0,ai.b)(Fe=>{if(Ys(Fe.guardsResult)){const xn=fi(`Redirecting to "${this.serializeUrl(Fe.guardsResult)}"`);throw xn.url=Fe.guardsResult,xn}const Ct=new Wn(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.triggerEvent(Ct)}),(0,Vt.h)(Fe=>!!Fe.guardsResult||(this.restoreHistory(Fe),this.cancelNavigationTransition(Fe,""),!1)),tn(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,Xe.of)(Fe).pipe((0,ai.b)(Ct=>{const xn=new ur(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(xn)}),Qe(Ct=>{let xn=!1;return(0,Xe.of)(Ct).pipe(function(T,w){return(0,Gi.z)(x=>{const{targetSnapshot:O,guards:{canActivateChecks:z}}=x;if(!z.length)return(0,Xe.of)(x);let ie=0;return(0,ce.D)(z).pipe((0,Oi.b)(be=>function(T,w,x,O){return function(T,w,x,O){const z=Object.keys(T);if(0===z.length)return(0,Xe.of)({});const ie={};return(0,ce.D)(z).pipe((0,Gi.z)(be=>function(T,w,x,O){const z=K(T,w,O);return Mn(z.resolve?z.resolve(w,x):z(w,x))}(T[be],w,x,O).pipe((0,ai.b)(Fe=>{ie[be]=Fe}))),yt(1),(0,Gi.z)(()=>Object.keys(ie).length===z.length?(0,Xe.of)(ie):xt.E))}(T._resolve,T,w,O).pipe((0,on.U)(ie=>(T._resolvedData=ie,T.data=Cn(Cn({},T.data),xr(T,x).resolve),null)))}(be.route,O,T,w)),(0,ai.b)(()=>ie++),yt(1),(0,Gi.z)(be=>ie===z.length?(0,Xe.of)(x):xt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ai.b)({next:()=>xn=!0,complete:()=>{xn||(this.restoreHistory(Ct),this.cancelNavigationTransition(Ct,"At least one route resolver didn't emit any value."))}}))}),(0,ai.b)(Ct=>{const xn=new Ls(Ct.id,this.serializeUrl(Ct.extractedUrl),this.serializeUrl(Ct.urlAfterRedirects),Ct.targetSnapshot);this.triggerEvent(xn)}))}),tn(Fe=>{const{targetSnapshot:Ct,id:xn,extractedUrl:Hn,rawUrl:On,extras:{skipLocationChange:gi,replaceUrl:Ni}}=Fe;return this.hooks.afterPreactivation(Ct,{navigationId:xn,appliedUrlTree:Hn,rawUrlTree:On,skipLocationChange:!!gi,replaceUrl:!!Ni})}),(0,on.U)(Fe=>{const Ct=function(T,w,x){const O=we(T,w._root,x?x._root:void 0);return new ls(O,w)}(this.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return eo(Cn({},Fe),{targetRouterState:Ct})}),(0,ai.b)(Fe=>{this.currentUrlTree=Fe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Fe.urlAfterRedirects,Fe.rawUrl),this.routerState=Fe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Fe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Fe),this.browserUrlTree=Fe.urlAfterRedirects)}),((T,w,x)=>(0,on.U)(O=>(new So(w,O.targetRouterState,O.currentRouterState,x).activate(T),O)))(this.rootContexts,this.routeReuseStrategy,Fe=>this.triggerEvent(Fe)),(0,ai.b)({next(){ie=!0},complete(){ie=!0}}),(0,Or.x)(()=>{var Fe;ie||be||this.cancelNavigationTransition(z,`Navigation ID ${z.id} is not equal to the current navigation id ${this.navigationId}`),(null==(Fe=this.currentNavigation)?void 0:Fe.id)===z.id&&(this.currentNavigation=null)}),(0,cr.K)(Fe=>{if(be=!0,function(T){return T&&T[Nr]}(Fe)){const Ct=Ys(Fe.url);Ct||(this.navigated=!0,this.restoreHistory(z,!0));const xn=new Fr(z.id,this.serializeUrl(z.extractedUrl),Fe.message);O.next(xn),Ct?setTimeout(()=>{const Hn=this.urlHandlingStrategy.merge(Fe.url,this.rawUrlTree),On={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cl(z.source)};this.scheduleNavigation(Hn,"imperative",null,On,{resolve:z.resolve,reject:z.reject,promise:z.promise})},0):z.resolve(!1)}else{this.restoreHistory(z,!0);const Ct=new Wr(z.id,this.serializeUrl(z.extractedUrl),Fe);O.next(Ct);try{z.resolve(this.errorHandler(Fe))}catch(xn){z.reject(xn)}}return xt.E}))}))}resetRootComponentType(x){this.rootComponentType=x,this.routerState.root.component=this.rootComponentType}setTransition(x){this.transitions.next(Cn(Cn({},this.transitions.value),x))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(x=>{const O="popstate"===x.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{var Fe;const z={replaceUrl:!0},ie=(null==(Fe=x.state)?void 0:Fe.navigationId)?x.state:null;if(ie){const Ct=Cn({},ie);delete Ct.navigationId,delete Ct.\u0275routerPageId,0!==Object.keys(Ct).length&&(z.state=Ct)}const be=this.parseUrl(x.url);this.scheduleNavigation(be,O,ie,z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(x){this.events.next(x)}resetConfig(x){ea(x),this.config=x.map(Q),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(x,O={}){const{relativeTo:z,queryParams:ie,fragment:be,queryParamsHandling:Fe,preserveFragment:Ct}=O,xn=z||this.routerState.root,Hn=Ct?this.currentUrlTree.fragment:be;let On=null;switch(Fe){case"merge":On=Cn(Cn({},this.currentUrlTree.queryParams),ie);break;case"preserve":On=this.currentUrlTree.queryParams;break;default:On=ie||null}return null!==On&&(On=this.removeEmptyProps(On)),function(T,w,x,O,z){if(0===x.length)return It(w.root,w.root,w,O,z);const ie=function(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new rn(!0,0,T);let w=0,x=!1;const O=T.reduce((z,ie,be)=>{if("object"==typeof ie&&null!=ie){if(ie.outlets){const Fe={};return fn(ie.outlets,(Ct,xn)=>{Fe[xn]="string"==typeof Ct?Ct.split("/"):Ct}),[...z,{outlets:Fe}]}if(ie.segmentPath)return[...z,ie.segmentPath]}return"string"!=typeof ie?[...z,ie]:0===be?(ie.split("/").forEach((Fe,Ct)=>{0==Ct&&"."===Fe||(0==Ct&&""===Fe?x=!0:".."===Fe?w++:""!=Fe&&z.push(Fe))}),z):[...z,ie]},[]);return new rn(x,w,O)}(x);if(ie.toRoot())return It(w.root,new Le([],{}),w,O,z);const be=function(T,w,x){if(T.isAbsolute)return new Zi(w.root,!0,0);if(-1===x.snapshot._lastPathIndex){const ie=x.snapshot._urlSegment;return new Zi(ie,ie===w.root,0)}const O=Te(T.commands[0])?0:1;return function(T,w,x){let O=T,z=w,ie=x;for(;ie>z;){if(ie-=z,O=O.parent,!O)throw new Error("Invalid number of '../'");z=O.segments.length}return new Zi(O,!1,z-ie)}(x.snapshot._urlSegment,x.snapshot._lastPathIndex+O,T.numberOfDoubleDots)}(ie,w,T),Fe=be.processChildren?to(be.segmentGroup,be.index,ie.commands):Ms(be.segmentGroup,be.index,ie.commands);return It(be.segmentGroup,Fe,w,O,z)}(xn,this.currentUrlTree,x,On,null!=Hn?Hn:null)}navigateByUrl(x,O={skipLocationChange:!1}){const z=Ys(x)?x:this.parseUrl(x),ie=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(ie,"imperative",null,O)}navigate(x,O={skipLocationChange:!1}){return function(T){for(let w=0;w<T.length;w++){const x=T[w];if(null==x)throw new Error(`The requested path contains ${x} segment at index ${w}`)}}(x),this.navigateByUrl(this.createUrlTree(x,O),O)}serializeUrl(x){return this.urlSerializer.serialize(x)}parseUrl(x){let O;try{O=this.urlSerializer.parse(x)}catch(z){O=this.malformedUriErrorHandler(z,this.urlSerializer,x)}return O}isActive(x,O){let z;if(z=!0===O?Cn({},Us):!1===O?Cn({},Ea):O,Ys(x))return De(this.currentUrlTree,x,z);const ie=this.parseUrl(x);return De(this.currentUrlTree,ie,z)}removeEmptyProps(x){return Object.keys(x).reduce((O,z)=>{const ie=x[z];return null!=ie&&(O[z]=ie),O},{})}processNavigations(){this.navigations.subscribe(x=>{this.navigated=!0,this.lastSuccessfulId=x.id,this.currentPageId=x.targetPageId,this.events.next(new er(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,x.resolve(!0)},x=>{this.console.warn(`Unhandled Navigation Error: ${x}`)})}scheduleNavigation(x,O,z,ie,be){var Ro,aa,Da;if(this.disposed)return Promise.resolve(!1);const Fe=this.transitions.value,Ct=cl(O)&&Fe&&!cl(Fe.source),xn=Fe.rawUrl.toString()===x.toString(),Hn=Fe.id===(null==(Ro=this.currentNavigation)?void 0:Ro.id);if(Ct&&xn&&Hn)return Promise.resolve(!0);let gi,Ni,Ki;be?(gi=be.resolve,Ni=be.reject,Ki=be.promise):Ki=new Promise((Io,Zu)=>{gi=Io,Ni=Zu});const Zs=++this.navigationId;let Ai;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),Ai=z&&z.\u0275routerPageId?z.\u0275routerPageId:ie.replaceUrl||ie.skipLocationChange?null!=(aa=this.browserPageId)?aa:0:(null!=(Da=this.browserPageId)?Da:0)+1):Ai=0,this.setTransition({id:Zs,targetPageId:Ai,source:O,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:x,extras:ie,resolve:gi,reject:Ni,promise:Ki,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ki.catch(Io=>Promise.reject(Io))}setBrowserUrl(x,O){const z=this.urlSerializer.serialize(x),ie=Cn(Cn({},O.extras.state),this.generateNgRouterState(O.id,O.targetPageId));this.location.isCurrentPathEqualTo(z)||O.extras.replaceUrl?this.location.replaceState(z,"",ie):this.location.go(z,"",ie)}restoreHistory(x,O=!1){var z,ie;if("computed"===this.canceledNavigationResolution){const be=this.currentPageId-x.targetPageId;"popstate"!==x.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(z=this.currentNavigation)?void 0:z.finalUrl)||0===be?this.currentUrlTree===(null==(ie=this.currentNavigation)?void 0:ie.finalUrl)&&0===be&&(this.resetState(x),this.browserUrlTree=x.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(be)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(x),this.resetUrlToCurrentUrlTree())}resetState(x){this.routerState=x.currentRouterState,this.currentUrlTree=x.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,x.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(x,O){const z=new Fr(x.id,this.serializeUrl(x.extractedUrl),O);this.triggerEvent(z),x.resolve(!1)}generateNgRouterState(x,O){return"computed"===this.canceledNavigationResolution?{navigationId:x,\u0275routerPageId:O}:{navigationId:x}}}return T.\u0275fac=function(x){y.$Z()},T.\u0275prov=y.Yz7({token:T,factory:T.\u0275fac}),T})();function cl(T){return"imperative"!==T}class To{}class Al{preload(w,x){return(0,Xe.of)(null)}}let $o=(()=>{class T{constructor(x,O,z,ie){this.router=x,this.injector=z,this.preloadingStrategy=ie,this.loader=new qs(z,O,Ct=>x.triggerEvent(new Cr(Ct)),Ct=>x.triggerEvent(new ps(Ct)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Vt.h)(x=>x instanceof er),(0,Oi.b)(()=>this.preload())).subscribe(()=>{})}preload(){const x=this.injector.get(y.h0i);return this.processRoutes(x,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(x,O){const z=[];for(const ie of O)if(ie.loadChildren&&!ie.canLoad&&ie._loadedConfig){const be=ie._loadedConfig;z.push(this.processRoutes(be.module,be.routes))}else ie.loadChildren&&!ie.canLoad?z.push(this.preloadConfig(x,ie)):ie.children&&z.push(this.processRoutes(x,ie.children));return(0,ce.D)(z).pipe((0,fs.J)(),(0,on.U)(ie=>{}))}preloadConfig(x,O){return this.preloadingStrategy.preload(O,()=>(O._loadedConfig?(0,Xe.of)(O._loadedConfig):this.loader.load(x.injector,O)).pipe((0,Gi.z)(ie=>(O._loadedConfig=ie,this.processRoutes(ie.module,ie.routes)))))}}return T.\u0275fac=function(x){return new(x||T)(y.LFG(hr),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(To))},T.\u0275prov=y.Yz7({token:T,factory:T.\u0275fac}),T})(),Ma=(()=>{class T{constructor(x,O,z={}){this.router=x,this.viewportScroller=O,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(x=>{x instanceof Sr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=x.navigationTrigger,this.restoredId=x.restoredState?x.restoredState.navigationId:0):x instanceof er&&(this.lastId=x.id,this.scheduleScrollEvent(x,this.router.parseUrl(x.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(x=>{x instanceof Mi&&(x.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(x.position):x.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(x.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(x,O){this.router.triggerEvent(new Mi(x,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(x){y.$Z()},T.\u0275prov=y.Yz7({token:T,factory:T.\u0275fac}),T})();const sa=new y.OlP("ROUTER_CONFIGURATION"),rc=new y.OlP("ROUTER_FORROOT_GUARD"),Ao=[B.Ye,{provide:le,useClass:fe},{provide:hr,useFactory:function(T,w,x,O,z,ie,be={},Fe,Ct){const xn=new hr(null,T,w,x,O,z,We(ie));return Fe&&(xn.urlHandlingStrategy=Fe),Ct&&(xn.routeReuseStrategy=Ct),function(T,w){T.errorHandler&&(w.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(w.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(w.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(w.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(w.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(w.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(w.canceledNavigationResolution=T.canceledNavigationResolution)}(be,xn),be.enableTracing&&xn.events.subscribe(Hn=>{var On,gi;null==(On=console.group)||On.call(console,`Router Event: ${Hn.constructor.name}`),console.log(Hn.toString()),console.log(Hn),null==(gi=console.groupEnd)||gi.call(console)}),xn},deps:[le,Go,B.Ye,y.zs3,y.Sil,Pr,sa,[class{},new y.FiY],[class{},new y.FiY]]},Go,{provide:Ar,useFactory:function(T){return T.routerState.root},deps:[hr]},$o,Al,class{preload(w,x){return x().pipe((0,cr.K)(()=>(0,Xe.of)(null)))}},{provide:sa,useValue:{enableTracing:!1}}];function qc(){return new y.PXZ("Router",hr)}let hl=(()=>{class T{constructor(x,O){}static forRoot(x,O){return{ngModule:T,providers:[Ao,fl(x),{provide:rc,useFactory:Sa,deps:[[hr,new y.FiY,new y.tp0]]},{provide:sa,useValue:O||{}},{provide:B.S$,useFactory:oa,deps:[B.lw,[new y.tBr(B.mr),new y.FiY],sa]},{provide:Ma,useFactory:sc,deps:[hr,B.EM,sa]},{provide:To,useExisting:O&&O.preloadingStrategy?O.preloadingStrategy:Al},{provide:y.PXZ,multi:!0,useFactory:qc},[Ca,{provide:y.ip1,multi:!0,useFactory:oc,deps:[Ca]},{provide:Rl,useFactory:ac,deps:[Ca]},{provide:y.tb,multi:!0,useExisting:Rl}]]}}static forChild(x){return{ngModule:T,providers:[fl(x)]}}}return T.\u0275fac=function(x){return new(x||T)(y.LFG(rc,8),y.LFG(hr,8))},T.\u0275mod=y.oAB({type:T}),T.\u0275inj=y.cJS({}),T})();function sc(T,w,x){return x.scrollOffset&&w.setOffset(x.scrollOffset),new Ma(T,w,x)}function oa(T,w,x={}){return x.useHash?new B.Do(T,w):new B.b0(T,w)}function Sa(T){return"guarded"}function fl(T){return[{provide:y.deG,multi:!0,useValue:T},{provide:Pr,multi:!0,useValue:T}]}let Ca=(()=>{class T{constructor(x){this.injector=x,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new At.x}appInitializer(){return this.injector.get(B.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let O=null;const z=new Promise(Fe=>O=Fe),ie=this.injector.get(hr),be=this.injector.get(sa);return"disabled"===be.initialNavigation?(ie.setUpLocationChangeListener(),O(!0)):"enabled"===be.initialNavigation||"enabledBlocking"===be.initialNavigation?(ie.hooks.afterPreactivation=()=>this.initNavigation?(0,Xe.of)(null):(this.initNavigation=!0,O(!0),this.resultOfPreactivationDone),ie.initialNavigation()):O(!0),z})}bootstrapListener(x){const O=this.injector.get(sa),z=this.injector.get($o),ie=this.injector.get(Ma),be=this.injector.get(hr),Fe=this.injector.get(y.z2F);x===Fe.components[0]&&(("enabledNonBlocking"===O.initialNavigation||void 0===O.initialNavigation)&&be.initialNavigation(),z.setUpPreloading(),ie.init(),be.resetRootComponentType(Fe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(x){return new(x||T)(y.LFG(y.zs3))},T.\u0275prov=y.Yz7({token:T,factory:T.\u0275fac}),T})();function oc(T){return T.appInitializer.bind(T)}function ac(T){return T.bootstrapListener.bind(T)}const Rl=new y.OlP("Router Initializer")},6472:(sn,at,q)=>{"use strict";function B(u,e,t,r,o,l,d){try{var h=u[l](d),m=h.value}catch(_){return void t(_)}h.done?e(m):Promise.resolve(m).then(r,o)}q.d(at,{y8_:()=>np,nvb:()=>ml,TlE:()=>Ai,u9r:()=>ui,Rki:()=>Jy,Ilk:()=>qe,fHI:()=>qo,pBf:()=>k,O7d:()=>Fa,hH6:()=>il,a$l:()=>Gn,ZAu:()=>zl,aNw:()=>fa,lLk:()=>Bu,RsA:()=>me,M8C:()=>za,Kj0:()=>Gs,vBJ:()=>Ni,xoR:()=>eg,Tme:()=>_r,cPb:()=>xs,cek:()=>Vu,woe:()=>xu,UY4:()=>xl,_fP:()=>P,iMs:()=>wg,rpg:()=>In,xsS:()=>gu,T_1:()=>Rg,$V:()=>Yy,QmN:()=>ce,dpR:()=>nh,FM8:()=>wt,Pa4:()=>p,CP7:()=>Lr});const me={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ce={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},In=1e3,ki=1001,fi=1003,mt=1006,Mn=1009,Ve=1012,gt=1015,cn=1016,ke=1020,dt=1023,ye=1026,le=1027,Rr=2400,we=2401,G=2402,ln=3e3,rn=3001,Hs=35044,_o=35048;class k{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const o=this._listeners[e];if(void 0!==o){const l=o.indexOf(t);-1!==l&&o.splice(l,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const o=r.slice(0);for(let l=0,d=o.length;l<d;l++)o[l].call(this,e);e.target=null}}}const Q=[];for(let u=0;u<256;u++)Q[u]=(u<16?"0":"")+u.toString(16);let H=1234567;const se=Math.PI/180,Pe=180/Math.PI;function _t(){const u=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Q[255&u]+Q[u>>8&255]+Q[u>>16&255]+Q[u>>24&255]+"-"+Q[255&e]+Q[e>>8&255]+"-"+Q[e>>16&15|64]+Q[e>>24&255]+"-"+Q[63&t|128]+Q[t>>8&255]+"-"+Q[t>>16&255]+Q[t>>24&255]+Q[255&r]+Q[r>>8&255]+Q[r>>16&255]+Q[r>>24&255]).toUpperCase()}function Ot(u,e,t){return Math.max(e,Math.min(t,u))}function bn(u,e){return(u%e+e)%e}function Xi(u,e,t){return(1-t)*u+t*e}function na(u){return 0==(u&u-1)&&0!==u}function zt(u){return Math.pow(2,Math.floor(Math.log(u)/Math.LN2))}var za=Object.freeze({__proto__:null,DEG2RAD:se,RAD2DEG:Pe,generateUUID:_t,clamp:Ot,euclideanModulo:bn,mapLinear:function(u,e,t,r,o){return r+(u-e)*(o-r)/(t-e)},inverseLerp:function(u,e,t){return u!==e?(t-u)/(e-u):0},lerp:Xi,damp:function(u,e,t,r){return Xi(u,e,1-Math.exp(-t*r))},pingpong:function(u,e=1){return e-Math.abs(bn(u,2*e)-e)},smoothstep:function(u,e,t){return u<=e?0:u>=t?1:(u=(u-e)/(t-e))*u*(3-2*u)},smootherstep:function(u,e,t){return u<=e?0:u>=t?1:(u=(u-e)/(t-e))*u*u*(u*(6*u-15)+10)},randInt:function(u,e){return u+Math.floor(Math.random()*(e-u+1))},randFloat:function(u,e){return u+Math.random()*(e-u)},randFloatSpread:function(u){return u*(.5-Math.random())},seededRandom:function(u){return void 0!==u&&(H=u%2147483647),H=16807*H%2147483647,(H-1)/2147483646},degToRad:function(u){return u*se},radToDeg:function(u){return u*Pe},isPowerOfTwo:na,ceilPowerOfTwo:function(u){return Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},floorPowerOfTwo:zt,setQuaternionFromProperEuler:function(u,e,t,r,o){const l=Math.cos,d=Math.sin,h=l(t/2),m=d(t/2),_=l((e+r)/2),S=d((e+r)/2),M=l((e-r)/2),D=d((e-r)/2),A=l((r-e)/2),N=d((r-e)/2);switch(o){case"XYX":u.set(h*S,m*M,m*D,h*_);break;case"YZY":u.set(m*D,h*S,m*M,h*_);break;case"ZXZ":u.set(m*M,m*D,h*S,h*_);break;case"XZX":u.set(h*S,m*N,m*A,h*_);break;case"YXY":u.set(m*A,h*S,m*N,h*_);break;case"ZYZ":u.set(m*N,m*A,h*S,h*_);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}});class wt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),l=this.x-e.x,d=this.y-e.y;return this.x=l*r-d*o+e.x,this.y=l*o+d*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}wt.prototype.isVector2=!0;class rs{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,d,h,m,_){const S=this.elements;return S[0]=e,S[1]=o,S[2]=h,S[3]=t,S[4]=l,S[5]=m,S[6]=r,S[7]=d,S[8]=_,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,d=r[0],h=r[3],m=r[6],_=r[1],S=r[4],M=r[7],D=r[2],A=r[5],N=r[8],W=o[0],re=o[3],U=o[6],R=o[1],ue=o[4],te=o[7],ge=o[2],Re=o[5],Ue=o[8];return l[0]=d*W+h*R+m*ge,l[3]=d*re+h*ue+m*Re,l[6]=d*U+h*te+m*Ue,l[1]=_*W+S*R+M*ge,l[4]=_*re+S*ue+M*Re,l[7]=_*U+S*te+M*Ue,l[2]=D*W+A*R+N*ge,l[5]=D*re+A*ue+N*Re,l[8]=D*U+A*te+N*Ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],d=e[4],h=e[5],m=e[6],_=e[7],S=e[8];return t*d*S-t*h*_-r*l*S+r*h*m+o*l*_-o*d*m}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],d=e[4],h=e[5],m=e[6],_=e[7],S=e[8],M=S*d-h*_,D=h*m-S*l,A=_*l-d*m,N=t*M+r*D+o*A;if(0===N)return this.set(0,0,0,0,0,0,0,0,0);const W=1/N;return e[0]=M*W,e[1]=(o*_-S*r)*W,e[2]=(h*r-o*d)*W,e[3]=D*W,e[4]=(S*t-o*m)*W,e[5]=(o*l-h*t)*W,e[6]=A*W,e[7]=(r*m-_*t)*W,e[8]=(d*t-r*l)*W,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,l,d,h){const m=Math.cos(l),_=Math.sin(l);return this.set(r*m,r*_,-r*(m*d+_*h)+d+e,-o*_,o*m,-o*(-_*d+m*h)+h+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,l=o[0],d=o[3],h=o[6],m=o[1],_=o[4],S=o[7];return o[0]=t*l+r*m,o[3]=t*d+r*_,o[6]=t*h+r*S,o[1]=-r*l+t*m,o[4]=-r*d+t*_,o[7]=-r*h+t*S,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function ia(u){for(let e=u.length-1;e>=0;--e)if(u[e]>65535)return!0;return!1}function v(u){return document.createElementNS("http://www.w3.org/1999/xhtml",u)}rs.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Z={h:0,s:0,l:0},oe={h:0,s:0,l:0};function Ee(u,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?u+6*(e-u)*t:t<.5?e:t<2/3?u+6*(e-u)*(2/3-t):u}function Ce(u){return u<.04045?.0773993808*u:Math.pow(.9478672986*u+.0521327014,2.4)}function it(u){return u<.0031308?12.92*u:1.055*Math.pow(u,.41666)-.055}let Qt,qe=(()=>{class u{constructor(t,r,o){return void 0===r&&void 0===o?this.set(t):this.setRGB(t,r,o)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,r,o){return this.r=t,this.g=r,this.b=o,this}setHSL(t,r,o){if(t=bn(t,1),r=Ot(r,0,1),o=Ot(o,0,1),0===r)this.r=this.g=this.b=o;else{const l=o<=.5?o*(1+r):o+r-o*r,d=2*o-l;this.r=Ee(d,l,t+1/3),this.g=Ee(d,l,t),this.b=Ee(d,l,t-1/3)}return this}setStyle(t){function r(l){void 0!==l&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let l;const h=o[2];switch(o[1]){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,r(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,r(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h)){const m=parseFloat(l[1])/360,_=parseInt(l[2],10)/100,S=parseInt(l[3],10)/100;return r(l[4]),this.setHSL(m,_,S)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=o[1],d=l.length;if(3===d)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const r=L[t.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ce(t.r),this.g=Ce(t.g),this.b=Ce(t.b),this}copyLinearToSRGB(t){return this.r=it(t.r),this.g=it(t.g),this.b=it(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const r=this.r,o=this.g,l=this.b,d=Math.max(r,o,l),h=Math.min(r,o,l);let m,_;const S=(h+d)/2;if(h===d)m=0,_=0;else{const M=d-h;switch(_=S<=.5?M/(d+h):M/(2-d-h),d){case r:m=(o-l)/M+(o<l?6:0);break;case o:m=(l-r)/M+2;break;case l:m=(r-o)/M+4}m/=6}return t.h=m,t.s=_,t.l=S,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,r,o){return this.getHSL(Z),Z.h+=t,Z.s+=r,Z.l+=o,this.setHSL(Z.h,Z.s,Z.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,o){return this.r=t.r+(r.r-t.r)*o,this.g=t.g+(r.g-t.g)*o,this.b=t.b+(r.b-t.b)*o,this}lerpHSL(t,r){this.getHSL(Z),t.getHSL(oe);const o=Xi(Z.h,oe.h,r),l=Xi(Z.s,oe.s,r),d=Xi(Z.l,oe.l,r);return this.setHSL(o,l,d),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return u.NAMES=L,u})();qe.prototype.isColor=!0,qe.prototype.r=1,qe.prototype.g=1,qe.prototype.b=1;class dn{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Qt&&(Qt=v("canvas")),Qt.width=e.width,Qt.height=e.height;const r=Qt.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Qt}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=v("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),l=o.data;for(let d=0;d<l.length;d++)l[d]=255*Ce(l[d]/255);return r.putImageData(o,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Ce(t[r]/255)):Ce(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pi=0;class jn extends k{constructor(e=jn.DEFAULT_IMAGE,t=jn.DEFAULT_MAPPING,r=ki,o=ki,l=mt,d=1008,h=dt,m=Mn,_=1,S=ln){super(),Object.defineProperty(this,"id",{value:pi++}),this.uuid=_t(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=o,this.magFilter=l,this.minFilter=d,this.anisotropy=_,this.format=h,this.internalFormat=null,this.type=m,this.offset=new wt(0,0),this.repeat=new wt(1,1),this.center=new wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=S,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const o=this.image;if(void 0===o.uuid&&(o.uuid=_t()),!t&&void 0===e.images[o.uuid]){let l;if(Array.isArray(o)){l=[];for(let d=0,h=o.length;d<h;d++)l.push($n(o[d].isDataTexture?o[d].image:o[d]))}else l=$n(o);e.images[o.uuid]={uuid:o.uuid,url:l}}r.image=o.uuid}return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case In:e.x=e.x-Math.floor(e.x);break;case ki:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case In:e.y=e.y-Math.floor(e.y);break;case ki:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function $n(u){return"undefined"!=typeof HTMLImageElement&&u instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&u instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&u instanceof ImageBitmap?dn.getDataURL(u):u.data?{data:Array.prototype.slice.call(u.data),width:u.width,height:u.height,type:u.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}jn.DEFAULT_IMAGE=void 0,jn.DEFAULT_MAPPING=300,jn.prototype.isTexture=!0;class pn{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=this.w,d=e.elements;return this.x=d[0]*t+d[4]*r+d[8]*o+d[12]*l,this.y=d[1]*t+d[5]*r+d[9]*o+d[13]*l,this.z=d[2]*t+d[6]*r+d[10]*o+d[14]*l,this.w=d[3]*t+d[7]*r+d[11]*o+d[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,l;const d=.01,h=.1,m=e.elements,_=m[0],S=m[4],M=m[8],D=m[1],A=m[5],N=m[9],W=m[2],re=m[6],U=m[10];if(Math.abs(S-D)<d&&Math.abs(M-W)<d&&Math.abs(N-re)<d){if(Math.abs(S+D)<h&&Math.abs(M+W)<h&&Math.abs(N+re)<h&&Math.abs(_+A+U-3)<h)return this.set(1,0,0,0),this;t=Math.PI;const ue=(_+1)/2,te=(A+1)/2,ge=(U+1)/2,Re=(S+D)/4,Ue=(M+W)/4,ot=(N+re)/4;return ue>te&&ue>ge?ue<d?(r=0,o=.707106781,l=.707106781):(r=Math.sqrt(ue),o=Re/r,l=Ue/r):te>ge?te<d?(r=.707106781,o=0,l=.707106781):(o=Math.sqrt(te),r=Re/o,l=ot/o):ge<d?(r=.707106781,o=.707106781,l=0):(l=Math.sqrt(ge),r=Ue/l,o=ot/l),this.set(r,o,l,t),this}let R=Math.sqrt((re-N)*(re-N)+(M-W)*(M-W)+(D-S)*(D-S));return Math.abs(R)<.001&&(R=1),this.x=(re-N)/R,this.y=(M-W)/R,this.z=(D-S)/R,this.w=Math.acos((_+A+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}pn.prototype.isVector4=!0;class si extends k{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new pn(0,0,e,t),this.scissorTest=!1,this.viewport=new pn(0,0,e,t),this.texture=new jn(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:mt,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}si.prototype.isWebGLRenderTarget=!0,class extends si{constructor(e,t,r){super(e,t);const o=this.texture;this.texture=[];for(let l=0;l<r;l++)this.texture[l]=o.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,l=this.texture.length;o<l;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class F extends si{constructor(e,t,r={}){super(e,t,r),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===r.ignoreDepth||r.ignoreDepth,this.useRenderToTexture=void 0!==r.useRenderToTexture&&r.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}F.prototype.isWebGLMultisampleRenderTarget=!0;class P{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,l,d,h){let m=r[o+0],_=r[o+1],S=r[o+2],M=r[o+3];const D=l[d+0],A=l[d+1],N=l[d+2],W=l[d+3];if(0===h)return e[t+0]=m,e[t+1]=_,e[t+2]=S,void(e[t+3]=M);if(1===h)return e[t+0]=D,e[t+1]=A,e[t+2]=N,void(e[t+3]=W);if(M!==W||m!==D||_!==A||S!==N){let re=1-h;const U=m*D+_*A+S*N+M*W,R=U>=0?1:-1,ue=1-U*U;if(ue>Number.EPSILON){const ge=Math.sqrt(ue),Re=Math.atan2(ge,U*R);re=Math.sin(re*Re)/ge,h=Math.sin(h*Re)/ge}const te=h*R;if(m=m*re+D*te,_=_*re+A*te,S=S*re+N*te,M=M*re+W*te,re===1-h){const ge=1/Math.sqrt(m*m+_*_+S*S+M*M);m*=ge,_*=ge,S*=ge,M*=ge}}e[t]=m,e[t+1]=_,e[t+2]=S,e[t+3]=M}static multiplyQuaternionsFlat(e,t,r,o,l,d){const h=r[o],m=r[o+1],_=r[o+2],S=r[o+3],M=l[d],D=l[d+1],A=l[d+2],N=l[d+3];return e[t]=h*N+S*M+m*A-_*D,e[t+1]=m*N+S*D+_*M-h*A,e[t+2]=_*N+S*A+h*D-m*M,e[t+3]=S*N-h*M-m*D-_*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,l=e._z,d=e._order,h=Math.cos,m=Math.sin,_=h(r/2),S=h(o/2),M=h(l/2),D=m(r/2),A=m(o/2),N=m(l/2);switch(d){case"XYZ":this._x=D*S*M+_*A*N,this._y=_*A*M-D*S*N,this._z=_*S*N+D*A*M,this._w=_*S*M-D*A*N;break;case"YXZ":this._x=D*S*M+_*A*N,this._y=_*A*M-D*S*N,this._z=_*S*N-D*A*M,this._w=_*S*M+D*A*N;break;case"ZXY":this._x=D*S*M-_*A*N,this._y=_*A*M+D*S*N,this._z=_*S*N+D*A*M,this._w=_*S*M-D*A*N;break;case"ZYX":this._x=D*S*M-_*A*N,this._y=_*A*M+D*S*N,this._z=_*S*N-D*A*M,this._w=_*S*M+D*A*N;break;case"YZX":this._x=D*S*M+_*A*N,this._y=_*A*M+D*S*N,this._z=_*S*N-D*A*M,this._w=_*S*M-D*A*N;break;case"XZY":this._x=D*S*M-_*A*N,this._y=_*A*M-D*S*N,this._z=_*S*N+D*A*M,this._w=_*S*M+D*A*N;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],l=t[8],d=t[1],h=t[5],m=t[9],_=t[2],S=t[6],M=t[10],D=r+h+M;if(D>0){const A=.5/Math.sqrt(D+1);this._w=.25/A,this._x=(S-m)*A,this._y=(l-_)*A,this._z=(d-o)*A}else if(r>h&&r>M){const A=2*Math.sqrt(1+r-h-M);this._w=(S-m)/A,this._x=.25*A,this._y=(o+d)/A,this._z=(l+_)/A}else if(h>M){const A=2*Math.sqrt(1+h-r-M);this._w=(l-_)/A,this._x=(o+d)/A,this._y=.25*A,this._z=(m+S)/A}else{const A=2*Math.sqrt(1+M-r-h);this._w=(d-o)/A,this._x=(l+_)/A,this._y=(m+S)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ot(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,l=e._z,d=e._w,h=t._x,m=t._y,_=t._z,S=t._w;return this._x=r*S+d*h+o*_-l*m,this._y=o*S+d*m+l*h-r*_,this._z=l*S+d*_+r*m-o*h,this._w=d*S-r*h-o*m-l*_,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,o=this._y,l=this._z,d=this._w;let h=d*e._w+r*e._x+o*e._y+l*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=d,this._x=r,this._y=o,this._z=l,this;const m=1-h*h;if(m<=Number.EPSILON){const A=1-t;return this._w=A*d+t*this._w,this._x=A*r+t*this._x,this._y=A*o+t*this._y,this._z=A*l+t*this._z,this.normalize(),this._onChangeCallback(),this}const _=Math.sqrt(m),S=Math.atan2(_,h),M=Math.sin((1-t)*S)/_,D=Math.sin(t*S)/_;return this._w=d*M+this._w*D,this._x=r*M+this._x*D,this._y=o*M+this._y*D,this._z=l*M+this._z*D,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(l),r*Math.cos(l),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}P.prototype.isQuaternion=!0;class p{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ct.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ct.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*r+l[6]*o,this.y=l[1]*t+l[4]*r+l[7]*o,this.z=l[2]*t+l[5]*r+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,l=e.elements,d=1/(l[3]*t+l[7]*r+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*r+l[8]*o+l[12])*d,this.y=(l[1]*t+l[5]*r+l[9]*o+l[13])*d,this.z=(l[2]*t+l[6]*r+l[10]*o+l[14])*d,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,l=e.x,d=e.y,h=e.z,m=e.w,_=m*t+d*o-h*r,S=m*r+h*t-l*o,M=m*o+l*r-d*t,D=-l*t-d*r-h*o;return this.x=_*m+D*-l+S*-h-M*-d,this.y=S*m+D*-d+M*-l-_*-h,this.z=M*m+D*-h+_*-d-S*-l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*o,this.y=l[1]*t+l[5]*r+l[9]*o,this.z=l[2]*t+l[6]*r+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,l=e.z,d=t.x,h=t.y,m=t.z;return this.x=o*m-l*h,this.y=l*d-r*m,this.z=r*h-o*d,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return X.copy(this).projectOnVector(e),this.sub(X)}reflect(e){return this.sub(X.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ot(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}p.prototype.isVector3=!0;const X=new p,ct=new P;class Zt{constructor(e=new p(1/0,1/0,1/0),t=new p(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,l=-1/0,d=-1/0,h=-1/0;for(let m=0,_=e.length;m<_;m+=3){const S=e[m],M=e[m+1],D=e[m+2];S<t&&(t=S),M<r&&(r=M),D<o&&(o=D),S>l&&(l=S),M>d&&(d=M),D>h&&(h=D)}return this.min.set(t,r,o),this.max.set(l,d,h),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,l=-1/0,d=-1/0,h=-1/0;for(let m=0,_=e.count;m<_;m++){const S=e.getX(m),M=e.getY(m),D=e.getZ(m);S<t&&(t=S),M<r&&(r=M),D<o&&(o=D),S>l&&(l=S),M>d&&(d=M),D>h&&(h=D)}return this.min.set(t,r,o),this.max.set(l,d,h),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Fi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const l=r.attributes.position;for(let d=0,h=l.count;d<h;d++)Fi.fromBufferAttribute(l,d).applyMatrix4(e.matrixWorld),this.expandByPoint(Fi)}else null===r.boundingBox&&r.computeBoundingBox(),Ur.copy(r.boundingBox),Ur.applyMatrix4(e.matrixWorld),this.union(Ur);const o=e.children;for(let l=0,d=o.length;l<d;l++)this.expandByObject(o[l],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Fi),Fi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Vn),ci.subVectors(this.max,Vn),cs.subVectors(e.a,Vn),ar.subVectors(e.b,Vn),bs.subVectors(e.c,Vn),mr.subVectors(ar,cs),Is.subVectors(bs,ar),tn.subVectors(cs,bs);let t=[0,-mr.z,mr.y,0,-Is.z,Is.y,0,-tn.z,tn.y,mr.z,0,-mr.x,Is.z,0,-Is.x,tn.z,0,-tn.x,-mr.y,mr.x,0,-Is.y,Is.x,0,-tn.y,tn.x,0];return!(!qs(t,cs,ar,bs,ci)||(t=[1,0,0,0,1,0,0,0,1],!qs(t,cs,ar,bs,ci)))&&(Ui.crossVectors(mr,Is),t=[Ui.x,Ui.y,Ui.z],qs(t,cs,ar,bs,ci))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Fi.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Fi).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(di[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),di[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),di[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),di[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),di[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),di[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),di[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),di[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(di)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Zt.prototype.isBox3=!0;const di=[new p,new p,new p,new p,new p,new p,new p,new p],Fi=new p,Ur=new Zt,cs=new p,ar=new p,bs=new p,mr=new p,Is=new p,tn=new p,Vn=new p,ci=new p,Ui=new p,Pr=new p;function qs(u,e,t,r,o){for(let l=0,d=u.length-3;l<=d;l+=3){Pr.fromArray(u,l);const h=o.x*Math.abs(Pr.x)+o.y*Math.abs(Pr.y)+o.z*Math.abs(Pr.z),m=e.dot(Pr),_=t.dot(Pr),S=r.dot(Pr);if(Math.max(-Math.max(m,_,S),Math.min(m,_,S))>h)return!1}return!0}const Xs=new Zt,ro=new p,gr=new p,wa=new p;class _s{constructor(e=new p,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):Xs.setFromPoints(e).getCenter(r);let o=0;for(let l=0,d=e.length;l<d;l++)o=Math.max(o,r.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){wa.subVectors(e,this.center);const t=wa.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=.5*(r-this.radius);this.center.add(wa.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return!0===this.center.equals(e.center)?gr.set(0,0,1).multiplyScalar(e.radius):gr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ro.copy(e.center).add(gr)),this.expandByPoint(ro.copy(e.center).sub(gr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Us=new p,Ea=new p,hr=new p,zs=new p,cl=new p,ul=new p,ra=new p;class so{constructor(e=new p,t=new p(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Us)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Us.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Us.copy(this.direction).multiplyScalar(t).add(this.origin),Us.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){Ea.copy(e).add(t).multiplyScalar(.5),hr.copy(t).sub(e).normalize(),zs.copy(this.origin).sub(Ea);const l=.5*e.distanceTo(t),d=-this.direction.dot(hr),h=zs.dot(this.direction),m=-zs.dot(hr),_=zs.lengthSq(),S=Math.abs(1-d*d);let M,D,A,N;if(S>0)if(M=d*m-h,D=d*h-m,N=l*S,M>=0)if(D>=-N)if(D<=N){const W=1/S;M*=W,D*=W,A=M*(M+d*D+2*h)+D*(d*M+D+2*m)+_}else D=l,M=Math.max(0,-(d*D+h)),A=-M*M+D*(D+2*m)+_;else D=-l,M=Math.max(0,-(d*D+h)),A=-M*M+D*(D+2*m)+_;else D<=-N?(M=Math.max(0,-(-d*l+h)),D=M>0?-l:Math.min(Math.max(-l,-m),l),A=-M*M+D*(D+2*m)+_):D<=N?(M=0,D=Math.min(Math.max(-l,-m),l),A=D*(D+2*m)+_):(M=Math.max(0,-(d*l+h)),D=M>0?l:Math.min(Math.max(-l,-m),l),A=-M*M+D*(D+2*m)+_);else D=d>0?-l:l,M=Math.max(0,-(d*D+h)),A=-M*M+D*(D+2*m)+_;return r&&r.copy(this.direction).multiplyScalar(M).add(this.origin),o&&o.copy(hr).multiplyScalar(D).add(Ea),A}intersectSphere(e,t){Us.subVectors(e.center,this.origin);const r=Us.dot(this.direction),o=Us.dot(Us)-r*r,l=e.radius*e.radius;if(o>l)return null;const d=Math.sqrt(l-o),h=r-d,m=r+d;return h<0&&m<0?null:this.at(h<0?m:h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,l,d,h,m;const _=1/this.direction.x,S=1/this.direction.y,M=1/this.direction.z,D=this.origin;return _>=0?(r=(e.min.x-D.x)*_,o=(e.max.x-D.x)*_):(r=(e.max.x-D.x)*_,o=(e.min.x-D.x)*_),S>=0?(l=(e.min.y-D.y)*S,d=(e.max.y-D.y)*S):(l=(e.max.y-D.y)*S,d=(e.min.y-D.y)*S),r>d||l>o||((l>r||r!=r)&&(r=l),(d<o||o!=o)&&(o=d),M>=0?(h=(e.min.z-D.z)*M,m=(e.max.z-D.z)*M):(h=(e.max.z-D.z)*M,m=(e.min.z-D.z)*M),r>m||h>o)||((h>r||r!=r)&&(r=h),(m<o||o!=o)&&(o=m),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return null!==this.intersectBox(e,Us)}intersectTriangle(e,t,r,o,l){cl.subVectors(t,e),ul.subVectors(r,e),ra.crossVectors(cl,ul);let h,d=this.direction.dot(ra);if(d>0){if(o)return null;h=1}else{if(!(d<0))return null;h=-1,d=-d}zs.subVectors(this.origin,e);const m=h*this.direction.dot(ul.crossVectors(zs,ul));if(m<0)return null;const _=h*this.direction.dot(cl.cross(zs));if(_<0||m+_>d)return null;const S=-h*zs.dot(ra);return S<0?null:this.at(S/d,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class zn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,l,d,h,m,_,S,M,D,A,N,W,re){const U=this.elements;return U[0]=e,U[4]=t,U[8]=r,U[12]=o,U[1]=l,U[5]=d,U[9]=h,U[13]=m,U[2]=_,U[6]=S,U[10]=M,U[14]=D,U[3]=A,U[7]=N,U[11]=W,U[15]=re,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new zn).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/dl.setFromMatrixColumn(e,0).length(),l=1/dl.setFromMatrixColumn(e,1).length(),d=1/dl.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*l,t[5]=r[5]*l,t[6]=r[6]*l,t[7]=0,t[8]=r[8]*d,t[9]=r[9]*d,t[10]=r[10]*d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,l=e.z,d=Math.cos(r),h=Math.sin(r),m=Math.cos(o),_=Math.sin(o),S=Math.cos(l),M=Math.sin(l);if("XYZ"===e.order){const D=d*S,A=d*M,N=h*S,W=h*M;t[0]=m*S,t[4]=-m*M,t[8]=_,t[1]=A+N*_,t[5]=D-W*_,t[9]=-h*m,t[2]=W-D*_,t[6]=N+A*_,t[10]=d*m}else if("YXZ"===e.order){const D=m*S,A=m*M,N=_*S,W=_*M;t[0]=D+W*h,t[4]=N*h-A,t[8]=d*_,t[1]=d*M,t[5]=d*S,t[9]=-h,t[2]=A*h-N,t[6]=W+D*h,t[10]=d*m}else if("ZXY"===e.order){const D=m*S,A=m*M,N=_*S,W=_*M;t[0]=D-W*h,t[4]=-d*M,t[8]=N+A*h,t[1]=A+N*h,t[5]=d*S,t[9]=W-D*h,t[2]=-d*_,t[6]=h,t[10]=d*m}else if("ZYX"===e.order){const D=d*S,A=d*M,N=h*S,W=h*M;t[0]=m*S,t[4]=N*_-A,t[8]=D*_+W,t[1]=m*M,t[5]=W*_+D,t[9]=A*_-N,t[2]=-_,t[6]=h*m,t[10]=d*m}else if("YZX"===e.order){const D=d*m,A=d*_,N=h*m,W=h*_;t[0]=m*S,t[4]=W-D*M,t[8]=N*M+A,t[1]=M,t[5]=d*S,t[9]=-h*S,t[2]=-_*S,t[6]=A*M+N,t[10]=D-W*M}else if("XZY"===e.order){const D=d*m,A=d*_,N=h*m,W=h*_;t[0]=m*S,t[4]=-M,t[8]=_*S,t[1]=D*M+W,t[5]=d*S,t[9]=A*M-N,t[2]=N*M-A,t[6]=h*S,t[10]=W*M+D}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mp,e,Al)}lookAt(e,t,r){const o=this.elements;return Ks.subVectors(e,t),0===Ks.lengthSq()&&(Ks.z=1),Ks.normalize(),$o.crossVectors(r,Ks),0===$o.lengthSq()&&(1===Math.abs(r.z)?Ks.x+=1e-4:Ks.z+=1e-4,Ks.normalize(),$o.crossVectors(r,Ks)),$o.normalize(),Ma.crossVectors(Ks,$o),o[0]=$o.x,o[4]=Ma.x,o[8]=Ks.x,o[1]=$o.y,o[5]=Ma.y,o[9]=Ks.y,o[2]=$o.z,o[6]=Ma.z,o[10]=Ks.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,l=this.elements,d=r[0],h=r[4],m=r[8],_=r[12],S=r[1],M=r[5],D=r[9],A=r[13],N=r[2],W=r[6],re=r[10],U=r[14],R=r[3],ue=r[7],te=r[11],ge=r[15],Re=o[0],Ue=o[4],ot=o[8],kt=o[12],Dt=o[1],ae=o[5],Ke=o[9],ht=o[13],Mt=o[2],Tt=o[6],Et=o[10],Wt=o[14],nn=o[3],Un=o[7],jt=o[11],Jt=o[15];return l[0]=d*Re+h*Dt+m*Mt+_*nn,l[4]=d*Ue+h*ae+m*Tt+_*Un,l[8]=d*ot+h*Ke+m*Et+_*jt,l[12]=d*kt+h*ht+m*Wt+_*Jt,l[1]=S*Re+M*Dt+D*Mt+A*nn,l[5]=S*Ue+M*ae+D*Tt+A*Un,l[9]=S*ot+M*Ke+D*Et+A*jt,l[13]=S*kt+M*ht+D*Wt+A*Jt,l[2]=N*Re+W*Dt+re*Mt+U*nn,l[6]=N*Ue+W*ae+re*Tt+U*Un,l[10]=N*ot+W*Ke+re*Et+U*jt,l[14]=N*kt+W*ht+re*Wt+U*Jt,l[3]=R*Re+ue*Dt+te*Mt+ge*nn,l[7]=R*Ue+ue*ae+te*Tt+ge*Un,l[11]=R*ot+ue*Ke+te*Et+ge*jt,l[15]=R*kt+ue*ht+te*Wt+ge*Jt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],l=e[12],d=e[1],h=e[5],m=e[9],_=e[13],S=e[2],M=e[6],D=e[10],A=e[14];return e[3]*(+l*m*M-o*_*M-l*h*D+r*_*D+o*h*A-r*m*A)+e[7]*(+t*m*A-t*_*D+l*d*D-o*d*A+o*_*S-l*m*S)+e[11]*(+t*_*M-t*h*A-l*d*M+r*d*A+l*h*S-r*_*S)+e[15]*(-o*h*S-t*m*M+t*h*D+o*d*M-r*d*D+r*m*S)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],l=e[3],d=e[4],h=e[5],m=e[6],_=e[7],S=e[8],M=e[9],D=e[10],A=e[11],N=e[12],W=e[13],re=e[14],U=e[15],R=M*re*_-W*D*_+W*m*A-h*re*A-M*m*U+h*D*U,ue=N*D*_-S*re*_-N*m*A+d*re*A+S*m*U-d*D*U,te=S*W*_-N*M*_+N*h*A-d*W*A-S*h*U+d*M*U,ge=N*M*m-S*W*m-N*h*D+d*W*D+S*h*re-d*M*re,Re=t*R+r*ue+o*te+l*ge;if(0===Re)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ue=1/Re;return e[0]=R*Ue,e[1]=(W*D*l-M*re*l-W*o*A+r*re*A+M*o*U-r*D*U)*Ue,e[2]=(h*re*l-W*m*l+W*o*_-r*re*_-h*o*U+r*m*U)*Ue,e[3]=(M*m*l-h*D*l-M*o*_+r*D*_+h*o*A-r*m*A)*Ue,e[4]=ue*Ue,e[5]=(S*re*l-N*D*l+N*o*A-t*re*A-S*o*U+t*D*U)*Ue,e[6]=(N*m*l-d*re*l-N*o*_+t*re*_+d*o*U-t*m*U)*Ue,e[7]=(d*D*l-S*m*l+S*o*_-t*D*_-d*o*A+t*m*A)*Ue,e[8]=te*Ue,e[9]=(N*M*l-S*W*l-N*r*A+t*W*A+S*r*U-t*M*U)*Ue,e[10]=(d*W*l-N*h*l+N*r*_-t*W*_-d*r*U+t*h*U)*Ue,e[11]=(S*h*l-d*M*l-S*r*_+t*M*_+d*r*A-t*h*A)*Ue,e[12]=ge*Ue,e[13]=(S*W*o-N*M*o+N*r*D-t*W*D-S*r*re+t*M*re)*Ue,e[14]=(N*h*o-d*W*o-N*r*m+t*W*m+d*r*re-t*h*re)*Ue,e[15]=(d*M*o-S*h*o+S*r*m-t*M*m-d*r*D+t*h*D)*Ue,this}scale(e){const t=this.elements,r=e.x,o=e.y,l=e.z;return t[0]*=r,t[4]*=o,t[8]*=l,t[1]*=r,t[5]*=o,t[9]*=l,t[2]*=r,t[6]*=o,t[10]*=l,t[3]*=r,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),l=1-r,d=e.x,h=e.y,m=e.z,_=l*d,S=l*h;return this.set(_*d+r,_*h-o*m,_*m+o*h,0,_*h+o*m,S*h+r,S*m-o*d,0,_*m-o*h,S*m+o*d,l*m*m+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,l,d){return this.set(1,r,l,0,e,1,d,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,l=t._x,d=t._y,h=t._z,m=t._w,_=l+l,S=d+d,M=h+h,D=l*_,A=l*S,N=l*M,W=d*S,re=d*M,U=h*M,R=m*_,ue=m*S,te=m*M,ge=r.x,Re=r.y,Ue=r.z;return o[0]=(1-(W+U))*ge,o[1]=(A+te)*ge,o[2]=(N-ue)*ge,o[3]=0,o[4]=(A-te)*Re,o[5]=(1-(D+U))*Re,o[6]=(re+R)*Re,o[7]=0,o[8]=(N+ue)*Ue,o[9]=(re-R)*Ue,o[10]=(1-(D+W))*Ue,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let l=dl.set(o[0],o[1],o[2]).length();const d=dl.set(o[4],o[5],o[6]).length(),h=dl.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],To.copy(this);const _=1/l,S=1/d,M=1/h;return To.elements[0]*=_,To.elements[1]*=_,To.elements[2]*=_,To.elements[4]*=S,To.elements[5]*=S,To.elements[6]*=S,To.elements[8]*=M,To.elements[9]*=M,To.elements[10]*=M,t.setFromRotationMatrix(To),r.x=l,r.y=d,r.z=h,this}makePerspective(e,t,r,o,l,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const h=this.elements,_=2*l/(r-o),S=(t+e)/(t-e),M=(r+o)/(r-o),D=-(d+l)/(d-l),A=-2*d*l/(d-l);return h[0]=2*l/(t-e),h[4]=0,h[8]=S,h[12]=0,h[1]=0,h[5]=_,h[9]=M,h[13]=0,h[2]=0,h[6]=0,h[10]=D,h[14]=A,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,o,l,d){const h=this.elements,m=1/(t-e),_=1/(r-o),S=1/(d-l),M=(t+e)*m,D=(r+o)*_,A=(d+l)*S;return h[0]=2*m,h[4]=0,h[8]=0,h[12]=-M,h[1]=0,h[5]=2*_,h[9]=0,h[13]=-D,h[2]=0,h[6]=0,h[10]=-2*S,h[14]=-A,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}zn.prototype.isMatrix4=!0;const dl=new p,To=new zn,mp=new p(0,0,0),Al=new p(1,1,1),$o=new p,Ma=new p,Ks=new p,sa=new zn,rc=new P;class Ao{constructor(e=0,t=0,r=0,o=Ao.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,l=o[0],d=o[4],h=o[8],m=o[1],_=o[5],S=o[9],M=o[2],D=o[6],A=o[10];switch(t){case"XYZ":this._y=Math.asin(Ot(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-S,A),this._z=Math.atan2(-d,l)):(this._x=Math.atan2(D,_),this._z=0);break;case"YXZ":this._x=Math.asin(-Ot(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(h,A),this._z=Math.atan2(m,_)):(this._y=Math.atan2(-M,l),this._z=0);break;case"ZXY":this._x=Math.asin(Ot(D,-1,1)),Math.abs(D)<.9999999?(this._y=Math.atan2(-M,A),this._z=Math.atan2(-d,_)):(this._y=0,this._z=Math.atan2(m,l));break;case"ZYX":this._y=Math.asin(-Ot(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(D,A),this._z=Math.atan2(m,l)):(this._x=0,this._z=Math.atan2(-d,_));break;case"YZX":this._z=Math.asin(Ot(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-S,_),this._y=Math.atan2(-M,l)):(this._x=0,this._y=Math.atan2(h,A));break;case"XZY":this._z=Math.asin(-Ot(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(D,_),this._y=Math.atan2(h,l)):(this._x=Math.atan2(-S,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return sa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sa,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rc.setFromEuler(this),this.setFromQuaternion(rc,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ao.prototype.isEuler=!0,Ao.DefaultOrder="XYZ",Ao.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class qc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let hl=0;const sc=new p,oa=new P,Sa=new zn,fl=new p,pl=new p,xh=new p,wh=new P,Ca=new p(1,0,0),oc=new p(0,1,0),ac=new p(0,0,1),Rl={type:"added"},Il={type:"removed"};class _r extends k{constructor(){super(),Object.defineProperty(this,"id",{value:hl++}),this.uuid=_t(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_r.DefaultUp.clone();const e=new p,t=new Ao,r=new P,o=new p(1,1,1);t._onChange(function(){r.setFromEuler(t,!1)}),r._onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new zn},normalMatrix:{value:new rs}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=_r.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return oa.setFromAxisAngle(e,t),this.quaternion.multiply(oa),this}rotateOnWorldAxis(e,t){return oa.setFromAxisAngle(e,t),this.quaternion.premultiply(oa),this}rotateX(e){return this.rotateOnAxis(Ca,e)}rotateY(e){return this.rotateOnAxis(oc,e)}rotateZ(e){return this.rotateOnAxis(ac,e)}translateOnAxis(e,t){return sc.copy(e).applyQuaternion(this.quaternion),this.position.add(sc.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ca,e)}translateY(e){return this.translateOnAxis(oc,e)}translateZ(e){return this.translateOnAxis(ac,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Sa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?fl.copy(e):fl.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),pl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(pl,fl,this.up):Sa.lookAt(fl,pl,this.up),this.quaternion.setFromRotationMatrix(Sa),o&&(Sa.extractRotation(o.matrixWorld),oa.setFromRotationMatrix(Sa),this.quaternion.premultiply(oa.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Rl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Il)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Il)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Sa.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const d=this.children[r].getObjectByProperty(e,t);if(void 0!==d)return d}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pl,e,xh),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pl,wh,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const o=this.children;for(let l=0,d=o.length;l<d;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function l(h,m){return void 0===h[m.uuid]&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes){const m=h.shapes;if(Array.isArray(m))for(let _=0,S=m.length;_<S;_++)l(e.shapes,m[_]);else l(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const h=[];for(let m=0,_=this.material.length;m<_;m++)h.push(l(e.materials,this.material[m]));o.material=h}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let h=0;h<this.children.length;h++)o.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let h=0;h<this.animations.length;h++)o.animations.push(l(e.animations,this.animations[h]))}if(t){const h=d(e.geometries),m=d(e.materials),_=d(e.textures),S=d(e.images),M=d(e.shapes),D=d(e.skeletons),A=d(e.animations);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),_.length>0&&(r.textures=_),S.length>0&&(r.images=S),M.length>0&&(r.shapes=M),D.length>0&&(r.skeletons=D),A.length>0&&(r.animations=A)}return r.object=o,r;function d(h){const m=[];for(const _ in h){const S=h[_];delete S.metadata,m.push(S)}return m}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}_r.DefaultUp=new p(0,1,0),_r.DefaultMatrixAutoUpdate=!0,_r.prototype.isObject3D=!0;const T=new p,w=new p,x=new p,O=new p,z=new p,ie=new p,be=new p,Fe=new p,Ct=new p,xn=new p;class Hn{constructor(e=new p,t=new p,r=new p){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),T.subVectors(e,t),o.cross(T);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,r,o,l){T.subVectors(o,t),w.subVectors(r,t),x.subVectors(e,t);const d=T.dot(T),h=T.dot(w),m=T.dot(x),_=w.dot(w),S=w.dot(x),M=d*_-h*h;if(0===M)return l.set(-2,-1,-1);const D=1/M,A=(_*m-h*S)*D,N=(d*S-h*m)*D;return l.set(1-A-N,N,A)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,O),O.x>=0&&O.y>=0&&O.x+O.y<=1}static getUV(e,t,r,o,l,d,h,m){return this.getBarycoord(e,t,r,o,O),m.set(0,0),m.addScaledVector(l,O.x),m.addScaledVector(d,O.y),m.addScaledVector(h,O.z),m}static isFrontFacing(e,t,r,o){return T.subVectors(r,t),w.subVectors(e,t),T.cross(w).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return T.subVectors(this.c,this.b),w.subVectors(this.a,this.b),.5*T.cross(w).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Hn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,l){return Hn.getUV(e,this.a,this.b,this.c,t,r,o,l)}containsPoint(e){return Hn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,l=this.c;let d,h;z.subVectors(o,r),ie.subVectors(l,r),Fe.subVectors(e,r);const m=z.dot(Fe),_=ie.dot(Fe);if(m<=0&&_<=0)return t.copy(r);Ct.subVectors(e,o);const S=z.dot(Ct),M=ie.dot(Ct);if(S>=0&&M<=S)return t.copy(o);const D=m*M-S*_;if(D<=0&&m>=0&&S<=0)return d=m/(m-S),t.copy(r).addScaledVector(z,d);xn.subVectors(e,l);const A=z.dot(xn),N=ie.dot(xn);if(N>=0&&A<=N)return t.copy(l);const W=A*_-m*N;if(W<=0&&_>=0&&N<=0)return h=_/(_-N),t.copy(r).addScaledVector(ie,h);const re=S*N-A*M;if(re<=0&&M-S>=0&&A-N>=0)return be.subVectors(l,o),h=(M-S)/(M-S+(A-N)),t.copy(o).addScaledVector(be,h);const U=1/(re+W+D);return d=W*U,h=D*U,t.copy(r).addScaledVector(z,d).addScaledVector(ie,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let On=0;class gi extends k{constructor(){super(),Object.defineProperty(this,"id",{value:On++}),this.uuid=_t(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const o=this[t];void 0!==o?o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function o(l){const d=[];for(const h in l){const m=l[h];delete m.metadata,d.push(m)}return d}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const l=o(e.textures),d=o(e.images);l.length>0&&(r.textures=l),d.length>0&&(r.images=d)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const o=t.length;r=new Array(o);for(let l=0;l!==o;++l)r[l]=t[l].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}gi.prototype.isMaterial=!0;class Ni extends gi{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Ni.prototype.isMeshBasicMaterial=!0;const Ki=new p,Zs=new wt;class Ai{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=Hs,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),d=new qe),t[r++]=d.r,t[r++]=d.g,t[r++]=d.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),d=new wt),t[r++]=d.x,t[r++]=d.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),d=new p),t[r++]=d.x,t[r++]=d.y,t[r++]=d.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,l=e.length;o<l;o++){let d=e[o];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),d=new pn),t[r++]=d.x,t[r++]=d.y,t[r++]=d.z,t[r++]=d.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Zs.fromBufferAttribute(this,t),Zs.applyMatrix3(e),this.setXY(t,Zs.x,Zs.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Ki.fromBufferAttribute(this,t),Ki.applyMatrix3(e),this.setXYZ(t,Ki.x,Ki.y,Ki.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ki.x=this.getX(t),Ki.y=this.getY(t),Ki.z=this.getZ(t),Ki.applyMatrix4(e),this.setXYZ(t,Ki.x,Ki.y,Ki.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ki.x=this.getX(t),Ki.y=this.getY(t),Ki.z=this.getZ(t),Ki.applyNormalMatrix(e),this.setXYZ(t,Ki.x,Ki.y,Ki.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ki.x=this.getX(t),Ki.y=this.getY(t),Ki.z=this.getZ(t),Ki.transformDirection(e),this.setXYZ(t,Ki.x,Ki.y,Ki.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,l){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Hs&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Ai.prototype.isBufferAttribute=!0;class Zu extends Ai{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class us extends Ai{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class extends Ai{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class Gn extends Ai{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Jv=0;const la=new zn,gp=new _r,Xc=new p,Js=new Zt,Ju=new Zt,Ji=new p;class ui extends k{constructor(){super(),Object.defineProperty(this,"id",{value:Jv++}),this.uuid=_t(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(ia(e)?us:Zu)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const l=(new rs).getNormalMatrix(e);r.applyNormalMatrix(l),r.needsUpdate=!0}const o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(e),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return la.makeRotationFromQuaternion(e),this.applyMatrix4(la),this}rotateX(e){return la.makeRotationX(e),this.applyMatrix4(la),this}rotateY(e){return la.makeRotationY(e),this.applyMatrix4(la),this}rotateZ(e){return la.makeRotationZ(e),this.applyMatrix4(la),this}translate(e,t,r){return la.makeTranslation(e,t,r),this.applyMatrix4(la),this}scale(e,t,r){return la.makeScale(e,t,r),this.applyMatrix4(la),this}lookAt(e){return gp.lookAt(e),gp.updateMatrix(),this.applyMatrix4(gp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xc).negate(),this.translate(Xc.x,Xc.y,Xc.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const l=e[r];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new Gn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zt);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new p(-1/0,-1/0,-1/0),new p(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)Js.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Ji.addVectors(this.boundingBox.min,Js.min),this.boundingBox.expandByPoint(Ji),Ji.addVectors(this.boundingBox.max,Js.max),this.boundingBox.expandByPoint(Ji)):(this.boundingBox.expandByPoint(Js.min),this.boundingBox.expandByPoint(Js.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new _s);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new p,1/0);if(e){const r=this.boundingSphere.center;if(Js.setFromBufferAttribute(e),t)for(let l=0,d=t.length;l<d;l++)Ju.setFromBufferAttribute(t[l]),this.morphTargetsRelative?(Ji.addVectors(Js.min,Ju.min),Js.expandByPoint(Ji),Ji.addVectors(Js.max,Ju.max),Js.expandByPoint(Ji)):(Js.expandByPoint(Ju.min),Js.expandByPoint(Ju.max));Js.getCenter(r);let o=0;for(let l=0,d=e.count;l<d;l++)Ji.fromBufferAttribute(e,l),o=Math.max(o,r.distanceToSquared(Ji));if(t)for(let l=0,d=t.length;l<d;l++){const h=t[l],m=this.morphTargetsRelative;for(let _=0,S=h.count;_<S;_++)Ji.fromBufferAttribute(h,_),m&&(Xc.fromBufferAttribute(e,_),Ji.add(Xc)),o=Math.max(o,r.distanceToSquared(Ji))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,o=t.position.array,l=t.normal.array,d=t.uv.array,h=o.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ai(new Float32Array(4*h),4));const m=t.tangent.array,_=[],S=[];for(let Dt=0;Dt<h;Dt++)_[Dt]=new p,S[Dt]=new p;const M=new p,D=new p,A=new p,N=new wt,W=new wt,re=new wt,U=new p,R=new p;function ue(Dt,ae,Ke){M.fromArray(o,3*Dt),D.fromArray(o,3*ae),A.fromArray(o,3*Ke),N.fromArray(d,2*Dt),W.fromArray(d,2*ae),re.fromArray(d,2*Ke),D.sub(M),A.sub(M),W.sub(N),re.sub(N);const ht=1/(W.x*re.y-re.x*W.y);!isFinite(ht)||(U.copy(D).multiplyScalar(re.y).addScaledVector(A,-W.y).multiplyScalar(ht),R.copy(A).multiplyScalar(W.x).addScaledVector(D,-re.x).multiplyScalar(ht),_[Dt].add(U),_[ae].add(U),_[Ke].add(U),S[Dt].add(R),S[ae].add(R),S[Ke].add(R))}let te=this.groups;0===te.length&&(te=[{start:0,count:r.length}]);for(let Dt=0,ae=te.length;Dt<ae;++Dt){const Ke=te[Dt],ht=Ke.start;for(let Tt=ht,Et=ht+Ke.count;Tt<Et;Tt+=3)ue(r[Tt+0],r[Tt+1],r[Tt+2])}const ge=new p,Re=new p,Ue=new p,ot=new p;function kt(Dt){Ue.fromArray(l,3*Dt),ot.copy(Ue);const ae=_[Dt];ge.copy(ae),ge.sub(Ue.multiplyScalar(Ue.dot(ae))).normalize(),Re.crossVectors(ot,ae);const ht=Re.dot(S[Dt])<0?-1:1;m[4*Dt]=ge.x,m[4*Dt+1]=ge.y,m[4*Dt+2]=ge.z,m[4*Dt+3]=ht}for(let Dt=0,ae=te.length;Dt<ae;++Dt){const Ke=te[Dt],ht=Ke.start;for(let Tt=ht,Et=ht+Ke.count;Tt<Et;Tt+=3)kt(r[Tt+0]),kt(r[Tt+1]),kt(r[Tt+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new Ai(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let D=0,A=r.count;D<A;D++)r.setXYZ(D,0,0,0);const o=new p,l=new p,d=new p,h=new p,m=new p,_=new p,S=new p,M=new p;if(e)for(let D=0,A=e.count;D<A;D+=3){const N=e.getX(D+0),W=e.getX(D+1),re=e.getX(D+2);o.fromBufferAttribute(t,N),l.fromBufferAttribute(t,W),d.fromBufferAttribute(t,re),S.subVectors(d,l),M.subVectors(o,l),S.cross(M),h.fromBufferAttribute(r,N),m.fromBufferAttribute(r,W),_.fromBufferAttribute(r,re),h.add(S),m.add(S),_.add(S),r.setXYZ(N,h.x,h.y,h.z),r.setXYZ(W,m.x,m.y,m.z),r.setXYZ(re,_.x,_.y,_.z)}else for(let D=0,A=t.count;D<A;D+=3)o.fromBufferAttribute(t,D+0),l.fromBufferAttribute(t,D+1),d.fromBufferAttribute(t,D+2),S.subVectors(d,l),M.subVectors(o,l),S.cross(M),r.setXYZ(D+0,S.x,S.y,S.z),r.setXYZ(D+1,S.x,S.y,S.z),r.setXYZ(D+2,S.x,S.y,S.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(void 0===e.attributes[o])continue;const d=r[o].array,h=e.attributes[o],m=h.array,_=h.itemSize*t,S=Math.min(m.length,d.length-_);for(let M=0,D=_;M<S;M++,D++)d[D]=m[M]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ji.fromBufferAttribute(e,t),Ji.normalize(),e.setXYZ(t,Ji.x,Ji.y,Ji.z)}toNonIndexed(){function e(h,m){const _=h.array,S=h.itemSize,M=h.normalized,D=new _.constructor(m.length*S);let A=0,N=0;for(let W=0,re=m.length;W<re;W++){A=h.isInterleavedBufferAttribute?m[W]*h.data.stride+h.offset:m[W]*S;for(let U=0;U<S;U++)D[N++]=_[A++]}return new Ai(D,S,M)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ui,r=this.index.array,o=this.attributes;for(const h in o){const _=e(o[h],r);t.setAttribute(h,_)}const l=this.morphAttributes;for(const h in l){const m=[],_=l[h];for(let S=0,M=_.length;S<M;S++){const A=e(_[S],r);m.push(A)}t.morphAttributes[h]=m}t.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let h=0,m=d.length;h<m;h++){const _=d[h];t.addGroup(_.start,_.count,_.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const m=this.parameters;for(const _ in m)void 0!==m[_]&&(e[_]=m[_]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const m in r)e.data.attributes[m]=r[m].toJSON(e.data);const o={};let l=!1;for(const m in this.morphAttributes){const _=this.morphAttributes[m],S=[];for(let M=0,D=_.length;M<D;M++)S.push(_[M].toJSON(e.data));S.length>0&&(o[m]=S,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));const h=this.boundingSphere;return null!==h&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const o=e.attributes;for(const _ in o)this.setAttribute(_,o[_].clone(t));const l=e.morphAttributes;for(const _ in l){const S=[],M=l[_];for(let D=0,A=M.length;D<A;D++)S.push(M[D].clone(t));this.morphAttributes[_]=S}this.morphTargetsRelative=e.morphTargetsRelative;const d=e.groups;for(let _=0,S=d.length;_<S;_++){const M=d[_];this.addGroup(M.start,M.count,M.materialIndex)}const h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());const m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ui.prototype.isBufferGeometry=!0;const lc=new zn,Kc=new so,Eh=new _s,Ns=new p,Qs=new p,Ga=new p,cc=new p,Pl=new p,Qu=new p,ed=new p,td=new p,Mh=new p,Sh=new wt,Zc=new wt,oo=new wt,Jc=new p,Wa=new p;class Gs extends _r{constructor(e=new ui,t=new Ni){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,l=this.matrixWorld;if(void 0===o||(null===r.boundingSphere&&r.computeBoundingSphere(),Eh.copy(r.boundingSphere),Eh.applyMatrix4(l),!1===e.ray.intersectsSphere(Eh))||(lc.copy(l).invert(),Kc.copy(e.ray).applyMatrix4(lc),null!==r.boundingBox&&!1===Kc.intersectsBox(r.boundingBox)))return;let d;if(r.isBufferGeometry){const h=r.index,m=r.attributes.position,_=r.morphAttributes.position,S=r.morphTargetsRelative,M=r.attributes.uv,D=r.attributes.uv2,A=r.groups,N=r.drawRange;if(null!==h)if(Array.isArray(o))for(let W=0,re=A.length;W<re;W++){const U=A[W],R=o[U.materialIndex];for(let ge=Math.max(U.start,N.start),Re=Math.min(h.count,Math.min(U.start+U.count,N.start+N.count));ge<Re;ge+=3){const Ue=h.getX(ge),ot=h.getX(ge+1),kt=h.getX(ge+2);d=nd(this,R,e,Kc,m,_,S,M,D,Ue,ot,kt),d&&(d.faceIndex=Math.floor(ge/3),d.face.materialIndex=U.materialIndex,t.push(d))}}else for(let U=Math.max(0,N.start),R=Math.min(h.count,N.start+N.count);U<R;U+=3){const ue=h.getX(U),te=h.getX(U+1),ge=h.getX(U+2);d=nd(this,o,e,Kc,m,_,S,M,D,ue,te,ge),d&&(d.faceIndex=Math.floor(U/3),t.push(d))}else if(void 0!==m)if(Array.isArray(o))for(let W=0,re=A.length;W<re;W++){const U=A[W],R=o[U.materialIndex];for(let ge=Math.max(U.start,N.start),Re=Math.min(m.count,Math.min(U.start+U.count,N.start+N.count));ge<Re;ge+=3)d=nd(this,R,e,Kc,m,_,S,M,D,ge,ge+1,ge+2),d&&(d.faceIndex=Math.floor(ge/3),d.face.materialIndex=U.materialIndex,t.push(d))}else for(let U=Math.max(0,N.start),R=Math.min(m.count,N.start+N.count);U<R;U+=3)d=nd(this,o,e,Kc,m,_,S,M,D,U,U+1,U+2),d&&(d.faceIndex=Math.floor(U/3),t.push(d))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function nd(u,e,t,r,o,l,d,h,m,_,S,M){Ns.fromBufferAttribute(o,_),Qs.fromBufferAttribute(o,S),Ga.fromBufferAttribute(o,M);const D=u.morphTargetInfluences;if(l&&D){ed.set(0,0,0),td.set(0,0,0),Mh.set(0,0,0);for(let N=0,W=l.length;N<W;N++){const re=D[N],U=l[N];0!==re&&(cc.fromBufferAttribute(U,_),Pl.fromBufferAttribute(U,S),Qu.fromBufferAttribute(U,M),d?(ed.addScaledVector(cc,re),td.addScaledVector(Pl,re),Mh.addScaledVector(Qu,re)):(ed.addScaledVector(cc.sub(Ns),re),td.addScaledVector(Pl.sub(Qs),re),Mh.addScaledVector(Qu.sub(Ga),re)))}Ns.add(ed),Qs.add(td),Ga.add(Mh)}u.isSkinnedMesh&&(u.boneTransform(_,Ns),u.boneTransform(S,Qs),u.boneTransform(M,Ga));const A=function(u,e,t,r,o,l,d,h){let m;if(m=1===e.side?r.intersectTriangle(d,l,o,!0,h):r.intersectTriangle(o,l,d,2!==e.side,h),null===m)return null;Wa.copy(h),Wa.applyMatrix4(u.matrixWorld);const _=t.ray.origin.distanceTo(Wa);return _<t.near||_>t.far?null:{distance:_,point:Wa.clone(),object:u}}(u,e,t,r,Ns,Qs,Ga,Jc);if(A){h&&(Sh.fromBufferAttribute(h,_),Zc.fromBufferAttribute(h,S),oo.fromBufferAttribute(h,M),A.uv=Hn.getUV(Jc,Ns,Qs,Ga,Sh,Zc,oo,new wt)),m&&(Sh.fromBufferAttribute(m,_),Zc.fromBufferAttribute(m,S),oo.fromBufferAttribute(m,M),A.uv2=Hn.getUV(Jc,Ns,Qs,Ga,Sh,Zc,oo,new wt));const N={a:_,b:S,c:M,normal:new p,materialIndex:0};Hn.getNormal(Ns,Qs,Ga,N.normal),A.face=N}return A}Gs.prototype.isMesh=!0;class ml extends ui{constructor(e=1,t=1,r=1,o=1,l=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:l,depthSegments:d};const h=this;o=Math.floor(o),l=Math.floor(l),d=Math.floor(d);const m=[],_=[],S=[],M=[];let D=0,A=0;function N(W,re,U,R,ue,te,ge,Re,Ue,ot,kt){const Dt=te/Ue,ae=ge/ot,Ke=te/2,ht=ge/2,Mt=Re/2,Tt=Ue+1,Et=ot+1;let Wt=0,nn=0;const Un=new p;for(let jt=0;jt<Et;jt++){const Jt=jt*ae-ht;for(let Dn=0;Dn<Tt;Dn++)Un[W]=(Dn*Dt-Ke)*R,Un[re]=Jt*ue,Un[U]=Mt,_.push(Un.x,Un.y,Un.z),Un[W]=0,Un[re]=0,Un[U]=Re>0?1:-1,S.push(Un.x,Un.y,Un.z),M.push(Dn/Ue),M.push(1-jt/ot),Wt+=1}for(let jt=0;jt<ot;jt++)for(let Jt=0;Jt<Ue;Jt++){const Yn=D+Jt+Tt*(jt+1),ei=D+(Jt+1)+Tt*(jt+1),Bt=D+(Jt+1)+Tt*jt;m.push(D+Jt+Tt*jt,Yn,Bt),m.push(Yn,ei,Bt),nn+=6}h.addGroup(A,nn,kt),A+=nn,D+=Wt}N("z","y","x",-1,-1,r,t,e,d,l,0),N("z","y","x",1,-1,r,t,-e,d,l,1),N("x","z","y",1,1,e,r,t,o,d,2),N("x","z","y",1,-1,e,r,-t,o,d,3),N("x","y","z",1,-1,e,t,r,o,l,4),N("x","y","z",-1,-1,e,t,-r,o,l,5),this.setIndex(m),this.setAttribute("position",new Gn(_,3)),this.setAttribute("normal",new Gn(S,3)),this.setAttribute("uv",new Gn(M,2))}static fromJSON(e){return new ml(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uc(u){const e={};for(const t in u){e[t]={};for(const r in u[t]){const o=u[t][r];e[t][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}}return e}function ao(u){const e={};for(let t=0;t<u.length;t++){const r=uc(u[t]);for(const o in r)e[o]=r[o]}return e}const $g={clone:uc,merge:ao};class ca extends gi{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const d=this.uniforms[o].value;t.uniforms[o]=d&&d.isTexture?{type:"t",value:d.toJSON(e).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}ca.prototype.isShaderMaterial=!0;class Dh extends _r{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Dh.prototype.isCamera=!0;class xs extends Dh{constructor(e=50,t=1,r=.1,o=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Pe*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*se*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Pe*Math.atan(Math.tan(.5*se*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,l,d){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*se*this.fov)/this.zoom,r=2*t,o=this.aspect*r,l=-.5*o;const d=this.view;if(null!==this.view&&this.view.enabled){const m=d.fullWidth,_=d.fullHeight;l+=d.offsetX*o/m,t-=d.offsetY*r/_,o*=d.width/m,r*=d.height/_}const h=this.filmOffset;0!==h&&(l+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}xs.prototype.isPerspectiveCamera=!0;class Th extends _r{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const o=new xs(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new p(1,0,0)),this.add(o);const l=new xs(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new p(-1,0,0)),this.add(l);const d=new xs(90,1,e,t);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new p(0,1,0)),this.add(d);const h=new xs(90,1,e,t);h.layers=this.layers,h.up.set(0,0,-1),h.lookAt(new p(0,-1,0)),this.add(h);const m=new xs(90,1,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new p(0,0,1)),this.add(m);const _=new xs(90,1,e,t);_.layers=this.layers,_.up.set(0,-1,0),_.lookAt(new p(0,0,-1)),this.add(_)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[o,l,d,h,m,_]=this.children,S=e.xr.enabled,M=e.getRenderTarget();e.xr.enabled=!1;const D=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,l),e.setRenderTarget(r,2),e.render(t,d),e.setRenderTarget(r,3),e.render(t,h),e.setRenderTarget(r,4),e.render(t,m),r.texture.generateMipmaps=D,e.setRenderTarget(r,5),e.render(t,_),e.setRenderTarget(M),e.xr.enabled=S,r.texture.needsPMREMUpdate=!0}}class Qc extends jn{constructor(e,t,r,o,l,d,h,m,_,S){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,o,l,d,h,m,_,S),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Qc.prototype.isCubeTexture=!0;class Ah extends si{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),super(e,e,t),this.texture=new Qc(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:mt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=dt,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ml(5,5,5),l=new ca({name:"CubemapFromEquirect",uniforms:uc(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});l.uniforms.tEquirect.value=t;const d=new Gs(o,l),h=t.minFilter;return 1008===t.minFilter&&(t.minFilter=mt),new Th(1,10,this).update(e,d),t.minFilter=h,d.geometry.dispose(),d.material.dispose(),this}clear(e,t,r,o){const l=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(t,r,o);e.setRenderTarget(l)}}Ah.prototype.isWebGLCubeRenderTarget=!0;const id=new p,Yg=new p,eu=new rs;class Ta{constructor(e=new p(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=id.subVectors(r,t).cross(Yg.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(id),o=this.normal.dot(r);if(0===o)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(r).multiplyScalar(l).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||eu.getNormalMatrix(e),o=this.coplanarPoint(id).applyMatrix4(e),l=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Ta.prototype.isPlane=!0;const dc=new _s,Ss=new p;class tu{constructor(e=new Ta,t=new Ta,r=new Ta,o=new Ta,l=new Ta,d=new Ta){this.planes=[e,t,r,o,l,d]}set(e,t,r,o,l,d){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(r),h[3].copy(o),h[4].copy(l),h[5].copy(d),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],l=r[1],d=r[2],h=r[3],m=r[4],_=r[5],S=r[6],M=r[7],D=r[8],A=r[9],N=r[10],W=r[11],re=r[12],U=r[13],R=r[14],ue=r[15];return t[0].setComponents(h-o,M-m,W-D,ue-re).normalize(),t[1].setComponents(h+o,M+m,W+D,ue+re).normalize(),t[2].setComponents(h+l,M+_,W+A,ue+U).normalize(),t[3].setComponents(h-l,M-_,W-A,ue-U).normalize(),t[4].setComponents(h-d,M-S,W-N,ue-R).normalize(),t[5].setComponents(h+d,M+S,W+N,ue+R).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),dc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(dc)}intersectsSprite(e){return dc.center.set(0,0,0),dc.radius=.7071067811865476,dc.applyMatrix4(e.matrixWorld),this.intersectsSphere(dc)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(Ss.x=o.normal.x>0?e.max.x:e.min.x,Ss.y=o.normal.y>0?e.max.y:e.min.y,Ss.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Ss)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vp(){let u=null,e=!1,t=null,r=null;function o(l,d){t(l,d),r=u.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==t&&(r=u.requestAnimationFrame(o),e=!0)},stop:function(){u.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){u=l}}}function Rh(u,e){const t=e.isWebGL2,r=new WeakMap;return{get:function(_){return _.isInterleavedBufferAttribute&&(_=_.data),r.get(_)},remove:function(_){_.isInterleavedBufferAttribute&&(_=_.data);const S=r.get(_);S&&(u.deleteBuffer(S.buffer),r.delete(_))},update:function(_,S){if(_.isGLBufferAttribute){const D=r.get(_);return void((!D||D.version<_.version)&&r.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version}))}_.isInterleavedBufferAttribute&&(_=_.data);const M=r.get(_);void 0===M?r.set(_,function(_,S){const M=_.array,D=_.usage,A=u.createBuffer();u.bindBuffer(S,A),u.bufferData(S,M,D),_.onUploadCallback();let N=5126;return M instanceof Float32Array?N=5126:M instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):M instanceof Uint16Array?_.isFloat16BufferAttribute?t?N=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):N=5123:M instanceof Int16Array?N=5122:M instanceof Uint32Array?N=5125:M instanceof Int32Array?N=5124:M instanceof Int8Array?N=5120:(M instanceof Uint8Array||M instanceof Uint8ClampedArray)&&(N=5121),{buffer:A,type:N,bytesPerElement:M.BYTES_PER_ELEMENT,version:_.version}}(_,S)):M.version<_.version&&(function(_,S,M){const D=S.array,A=S.updateRange;u.bindBuffer(M,_),-1===A.count?u.bufferSubData(M,0,D):(t?u.bufferSubData(M,A.offset*D.BYTES_PER_ELEMENT,D,A.offset,A.count):u.bufferSubData(M,A.offset*D.BYTES_PER_ELEMENT,D.subarray(A.offset,A.offset+A.count)),A.count=-1)}(M.buffer,_,S),M.version=_.version)}}}class $a extends ui{constructor(e=1,t=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const l=e/2,d=t/2,h=Math.floor(r),m=Math.floor(o),_=h+1,S=m+1,M=e/h,D=t/m,A=[],N=[],W=[],re=[];for(let U=0;U<S;U++){const R=U*D-d;for(let ue=0;ue<_;ue++)N.push(ue*M-l,-R,0),W.push(0,0,1),re.push(ue/h),re.push(1-U/m)}for(let U=0;U<m;U++)for(let R=0;R<h;R++){const te=R+_*(U+1),ge=R+1+_*(U+1),Re=R+1+_*U;A.push(R+_*U,te,Re),A.push(te,ge,Re)}this.setIndex(A),this.setAttribute("position",new Gn(N,3)),this.setAttribute("normal",new Gn(W,3)),this.setAttribute("uv",new Gn(re,2))}static fromJSON(e){return new $a(e.width,e.height,e.widthSegments,e.heightSegments)}}const Si={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},wn={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new rs},uv2Transform:{value:new rs},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rs}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new wt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rs}}},qa={basic:{uniforms:ao([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:Si.meshbasic_vert,fragmentShader:Si.meshbasic_frag},lambert:{uniforms:ao([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.fog,wn.lights,{emissive:{value:new qe(0)}}]),vertexShader:Si.meshlambert_vert,fragmentShader:Si.meshlambert_frag},phong:{uniforms:ao([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:Si.meshphong_vert,fragmentShader:Si.meshphong_frag},standard:{uniforms:ao([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag},toon:{uniforms:ao([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new qe(0)}}]),vertexShader:Si.meshtoon_vert,fragmentShader:Si.meshtoon_frag},matcap:{uniforms:ao([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:Si.meshmatcap_vert,fragmentShader:Si.meshmatcap_frag},points:{uniforms:ao([wn.points,wn.fog]),vertexShader:Si.points_vert,fragmentShader:Si.points_frag},dashed:{uniforms:ao([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Si.linedashed_vert,fragmentShader:Si.linedashed_frag},depth:{uniforms:ao([wn.common,wn.displacementmap]),vertexShader:Si.depth_vert,fragmentShader:Si.depth_frag},normal:{uniforms:ao([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:Si.meshnormal_vert,fragmentShader:Si.meshnormal_frag},sprite:{uniforms:ao([wn.sprite,wn.fog]),vertexShader:Si.sprite_vert,fragmentShader:Si.sprite_frag},background:{uniforms:{uvTransform:{value:new rs},t2D:{value:null}},vertexShader:Si.background_vert,fragmentShader:Si.background_frag},cube:{uniforms:ao([wn.envmap,{opacity:{value:1}}]),vertexShader:Si.cube_vert,fragmentShader:Si.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Si.equirect_vert,fragmentShader:Si.equirect_frag},distanceRGBA:{uniforms:ao([wn.common,wn.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Si.distanceRGBA_vert,fragmentShader:Si.distanceRGBA_frag},shadow:{uniforms:ao([wn.lights,wn.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:Si.shadow_vert,fragmentShader:Si.shadow_frag}};function Up(u,e,t,r,o,l){const d=new qe(0);let m,_,h=!0===o?0:1,S=null,M=0,D=null;function N(W,re){t.buffers.color.setClear(W.r,W.g,W.b,re,l)}return{getClearColor:function(){return d},setClearColor:function(W,re=1){d.set(W),h=re,N(d,h)},getClearAlpha:function(){return h},setClearAlpha:function(W){h=W,N(d,h)},render:function(W,re){let U=!1,R=!0===re.isScene?re.background:null;R&&R.isTexture&&(R=e.get(R));const ue=u.xr,te=ue.getSession&&ue.getSession();te&&"additive"===te.environmentBlendMode&&(R=null),null===R?N(d,h):R&&R.isColor&&(N(R,1),U=!0),(u.autoClear||U)&&u.clear(u.autoClearColor,u.autoClearDepth,u.autoClearStencil),R&&(R.isCubeTexture||306===R.mapping)?(void 0===_&&(_=new Gs(new ml(1,1,1),new ca({name:"BackgroundCubeMaterial",uniforms:uc(qa.cube.uniforms),vertexShader:qa.cube.vertexShader,fragmentShader:qa.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(ge,Re,Ue){this.matrixWorld.copyPosition(Ue.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(_)),_.material.uniforms.envMap.value=R,_.material.uniforms.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1,(S!==R||M!==R.version||D!==u.toneMapping)&&(_.material.needsUpdate=!0,S=R,M=R.version,D=u.toneMapping),W.unshift(_,_.geometry,_.material,0,0,null)):R&&R.isTexture&&(void 0===m&&(m=new Gs(new $a(2,2),new ca({name:"BackgroundMaterial",uniforms:uc(qa.background.uniforms),vertexShader:qa.background.vertexShader,fragmentShader:qa.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(m)),m.material.uniforms.t2D.value=R,!0===R.matrixAutoUpdate&&R.updateMatrix(),m.material.uniforms.uvTransform.value.copy(R.matrix),(S!==R||M!==R.version||D!==u.toneMapping)&&(m.material.needsUpdate=!0,S=R,M=R.version,D=u.toneMapping),W.unshift(m,m.geometry,m.material,0,0,null))}}}function L0(u,e,t,r){const o=u.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),d=r.isWebGL2||null!==l,h={},m=W(null);let _=m;function D(ht){return r.isWebGL2?u.bindVertexArray(ht):l.bindVertexArrayOES(ht)}function A(ht){return r.isWebGL2?u.deleteVertexArray(ht):l.deleteVertexArrayOES(ht)}function W(ht){const Mt=[],Tt=[],Et=[];for(let Wt=0;Wt<o;Wt++)Mt[Wt]=0,Tt[Wt]=0,Et[Wt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Mt,enabledAttributes:Tt,attributeDivisors:Et,object:ht,attributes:{},index:null}}function R(){const ht=_.newAttributes;for(let Mt=0,Tt=ht.length;Mt<Tt;Mt++)ht[Mt]=0}function ue(ht){te(ht,0)}function te(ht,Mt){const Et=_.enabledAttributes,Wt=_.attributeDivisors;_.newAttributes[ht]=1,0===Et[ht]&&(u.enableVertexAttribArray(ht),Et[ht]=1),Wt[ht]!==Mt&&((r.isWebGL2?u:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ht,Mt),Wt[ht]=Mt)}function ge(){const ht=_.newAttributes,Mt=_.enabledAttributes;for(let Tt=0,Et=Mt.length;Tt<Et;Tt++)Mt[Tt]!==ht[Tt]&&(u.disableVertexAttribArray(Tt),Mt[Tt]=0)}function Re(ht,Mt,Tt,Et,Wt,nn){!0!==r.isWebGL2||5124!==Tt&&5125!==Tt?u.vertexAttribPointer(ht,Mt,Tt,Et,Wt,nn):u.vertexAttribIPointer(ht,Mt,Tt,Wt,nn)}function ae(){Ke(),_!==m&&(_=m,D(_.object))}function Ke(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function(ht,Mt,Tt,Et,Wt){let nn=!1;if(d){const Un=function(ht,Mt,Tt){const Et=!0===Tt.wireframe;let Wt=h[ht.id];void 0===Wt&&(Wt={},h[ht.id]=Wt);let nn=Wt[Mt.id];void 0===nn&&(nn={},Wt[Mt.id]=nn);let Un=nn[Et];return void 0===Un&&(Un=W(r.isWebGL2?u.createVertexArray():l.createVertexArrayOES()),nn[Et]=Un),Un}(Et,Tt,Mt);_!==Un&&(_=Un,D(_.object)),nn=function(ht,Mt){const Tt=_.attributes,Et=ht.attributes;let Wt=0;for(const nn in Et){const Un=Tt[nn],jt=Et[nn];if(void 0===Un||Un.attribute!==jt||Un.data!==jt.data)return!0;Wt++}return _.attributesNum!==Wt||_.index!==Mt}(Et,Wt),nn&&function(ht,Mt){const Tt={},Et=ht.attributes;let Wt=0;for(const nn in Et){const Un=Et[nn],jt={};jt.attribute=Un,Un.data&&(jt.data=Un.data),Tt[nn]=jt,Wt++}_.attributes=Tt,_.attributesNum=Wt,_.index=Mt}(Et,Wt)}else{const Un=!0===Mt.wireframe;(_.geometry!==Et.id||_.program!==Tt.id||_.wireframe!==Un)&&(_.geometry=Et.id,_.program=Tt.id,_.wireframe=Un,nn=!0)}!0===ht.isInstancedMesh&&(nn=!0),null!==Wt&&t.update(Wt,34963),nn&&(function(ht,Mt,Tt,Et){if(!1===r.isWebGL2&&(ht.isInstancedMesh||Et.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;R();const Wt=Et.attributes,nn=Tt.getAttributes(),Un=Mt.defaultAttributeValues;for(const jt in nn){const Jt=nn[jt];if(Jt.location>=0){let Dn=Wt[jt];if(void 0===Dn&&("instanceMatrix"===jt&&ht.instanceMatrix&&(Dn=ht.instanceMatrix),"instanceColor"===jt&&ht.instanceColor&&(Dn=ht.instanceColor)),void 0!==Dn){const Yn=Dn.normalized,ei=Dn.itemSize,Bt=t.get(Dn);if(void 0===Bt)continue;const wr=Bt.buffer,ti=Bt.type,yi=Bt.bytesPerElement;if(Dn.isInterleavedBufferAttribute){const Fn=Dn.data,ji=Fn.stride,Ci=Dn.offset;if(Fn&&Fn.isInstancedInterleavedBuffer){for(let qt=0;qt<Jt.locationSize;qt++)te(Jt.location+qt,Fn.meshPerAttribute);!0!==ht.isInstancedMesh&&void 0===Et._maxInstanceCount&&(Et._maxInstanceCount=Fn.meshPerAttribute*Fn.count)}else for(let qt=0;qt<Jt.locationSize;qt++)ue(Jt.location+qt);u.bindBuffer(34962,wr);for(let qt=0;qt<Jt.locationSize;qt++)Re(Jt.location+qt,ei/Jt.locationSize,ti,Yn,ji*yi,(Ci+ei/Jt.locationSize*qt)*yi)}else{if(Dn.isInstancedBufferAttribute){for(let Fn=0;Fn<Jt.locationSize;Fn++)te(Jt.location+Fn,Dn.meshPerAttribute);!0!==ht.isInstancedMesh&&void 0===Et._maxInstanceCount&&(Et._maxInstanceCount=Dn.meshPerAttribute*Dn.count)}else for(let Fn=0;Fn<Jt.locationSize;Fn++)ue(Jt.location+Fn);u.bindBuffer(34962,wr);for(let Fn=0;Fn<Jt.locationSize;Fn++)Re(Jt.location+Fn,ei/Jt.locationSize,ti,Yn,ei*yi,ei/Jt.locationSize*Fn*yi)}}else if(void 0!==Un){const Yn=Un[jt];if(void 0!==Yn)switch(Yn.length){case 2:u.vertexAttrib2fv(Jt.location,Yn);break;case 3:u.vertexAttrib3fv(Jt.location,Yn);break;case 4:u.vertexAttrib4fv(Jt.location,Yn);break;default:u.vertexAttrib1fv(Jt.location,Yn)}}}}ge()}(ht,Mt,Tt,Et),null!==Wt&&u.bindBuffer(34963,t.get(Wt).buffer))},reset:ae,resetDefaultState:Ke,dispose:function(){ae();for(const ht in h){const Mt=h[ht];for(const Tt in Mt){const Et=Mt[Tt];for(const Wt in Et)A(Et[Wt].object),delete Et[Wt];delete Mt[Tt]}delete h[ht]}},releaseStatesOfGeometry:function(ht){if(void 0===h[ht.id])return;const Mt=h[ht.id];for(const Tt in Mt){const Et=Mt[Tt];for(const Wt in Et)A(Et[Wt].object),delete Et[Wt];delete Mt[Tt]}delete h[ht.id]},releaseStatesOfProgram:function(ht){for(const Mt in h){const Tt=h[Mt];if(void 0===Tt[ht.id])continue;const Et=Tt[ht.id];for(const Wt in Et)A(Et[Wt].object),delete Et[Wt];delete Tt[ht.id]}},initAttributes:R,enableAttribute:ue,disableUnusedAttributes:ge}}function Ra(u,e,t,r){const o=r.isWebGL2;let l;this.setMode=function(_){l=_},this.render=function(_,S){u.drawArrays(l,_,S),t.update(S,l,1)},this.renderInstances=function(_,S,M){if(0===M)return;let D,A;if(o)D=u,A="drawArraysInstanced";else if(D=e.get("ANGLE_instanced_arrays"),A="drawArraysInstancedANGLE",null===D)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");D[A](l,_,S,M),t.update(S,l,M)}}function Uh(u,e,t){let r;function l(Ue){if("highp"===Ue){if(u.getShaderPrecisionFormat(35633,36338).precision>0&&u.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Ue="mediump"}return"mediump"===Ue&&u.getShaderPrecisionFormat(35633,36337).precision>0&&u.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d="undefined"!=typeof WebGL2RenderingContext&&u instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&u instanceof WebGL2ComputeRenderingContext;let h=void 0!==t.precision?t.precision:"highp";const m=l(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const _=d||e.has("WEBGL_draw_buffers"),S=!0===t.logarithmicDepthBuffer,M=u.getParameter(34930),D=u.getParameter(35660),A=u.getParameter(3379),N=u.getParameter(34076),W=u.getParameter(34921),re=u.getParameter(36347),U=u.getParameter(36348),R=u.getParameter(36349),ue=D>0,te=d||e.has("OES_texture_float");return{isWebGL2:d,drawBuffers:_,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const Ue=e.get("EXT_texture_filter_anisotropic");r=u.getParameter(Ue.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,precision:h,logarithmicDepthBuffer:S,maxTextures:M,maxVertexTextures:D,maxTextureSize:A,maxCubemapSize:N,maxAttributes:W,maxVertexUniforms:re,maxVaryings:U,maxFragmentUniforms:R,vertexTextures:ue,floatFragmentTextures:te,floatVertexTextures:ue&&te,maxSamples:d?u.getParameter(36183):0}}function zh(u){const e=this;let t=null,r=0,o=!1,l=!1;const d=new Ta,h=new rs,m={value:null,needsUpdate:!1};function _(){m.value!==t&&(m.value=t,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function S(M,D,A,N){const W=null!==M?M.length:0;let re=null;if(0!==W){if(re=m.value,!0!==N||null===re){const U=A+4*W,R=D.matrixWorldInverse;h.getNormalMatrix(R),(null===re||re.length<U)&&(re=new Float32Array(U));for(let ue=0,te=A;ue!==W;++ue,te+=4)d.copy(M[ue]).applyMatrix4(R,h),d.normal.toArray(re,te),re[te+3]=d.constant}m.value=re,m.needsUpdate=!0}return e.numPlanes=W,e.numIntersection=0,re}this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(M,D,A){const N=0!==M.length||D||0!==r||o;return o=D,t=S(M,A,0),r=M.length,N},this.beginShadows=function(){l=!0,S(null)},this.endShadows=function(){l=!1,_()},this.setState=function(M,D,A){const N=M.clippingPlanes,W=M.clipIntersection,re=M.clipShadows,U=u.get(M);if(!o||null===N||0===N.length||l&&!re)l?S(null):_();else{const R=l?0:r,ue=4*R;let te=U.clippingState||null;m.value=te,te=S(N,D,ue,A);for(let ge=0;ge!==ue;++ge)te[ge]=t[ge];U.clippingState=te,this.numIntersection=W?this.numPlanes:0,this.numPlanes+=R}}}function H_(u){let e=new WeakMap;function t(d,h){return 303===h?d.mapping=301:304===h&&(d.mapping=302),d}function o(d){const h=d.target;h.removeEventListener("dispose",o);const m=e.get(h);void 0!==m&&(e.delete(h),m.dispose())}return{get:function(d){if(d&&d.isTexture&&!1===d.isRenderTargetTexture){const h=d.mapping;if(303===h||304===h){if(e.has(d))return t(e.get(d).texture,d.mapping);{const m=d.image;if(m&&m.height>0){const _=new Ah(m.height/2);return _.fromEquirectangularTexture(u,d),e.set(d,_),d.addEventListener("dispose",o),t(_.texture,d.mapping)}return null}}}return d},dispose:function(){e=new WeakMap}}}qa.physical={uniforms:ao([qa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new wt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new wt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Si.meshphysical_vert,fragmentShader:Si.meshphysical_frag};class cu extends Dh{constructor(e=-1,t=1,r=1,o=-1,l=.1,d=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=l,this.far=d,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,l,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=r-e,d=r+e,h=o+t,m=o-t;if(null!==this.view&&this.view.enabled){const _=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=_*this.view.offsetX,d=l+_*this.view.width,h-=S*this.view.offsetY,m=h-S*this.view.height}this.projectionMatrix.makeOrthographic(l,d,h,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}cu.prototype.isOrthographicCamera=!0;class Xa extends ca{constructor(e){super(e),this.type="RawShaderMaterial"}}Xa.prototype.isRawShaderMaterial=!0;const Yo=Math.pow(2,8),cd=[.125,.215,.35,.446,.526,.582],Gh=5+cd.length,_l=new cu,{_lodPlanes:Nl,_sizeLods:Wh,_sigmas:ud}=U_(),dd=new qe;let jh=null;const kl=(1+Math.sqrt(5))/2,gc=1/kl,zp=[new p(1,1,1),new p(-1,1,1),new p(1,1,-1),new p(-1,1,-1),new p(0,kl,gc),new p(0,kl,-gc),new p(gc,0,kl),new p(-gc,0,kl),new p(kl,gc,0),new p(-kl,gc,0)];class Gp{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(u){const e=new Float32Array(20),t=new p(0,1,0);return new Xa({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){jh=this._renderer.getRenderTarget();const l=this._allocateTargets();return this._sceneToCubeUV(e,r,o,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=jp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=hd(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Nl.length;e++)Nl[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jh),e.scissorTest=!1,_c(e,0,0,e.width,e.height)}_fromTexture(e,t){jh=this._renderer.getRenderTarget();const r=t||this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const t={magFilter:mt,minFilter:mt,generateMipmaps:!1,type:cn,format:dt,encoding:ln,depthBuffer:!1},r=$h(t);return r.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=$h(t)),r}_compileMaterial(e){const t=new Gs(Nl[0],e);this._renderer.compile(t,_l)}_sceneToCubeUV(e,t,r,o){const h=new xs(90,1,t,r),m=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],S=this._renderer,M=S.autoClear,D=S.toneMapping;S.getClearColor(dd),S.toneMapping=0,S.autoClear=!1;const A=new Ni({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),N=new Gs(new ml,A);let W=!1;const re=e.background;re?re.isColor&&(A.color.copy(re),e.background=null,W=!0):(A.color.copy(dd),W=!0);for(let U=0;U<6;U++){const R=U%3;0===R?(h.up.set(0,m[U],0),h.lookAt(_[U],0,0)):1===R?(h.up.set(0,0,m[U]),h.lookAt(0,_[U],0)):(h.up.set(0,m[U],0),h.lookAt(0,0,_[U])),_c(o,R*Yo,U>2?Yo:0,Yo,Yo),S.setRenderTarget(o),W&&S.render(N,h),S.render(e,h)}N.geometry.dispose(),N.material.dispose(),S.toneMapping=D,S.autoClear=M,e.background=re}_textureToCubeUV(e,t){const r=this._renderer,o=301===e.mapping||302===e.mapping;o?(null===this._cubemapShader&&(this._cubemapShader=jp()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=hd());const l=o?this._cubemapShader:this._equirectShader,d=new Gs(Nl[0],l),h=l.uniforms;h.envMap.value=e,o||h.texelSize.value.set(1/e.image.width,1/e.image.height),_c(t,0,0,3*Yo,2*Yo),r.setRenderTarget(t),r.render(d,_l)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<Gh;o++){const l=Math.sqrt(ud[o]*ud[o]-ud[o-1]*ud[o-1]);this._blur(e,o-1,o,l,zp[(o-1)%zp.length])}t.autoClear=r}_blur(e,t,r,o,l){const d=this._pingPongRenderTarget;this._halfBlur(e,d,t,r,o,"latitudinal",l),this._halfBlur(d,e,r,r,o,"longitudinal",l)}_halfBlur(e,t,r,o,l,d,h){const m=this._renderer,_=this._blurMaterial;"latitudinal"!==d&&"longitudinal"!==d&&console.error("blur direction must be either latitudinal or longitudinal!");const M=new Gs(Nl[o],_),D=_.uniforms,A=Wh[r]-1,N=isFinite(l)?Math.PI/(2*A):2*Math.PI/39,W=l/N,re=isFinite(l)?1+Math.floor(3*W):20;re>20&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${re} samples when the maximum is set to 20`);const U=[];let R=0;for(let Re=0;Re<20;++Re){const Ue=Re/W,ot=Math.exp(-Ue*Ue/2);U.push(ot),0===Re?R+=ot:Re<re&&(R+=2*ot)}for(let Re=0;Re<U.length;Re++)U[Re]=U[Re]/R;D.envMap.value=e.texture,D.samples.value=re,D.weights.value=U,D.latitudinal.value="latitudinal"===d,h&&(D.poleAxis.value=h),D.dTheta.value=N,D.mipInt.value=8-r;const ue=Wh[o];_c(t,3*Math.max(0,Yo-2*ue),(0===o?0:2*Yo)+2*ue*(o>4?o-8+4:0),3*ue,2*ue),m.setRenderTarget(t),m.render(M,_l)}}function U_(){const u=[],e=[],t=[];let r=8;for(let o=0;o<Gh;o++){const l=Math.pow(2,r);e.push(l);let d=1/l;o>4?d=cd[o-8+4-1]:0===o&&(d=0),t.push(d);const h=1/(l-1),m=-h/2,_=1+h/2,S=[m,m,_,m,_,_,m,m,_,_,m,_],M=6,D=6,A=3,N=2,W=1,re=new Float32Array(A*D*M),U=new Float32Array(N*D*M),R=new Float32Array(W*D*M);for(let te=0;te<M;te++){const ge=te%3*2/3-1,Re=te>2?0:-1;re.set([ge,Re,0,ge+2/3,Re,0,ge+2/3,Re+1,0,ge,Re,0,ge+2/3,Re+1,0,ge,Re+1,0],A*D*te),U.set(S,N*D*te),R.set([te,te,te,te,te,te],W*D*te)}const ue=new ui;ue.setAttribute("position",new Ai(re,A)),ue.setAttribute("uv",new Ai(U,N)),ue.setAttribute("faceIndex",new Ai(R,W)),u.push(ue),r>4&&r--}return{_lodPlanes:u,_sizeLods:e,_sigmas:t}}function $h(u){const e=new si(3*Yo,3*Yo,u);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function _c(u,e,t,r,o){u.viewport.set(e,t,r,o),u.scissor.set(e,t,r,o)}function hd(){const u=new wt(1,1);return new Xa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:u}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function jp(){return new Xa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function $p(u){let e=new WeakMap,t=null;function l(h){const m=h.target;m.removeEventListener("dispose",l);const _=e.get(m);void 0!==_&&(e.delete(m),_.dispose())}return{get:function(h){if(h&&h.isTexture){const m=h.mapping,_=303===m||304===m,S=301===m||302===m;if(_||S){if(h.isRenderTargetTexture&&!0===h.needsPMREMUpdate){h.needsPMREMUpdate=!1;let M=e.get(h);return null===t&&(t=new Gp(u)),M=_?t.fromEquirectangular(h,M):t.fromCubemap(h,M),e.set(h,M),M.texture}if(e.has(h))return e.get(h).texture;{const M=h.image;if(_&&M&&M.height>0||S&&M&&function(h){let m=0;for(let S=0;S<6;S++)void 0!==h[S]&&m++;return 6===m}(M)){null===t&&(t=new Gp(u));const D=_?t.fromEquirectangular(h):t.fromCubemap(h);return e.set(h,D),h.addEventListener("dispose",l),D.texture}return null}}}return h},dispose:function(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Yp(u){const e={};function t(r){if(void 0!==e[r])return e[r];let o;switch(r){case"WEBGL_depth_texture":o=u.getExtension("WEBGL_depth_texture")||u.getExtension("MOZ_WEBGL_depth_texture")||u.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=u.getExtension("WEBGL_compressed_texture_s3tc")||u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=u.getExtension("WEBGL_compressed_texture_pvrtc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=u.getExtension(r)}return e[r]=o,o}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return null===o&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function Bl(u,e,t,r){const o={},l=new WeakMap;function d(M){const D=M.target;null!==D.index&&e.remove(D.index);for(const N in D.attributes)e.remove(D.attributes[N]);D.removeEventListener("dispose",d),delete o[D.id];const A=l.get(D);A&&(e.remove(A),l.delete(D)),r.releaseStatesOfGeometry(D),!0===D.isInstancedBufferGeometry&&delete D._maxInstanceCount,t.memory.geometries--}function _(M){const D=[],A=M.index,N=M.attributes.position;let W=0;if(null!==A){const R=A.array;W=A.version;for(let ue=0,te=R.length;ue<te;ue+=3){const ge=R[ue+0],Re=R[ue+1],Ue=R[ue+2];D.push(ge,Re,Re,Ue,Ue,ge)}}else{W=N.version;for(let ue=0,te=N.array.length/3-1;ue<te;ue+=3){const ge=ue+0,Re=ue+1,Ue=ue+2;D.push(ge,Re,Re,Ue,Ue,ge)}}const re=new(ia(D)?us:Zu)(D,1);re.version=W;const U=l.get(M);U&&e.remove(U),l.set(M,re)}return{get:function(M,D){return!0===o[D.id]||(D.addEventListener("dispose",d),o[D.id]=!0,t.memory.geometries++),D},update:function(M){const D=M.attributes;for(const N in D)e.update(D[N],34962);const A=M.morphAttributes;for(const N in A){const W=A[N];for(let re=0,U=W.length;re<U;re++)e.update(W[re],34962)}},getWireframeAttribute:function(M){const D=l.get(M);if(D){const A=M.index;null!==A&&D.version<A.version&&_(M)}else _(M);return l.get(M)}}}function qp(u,e,t,r){const o=r.isWebGL2;let l,h,m;this.setMode=function(D){l=D},this.setIndex=function(D){h=D.type,m=D.bytesPerElement},this.render=function(D,A){u.drawElements(l,A,h,D*m),t.update(A,l,1)},this.renderInstances=function(D,A,N){if(0===N)return;let W,re;if(o)W=u,re="drawElementsInstanced";else if(W=e.get("ANGLE_instanced_arrays"),re="drawElementsInstancedANGLE",null===W)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");W[re](l,A,h,D*m,N),t.update(A,l,N)}}function Xp(u){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(l,d,h){switch(t.calls++,d){case 4:t.triangles+=h*(l/3);break;case 1:t.lines+=h*(l/2);break;case 3:t.lines+=h*(l-1);break;case 2:t.lines+=h*l;break;case 0:t.points+=h*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}class qh extends jn{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=fi,this.minFilter=fi,this.wrapR=ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function fd(u,e){return u[0]-e[0]}function z_(u,e){return Math.abs(e[1])-Math.abs(u[1])}function Xh(u,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),u.divideScalar(t)}function Kp(u,e,t){const r={},o=new Float32Array(8),l=new WeakMap,d=new p,h=[];for(let _=0;_<8;_++)h[_]=[_,0];return{update:function(_,S,M,D){const A=_.morphTargetInfluences;if(!0===e.isWebGL2){const N=S.morphAttributes.position.length;let W=l.get(S);if(void 0===W||W.count!==N){let Ke=function(){Dt.dispose(),l.delete(S),S.removeEventListener("dispose",Ke)};void 0!==W&&W.texture.dispose();const R=void 0!==S.morphAttributes.normal,ue=S.morphAttributes.position,te=S.morphAttributes.normal||[],Re=!0===R?2:1;let Ue=S.attributes.position.count*Re,ot=1;Ue>e.maxTextureSize&&(ot=Math.ceil(Ue/e.maxTextureSize),Ue=e.maxTextureSize);const kt=new Float32Array(Ue*ot*4*N),Dt=new qh(kt,Ue,ot,N);Dt.format=dt,Dt.type=gt,Dt.needsUpdate=!0;const ae=4*Re;for(let ht=0;ht<N;ht++){const Mt=ue[ht],Tt=te[ht],Et=Ue*ot*4*ht;for(let Wt=0;Wt<Mt.count;Wt++){d.fromBufferAttribute(Mt,Wt),!0===Mt.normalized&&Xh(d,Mt);const nn=Wt*ae;kt[Et+nn+0]=d.x,kt[Et+nn+1]=d.y,kt[Et+nn+2]=d.z,kt[Et+nn+3]=0,!0===R&&(d.fromBufferAttribute(Tt,Wt),!0===Tt.normalized&&Xh(d,Tt),kt[Et+nn+4]=d.x,kt[Et+nn+5]=d.y,kt[Et+nn+6]=d.z,kt[Et+nn+7]=0)}}W={count:N,texture:Dt,size:new wt(Ue,ot)},l.set(S,W),S.addEventListener("dispose",Ke)}let re=0;for(let R=0;R<A.length;R++)re+=A[R];const U=S.morphTargetsRelative?1:1-re;D.getUniforms().setValue(u,"morphTargetBaseInfluence",U),D.getUniforms().setValue(u,"morphTargetInfluences",A),D.getUniforms().setValue(u,"morphTargetsTexture",W.texture,t),D.getUniforms().setValue(u,"morphTargetsTextureSize",W.size)}else{const N=void 0===A?0:A.length;let W=r[S.id];if(void 0===W||W.length!==N){W=[];for(let te=0;te<N;te++)W[te]=[te,0];r[S.id]=W}for(let te=0;te<N;te++){const ge=W[te];ge[0]=te,ge[1]=A[te]}W.sort(z_);for(let te=0;te<8;te++)te<N&&W[te][1]?(h[te][0]=W[te][0],h[te][1]=W[te][1]):(h[te][0]=Number.MAX_SAFE_INTEGER,h[te][1]=0);h.sort(fd);const re=S.morphAttributes.position,U=S.morphAttributes.normal;let R=0;for(let te=0;te<8;te++){const ge=h[te],Re=ge[0],Ue=ge[1];Re!==Number.MAX_SAFE_INTEGER&&Ue?(re&&S.getAttribute("morphTarget"+te)!==re[Re]&&S.setAttribute("morphTarget"+te,re[Re]),U&&S.getAttribute("morphNormal"+te)!==U[Re]&&S.setAttribute("morphNormal"+te,U[Re]),o[te]=Ue,R+=Ue):(re&&!0===S.hasAttribute("morphTarget"+te)&&S.deleteAttribute("morphTarget"+te),U&&!0===S.hasAttribute("morphNormal"+te)&&S.deleteAttribute("morphNormal"+te),o[te]=0)}const ue=S.morphTargetsRelative?1:1-R;D.getUniforms().setValue(u,"morphTargetBaseInfluence",ue),D.getUniforms().setValue(u,"morphTargetInfluences",o)}}}}function Zp(u,e,t,r){let o=new WeakMap;function h(m){const _=m.target;_.removeEventListener("dispose",h),t.remove(_.instanceMatrix),null!==_.instanceColor&&t.remove(_.instanceColor)}return{update:function(m){const _=r.render.frame,M=e.get(m,m.geometry);return o.get(M)!==_&&(e.update(M),o.set(M,_)),m.isInstancedMesh&&(!1===m.hasEventListener("dispose",h)&&m.addEventListener("dispose",h),t.update(m.instanceMatrix,34962),null!==m.instanceColor&&t.update(m.instanceColor,34962)),M},dispose:function(){o=new WeakMap}}}qh.prototype.isDataTexture2DArray=!0;class pd extends jn{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=fi,this.minFilter=fi,this.wrapR=ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}pd.prototype.isDataTexture3D=!0;const Kh=new jn,du=new qh,hu=new pd,Zh=new Qc,md=[],Jh=[],gd=new Float32Array(16),yc=new Float32Array(9),Jp=new Float32Array(4);function Vl(u,e,t){const r=u[0];if(r<=0||r>0)return u;const o=e*t;let l=md[o];if(void 0===l&&(l=new Float32Array(o),md[o]=l),0!==e){r.toArray(l,0);for(let d=1,h=0;d!==e;++d)h+=t,u[d].toArray(l,h)}return l}function vo(u,e){if(u.length!==e.length)return!1;for(let t=0,r=u.length;t<r;t++)if(u[t]!==e[t])return!1;return!0}function co(u,e){for(let t=0,r=e.length;t<r;t++)u[t]=e[t]}function fu(u,e){let t=Jh[e];void 0===t&&(t=new Int32Array(e),Jh[e]=t);for(let r=0;r!==e;++r)t[r]=u.allocateTextureUnit();return t}function Qh(u,e){const t=this.cache;t[0]!==e&&(u.uniform1f(this.addr,e),t[0]=e)}function Qp(u,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(u.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(vo(t,e))return;u.uniform2fv(this.addr,e),co(t,e)}}function O0(u,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(u.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(u.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(vo(t,e))return;u.uniform3fv(this.addr,e),co(t,e)}}function em(u,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(u.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(vo(t,e))return;u.uniform4fv(this.addr,e),co(t,e)}}function G_(u,e){const t=this.cache,r=e.elements;if(void 0===r){if(vo(t,e))return;u.uniformMatrix2fv(this.addr,!1,e),co(t,e)}else{if(vo(t,r))return;Jp.set(r),u.uniformMatrix2fv(this.addr,!1,Jp),co(t,r)}}function tm(u,e){const t=this.cache,r=e.elements;if(void 0===r){if(vo(t,e))return;u.uniformMatrix3fv(this.addr,!1,e),co(t,e)}else{if(vo(t,r))return;yc.set(r),u.uniformMatrix3fv(this.addr,!1,yc),co(t,r)}}function W_(u,e){const t=this.cache,r=e.elements;if(void 0===r){if(vo(t,e))return;u.uniformMatrix4fv(this.addr,!1,e),co(t,e)}else{if(vo(t,r))return;gd.set(r),u.uniformMatrix4fv(this.addr,!1,gd),co(t,r)}}function j_(u,e){const t=this.cache;t[0]!==e&&(u.uniform1i(this.addr,e),t[0]=e)}function ua(u,e){const t=this.cache;vo(t,e)||(u.uniform2iv(this.addr,e),co(t,e))}function $_(u,e){const t=this.cache;vo(t,e)||(u.uniform3iv(this.addr,e),co(t,e))}function nm(u,e){const t=this.cache;vo(t,e)||(u.uniform4iv(this.addr,e),co(t,e))}function Y_(u,e){const t=this.cache;t[0]!==e&&(u.uniform1ui(this.addr,e),t[0]=e)}function q_(u,e){const t=this.cache;vo(t,e)||(u.uniform2uiv(this.addr,e),co(t,e))}function X_(u,e){const t=this.cache;vo(t,e)||(u.uniform3uiv(this.addr,e),co(t,e))}function K_(u,e){const t=this.cache;vo(t,e)||(u.uniform4uiv(this.addr,e),co(t,e))}function im(u,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(u.uniform1i(this.addr,o),r[0]=o),t.safeSetTexture2D(e||Kh,o)}function Z_(u,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(u.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||hu,o)}function J_(u,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(u.uniform1i(this.addr,o),r[0]=o),t.safeSetTextureCube(e||Zh,o)}function Q_(u,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(u.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||du,o)}function rm(u,e){u.uniform1fv(this.addr,e)}function sm(u,e){const t=Vl(e,this.size,2);u.uniform2fv(this.addr,t)}function om(u,e){const t=Vl(e,this.size,3);u.uniform3fv(this.addr,t)}function _d(u,e){const t=Vl(e,this.size,4);u.uniform4fv(this.addr,t)}function da(u,e){const t=Vl(e,this.size,4);u.uniformMatrix2fv(this.addr,!1,t)}function am(u,e){const t=Vl(e,this.size,9);u.uniformMatrix3fv(this.addr,!1,t)}function ey(u,e){const t=Vl(e,this.size,16);u.uniformMatrix4fv(this.addr,!1,t)}function ef(u,e){u.uniform1iv(this.addr,e)}function Za(u,e){u.uniform2iv(this.addr,e)}function tf(u,e){u.uniform3iv(this.addr,e)}function lm(u,e){u.uniform4iv(this.addr,e)}function nf(u,e){u.uniform1uiv(this.addr,e)}function F0(u,e){u.uniform2uiv(this.addr,e)}function cm(u,e){u.uniform3uiv(this.addr,e)}function N0(u,e){u.uniform4uiv(this.addr,e)}function yd(u,e,t){const r=e.length,o=fu(t,r);u.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.safeSetTexture2D(e[l]||Kh,o[l])}function vd(u,e,t){const r=e.length,o=fu(t,r);u.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture3D(e[l]||hu,o[l])}function rf(u,e,t){const r=e.length,o=fu(t,r);u.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.safeSetTextureCube(e[l]||Zh,o[l])}function sf(u,e,t){const r=e.length,o=fu(t,r);u.uniform1iv(this.addr,o);for(let l=0;l!==r;++l)t.setTexture2DArray(e[l]||du,o[l])}function k0(u,e,t){this.id=u,this.addr=t,this.cache=[],this.setValue=function(u){switch(u){case 5126:return Qh;case 35664:return Qp;case 35665:return O0;case 35666:return em;case 35674:return G_;case 35675:return tm;case 35676:return W_;case 5124:case 35670:return j_;case 35667:case 35671:return ua;case 35668:case 35672:return $_;case 35669:case 35673:return nm;case 5125:return Y_;case 36294:return q_;case 36295:return X_;case 36296:return K_;case 35678:case 36198:case 36298:case 36306:case 35682:return im;case 35679:case 36299:case 36307:return Z_;case 35680:case 36300:case 36308:case 36293:return J_;case 36289:case 36303:case 36311:case 36292:return Q_}}(e.type)}function um(u,e,t){this.id=u,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function(u){switch(u){case 5126:return rm;case 35664:return sm;case 35665:return om;case 35666:return _d;case 35674:return da;case 35675:return am;case 35676:return ey;case 5124:case 35670:return ef;case 35667:case 35671:return Za;case 35668:case 35672:return tf;case 35669:case 35673:return lm;case 5125:return nf;case 36294:return F0;case 36295:return cm;case 36296:return N0;case 35678:case 36198:case 36298:case 36306:case 35682:return yd;case 35679:case 36299:case 36307:return vd;case 35680:case 36300:case 36308:case 36293:return rf;case 36289:case 36303:case 36311:case 36292:return sf}}(e.type)}function dm(u){this.id=u,this.seq=[],this.map={}}um.prototype.updateCache=function(u){const e=this.cache;u instanceof Float32Array&&e.length!==u.length&&(this.cache=new Float32Array(u.length)),co(e,u)},dm.prototype.setValue=function(u,e,t){const r=this.seq;for(let o=0,l=r.length;o!==l;++o){const d=r[o];d.setValue(u,e[d.id],t)}};const lf=/(\w+)(\])?(\[|\.)?/g;function hm(u,e){u.seq.push(e),u.map[e.id]=e}function fm(u,e,t){const r=u.name,o=r.length;for(lf.lastIndex=0;;){const l=lf.exec(r),d=lf.lastIndex;let h=l[1];const _=l[3];if("]"===l[2]&&(h|=0),void 0===_||"["===_&&d+2===o){hm(t,void 0===_?new k0(h,u,e):new um(h,u,e));break}{let M=t.map[h];void 0===M&&(M=new dm(h),hm(t,M)),t=M}}}function Hl(u,e){this.seq=[],this.map={};const t=u.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=u.getActiveUniform(e,r);fm(o,u.getUniformLocation(e,o.name),this)}}function pm(u,e,t){const r=u.createShader(e);return u.shaderSource(r,t),u.compileShader(r),r}Hl.prototype.setValue=function(u,e,t,r){const o=this.map[e];void 0!==o&&o.setValue(u,t,r)},Hl.prototype.setOptional=function(u,e,t){const r=e[t];void 0!==r&&this.setValue(u,t,r)},Hl.upload=function(u,e,t,r){for(let o=0,l=e.length;o!==l;++o){const d=e[o],h=t[d.id];!1!==h.needsUpdate&&d.setValue(u,h.value,r)}},Hl.seqWithValue=function(u,e){const t=[];for(let r=0,o=u.length;r!==o;++r){const l=u[r];l.id in e&&t.push(l)}return t};let B0=0;function _m(u,e,t){const r=u.getShaderParameter(e,35713),o=u.getShaderInfoLog(e).trim();return r&&""===o?"":t.toUpperCase()+"\n\n"+o+"\n\n"+function(u){const e=u.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(u.getShaderSource(e))}function cf(u,e){const t=function(u){switch(u){case ln:return["Linear","( value )"];case rn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",u),["Linear","( value )"]}}(e);return"vec4 "+u+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function V0(u,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+u+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function bd(u){return""!==u}function ty(u,e){return u.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ny(u,e){return u.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const G0=/^[ \t]*#include +<([\w\d./]+)>/gm;function ym(u){return u.replace(G0,W0)}function W0(u,e){const t=Si[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return ym(t)}const yl=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,uf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vm(u){return u.replace(uf,xd).replace(yl,bm)}function bm(u,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),xd(0,e,t,r)}function xd(u,e,t,r){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function df(u){let e="precision "+u.precision+" float;\nprecision "+u.precision+" int;";return"highp"===u.precision?e+="\n#define HIGH_PRECISION":"mediump"===u.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===u.precision&&(e+="\n#define LOW_PRECISION"),e}function ry(u,e,t,r){const o=u.getContext(),l=t.defines;let d=t.vertexShader,h=t.fragmentShader;const m=function(u){let e="SHADOWMAP_TYPE_BASIC";return 1===u.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===u.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===u.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),_=function(u){let e="ENVMAP_TYPE_CUBE";if(u.envMap)switch(u.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),S=function(u){let e="ENVMAP_MODE_REFLECTION";if(u.envMap)switch(u.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),M=function(u){let e="ENVMAP_BLENDING_NONE";if(u.envMap)switch(u.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),D=t.isWebGL2?"":function(u){return[u.extensionDerivatives||u.envMapCubeUV||u.bumpMap||u.tangentSpaceNormalMap||u.clearcoatNormalMap||u.flatShading||"physical"===u.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(u.extensionFragDepth||u.logarithmicDepthBuffer)&&u.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",u.extensionDrawBuffers&&u.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(u.extensionShaderTextureLOD||u.envMap||u.transmission)&&u.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bd).join("\n")}(t),A=function(u){const e=[];for(const t in u){const r=u[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(l),N=o.createProgram();let W,re,U=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(W=[A].filter(bd).join("\n"),W.length>0&&(W+="\n"),re=[D,A].filter(bd).join("\n"),re.length>0&&(re+="\n")):(W=[df(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+S:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(bd).join("\n"),re=[D,df(t),"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+_:"",t.envMap?"#define "+S:"",t.envMap?"#define "+M:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Si.tonemapping_pars_fragment:"",0!==t.toneMapping?V0("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",Si.encodings_pars_fragment,cf("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(bd).join("\n")),d=ym(d),d=ty(d,t),d=ny(d,t),h=ym(h),h=ty(h,t),h=ny(h,t),d=vm(d),h=vm(h),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(U="#version 300 es\n",W=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+W,re=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+re);const ue=U+re+h,te=pm(o,35633,U+W+d),ge=pm(o,35632,ue);if(o.attachShader(N,te),o.attachShader(N,ge),void 0!==t.index0AttributeName?o.bindAttribLocation(N,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(N,0,"position"),o.linkProgram(N),u.debug.checkShaderErrors){const ot=o.getProgramInfoLog(N).trim(),kt=o.getShaderInfoLog(te).trim(),Dt=o.getShaderInfoLog(ge).trim();let ae=!0,Ke=!0;if(!1===o.getProgramParameter(N,35714)){ae=!1;const ht=_m(o,te,"vertex"),Mt=_m(o,ge,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(N,35715)+"\n\nProgram Info Log: "+ot+"\n"+ht+"\n"+Mt)}else""!==ot?console.warn("THREE.WebGLProgram: Program Info Log:",ot):(""===kt||""===Dt)&&(Ke=!1);Ke&&(this.diagnostics={runnable:ae,programLog:ot,vertexShader:{log:kt,prefix:W},fragmentShader:{log:Dt,prefix:re}})}let Re,Ue;return o.deleteShader(te),o.deleteShader(ge),this.getUniforms=function(){return void 0===Re&&(Re=new Hl(o,N)),Re},this.getAttributes=function(){return void 0===Ue&&(Ue=function(u,e){const t={},r=u.getProgramParameter(e,35721);for(let o=0;o<r;o++){const l=u.getActiveAttrib(e,o),d=l.name;let h=1;35674===l.type&&(h=2),35675===l.type&&(h=3),35676===l.type&&(h=4),t[d]={type:l.type,location:u.getAttribLocation(e,d),locationSize:h}}return t}(o,N)),Ue},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(N),this.program=void 0},this.name=t.shaderName,this.id=B0++,this.cacheKey=e,this.usedTimes=1,this.program=N,this.vertexShader=te,this.fragmentShader=ge,this}let ff=0;class sy{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,o=this._getShaderStage(e.vertexShader),l=this._getShaderStage(r),d=this._getShaderCacheForMaterial(e);return!1===d.has(o)&&(d.add(o),o.usedTimes++),!1===d.has(l)&&(d.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new wm;t.set(e,r)}return t.get(e)}}class wm{constructor(){this.id=ff++,this.usedTimes=0}}function oy(u,e,t,r,o,l,d){const h=new qc,m=new sy,_=[],S=o.isWebGL2,M=o.logarithmicDepthBuffer,D=o.floatVertexTextures,A=o.maxVertexUniforms,N=o.vertexTextures;let W=o.precision;const re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(ae,Ke,ht,Mt,Tt){const Et=Mt.fog,nn=(ae.isMeshStandardMaterial?t:e).get(ae.envMap||(ae.isMeshStandardMaterial?Mt.environment:null)),Un=re[ae.type],jt=Tt.isSkinnedMesh?function(ae){const ht=ae.skeleton.bones;if(D)return 1024;{const Tt=Math.floor((A-20)/4),Et=Math.min(Tt,ht.length);return Et<ht.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ht.length+" bones. This GPU supports "+Et+"."),0):Et}}(Tt):0;let Jt,Dn,Yn,ei;if(null!==ae.precision&&(W=o.getMaxPrecision(ae.precision),W!==ae.precision&&console.warn("THREE.WebGLProgram.getParameters:",ae.precision,"not supported, using",W,"instead.")),Un){const Fn=qa[Un];Jt=Fn.vertexShader,Dn=Fn.fragmentShader}else Jt=ae.vertexShader,Dn=ae.fragmentShader,m.update(ae),Yn=m.getVertexShaderID(ae),ei=m.getFragmentShaderID(ae);const Bt=u.getRenderTarget(),ti=ae.clearcoat>0;return{isWebGL2:S,shaderID:Un,shaderName:ae.type,vertexShader:Jt,fragmentShader:Dn,defines:ae.defines,customVertexShaderID:Yn,customFragmentShaderID:ei,isRawShaderMaterial:!0===ae.isRawShaderMaterial,glslVersion:ae.glslVersion,precision:W,instancing:!0===Tt.isInstancedMesh,instancingColor:!0===Tt.isInstancedMesh&&null!==Tt.instanceColor,supportsVertexTextures:N,outputEncoding:null===Bt?u.outputEncoding:!0===Bt.isXRRenderTarget?Bt.texture.encoding:ln,map:!!ae.map,matcap:!!ae.matcap,envMap:!!nn,envMapMode:nn&&nn.mapping,envMapCubeUV:!!nn&&(306===nn.mapping||307===nn.mapping),lightMap:!!ae.lightMap,aoMap:!!ae.aoMap,emissiveMap:!!ae.emissiveMap,bumpMap:!!ae.bumpMap,normalMap:!!ae.normalMap,objectSpaceNormalMap:1===ae.normalMapType,tangentSpaceNormalMap:0===ae.normalMapType,decodeVideoTexture:!!ae.map&&!0===ae.map.isVideoTexture&&ae.map.encoding===rn,clearcoat:ti,clearcoatMap:ti&&!!ae.clearcoatMap,clearcoatRoughnessMap:ti&&!!ae.clearcoatRoughnessMap,clearcoatNormalMap:ti&&!!ae.clearcoatNormalMap,displacementMap:!!ae.displacementMap,roughnessMap:!!ae.roughnessMap,metalnessMap:!!ae.metalnessMap,specularMap:!!ae.specularMap,specularIntensityMap:!!ae.specularIntensityMap,specularColorMap:!!ae.specularColorMap,transparent:ae.transparent,alphaMap:!!ae.alphaMap,alphaTest:ae.alphaTest>0,gradientMap:!!ae.gradientMap,sheen:ae.sheen>0,sheenColorMap:!!ae.sheenColorMap,sheenRoughnessMap:!!ae.sheenRoughnessMap,transmission:ae.transmission>0,transmissionMap:!!ae.transmissionMap,thicknessMap:!!ae.thicknessMap,combine:ae.combine,vertexTangents:!!ae.normalMap&&!!Tt.geometry&&!!Tt.geometry.attributes.tangent,vertexColors:ae.vertexColors,vertexAlphas:!0===ae.vertexColors&&!!Tt.geometry&&!!Tt.geometry.attributes.color&&4===Tt.geometry.attributes.color.itemSize,vertexUvs:!!(ae.map||ae.bumpMap||ae.normalMap||ae.specularMap||ae.alphaMap||ae.emissiveMap||ae.roughnessMap||ae.metalnessMap||ae.clearcoatMap||ae.clearcoatRoughnessMap||ae.clearcoatNormalMap||ae.displacementMap||ae.transmissionMap||ae.thicknessMap||ae.specularIntensityMap||ae.specularColorMap||ae.sheenColorMap||ae.sheenRoughnessMap),uvsVertexOnly:!(ae.map||ae.bumpMap||ae.normalMap||ae.specularMap||ae.alphaMap||ae.emissiveMap||ae.roughnessMap||ae.metalnessMap||ae.clearcoatNormalMap||ae.transmission>0||ae.transmissionMap||ae.thicknessMap||ae.specularIntensityMap||ae.specularColorMap||ae.sheen>0||ae.sheenColorMap||ae.sheenRoughnessMap||!ae.displacementMap),fog:!!Et,useFog:ae.fog,fogExp2:Et&&Et.isFogExp2,flatShading:!!ae.flatShading,sizeAttenuation:ae.sizeAttenuation,logarithmicDepthBuffer:M,skinning:!0===Tt.isSkinnedMesh&&jt>0,maxBones:jt,useVertexTexture:D,morphTargets:!!Tt.geometry&&!!Tt.geometry.morphAttributes.position,morphNormals:!!Tt.geometry&&!!Tt.geometry.morphAttributes.normal,morphTargetsCount:Tt.geometry&&Tt.geometry.morphAttributes.position?Tt.geometry.morphAttributes.position.length:0,numDirLights:Ke.directional.length,numPointLights:Ke.point.length,numSpotLights:Ke.spot.length,numRectAreaLights:Ke.rectArea.length,numHemiLights:Ke.hemi.length,numDirLightShadows:Ke.directionalShadowMap.length,numPointLightShadows:Ke.pointShadowMap.length,numSpotLightShadows:Ke.spotShadowMap.length,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:ae.dithering,shadowMapEnabled:u.shadowMap.enabled&&ht.length>0,shadowMapType:u.shadowMap.type,toneMapping:ae.toneMapped?u.toneMapping:0,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:ae.premultipliedAlpha,doubleSided:2===ae.side,flipSided:1===ae.side,depthPacking:void 0!==ae.depthPacking&&ae.depthPacking,index0AttributeName:ae.index0AttributeName,extensionDerivatives:ae.extensions&&ae.extensions.derivatives,extensionFragDepth:ae.extensions&&ae.extensions.fragDepth,extensionDrawBuffers:ae.extensions&&ae.extensions.drawBuffers,extensionShaderTextureLOD:ae.extensions&&ae.extensions.shaderTextureLOD,rendererExtensionFragDepth:S||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:S||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:S||r.has("EXT_shader_texture_lod"),customProgramCacheKey:ae.customProgramCacheKey()}},getProgramCacheKey:function(ae){const Ke=[];if(ae.shaderID?Ke.push(ae.shaderID):(Ke.push(ae.customVertexShaderID),Ke.push(ae.customFragmentShaderID)),void 0!==ae.defines)for(const ht in ae.defines)Ke.push(ht),Ke.push(ae.defines[ht]);return!1===ae.isRawShaderMaterial&&(function(ae,Ke){ae.push(Ke.precision),ae.push(Ke.outputEncoding),ae.push(Ke.envMapMode),ae.push(Ke.combine),ae.push(Ke.vertexUvs),ae.push(Ke.fogExp2),ae.push(Ke.sizeAttenuation),ae.push(Ke.maxBones),ae.push(Ke.morphTargetsCount),ae.push(Ke.numDirLights),ae.push(Ke.numPointLights),ae.push(Ke.numSpotLights),ae.push(Ke.numHemiLights),ae.push(Ke.numRectAreaLights),ae.push(Ke.numDirLightShadows),ae.push(Ke.numPointLightShadows),ae.push(Ke.numSpotLightShadows),ae.push(Ke.shadowMapType),ae.push(Ke.toneMapping),ae.push(Ke.numClippingPlanes),ae.push(Ke.numClipIntersection)}(Ke,ae),function(ae,Ke){h.disableAll(),Ke.isWebGL2&&h.enable(0),Ke.supportsVertexTextures&&h.enable(1),Ke.instancing&&h.enable(2),Ke.instancingColor&&h.enable(3),Ke.map&&h.enable(4),Ke.matcap&&h.enable(5),Ke.envMap&&h.enable(6),Ke.envMapCubeUV&&h.enable(7),Ke.lightMap&&h.enable(8),Ke.aoMap&&h.enable(9),Ke.emissiveMap&&h.enable(10),Ke.bumpMap&&h.enable(11),Ke.normalMap&&h.enable(12),Ke.objectSpaceNormalMap&&h.enable(13),Ke.tangentSpaceNormalMap&&h.enable(14),Ke.clearcoat&&h.enable(15),Ke.clearcoatMap&&h.enable(16),Ke.clearcoatRoughnessMap&&h.enable(17),Ke.clearcoatNormalMap&&h.enable(18),Ke.displacementMap&&h.enable(19),Ke.specularMap&&h.enable(20),Ke.roughnessMap&&h.enable(21),Ke.metalnessMap&&h.enable(22),Ke.gradientMap&&h.enable(23),Ke.alphaMap&&h.enable(24),Ke.alphaTest&&h.enable(25),Ke.vertexColors&&h.enable(26),Ke.vertexAlphas&&h.enable(27),Ke.vertexUvs&&h.enable(28),Ke.vertexTangents&&h.enable(29),Ke.uvsVertexOnly&&h.enable(30),Ke.fog&&h.enable(31),ae.push(h.mask),h.disableAll(),Ke.useFog&&h.enable(0),Ke.flatShading&&h.enable(1),Ke.logarithmicDepthBuffer&&h.enable(2),Ke.skinning&&h.enable(3),Ke.useVertexTexture&&h.enable(4),Ke.morphTargets&&h.enable(5),Ke.morphNormals&&h.enable(6),Ke.premultipliedAlpha&&h.enable(7),Ke.shadowMapEnabled&&h.enable(8),Ke.physicallyCorrectLights&&h.enable(9),Ke.doubleSided&&h.enable(10),Ke.flipSided&&h.enable(11),Ke.depthPacking&&h.enable(12),Ke.dithering&&h.enable(13),Ke.specularIntensityMap&&h.enable(14),Ke.specularColorMap&&h.enable(15),Ke.transmission&&h.enable(16),Ke.transmissionMap&&h.enable(17),Ke.thicknessMap&&h.enable(18),Ke.sheen&&h.enable(19),Ke.sheenColorMap&&h.enable(20),Ke.sheenRoughnessMap&&h.enable(21),Ke.decodeVideoTexture&&h.enable(22),Ke.transparent&&h.enable(23),ae.push(h.mask)}(Ke,ae),Ke.push(u.outputEncoding)),Ke.push(ae.customProgramCacheKey),Ke.join()},getUniforms:function(ae){const Ke=re[ae.type];let ht;return ht=Ke?$g.clone(qa[Ke].uniforms):ae.uniforms,ht},acquireProgram:function(ae,Ke){let ht;for(let Mt=0,Tt=_.length;Mt<Tt;Mt++){const Et=_[Mt];if(Et.cacheKey===Ke){ht=Et,++ht.usedTimes;break}}return void 0===ht&&(ht=new ry(u,Ke,ae,l),_.push(ht)),ht},releaseProgram:function(ae){if(0==--ae.usedTimes){const Ke=_.indexOf(ae);_[Ke]=_[_.length-1],_.pop(),ae.destroy()}},releaseShaderCache:function(ae){m.remove(ae)},programs:_,dispose:function(){m.dispose()}}}function ay(){let u=new WeakMap;return{get:function(l){let d=u.get(l);return void 0===d&&(d={},u.set(l,d)),d},remove:function(l){u.delete(l)},update:function(l,d,h){u.get(l)[d]=h},dispose:function(){u=new WeakMap}}}function pu(u,e){return u.groupOrder!==e.groupOrder?u.groupOrder-e.groupOrder:u.renderOrder!==e.renderOrder?u.renderOrder-e.renderOrder:u.material.id!==e.material.id?u.material.id-e.material.id:u.z!==e.z?u.z-e.z:u.id-e.id}function Ul(u,e){return u.groupOrder!==e.groupOrder?u.groupOrder-e.groupOrder:u.renderOrder!==e.renderOrder?u.renderOrder-e.renderOrder:u.z!==e.z?e.z-u.z:u.id-e.id}function wd(){const u=[];let e=0;const t=[],r=[],o=[];function d(M,D,A,N,W,re){let U=u[e];return void 0===U?(U={id:M.id,object:M,geometry:D,material:A,groupOrder:N,renderOrder:M.renderOrder,z:W,group:re},u[e]=U):(U.id=M.id,U.object=M,U.geometry=D,U.material=A,U.groupOrder=N,U.renderOrder=M.renderOrder,U.z=W,U.group=re),e++,U}return{opaque:t,transmissive:r,transparent:o,init:function(){e=0,t.length=0,r.length=0,o.length=0},push:function(M,D,A,N,W,re){const U=d(M,D,A,N,W,re);A.transmission>0?r.push(U):!0===A.transparent?o.push(U):t.push(U)},unshift:function(M,D,A,N,W,re){const U=d(M,D,A,N,W,re);A.transmission>0?r.unshift(U):!0===A.transparent?o.unshift(U):t.unshift(U)},finish:function(){for(let M=e,D=u.length;M<D;M++){const A=u[M];if(null===A.id)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}},sort:function(M,D){t.length>1&&t.sort(M||pu),r.length>1&&r.sort(D||Ul),o.length>1&&o.sort(D||Ul)}}}function vc(){let u=new WeakMap;return{get:function(r,o){let l;return!1===u.has(r)?(l=new wd,u.set(r,[l])):o>=u.get(r).length?(l=new wd,u.get(r).push(l)):l=u.get(r)[o],l},dispose:function(){u=new WeakMap}}}function mu(){const u={};return{get:function(e){if(void 0!==u[e.id])return u[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new p,color:new qe};break;case"SpotLight":t={position:new p,direction:new p,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new p,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new p,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new p,halfWidth:new p,halfHeight:new p}}return u[e.id]=t,t}}}let ly=0;function Em(u,e){return(e.castShadow?1:0)-(u.castShadow?1:0)}function Mm(u,e){const t=new mu,r=function(){const u={};return{get:function(e){if(void 0!==u[e.id])return u[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt,shadowCameraNear:1,shadowCameraFar:1e3}}return u[e.id]=t,t}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let S=0;S<9;S++)o.probe.push(new p);const l=new p,d=new zn,h=new zn;return{setup:function(S,M){let D=0,A=0,N=0;for(let kt=0;kt<9;kt++)o.probe[kt].set(0,0,0);let W=0,re=0,U=0,R=0,ue=0,te=0,ge=0,Re=0;S.sort(Em);const Ue=!0!==M?Math.PI:1;for(let kt=0,Dt=S.length;kt<Dt;kt++){const ae=S[kt],Ke=ae.color,ht=ae.intensity,Mt=ae.distance,Tt=ae.shadow&&ae.shadow.map?ae.shadow.map.texture:null;if(ae.isAmbientLight)D+=Ke.r*ht*Ue,A+=Ke.g*ht*Ue,N+=Ke.b*ht*Ue;else if(ae.isLightProbe)for(let Et=0;Et<9;Et++)o.probe[Et].addScaledVector(ae.sh.coefficients[Et],ht);else if(ae.isDirectionalLight){const Et=t.get(ae);if(Et.color.copy(ae.color).multiplyScalar(ae.intensity*Ue),ae.castShadow){const Wt=ae.shadow,nn=r.get(ae);nn.shadowBias=Wt.bias,nn.shadowNormalBias=Wt.normalBias,nn.shadowRadius=Wt.radius,nn.shadowMapSize=Wt.mapSize,o.directionalShadow[W]=nn,o.directionalShadowMap[W]=Tt,o.directionalShadowMatrix[W]=ae.shadow.matrix,te++}o.directional[W]=Et,W++}else if(ae.isSpotLight){const Et=t.get(ae);if(Et.position.setFromMatrixPosition(ae.matrixWorld),Et.color.copy(Ke).multiplyScalar(ht*Ue),Et.distance=Mt,Et.coneCos=Math.cos(ae.angle),Et.penumbraCos=Math.cos(ae.angle*(1-ae.penumbra)),Et.decay=ae.decay,ae.castShadow){const Wt=ae.shadow,nn=r.get(ae);nn.shadowBias=Wt.bias,nn.shadowNormalBias=Wt.normalBias,nn.shadowRadius=Wt.radius,nn.shadowMapSize=Wt.mapSize,o.spotShadow[U]=nn,o.spotShadowMap[U]=Tt,o.spotShadowMatrix[U]=ae.shadow.matrix,Re++}o.spot[U]=Et,U++}else if(ae.isRectAreaLight){const Et=t.get(ae);Et.color.copy(Ke).multiplyScalar(ht),Et.halfWidth.set(.5*ae.width,0,0),Et.halfHeight.set(0,.5*ae.height,0),o.rectArea[R]=Et,R++}else if(ae.isPointLight){const Et=t.get(ae);if(Et.color.copy(ae.color).multiplyScalar(ae.intensity*Ue),Et.distance=ae.distance,Et.decay=ae.decay,ae.castShadow){const Wt=ae.shadow,nn=r.get(ae);nn.shadowBias=Wt.bias,nn.shadowNormalBias=Wt.normalBias,nn.shadowRadius=Wt.radius,nn.shadowMapSize=Wt.mapSize,nn.shadowCameraNear=Wt.camera.near,nn.shadowCameraFar=Wt.camera.far,o.pointShadow[re]=nn,o.pointShadowMap[re]=Tt,o.pointShadowMatrix[re]=ae.shadow.matrix,ge++}o.point[re]=Et,re++}else if(ae.isHemisphereLight){const Et=t.get(ae);Et.skyColor.copy(ae.color).multiplyScalar(ht*Ue),Et.groundColor.copy(ae.groundColor).multiplyScalar(ht*Ue),o.hemi[ue]=Et,ue++}}R>0&&(e.isWebGL2||!0===u.has("OES_texture_float_linear")?(o.rectAreaLTC1=wn.LTC_FLOAT_1,o.rectAreaLTC2=wn.LTC_FLOAT_2):!0===u.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=wn.LTC_HALF_1,o.rectAreaLTC2=wn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=D,o.ambient[1]=A,o.ambient[2]=N;const ot=o.hash;(ot.directionalLength!==W||ot.pointLength!==re||ot.spotLength!==U||ot.rectAreaLength!==R||ot.hemiLength!==ue||ot.numDirectionalShadows!==te||ot.numPointShadows!==ge||ot.numSpotShadows!==Re)&&(o.directional.length=W,o.spot.length=U,o.rectArea.length=R,o.point.length=re,o.hemi.length=ue,o.directionalShadow.length=te,o.directionalShadowMap.length=te,o.pointShadow.length=ge,o.pointShadowMap.length=ge,o.spotShadow.length=Re,o.spotShadowMap.length=Re,o.directionalShadowMatrix.length=te,o.pointShadowMatrix.length=ge,o.spotShadowMatrix.length=Re,ot.directionalLength=W,ot.pointLength=re,ot.spotLength=U,ot.rectAreaLength=R,ot.hemiLength=ue,ot.numDirectionalShadows=te,ot.numPointShadows=ge,ot.numSpotShadows=Re,o.version=ly++)},setupView:function(S,M){let D=0,A=0,N=0,W=0,re=0;const U=M.matrixWorldInverse;for(let R=0,ue=S.length;R<ue;R++){const te=S[R];if(te.isDirectionalLight){const ge=o.directional[D];ge.direction.setFromMatrixPosition(te.matrixWorld),l.setFromMatrixPosition(te.target.matrixWorld),ge.direction.sub(l),ge.direction.transformDirection(U),D++}else if(te.isSpotLight){const ge=o.spot[N];ge.position.setFromMatrixPosition(te.matrixWorld),ge.position.applyMatrix4(U),ge.direction.setFromMatrixPosition(te.matrixWorld),l.setFromMatrixPosition(te.target.matrixWorld),ge.direction.sub(l),ge.direction.transformDirection(U),N++}else if(te.isRectAreaLight){const ge=o.rectArea[W];ge.position.setFromMatrixPosition(te.matrixWorld),ge.position.applyMatrix4(U),h.identity(),d.copy(te.matrixWorld),d.premultiply(U),h.extractRotation(d),ge.halfWidth.set(.5*te.width,0,0),ge.halfHeight.set(0,.5*te.height,0),ge.halfWidth.applyMatrix4(h),ge.halfHeight.applyMatrix4(h),W++}else if(te.isPointLight){const ge=o.point[A];ge.position.setFromMatrixPosition(te.matrixWorld),ge.position.applyMatrix4(U),A++}else if(te.isHemisphereLight){const ge=o.hemi[re];ge.direction.setFromMatrixPosition(te.matrixWorld),ge.direction.transformDirection(U),ge.direction.normalize(),re++}}},state:o}}function Ed(u,e){const t=new Mm(u,e),r=[],o=[];return{init:function(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:function(M){t.setup(r,M)},setupLightsView:function(M){t.setupView(r,M)},pushLight:function(M){r.push(M)},pushShadow:function(M){o.push(M)}}}function pf(u,e){let t=new WeakMap;return{get:function(l,d=0){let h;return!1===t.has(l)?(h=new Ed(u,e),t.set(l,[h])):d>=t.get(l).length?(h=new Ed(u,e),t.get(l).push(h)):h=t.get(l)[d],h},dispose:function(){t=new WeakMap}}}class Md extends gi{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Md.prototype.isMeshDepthMaterial=!0;class xc extends gi{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new p,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function uy(u,e,t){let r=new tu;const o=new wt,l=new wt,d=new pn,h=new Md({depthPacking:3201}),m=new xc,_={},S=t.maxTextureSize,M={0:1,1:0,2:2},D=new ca({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new wt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),A=D.clone();A.defines.HORIZONTAL_PASS=1;const N=new ui;N.setAttribute("position",new Ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const W=new Gs(N,D),re=this;function U(te,ge){const Re=e.update(W);D.defines.VSM_SAMPLES!==te.blurSamples&&(D.defines.VSM_SAMPLES=te.blurSamples,A.defines.VSM_SAMPLES=te.blurSamples,D.needsUpdate=!0,A.needsUpdate=!0),D.uniforms.shadow_pass.value=te.map.texture,D.uniforms.resolution.value=te.mapSize,D.uniforms.radius.value=te.radius,u.setRenderTarget(te.mapPass),u.clear(),u.renderBufferDirect(ge,null,Re,D,W,null),A.uniforms.shadow_pass.value=te.mapPass.texture,A.uniforms.resolution.value=te.mapSize,A.uniforms.radius.value=te.radius,u.setRenderTarget(te.map),u.clear(),u.renderBufferDirect(ge,null,Re,A,W,null)}function R(te,ge,Re,Ue,ot,kt,Dt){let ae=null;const Ke=!0===Ue.isPointLight?te.customDistanceMaterial:te.customDepthMaterial;if(ae=void 0!==Ke?Ke:!0===Ue.isPointLight?m:h,u.localClippingEnabled&&!0===Re.clipShadows&&0!==Re.clippingPlanes.length||Re.displacementMap&&0!==Re.displacementScale||Re.alphaMap&&Re.alphaTest>0){const ht=ae.uuid,Mt=Re.uuid;let Tt=_[ht];void 0===Tt&&(Tt={},_[ht]=Tt);let Et=Tt[Mt];void 0===Et&&(Et=ae.clone(),Tt[Mt]=Et),ae=Et}return ae.visible=Re.visible,ae.wireframe=Re.wireframe,ae.side=3===Dt?null!==Re.shadowSide?Re.shadowSide:Re.side:null!==Re.shadowSide?Re.shadowSide:M[Re.side],ae.alphaMap=Re.alphaMap,ae.alphaTest=Re.alphaTest,ae.clipShadows=Re.clipShadows,ae.clippingPlanes=Re.clippingPlanes,ae.clipIntersection=Re.clipIntersection,ae.displacementMap=Re.displacementMap,ae.displacementScale=Re.displacementScale,ae.displacementBias=Re.displacementBias,ae.wireframeLinewidth=Re.wireframeLinewidth,ae.linewidth=Re.linewidth,!0===Ue.isPointLight&&!0===ae.isMeshDistanceMaterial&&(ae.referencePosition.setFromMatrixPosition(Ue.matrixWorld),ae.nearDistance=ot,ae.farDistance=kt),ae}function ue(te,ge,Re,Ue,ot){if(!1===te.visible)return;if(te.layers.test(ge.layers)&&(te.isMesh||te.isLine||te.isPoints)&&(te.castShadow||te.receiveShadow&&3===ot)&&(!te.frustumCulled||r.intersectsObject(te))){te.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,te.matrixWorld);const ae=e.update(te),Ke=te.material;if(Array.isArray(Ke)){const ht=ae.groups;for(let Mt=0,Tt=ht.length;Mt<Tt;Mt++){const Et=ht[Mt],Wt=Ke[Et.materialIndex];if(Wt&&Wt.visible){const nn=R(te,0,Wt,Ue,Re.near,Re.far,ot);u.renderBufferDirect(Re,null,ae,nn,te,Et)}}}else if(Ke.visible){const ht=R(te,0,Ke,Ue,Re.near,Re.far,ot);u.renderBufferDirect(Re,null,ae,ht,te,null)}}const Dt=te.children;for(let ae=0,Ke=Dt.length;ae<Ke;ae++)ue(Dt[ae],ge,Re,Ue,ot)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(te,ge,Re){if(!1===re.enabled||!1===re.autoUpdate&&!1===re.needsUpdate||0===te.length)return;const Ue=u.getRenderTarget(),ot=u.getActiveCubeFace(),kt=u.getActiveMipmapLevel(),Dt=u.state;Dt.setBlending(0),Dt.buffers.color.setClear(1,1,1,1),Dt.buffers.depth.setTest(!0),Dt.setScissorTest(!1);for(let ae=0,Ke=te.length;ae<Ke;ae++){const ht=te[ae],Mt=ht.shadow;if(void 0===Mt){console.warn("THREE.WebGLShadowMap:",ht,"has no shadow.");continue}if(!1===Mt.autoUpdate&&!1===Mt.needsUpdate)continue;o.copy(Mt.mapSize);const Tt=Mt.getFrameExtents();if(o.multiply(Tt),l.copy(Mt.mapSize),(o.x>S||o.y>S)&&(o.x>S&&(l.x=Math.floor(S/Tt.x),o.x=l.x*Tt.x,Mt.mapSize.x=l.x),o.y>S&&(l.y=Math.floor(S/Tt.y),o.y=l.y*Tt.y,Mt.mapSize.y=l.y)),null===Mt.map&&!Mt.isPointLightShadow&&3===this.type){const Wt={minFilter:mt,magFilter:mt,format:dt};Mt.map=new si(o.x,o.y,Wt),Mt.map.texture.name=ht.name+".shadowMap",Mt.mapPass=new si(o.x,o.y,Wt),Mt.camera.updateProjectionMatrix()}null===Mt.map&&(Mt.map=new si(o.x,o.y,{minFilter:fi,magFilter:fi,format:dt}),Mt.map.texture.name=ht.name+".shadowMap",Mt.camera.updateProjectionMatrix()),u.setRenderTarget(Mt.map),u.clear();const Et=Mt.getViewportCount();for(let Wt=0;Wt<Et;Wt++){const nn=Mt.getViewport(Wt);d.set(l.x*nn.x,l.y*nn.y,l.x*nn.z,l.y*nn.w),Dt.viewport(d),Mt.updateMatrices(ht,Wt),r=Mt.getFrustum(),ue(ge,Re,Mt.camera,ht,this.type)}!Mt.isPointLightShadow&&3===this.type&&U(Mt,Re),Mt.needsUpdate=!1}re.needsUpdate=!1,u.setRenderTarget(Ue,ot,kt)}}function Cm(u,e,t){const r=t.isWebGL2,h=new function(){let tt=!1;const Xn=new pn;let Pn=null;const Ei=new pn(0,0,0,0);return{setMask:function(Xt){Pn!==Xt&&!tt&&(u.colorMask(Xt,Xt,Xt,Xt),Pn=Xt)},setLocked:function(Xt){tt=Xt},setClear:function(Xt,mi,Qi,Es,Fo){!0===Fo&&(Xt*=Es,mi*=Es,Qi*=Es),Xn.set(Xt,mi,Qi,Es),!1===Ei.equals(Xn)&&(u.clearColor(Xt,mi,Qi,Es),Ei.copy(Xn))},reset:function(){tt=!1,Pn=null,Ei.set(-1,0,0,0)}}},m=new function(){let tt=!1,Xn=null,Pn=null,Ei=null;return{setTest:function(Xt){Xt?Bt(2929):wr(2929)},setMask:function(Xt){Xn!==Xt&&!tt&&(u.depthMask(Xt),Xn=Xt)},setFunc:function(Xt){if(Pn!==Xt){if(Xt)switch(Xt){case 0:u.depthFunc(512);break;case 1:u.depthFunc(519);break;case 2:u.depthFunc(513);break;default:u.depthFunc(515);break;case 4:u.depthFunc(514);break;case 5:u.depthFunc(518);break;case 6:u.depthFunc(516);break;case 7:u.depthFunc(517)}else u.depthFunc(515);Pn=Xt}},setLocked:function(Xt){tt=Xt},setClear:function(Xt){Ei!==Xt&&(u.clearDepth(Xt),Ei=Xt)},reset:function(){tt=!1,Xn=null,Pn=null,Ei=null}}},_=new function(){let tt=!1,Xn=null,Pn=null,Ei=null,Xt=null,mi=null,Qi=null,Es=null,Fo=null;return{setTest:function(ns){tt||(ns?Bt(2960):wr(2960))},setMask:function(ns){Xn!==ns&&!tt&&(u.stencilMask(ns),Xn=ns)},setFunc:function(ns,Ba,Mo){(Pn!==ns||Ei!==Ba||Xt!==Mo)&&(u.stencilFunc(ns,Ba,Mo),Pn=ns,Ei=Ba,Xt=Mo)},setOp:function(ns,Ba,Mo){(mi!==ns||Qi!==Ba||Es!==Mo)&&(u.stencilOp(ns,Ba,Mo),mi=ns,Qi=Ba,Es=Mo)},setLocked:function(ns){tt=ns},setClear:function(ns){Fo!==ns&&(u.clearStencil(ns),Fo=ns)},reset:function(){tt=!1,Xn=null,Pn=null,Ei=null,Xt=null,mi=null,Qi=null,Es=null,Fo=null}}};let S={},M={},D=new WeakMap,A=[],N=null,W=!1,re=null,U=null,R=null,ue=null,te=null,ge=null,Re=null,Ue=!1,ot=null,kt=null,Dt=null,ae=null,Ke=null;const ht=u.getParameter(35661);let Mt=!1,Tt=0;const Et=u.getParameter(7938);-1!==Et.indexOf("WebGL")?(Tt=parseFloat(/^WebGL (\d)/.exec(Et)[1]),Mt=Tt>=1):-1!==Et.indexOf("OpenGL ES")&&(Tt=parseFloat(/^OpenGL ES (\d)/.exec(Et)[1]),Mt=Tt>=2);let Wt=null,nn={};const Un=u.getParameter(3088),jt=u.getParameter(2978),Jt=(new pn).fromArray(Un),Dn=(new pn).fromArray(jt);function Yn(tt,Xn,Pn){const Ei=new Uint8Array(4),Xt=u.createTexture();u.bindTexture(tt,Xt),u.texParameteri(tt,10241,9728),u.texParameteri(tt,10240,9728);for(let mi=0;mi<Pn;mi++)u.texImage2D(Xn+mi,0,6408,1,1,0,6408,5121,Ei);return Xt}const ei={};function Bt(tt){!0!==S[tt]&&(u.enable(tt),S[tt]=!0)}function wr(tt){!1!==S[tt]&&(u.disable(tt),S[tt]=!1)}ei[3553]=Yn(3553,3553,1),ei[34067]=Yn(34067,34069,6),h.setClear(0,0,0,1),m.setClear(1),_.setClear(0),Bt(2929),m.setFunc(3),hn(!1),Nn(1),Bt(2884),qt(0);const ji={100:32774,101:32778,102:32779};if(r)ji[103]=32775,ji[104]=32776;else{const tt=e.get("EXT_blend_minmax");null!==tt&&(ji[103]=tt.MIN_EXT,ji[104]=tt.MAX_EXT)}const Ci={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function qt(tt,Xn,Pn,Ei,Xt,mi,Qi,Es){if(0!==tt){if(!1===W&&(Bt(3042),W=!0),5===tt)Xt=Xt||Xn,mi=mi||Pn,Qi=Qi||Ei,(Xn!==U||Xt!==te)&&(u.blendEquationSeparate(ji[Xn],ji[Xt]),U=Xn,te=Xt),(Pn!==R||Ei!==ue||mi!==ge||Qi!==Re)&&(u.blendFuncSeparate(Ci[Pn],Ci[Ei],Ci[mi],Ci[Qi]),R=Pn,ue=Ei,ge=mi,Re=Qi),re=tt,Ue=null;else if(tt!==re||Es!==Ue){if((100!==U||100!==te)&&(u.blendEquation(32774),U=100,te=100),Es)switch(tt){case 1:u.blendFuncSeparate(1,771,1,771);break;case 2:u.blendFunc(1,1);break;case 3:u.blendFuncSeparate(0,769,0,1);break;case 4:u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",tt)}else switch(tt){case 1:u.blendFuncSeparate(770,771,1,771);break;case 2:u.blendFunc(770,1);break;case 3:u.blendFuncSeparate(0,769,0,1);break;case 4:u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",tt)}R=null,ue=null,ge=null,Re=null,re=tt,Ue=Es}}else!0===W&&(wr(3042),W=!1)}function hn(tt){ot!==tt&&(u.frontFace(tt?2304:2305),ot=tt)}function Nn(tt){0!==tt?(Bt(2884),tt!==kt&&u.cullFace(1===tt?1029:2===tt?1028:1032)):wr(2884),kt=tt}function wi(tt,Xn,Pn){tt?(Bt(32823),(ae!==Xn||Ke!==Pn)&&(u.polygonOffset(Xn,Pn),ae=Xn,Ke=Pn)):wr(32823)}function ir(tt){void 0===tt&&(tt=33984+ht-1),Wt!==tt&&(u.activeTexture(tt),Wt=tt)}return{buffers:{color:h,depth:m,stencil:_},enable:Bt,disable:wr,bindFramebuffer:function(tt,Xn){return M[tt]!==Xn&&(u.bindFramebuffer(tt,Xn),M[tt]=Xn,r&&(36009===tt&&(M[36160]=Xn),36160===tt&&(M[36009]=Xn)),!0)},drawBuffers:function(tt,Xn){let Pn=A,Ei=!1;if(tt)if(Pn=D.get(Xn),void 0===Pn&&(Pn=[],D.set(Xn,Pn)),tt.isWebGLMultipleRenderTargets){const Xt=tt.texture;if(Pn.length!==Xt.length||36064!==Pn[0]){for(let mi=0,Qi=Xt.length;mi<Qi;mi++)Pn[mi]=36064+mi;Pn.length=Xt.length,Ei=!0}}else 36064!==Pn[0]&&(Pn[0]=36064,Ei=!0);else 1029!==Pn[0]&&(Pn[0]=1029,Ei=!0);Ei&&(t.isWebGL2?u.drawBuffers(Pn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Pn))},useProgram:function(tt){return N!==tt&&(u.useProgram(tt),N=tt,!0)},setBlending:qt,setMaterial:function(tt,Xn){2===tt.side?wr(2884):Bt(2884);let Pn=1===tt.side;Xn&&(Pn=!Pn),hn(Pn),1===tt.blending&&!1===tt.transparent?qt(0):qt(tt.blending,tt.blendEquation,tt.blendSrc,tt.blendDst,tt.blendEquationAlpha,tt.blendSrcAlpha,tt.blendDstAlpha,tt.premultipliedAlpha),m.setFunc(tt.depthFunc),m.setTest(tt.depthTest),m.setMask(tt.depthWrite),h.setMask(tt.colorWrite);const Ei=tt.stencilWrite;_.setTest(Ei),Ei&&(_.setMask(tt.stencilWriteMask),_.setFunc(tt.stencilFunc,tt.stencilRef,tt.stencilFuncMask),_.setOp(tt.stencilFail,tt.stencilZFail,tt.stencilZPass)),wi(tt.polygonOffset,tt.polygonOffsetFactor,tt.polygonOffsetUnits),!0===tt.alphaToCoverage?Bt(32926):wr(32926)},setFlipSided:hn,setCullFace:Nn,setLineWidth:function(tt){tt!==Dt&&(Mt&&u.lineWidth(tt),Dt=tt)},setPolygonOffset:wi,setScissorTest:function(tt){tt?Bt(3089):wr(3089)},activeTexture:ir,bindTexture:function(tt,Xn){null===Wt&&ir();let Pn=nn[Wt];void 0===Pn&&(Pn={type:void 0,texture:void 0},nn[Wt]=Pn),(Pn.type!==tt||Pn.texture!==Xn)&&(u.bindTexture(tt,Xn||ei[tt]),Pn.type=tt,Pn.texture=Xn)},unbindTexture:function(){const tt=nn[Wt];void 0!==tt&&void 0!==tt.type&&(u.bindTexture(tt.type,null),tt.type=void 0,tt.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texStorage2D:function(){try{u.texStorage2D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texStorage3D:function(){try{u.texStorage3D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texSubImage2D:function(){try{u.texSubImage2D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},texSubImage3D:function(){try{u.texSubImage3D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},compressedTexSubImage2D:function(){try{u.compressedTexSubImage2D.apply(u,arguments)}catch(tt){console.error("THREE.WebGLState:",tt)}},scissor:function(tt){!1===Jt.equals(tt)&&(u.scissor(tt.x,tt.y,tt.z,tt.w),Jt.copy(tt))},viewport:function(tt){!1===Dn.equals(tt)&&(u.viewport(tt.x,tt.y,tt.z,tt.w),Dn.copy(tt))},reset:function(){u.disable(3042),u.disable(2884),u.disable(2929),u.disable(32823),u.disable(3089),u.disable(2960),u.disable(32926),u.blendEquation(32774),u.blendFunc(1,0),u.blendFuncSeparate(1,0,1,0),u.colorMask(!0,!0,!0,!0),u.clearColor(0,0,0,0),u.depthMask(!0),u.depthFunc(513),u.clearDepth(1),u.stencilMask(4294967295),u.stencilFunc(519,0,4294967295),u.stencilOp(7680,7680,7680),u.clearStencil(0),u.cullFace(1029),u.frontFace(2305),u.polygonOffset(0,0),u.activeTexture(33984),u.bindFramebuffer(36160,null),!0===r&&(u.bindFramebuffer(36009,null),u.bindFramebuffer(36008,null)),u.useProgram(null),u.lineWidth(1),u.scissor(0,0,u.canvas.width,u.canvas.height),u.viewport(0,0,u.canvas.width,u.canvas.height),S={},Wt=null,nn={},M={},D=new WeakMap,A=[],N=null,W=!1,re=null,U=null,R=null,ue=null,te=null,ge=null,Re=null,Ue=!1,ot=null,kt=null,Dt=null,ae=null,Ke=null,Jt.set(0,0,u.canvas.width,u.canvas.height),Dn.set(0,0,u.canvas.width,u.canvas.height),h.reset(),m.reset(),_.reset()}}}function Dm(u,e,t,r,o,l,d){const h=o.isWebGL2,m=o.maxTextures,_=o.maxCubemapSize,S=o.maxTextureSize,M=o.maxSamples,A=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,N=new WeakMap;let W,re=!1;try{re="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Ne){}function U(Ne,ve){return re?new OffscreenCanvas(Ne,ve):v("canvas")}function R(Ne,ve,$t,mn){let Jn=1;if((Ne.width>mn||Ne.height>mn)&&(Jn=mn/Math.max(Ne.width,Ne.height)),Jn<1||!0===ve){if("undefined"!=typeof HTMLImageElement&&Ne instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&Ne instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&Ne instanceof ImageBitmap){const Gt=ve?zt:Math.floor,oi=Gt(Jn*Ne.width),Qn=Gt(Jn*Ne.height);void 0===W&&(W=U(oi,Qn));const Tn=$t?U(oi,Qn):W;return Tn.width=oi,Tn.height=Qn,Tn.getContext("2d").drawImage(Ne,0,0,oi,Qn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ne.width+"x"+Ne.height+") to ("+oi+"x"+Qn+")."),Tn}return"data"in Ne&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ne.width+"x"+Ne.height+")."),Ne}return Ne}function ue(Ne){return na(Ne.width)&&na(Ne.height)}function ge(Ne,ve){return Ne.generateMipmaps&&ve&&Ne.minFilter!==fi&&Ne.minFilter!==mt}function Re(Ne){u.generateMipmap(Ne)}function Ue(Ne,ve,$t,mn,Jn=!1){if(!1===h)return ve;if(null!==Ne){if(void 0!==u[Ne])return u[Ne];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ne+"'")}let Gt=ve;return 6403===ve&&(5126===$t&&(Gt=33326),5131===$t&&(Gt=33325),5121===$t&&(Gt=33321)),33319===ve&&(5126===$t&&(Gt=33328),5131===$t&&(Gt=33327),5121===$t&&(Gt=33323)),6408===ve&&(5126===$t&&(Gt=34836),5131===$t&&(Gt=34842),5121===$t&&(Gt=mn===rn&&!1===Jn?35907:32856),32819===$t&&(Gt=32854),32820===$t&&(Gt=32855)),(33325===Gt||33326===Gt||33327===Gt||33328===Gt||34842===Gt||34836===Gt)&&e.get("EXT_color_buffer_float"),Gt}function ot(Ne,ve,$t){return!0===ge(Ne,$t)||Ne.isFramebufferTexture&&Ne.minFilter!==fi&&Ne.minFilter!==mt?Math.log2(Math.max(ve.width,ve.height))+1:void 0!==Ne.mipmaps&&Ne.mipmaps.length>0?Ne.mipmaps.length:Ne.isCompressedTexture&&Array.isArray(Ne.image)?ve.mipmaps.length:1}function kt(Ne){return Ne===fi||1004===Ne||1005===Ne?9728:9729}function Dt(Ne){const ve=Ne.target;ve.removeEventListener("dispose",Dt),function(Ne){const ve=r.get(Ne);void 0!==ve.__webglInit&&(u.deleteTexture(ve.__webglTexture),r.remove(Ne))}(ve),ve.isVideoTexture&&N.delete(ve),d.memory.textures--}function ae(Ne){const ve=Ne.target;ve.removeEventListener("dispose",ae),function(Ne){const ve=Ne.texture,$t=r.get(Ne),mn=r.get(ve);if(Ne){if(void 0!==mn.__webglTexture&&(u.deleteTexture(mn.__webglTexture),d.memory.textures--),Ne.depthTexture&&Ne.depthTexture.dispose(),Ne.isWebGLCubeRenderTarget)for(let Jn=0;Jn<6;Jn++)u.deleteFramebuffer($t.__webglFramebuffer[Jn]),$t.__webglDepthbuffer&&u.deleteRenderbuffer($t.__webglDepthbuffer[Jn]);else u.deleteFramebuffer($t.__webglFramebuffer),$t.__webglDepthbuffer&&u.deleteRenderbuffer($t.__webglDepthbuffer),$t.__webglMultisampledFramebuffer&&u.deleteFramebuffer($t.__webglMultisampledFramebuffer),$t.__webglColorRenderbuffer&&u.deleteRenderbuffer($t.__webglColorRenderbuffer),$t.__webglDepthRenderbuffer&&u.deleteRenderbuffer($t.__webglDepthRenderbuffer);if(Ne.isWebGLMultipleRenderTargets)for(let Jn=0,Gt=ve.length;Jn<Gt;Jn++){const oi=r.get(ve[Jn]);oi.__webglTexture&&(u.deleteTexture(oi.__webglTexture),d.memory.textures--),r.remove(ve[Jn])}r.remove(ve),r.remove(Ne)}}(ve)}let Mt=0;function Wt(Ne,ve){const $t=r.get(Ne);if(Ne.isVideoTexture&&function(Ne){const ve=d.render.frame;N.get(Ne)!==ve&&(N.set(Ne,ve),Ne.update())}(Ne),Ne.version>0&&$t.__version!==Ne.version){const mn=Ne.image;if(void 0===mn)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==mn.complete)return void Bt($t,Ne,ve);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ve),t.bindTexture(3553,$t.__webglTexture)}function jt(Ne,ve){const $t=r.get(Ne);Ne.version>0&&$t.__version!==Ne.version?function(Ne,ve,$t){if(6!==ve.image.length)return;ei(Ne,ve),t.activeTexture(33984+$t),t.bindTexture(34067,Ne.__webglTexture),u.pixelStorei(37440,ve.flipY),u.pixelStorei(37441,ve.premultiplyAlpha),u.pixelStorei(3317,ve.unpackAlignment),u.pixelStorei(37443,0);const mn=ve&&(ve.isCompressedTexture||ve.image[0].isCompressedTexture),Jn=ve.image[0]&&ve.image[0].isDataTexture,Gt=[];for(let Xt=0;Xt<6;Xt++)Gt[Xt]=mn||Jn?Jn?ve.image[Xt].image:ve.image[Xt]:R(ve.image[Xt],!1,!0,_),Gt[Xt]=wi(ve,Gt[Xt]);const oi=Gt[0],Qn=ue(oi)||h,Tn=l.convert(ve.format,ve.encoding),An=l.convert(ve.type),Pi=Ue(ve.internalFormat,Tn,An,ve.encoding),tt=h&&!0!==ve.isVideoTexture,Xn=void 0===Ne.__version;let Ei,Pn=ot(ve,oi,Qn);if(Yn(34067,ve,Qn),mn){tt&&Xn&&t.texStorage2D(34067,Pn,Pi,oi.width,oi.height);for(let Xt=0;Xt<6;Xt++){Ei=Gt[Xt].mipmaps;for(let mi=0;mi<Ei.length;mi++){const Qi=Ei[mi];ve.format!==dt?null!==Tn?tt?t.compressedTexSubImage2D(34069+Xt,mi,0,0,Qi.width,Qi.height,Tn,Qi.data):t.compressedTexImage2D(34069+Xt,mi,Pi,Qi.width,Qi.height,0,Qi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tt?t.texSubImage2D(34069+Xt,mi,0,0,Qi.width,Qi.height,Tn,An,Qi.data):t.texImage2D(34069+Xt,mi,Pi,Qi.width,Qi.height,0,Tn,An,Qi.data)}}}else{Ei=ve.mipmaps,tt&&Xn&&(Ei.length>0&&Pn++,t.texStorage2D(34067,Pn,Pi,Gt[0].width,Gt[0].height));for(let Xt=0;Xt<6;Xt++)if(Jn){tt?t.texSubImage2D(34069+Xt,0,0,0,Gt[Xt].width,Gt[Xt].height,Tn,An,Gt[Xt].data):t.texImage2D(34069+Xt,0,Pi,Gt[Xt].width,Gt[Xt].height,0,Tn,An,Gt[Xt].data);for(let mi=0;mi<Ei.length;mi++){const Es=Ei[mi].image[Xt].image;tt?t.texSubImage2D(34069+Xt,mi+1,0,0,Es.width,Es.height,Tn,An,Es.data):t.texImage2D(34069+Xt,mi+1,Pi,Es.width,Es.height,0,Tn,An,Es.data)}}else{tt?t.texSubImage2D(34069+Xt,0,0,0,Tn,An,Gt[Xt]):t.texImage2D(34069+Xt,0,Pi,Tn,An,Gt[Xt]);for(let mi=0;mi<Ei.length;mi++){const Qi=Ei[mi];tt?t.texSubImage2D(34069+Xt,mi+1,0,0,Tn,An,Qi.image[Xt]):t.texImage2D(34069+Xt,mi+1,Pi,Tn,An,Qi.image[Xt])}}}ge(ve,Qn)&&Re(34067),Ne.__version=ve.version,ve.onUpdate&&ve.onUpdate(ve)}($t,Ne,ve):(t.activeTexture(33984+ve),t.bindTexture(34067,$t.__webglTexture))}const Jt={[In]:10497,[ki]:33071,1002:33648},Dn={[fi]:9728,1004:9984,1005:9986,[mt]:9729,1007:9985,1008:9987};function Yn(Ne,ve,$t){if($t?(u.texParameteri(Ne,10242,Jt[ve.wrapS]),u.texParameteri(Ne,10243,Jt[ve.wrapT]),(32879===Ne||35866===Ne)&&u.texParameteri(Ne,32882,Jt[ve.wrapR]),u.texParameteri(Ne,10240,Dn[ve.magFilter]),u.texParameteri(Ne,10241,Dn[ve.minFilter])):(u.texParameteri(Ne,10242,33071),u.texParameteri(Ne,10243,33071),(32879===Ne||35866===Ne)&&u.texParameteri(Ne,32882,33071),(ve.wrapS!==ki||ve.wrapT!==ki)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),u.texParameteri(Ne,10240,kt(ve.magFilter)),u.texParameteri(Ne,10241,kt(ve.minFilter)),ve.minFilter!==fi&&ve.minFilter!==mt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const mn=e.get("EXT_texture_filter_anisotropic");if(ve.type===gt&&!1===e.has("OES_texture_float_linear")||!1===h&&ve.type===cn&&!1===e.has("OES_texture_half_float_linear"))return;(ve.anisotropy>1||r.get(ve).__currentAnisotropy)&&(u.texParameterf(Ne,mn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ve.anisotropy,o.getMaxAnisotropy())),r.get(ve).__currentAnisotropy=ve.anisotropy)}}function ei(Ne,ve){void 0===Ne.__webglInit&&(Ne.__webglInit=!0,ve.addEventListener("dispose",Dt),Ne.__webglTexture=u.createTexture(),d.memory.textures++)}function Bt(Ne,ve,$t){let mn=3553;ve.isDataTexture2DArray&&(mn=35866),ve.isDataTexture3D&&(mn=32879),ei(Ne,ve),t.activeTexture(33984+$t),t.bindTexture(mn,Ne.__webglTexture),u.pixelStorei(37440,ve.flipY),u.pixelStorei(37441,ve.premultiplyAlpha),u.pixelStorei(3317,ve.unpackAlignment),u.pixelStorei(37443,0);const Jn=function(Ne){return!h&&(Ne.wrapS!==ki||Ne.wrapT!==ki||Ne.minFilter!==fi&&Ne.minFilter!==mt)}(ve)&&!1===ue(ve.image);let Gt=R(ve.image,Jn,!1,S);Gt=wi(ve,Gt);const oi=ue(Gt)||h,Qn=l.convert(ve.format,ve.encoding);let Pi,Tn=l.convert(ve.type),An=Ue(ve.internalFormat,Qn,Tn,ve.encoding,ve.isVideoTexture);Yn(mn,ve,oi);const tt=ve.mipmaps,Xn=h&&!0!==ve.isVideoTexture,Pn=void 0===Ne.__version,Ei=ot(ve,Gt,oi);if(ve.isDepthTexture)An=6402,h?An=ve.type===gt?36012:1014===ve.type?33190:ve.type===ke?35056:33189:ve.type===gt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ve.format===ye&&6402===An&&ve.type!==Ve&&1014!==ve.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ve.type=Ve,Tn=l.convert(ve.type)),ve.format===le&&6402===An&&(An=34041,ve.type!==ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ve.type=ke,Tn=l.convert(ve.type))),Xn&&Pn?t.texStorage2D(3553,1,An,Gt.width,Gt.height):t.texImage2D(3553,0,An,Gt.width,Gt.height,0,Qn,Tn,null);else if(ve.isDataTexture)if(tt.length>0&&oi){Xn&&Pn&&t.texStorage2D(3553,Ei,An,tt[0].width,tt[0].height);for(let Xt=0,mi=tt.length;Xt<mi;Xt++)Pi=tt[Xt],Xn?t.texSubImage2D(3553,0,0,0,Pi.width,Pi.height,Qn,Tn,Pi.data):t.texImage2D(3553,Xt,An,Pi.width,Pi.height,0,Qn,Tn,Pi.data);ve.generateMipmaps=!1}else Xn?(Pn&&t.texStorage2D(3553,Ei,An,Gt.width,Gt.height),t.texSubImage2D(3553,0,0,0,Gt.width,Gt.height,Qn,Tn,Gt.data)):t.texImage2D(3553,0,An,Gt.width,Gt.height,0,Qn,Tn,Gt.data);else if(ve.isCompressedTexture){Xn&&Pn&&t.texStorage2D(3553,Ei,An,tt[0].width,tt[0].height);for(let Xt=0,mi=tt.length;Xt<mi;Xt++)Pi=tt[Xt],ve.format!==dt?null!==Qn?Xn?t.compressedTexSubImage2D(3553,Xt,0,0,Pi.width,Pi.height,Qn,Pi.data):t.compressedTexImage2D(3553,Xt,An,Pi.width,Pi.height,0,Pi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xn?t.texSubImage2D(3553,Xt,0,0,Pi.width,Pi.height,Qn,Tn,Pi.data):t.texImage2D(3553,Xt,An,Pi.width,Pi.height,0,Qn,Tn,Pi.data)}else if(ve.isDataTexture2DArray)Xn?(Pn&&t.texStorage3D(35866,Ei,An,Gt.width,Gt.height,Gt.depth),t.texSubImage3D(35866,0,0,0,0,Gt.width,Gt.height,Gt.depth,Qn,Tn,Gt.data)):t.texImage3D(35866,0,An,Gt.width,Gt.height,Gt.depth,0,Qn,Tn,Gt.data);else if(ve.isDataTexture3D)Xn?(Pn&&t.texStorage3D(32879,Ei,An,Gt.width,Gt.height,Gt.depth),t.texSubImage3D(32879,0,0,0,0,Gt.width,Gt.height,Gt.depth,Qn,Tn,Gt.data)):t.texImage3D(32879,0,An,Gt.width,Gt.height,Gt.depth,0,Qn,Tn,Gt.data);else if(ve.isFramebufferTexture)Xn&&Pn?t.texStorage2D(3553,Ei,An,Gt.width,Gt.height):t.texImage2D(3553,0,An,Gt.width,Gt.height,0,Qn,Tn,null);else if(tt.length>0&&oi){Xn&&Pn&&t.texStorage2D(3553,Ei,An,tt[0].width,tt[0].height);for(let Xt=0,mi=tt.length;Xt<mi;Xt++)Pi=tt[Xt],Xn?t.texSubImage2D(3553,Xt,0,0,Qn,Tn,Pi):t.texImage2D(3553,Xt,An,Qn,Tn,Pi);ve.generateMipmaps=!1}else Xn?(Pn&&t.texStorage2D(3553,Ei,An,Gt.width,Gt.height),t.texSubImage2D(3553,0,0,0,Qn,Tn,Gt)):t.texImage2D(3553,0,An,Qn,Tn,Gt);ge(ve,oi)&&Re(mn),Ne.__version=ve.version,ve.onUpdate&&ve.onUpdate(ve)}function ti(Ne,ve,$t,mn,Jn){const Gt=l.convert($t.format,$t.encoding),oi=l.convert($t.type),Qn=Ue($t.internalFormat,Gt,oi,$t.encoding);r.get(ve).__hasExternalTextures||(32879===Jn||35866===Jn?t.texImage3D(Jn,0,Qn,ve.width,ve.height,ve.depth,0,Gt,oi,null):t.texImage2D(Jn,0,Qn,ve.width,ve.height,0,Gt,oi,null)),t.bindFramebuffer(36160,Ne),ve.useRenderToTexture?A.framebufferTexture2DMultisampleEXT(36160,mn,Jn,r.get($t).__webglTexture,0,Nn(ve)):u.framebufferTexture2D(36160,mn,Jn,r.get($t).__webglTexture,0),t.bindFramebuffer(36160,null)}function yi(Ne,ve,$t){if(u.bindRenderbuffer(36161,Ne),ve.depthBuffer&&!ve.stencilBuffer){let mn=33189;if($t||ve.useRenderToTexture){const Jn=ve.depthTexture;Jn&&Jn.isDepthTexture&&(Jn.type===gt?mn=36012:1014===Jn.type&&(mn=33190));const Gt=Nn(ve);ve.useRenderToTexture?A.renderbufferStorageMultisampleEXT(36161,Gt,mn,ve.width,ve.height):u.renderbufferStorageMultisample(36161,Gt,mn,ve.width,ve.height)}else u.renderbufferStorage(36161,mn,ve.width,ve.height);u.framebufferRenderbuffer(36160,36096,36161,Ne)}else if(ve.depthBuffer&&ve.stencilBuffer){const mn=Nn(ve);$t&&ve.useRenderbuffer?u.renderbufferStorageMultisample(36161,mn,35056,ve.width,ve.height):ve.useRenderToTexture?A.renderbufferStorageMultisampleEXT(36161,mn,35056,ve.width,ve.height):u.renderbufferStorage(36161,34041,ve.width,ve.height),u.framebufferRenderbuffer(36160,33306,36161,Ne)}else{const mn=!0===ve.isWebGLMultipleRenderTargets?ve.texture[0]:ve.texture,Jn=l.convert(mn.format,mn.encoding),Gt=l.convert(mn.type),oi=Ue(mn.internalFormat,Jn,Gt,mn.encoding),Qn=Nn(ve);$t&&ve.useRenderbuffer?u.renderbufferStorageMultisample(36161,Qn,oi,ve.width,ve.height):ve.useRenderToTexture?A.renderbufferStorageMultisampleEXT(36161,Qn,oi,ve.width,ve.height):u.renderbufferStorage(36161,oi,ve.width,ve.height)}u.bindRenderbuffer(36161,null)}function ji(Ne){const ve=r.get(Ne),$t=!0===Ne.isWebGLCubeRenderTarget;if(Ne.depthTexture&&!ve.__autoAllocateDepthBuffer){if($t)throw new Error("target.depthTexture not supported in Cube render targets");!function(Ne,ve){if(ve&&ve.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Ne),!ve.depthTexture||!ve.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ve.depthTexture).__webglTexture||ve.depthTexture.image.width!==ve.width||ve.depthTexture.image.height!==ve.height)&&(ve.depthTexture.image.width=ve.width,ve.depthTexture.image.height=ve.height,ve.depthTexture.needsUpdate=!0),Wt(ve.depthTexture,0);const mn=r.get(ve.depthTexture).__webglTexture,Jn=Nn(ve);if(ve.depthTexture.format===ye)ve.useRenderToTexture?A.framebufferTexture2DMultisampleEXT(36160,36096,3553,mn,0,Jn):u.framebufferTexture2D(36160,36096,3553,mn,0);else{if(ve.depthTexture.format!==le)throw new Error("Unknown depthTexture format");ve.useRenderToTexture?A.framebufferTexture2DMultisampleEXT(36160,33306,3553,mn,0,Jn):u.framebufferTexture2D(36160,33306,3553,mn,0)}}(ve.__webglFramebuffer,Ne)}else if($t){ve.__webglDepthbuffer=[];for(let mn=0;mn<6;mn++)t.bindFramebuffer(36160,ve.__webglFramebuffer[mn]),ve.__webglDepthbuffer[mn]=u.createRenderbuffer(),yi(ve.__webglDepthbuffer[mn],Ne,!1)}else t.bindFramebuffer(36160,ve.__webglFramebuffer),ve.__webglDepthbuffer=u.createRenderbuffer(),yi(ve.__webglDepthbuffer,Ne,!1);t.bindFramebuffer(36160,null)}function Nn(Ne){return h&&(Ne.useRenderbuffer||Ne.useRenderToTexture)?Math.min(M,Ne.samples):0}function wi(Ne,ve){const $t=Ne.encoding,mn=Ne.format,Jn=Ne.type;return!0===Ne.isCompressedTexture||!0===Ne.isVideoTexture||1035===Ne.format||$t!==ln&&($t===rn?!1===h?!0===e.has("EXT_sRGB")&&mn===dt?(Ne.format=1035,Ne.minFilter=mt,Ne.generateMipmaps=!1):ve=dn.sRGBToLinear(ve):(mn!==dt||Jn!==Mn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",$t)),ve}let Di=!1,ir=!1;this.allocateTextureUnit=function(){const Ne=Mt;return Ne>=m&&console.warn("THREE.WebGLTextures: Trying to use "+Ne+" texture units while this GPU supports only "+m),Mt+=1,Ne},this.resetTextureUnits=function(){Mt=0},this.setTexture2D=Wt,this.setTexture2DArray=function(Ne,ve){const $t=r.get(Ne);Ne.version>0&&$t.__version!==Ne.version?Bt($t,Ne,ve):(t.activeTexture(33984+ve),t.bindTexture(35866,$t.__webglTexture))},this.setTexture3D=function(Ne,ve){const $t=r.get(Ne);Ne.version>0&&$t.__version!==Ne.version?Bt($t,Ne,ve):(t.activeTexture(33984+ve),t.bindTexture(32879,$t.__webglTexture))},this.setTextureCube=jt,this.rebindTextures=function(Ne,ve,$t){const mn=r.get(Ne);void 0!==ve&&ti(mn.__webglFramebuffer,Ne,Ne.texture,36064,3553),void 0!==$t&&ji(Ne)},this.setupRenderTarget=function(Ne){const ve=Ne.texture,$t=r.get(Ne),mn=r.get(ve);Ne.addEventListener("dispose",ae),!0!==Ne.isWebGLMultipleRenderTargets&&(void 0===mn.__webglTexture&&(mn.__webglTexture=u.createTexture()),mn.__version=ve.version,d.memory.textures++);const Jn=!0===Ne.isWebGLCubeRenderTarget,Gt=!0===Ne.isWebGLMultipleRenderTargets,oi=ve.isDataTexture3D||ve.isDataTexture2DArray,Qn=ue(Ne)||h;if(Jn){$t.__webglFramebuffer=[];for(let Tn=0;Tn<6;Tn++)$t.__webglFramebuffer[Tn]=u.createFramebuffer()}else if($t.__webglFramebuffer=u.createFramebuffer(),Gt)if(o.drawBuffers){const Tn=Ne.texture;for(let An=0,Pi=Tn.length;An<Pi;An++){const tt=r.get(Tn[An]);void 0===tt.__webglTexture&&(tt.__webglTexture=u.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Ne.useRenderbuffer)if(h){$t.__webglMultisampledFramebuffer=u.createFramebuffer(),$t.__webglColorRenderbuffer=u.createRenderbuffer(),u.bindRenderbuffer(36161,$t.__webglColorRenderbuffer);const Tn=l.convert(ve.format,ve.encoding),An=l.convert(ve.type),Pi=Ue(ve.internalFormat,Tn,An,ve.encoding),tt=Nn(Ne);u.renderbufferStorageMultisample(36161,tt,Pi,Ne.width,Ne.height),t.bindFramebuffer(36160,$t.__webglMultisampledFramebuffer),u.framebufferRenderbuffer(36160,36064,36161,$t.__webglColorRenderbuffer),u.bindRenderbuffer(36161,null),Ne.depthBuffer&&($t.__webglDepthRenderbuffer=u.createRenderbuffer(),yi($t.__webglDepthRenderbuffer,Ne,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Jn){t.bindTexture(34067,mn.__webglTexture),Yn(34067,ve,Qn);for(let Tn=0;Tn<6;Tn++)ti($t.__webglFramebuffer[Tn],Ne,ve,36064,34069+Tn);ge(ve,Qn)&&Re(34067),t.unbindTexture()}else if(Gt){const Tn=Ne.texture;for(let An=0,Pi=Tn.length;An<Pi;An++){const tt=Tn[An],Xn=r.get(tt);t.bindTexture(3553,Xn.__webglTexture),Yn(3553,tt,Qn),ti($t.__webglFramebuffer,Ne,tt,36064+An,3553),ge(tt,Qn)&&Re(3553)}t.unbindTexture()}else{let Tn=3553;oi&&(h?Tn=ve.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Tn,mn.__webglTexture),Yn(Tn,ve,Qn),ti($t.__webglFramebuffer,Ne,ve,36064,Tn),ge(ve,Qn)&&Re(Tn),t.unbindTexture()}Ne.depthBuffer&&ji(Ne)},this.updateRenderTargetMipmap=function(Ne){const ve=ue(Ne)||h,$t=!0===Ne.isWebGLMultipleRenderTargets?Ne.texture:[Ne.texture];for(let mn=0,Jn=$t.length;mn<Jn;mn++){const Gt=$t[mn];if(ge(Gt,ve)){const oi=Ne.isWebGLCubeRenderTarget?34067:3553,Qn=r.get(Gt).__webglTexture;t.bindTexture(oi,Qn),Re(oi),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function(Ne){if(Ne.useRenderbuffer)if(h){const ve=Ne.width,$t=Ne.height;let mn=16384;const Jn=[36064],Gt=Ne.stencilBuffer?33306:36096;Ne.depthBuffer&&Jn.push(Gt),Ne.ignoreDepthForMultisampleCopy||(Ne.depthBuffer&&(mn|=256),Ne.stencilBuffer&&(mn|=1024));const oi=r.get(Ne);t.bindFramebuffer(36008,oi.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,oi.__webglFramebuffer),Ne.ignoreDepthForMultisampleCopy&&(u.invalidateFramebuffer(36008,[Gt]),u.invalidateFramebuffer(36009,[Gt])),u.blitFramebuffer(0,0,ve,$t,0,0,ve,$t,mn,9728),u.invalidateFramebuffer(36008,Jn),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,oi.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=ji,this.setupFrameBufferTexture=ti,this.safeSetTexture2D=function(Ne,ve){Ne&&Ne.isWebGLRenderTarget&&(!1===Di&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Di=!0),Ne=Ne.texture),Wt(Ne,ve)},this.safeSetTextureCube=function(Ne,ve){Ne&&Ne.isWebGLCubeRenderTarget&&(!1===ir&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ir=!0),Ne=Ne.texture),jt(Ne,ve)}}function dy(u,e,t){const r=t.isWebGL2;return{convert:function(l,d=null){let h;if(l===Mn)return 5121;if(1017===l)return 32819;if(1018===l)return 32820;if(1010===l)return 5120;if(1011===l)return 5122;if(l===Ve)return 5123;if(1013===l)return 5124;if(1014===l)return 5125;if(l===gt)return 5126;if(l===cn)return r?5131:(h=e.get("OES_texture_half_float"),null!==h?h.HALF_FLOAT_OES:null);if(1021===l)return 6406;if(l===dt)return 6408;if(1024===l)return 6409;if(1025===l)return 6410;if(l===ye)return 6402;if(l===le)return 34041;if(1028===l)return 6403;if(1022===l)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===l)return h=e.get("EXT_sRGB"),null!==h?h.SRGB_ALPHA_EXT:null;if(1029===l)return 36244;if(1030===l)return 33319;if(1031===l)return 33320;if(1033===l)return 36249;if(33776===l||33777===l||33778===l||33779===l)if(d===rn){if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===h)return null;if(33776===l)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===l)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===l)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===l)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(h=e.get("WEBGL_compressed_texture_s3tc"),null===h)return null;if(33776===l)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===l)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===l)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===l)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===l||35841===l||35842===l||35843===l){if(h=e.get("WEBGL_compressed_texture_pvrtc"),null===h)return null;if(35840===l)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===l)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===l)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===l)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===l)return h=e.get("WEBGL_compressed_texture_etc1"),null!==h?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===l||37496===l){if(h=e.get("WEBGL_compressed_texture_etc"),null===h)return null;if(37492===l)return d===rn?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(37496===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}if(37808===l||37809===l||37810===l||37811===l||37812===l||37813===l||37814===l||37815===l||37816===l||37817===l||37818===l||37819===l||37820===l||37821===l){if(h=e.get("WEBGL_compressed_texture_astc"),null===h)return null;if(37808===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===l)return d===rn?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===l){if(h=e.get("EXT_texture_compression_bptc"),null===h)return null;if(36492===l)return d===rn?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT}return l===ke?r?34042:(h=e.get("WEBGL_depth_texture"),null!==h?h.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}xc.prototype.isMeshDistanceMaterial=!0;class mf extends xs{constructor(e=[]){super(),this.cameras=e}}mf.prototype.isArrayCamera=!0;class zl extends _r{constructor(){super(),this.type="Group"}}zl.prototype.isGroup=!0;const hy={type:"move"};class bo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new zl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new zl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new p,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new p),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new zl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new p,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new p),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let o=null,l=null,d=null;const h=this._targetRay,m=this._grip,_=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==h&&(o=t.getPose(e.targetRaySpace,r),null!==o&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(hy))),_&&e.hand){d=!0;for(const W of e.hand.values()){const re=t.getJointPose(W,r);if(void 0===_.joints[W.jointName]){const R=new zl;R.matrixAutoUpdate=!1,R.visible=!1,_.joints[W.jointName]=R,_.add(R)}const U=_.joints[W.jointName];null!==re&&(U.matrix.fromArray(re.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.jointRadius=re.radius),U.visible=null!==re}const D=_.joints["index-finger-tip"].position.distanceTo(_.joints["thumb-tip"].position),A=.02,N=.005;_.inputState.pinching&&D>A+N?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!_.inputState.pinching&&D<=A-N&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==m&&e.gripSpace&&(l=t.getPose(e.gripSpace,r),null!==l&&(m.matrix.fromArray(l.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),l.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(l.linearVelocity)):m.hasLinearVelocity=!1,l.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(l.angularVelocity)):m.hasAngularVelocity=!1));return null!==h&&(h.visible=null!==o),null!==m&&(m.visible=null!==l),null!==_&&(_.visible=null!==d),this}}class gf extends jn{constructor(e,t,r,o,l,d,h,m,_,S){if((S=void 0!==S?S:ye)!==ye&&S!==le)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&S===ye&&(r=Ve),void 0===r&&S===le&&(r=ke),super(null,o,l,d,h,m,S,r,_),this.image={width:e,height:t},this.magFilter=void 0!==h?h:fi,this.minFilter=void 0!==m?m:fi,this.flipY=!1,this.generateMipmaps=!1}}gf.prototype.isDepthTexture=!0;class fy extends k{constructor(e,t){super();const r=this;let o=null,l=1,d=null,h="local-floor";const m=e.extensions.has("WEBGL_multisampled_render_to_texture");let _=null,S=null,M=null,D=null,A=!1,N=null;const W=t.getContextAttributes();let re=null,U=null;const R=[],ue=new Map,te=new xs;te.layers.enable(1),te.viewport=new pn;const ge=new xs;ge.layers.enable(2),ge.viewport=new pn;const Re=[te,ge],Ue=new mf;Ue.layers.enable(1),Ue.layers.enable(2);let ot=null,kt=null;function Dt(jt){const Jt=ue.get(jt.inputSource);Jt&&Jt.dispatchEvent({type:jt.type,data:jt.inputSource})}function ae(){ue.forEach(function(jt,Jt){jt.disconnect(Jt)}),ue.clear(),ot=null,kt=null,e.setRenderTarget(re),D=null,M=null,S=null,o=null,U=null,Un.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function Ke(jt){const Jt=o.inputSources;for(let Dn=0;Dn<R.length;Dn++)ue.set(Jt[Dn],R[Dn]);for(let Dn=0;Dn<jt.removed.length;Dn++){const Yn=jt.removed[Dn],ei=ue.get(Yn);ei&&(ei.dispatchEvent({type:"disconnected",data:Yn}),ue.delete(Yn))}for(let Dn=0;Dn<jt.added.length;Dn++){const Yn=jt.added[Dn],ei=ue.get(Yn);ei&&ei.dispatchEvent({type:"connected",data:Yn})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(jt){let Jt=R[jt];return void 0===Jt&&(Jt=new bo,R[jt]=Jt),Jt.getTargetRaySpace()},this.getControllerGrip=function(jt){let Jt=R[jt];return void 0===Jt&&(Jt=new bo,R[jt]=Jt),Jt.getGripSpace()},this.getHand=function(jt){let Jt=R[jt];return void 0===Jt&&(Jt=new bo,R[jt]=Jt),Jt.getHandSpace()},this.setFramebufferScaleFactor=function(jt){l=jt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(jt){h=jt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d},this.getBaseLayer=function(){return null!==M?M:D},this.getBinding=function(){return S},this.getFrame=function(){return N},this.getSession=function(){return o},this.setSession=function(){var u,jt=(u=function*(Jt){if(o=Jt,null!==o){if(re=e.getRenderTarget(),o.addEventListener("select",Dt),o.addEventListener("selectstart",Dt),o.addEventListener("selectend",Dt),o.addEventListener("squeeze",Dt),o.addEventListener("squeezestart",Dt),o.addEventListener("squeezeend",Dt),o.addEventListener("end",ae),o.addEventListener("inputsourceschange",Ke),!0!==W.xrCompatible&&(yield t.makeXRCompatible()),void 0===o.renderState.layers||!1===e.capabilities.isWebGL2)D=new XRWebGLLayer(o,t,{antialias:void 0!==o.renderState.layers||W.antialias,alpha:W.alpha,depth:W.depth,stencil:W.stencil,framebufferScaleFactor:l}),o.updateRenderState({baseLayer:D}),U=new si(D.framebufferWidth,D.framebufferHeight,{format:dt,type:Mn,encoding:e.outputEncoding});else{A=W.antialias;let Dn=null,Yn=null,ei=null;W.depth&&(ei=W.stencil?35056:33190,Dn=W.stencil?le:ye,Yn=W.stencil?ke:Ve);const Bt={colorFormat:e.outputEncoding===rn?35907:32856,depthFormat:ei,scaleFactor:l};S=new XRWebGLBinding(o,t),M=S.createProjectionLayer(Bt),o.updateRenderState({layers:[M]}),U=A?new F(M.textureWidth,M.textureHeight,{format:dt,type:Mn,depthTexture:new gf(M.textureWidth,M.textureHeight,Yn,void 0,void 0,void 0,void 0,void 0,void 0,Dn),stencilBuffer:W.stencil,ignoreDepth:M.ignoreDepthValues,useRenderToTexture:m,encoding:e.outputEncoding}):new si(M.textureWidth,M.textureHeight,{format:dt,type:Mn,depthTexture:new gf(M.textureWidth,M.textureHeight,Yn,void 0,void 0,void 0,void 0,void 0,void 0,Dn),stencilBuffer:W.stencil,ignoreDepth:M.ignoreDepthValues,encoding:e.outputEncoding})}U.isXRRenderTarget=!0,this.setFoveation(1),d=yield o.requestReferenceSpace(h),Un.setContext(o),Un.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},function(){var e=this,t=arguments;return new Promise(function(r,o){var l=u.apply(e,t);function d(m){B(l,r,o,d,h,"next",m)}function h(m){B(l,r,o,d,h,"throw",m)}d(void 0)})});return function(Jt){return jt.apply(this,arguments)}}();const ht=new p,Mt=new p;function Et(jt,Jt){null===Jt?jt.matrixWorld.copy(jt.matrix):jt.matrixWorld.multiplyMatrices(Jt.matrixWorld,jt.matrix),jt.matrixWorldInverse.copy(jt.matrixWorld).invert()}this.updateCamera=function(jt){if(null===o)return;Ue.near=ge.near=te.near=jt.near,Ue.far=ge.far=te.far=jt.far,(ot!==Ue.near||kt!==Ue.far)&&(o.updateRenderState({depthNear:Ue.near,depthFar:Ue.far}),ot=Ue.near,kt=Ue.far);const Jt=jt.parent,Dn=Ue.cameras;Et(Ue,Jt);for(let ei=0;ei<Dn.length;ei++)Et(Dn[ei],Jt);Ue.matrixWorld.decompose(Ue.position,Ue.quaternion,Ue.scale),jt.position.copy(Ue.position),jt.quaternion.copy(Ue.quaternion),jt.scale.copy(Ue.scale),jt.matrix.copy(Ue.matrix),jt.matrixWorld.copy(Ue.matrixWorld);const Yn=jt.children;for(let ei=0,Bt=Yn.length;ei<Bt;ei++)Yn[ei].updateMatrixWorld(!0);2===Dn.length?function(jt,Jt,Dn){ht.setFromMatrixPosition(Jt.matrixWorld),Mt.setFromMatrixPosition(Dn.matrixWorld);const Yn=ht.distanceTo(Mt),ei=Jt.projectionMatrix.elements,Bt=Dn.projectionMatrix.elements,wr=ei[14]/(ei[10]-1),ti=ei[14]/(ei[10]+1),yi=(ei[9]+1)/ei[5],Fn=(ei[9]-1)/ei[5],ji=(ei[8]-1)/ei[0],Ci=(Bt[8]+1)/Bt[0],qt=wr*ji,yn=wr*Ci,hn=Yn/(-ji+Ci),Nn=hn*-ji;Jt.matrixWorld.decompose(jt.position,jt.quaternion,jt.scale),jt.translateX(Nn),jt.translateZ(hn),jt.matrixWorld.compose(jt.position,jt.quaternion,jt.scale),jt.matrixWorldInverse.copy(jt.matrixWorld).invert();const Rn=wr+hn,wi=ti+hn;jt.projectionMatrix.makePerspective(qt-Nn,yn+(Yn-Nn),yi*ti/wi*Rn,Fn*ti/wi*Rn,Rn,wi)}(Ue,te,ge):Ue.projectionMatrix.copy(te.projectionMatrix)},this.getCamera=function(){return Ue},this.getFoveation=function(){return null!==M?M.fixedFoveation:null!==D?D.fixedFoveation:void 0},this.setFoveation=function(jt){null!==M&&(M.fixedFoveation=jt),null!==D&&void 0!==D.fixedFoveation&&(D.fixedFoveation=jt)};let Wt=null;const Un=new vp;Un.setAnimationLoop(function(jt,Jt){if(_=Jt.getViewerPose(d),N=Jt,null!==_){const Yn=_.views;null!==D&&(e.setRenderTargetFramebuffer(U,D.framebuffer),e.setRenderTarget(U));let ei=!1;Yn.length!==Ue.cameras.length&&(Ue.cameras.length=0,ei=!0);for(let Bt=0;Bt<Yn.length;Bt++){const wr=Yn[Bt];let ti=null;if(null!==D)ti=D.getViewport(wr);else{const Fn=S.getViewSubImage(M,wr);ti=Fn.viewport,0===Bt&&(e.setRenderTargetTextures(U,Fn.colorTexture,M.ignoreDepthValues?void 0:Fn.depthStencilTexture),e.setRenderTarget(U))}const yi=Re[Bt];yi.matrix.fromArray(wr.transform.matrix),yi.projectionMatrix.fromArray(wr.projectionMatrix),yi.viewport.set(ti.x,ti.y,ti.width,ti.height),0===Bt&&Ue.matrix.copy(yi.matrix),!0===ei&&Ue.cameras.push(yi)}}const Dn=o.inputSources;for(let Yn=0;Yn<R.length;Yn++)R[Yn].update(Dn[Yn],Jt,d);Wt&&Wt(jt,Jt),N=null}),this.setAnimationLoop=function(jt){Wt=jt},this.dispose=function(){}}}function j0(u){function r(U,R){U.opacity.value=R.opacity,R.color&&U.diffuse.value.copy(R.color),R.emissive&&U.emissive.value.copy(R.emissive).multiplyScalar(R.emissiveIntensity),R.map&&(U.map.value=R.map),R.alphaMap&&(U.alphaMap.value=R.alphaMap),R.specularMap&&(U.specularMap.value=R.specularMap),R.alphaTest>0&&(U.alphaTest.value=R.alphaTest);const ue=u.get(R).envMap;let te,ge;ue&&(U.envMap.value=ue,U.flipEnvMap.value=ue.isCubeTexture&&!1===ue.isRenderTargetTexture?-1:1,U.reflectivity.value=R.reflectivity,U.ior.value=R.ior,U.refractionRatio.value=R.refractionRatio),R.lightMap&&(U.lightMap.value=R.lightMap,U.lightMapIntensity.value=R.lightMapIntensity),R.aoMap&&(U.aoMap.value=R.aoMap,U.aoMapIntensity.value=R.aoMapIntensity),R.map?te=R.map:R.specularMap?te=R.specularMap:R.displacementMap?te=R.displacementMap:R.normalMap?te=R.normalMap:R.bumpMap?te=R.bumpMap:R.roughnessMap?te=R.roughnessMap:R.metalnessMap?te=R.metalnessMap:R.alphaMap?te=R.alphaMap:R.emissiveMap?te=R.emissiveMap:R.clearcoatMap?te=R.clearcoatMap:R.clearcoatNormalMap?te=R.clearcoatNormalMap:R.clearcoatRoughnessMap?te=R.clearcoatRoughnessMap:R.specularIntensityMap?te=R.specularIntensityMap:R.specularColorMap?te=R.specularColorMap:R.transmissionMap?te=R.transmissionMap:R.thicknessMap?te=R.thicknessMap:R.sheenColorMap?te=R.sheenColorMap:R.sheenRoughnessMap&&(te=R.sheenRoughnessMap),void 0!==te&&(te.isWebGLRenderTarget&&(te=te.texture),!0===te.matrixAutoUpdate&&te.updateMatrix(),U.uvTransform.value.copy(te.matrix)),R.aoMap?ge=R.aoMap:R.lightMap&&(ge=R.lightMap),void 0!==ge&&(ge.isWebGLRenderTarget&&(ge=ge.texture),!0===ge.matrixAutoUpdate&&ge.updateMatrix(),U.uv2Transform.value.copy(ge.matrix))}function M(U,R){U.roughness.value=R.roughness,U.metalness.value=R.metalness,R.roughnessMap&&(U.roughnessMap.value=R.roughnessMap),R.metalnessMap&&(U.metalnessMap.value=R.metalnessMap),R.emissiveMap&&(U.emissiveMap.value=R.emissiveMap),R.bumpMap&&(U.bumpMap.value=R.bumpMap,U.bumpScale.value=R.bumpScale,1===R.side&&(U.bumpScale.value*=-1)),R.normalMap&&(U.normalMap.value=R.normalMap,U.normalScale.value.copy(R.normalScale),1===R.side&&U.normalScale.value.negate()),R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias),u.get(R).envMap&&(U.envMapIntensity.value=R.envMapIntensity)}return{refreshFogUniforms:function(U,R){U.fogColor.value.copy(R.color),R.isFog?(U.fogNear.value=R.near,U.fogFar.value=R.far):R.isFogExp2&&(U.fogDensity.value=R.density)},refreshMaterialUniforms:function(U,R,ue,te,ge){R.isMeshBasicMaterial?r(U,R):R.isMeshLambertMaterial?(r(U,R),function(U,R){R.emissiveMap&&(U.emissiveMap.value=R.emissiveMap)}(U,R)):R.isMeshToonMaterial?(r(U,R),function(U,R){R.gradientMap&&(U.gradientMap.value=R.gradientMap),R.emissiveMap&&(U.emissiveMap.value=R.emissiveMap),R.bumpMap&&(U.bumpMap.value=R.bumpMap,U.bumpScale.value=R.bumpScale,1===R.side&&(U.bumpScale.value*=-1)),R.normalMap&&(U.normalMap.value=R.normalMap,U.normalScale.value.copy(R.normalScale),1===R.side&&U.normalScale.value.negate()),R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias)}(U,R)):R.isMeshPhongMaterial?(r(U,R),function(U,R){U.specular.value.copy(R.specular),U.shininess.value=Math.max(R.shininess,1e-4),R.emissiveMap&&(U.emissiveMap.value=R.emissiveMap),R.bumpMap&&(U.bumpMap.value=R.bumpMap,U.bumpScale.value=R.bumpScale,1===R.side&&(U.bumpScale.value*=-1)),R.normalMap&&(U.normalMap.value=R.normalMap,U.normalScale.value.copy(R.normalScale),1===R.side&&U.normalScale.value.negate()),R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias)}(U,R)):R.isMeshStandardMaterial?(r(U,R),R.isMeshPhysicalMaterial?function(U,R,ue){M(U,R),U.ior.value=R.ior,R.sheen>0&&(U.sheenColor.value.copy(R.sheenColor).multiplyScalar(R.sheen),U.sheenRoughness.value=R.sheenRoughness,R.sheenColorMap&&(U.sheenColorMap.value=R.sheenColorMap),R.sheenRoughnessMap&&(U.sheenRoughnessMap.value=R.sheenRoughnessMap)),R.clearcoat>0&&(U.clearcoat.value=R.clearcoat,U.clearcoatRoughness.value=R.clearcoatRoughness,R.clearcoatMap&&(U.clearcoatMap.value=R.clearcoatMap),R.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=R.clearcoatRoughnessMap),R.clearcoatNormalMap&&(U.clearcoatNormalScale.value.copy(R.clearcoatNormalScale),U.clearcoatNormalMap.value=R.clearcoatNormalMap,1===R.side&&U.clearcoatNormalScale.value.negate())),R.transmission>0&&(U.transmission.value=R.transmission,U.transmissionSamplerMap.value=ue.texture,U.transmissionSamplerSize.value.set(ue.width,ue.height),R.transmissionMap&&(U.transmissionMap.value=R.transmissionMap),U.thickness.value=R.thickness,R.thicknessMap&&(U.thicknessMap.value=R.thicknessMap),U.attenuationDistance.value=R.attenuationDistance,U.attenuationColor.value.copy(R.attenuationColor)),U.specularIntensity.value=R.specularIntensity,U.specularColor.value.copy(R.specularColor),R.specularIntensityMap&&(U.specularIntensityMap.value=R.specularIntensityMap),R.specularColorMap&&(U.specularColorMap.value=R.specularColorMap)}(U,R,ge):M(U,R)):R.isMeshMatcapMaterial?(r(U,R),function(U,R){R.matcap&&(U.matcap.value=R.matcap),R.bumpMap&&(U.bumpMap.value=R.bumpMap,U.bumpScale.value=R.bumpScale,1===R.side&&(U.bumpScale.value*=-1)),R.normalMap&&(U.normalMap.value=R.normalMap,U.normalScale.value.copy(R.normalScale),1===R.side&&U.normalScale.value.negate()),R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias)}(U,R)):R.isMeshDepthMaterial?(r(U,R),function(U,R){R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias)}(U,R)):R.isMeshDistanceMaterial?(r(U,R),function(U,R){R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias),U.referencePosition.value.copy(R.referencePosition),U.nearDistance.value=R.nearDistance,U.farDistance.value=R.farDistance}(U,R)):R.isMeshNormalMaterial?(r(U,R),function(U,R){R.bumpMap&&(U.bumpMap.value=R.bumpMap,U.bumpScale.value=R.bumpScale,1===R.side&&(U.bumpScale.value*=-1)),R.normalMap&&(U.normalMap.value=R.normalMap,U.normalScale.value.copy(R.normalScale),1===R.side&&U.normalScale.value.negate()),R.displacementMap&&(U.displacementMap.value=R.displacementMap,U.displacementScale.value=R.displacementScale,U.displacementBias.value=R.displacementBias)}(U,R)):R.isLineBasicMaterial?(function(U,R){U.diffuse.value.copy(R.color),U.opacity.value=R.opacity}(U,R),R.isLineDashedMaterial&&function(U,R){U.dashSize.value=R.dashSize,U.totalSize.value=R.dashSize+R.gapSize,U.scale.value=R.scale}(U,R)):R.isPointsMaterial?function(U,R,ue,te){let ge;U.diffuse.value.copy(R.color),U.opacity.value=R.opacity,U.size.value=R.size*ue,U.scale.value=.5*te,R.map&&(U.map.value=R.map),R.alphaMap&&(U.alphaMap.value=R.alphaMap),R.alphaTest>0&&(U.alphaTest.value=R.alphaTest),R.map?ge=R.map:R.alphaMap&&(ge=R.alphaMap),void 0!==ge&&(!0===ge.matrixAutoUpdate&&ge.updateMatrix(),U.uvTransform.value.copy(ge.matrix))}(U,R,ue,te):R.isSpriteMaterial?function(U,R){let ue;U.diffuse.value.copy(R.color),U.opacity.value=R.opacity,U.rotation.value=R.rotation,R.map&&(U.map.value=R.map),R.alphaMap&&(U.alphaMap.value=R.alphaMap),R.alphaTest>0&&(U.alphaTest.value=R.alphaTest),R.map?ue=R.map:R.alphaMap&&(ue=R.alphaMap),void 0!==ue&&(!0===ue.matrixAutoUpdate&&ue.updateMatrix(),U.uvTransform.value.copy(ue.matrix))}(U,R):R.isShadowMaterial?(U.color.value.copy(R.color),U.opacity.value=R.opacity):R.isShaderMaterial&&(R.uniformsNeedUpdate=!1)}}}function Lr(u={}){const e=void 0!==u.canvas?u.canvas:function(){const u=v("canvas");return u.style.display="block",u}(),t=void 0!==u.context?u.context:null,r=void 0!==u.alpha&&u.alpha,o=void 0===u.depth||u.depth,l=void 0===u.stencil||u.stencil,d=void 0!==u.antialias&&u.antialias,h=void 0===u.premultipliedAlpha||u.premultipliedAlpha,m=void 0!==u.preserveDrawingBuffer&&u.preserveDrawingBuffer,_=void 0!==u.powerPreference?u.powerPreference:"default",S=void 0!==u.failIfMajorPerformanceCaveat&&u.failIfMajorPerformanceCaveat;let M=null,D=null;const A=[],N=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ln,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const W=this;let re=!1,U=0,R=0,ue=null,te=-1,ge=null;const Re=new pn,Ue=new pn;let ot=null,kt=e.width,Dt=e.height,ae=1,Ke=null,ht=null;const Mt=new pn(0,0,kt,Dt),Tt=new pn(0,0,kt,Dt);let Et=!1;const Wt=new tu;let nn=!1,Un=!1,jt=null;const Jt=new zn,Dn=new p,Yn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ei(){return null===ue?ae:1}let ti,yi,Fn,ji,Ci,qt,yn,hn,Nn,Rn,wi,Di,ir,Jr,qr,Ne,ve,$t,mn,Jn,Gt,oi,Qn,Bt=t;function wr(xe,vt){for(let Ft=0;Ft<xe.length;Ft++){const Yt=e.getContext(xe[Ft],vt);if(null!==Yt)return Yt}return null}try{const xe={alpha:!0,depth:o,stencil:l,antialias:d,premultipliedAlpha:h,preserveDrawingBuffer:m,powerPreference:_,failIfMajorPerformanceCaveat:S};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",Pi,!1),e.addEventListener("webglcontextrestored",tt,!1),null===Bt){const vt=["webgl2","webgl","experimental-webgl"];if(!0===W.isWebGL1Renderer&&vt.shift(),Bt=wr(vt,xe),null===Bt)throw wr(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Bt.getShaderPrecisionFormat&&(Bt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(xe){throw console.error("THREE.WebGLRenderer: "+xe.message),xe}function Tn(){ti=new Yp(Bt),yi=new Uh(Bt,ti,u),ti.init(yi),oi=new dy(Bt,ti,yi),Fn=new Cm(Bt,ti,yi),ji=new Xp(Bt),Ci=new ay,qt=new Dm(Bt,ti,Fn,Ci,yi,oi,ji),yn=new H_(W),hn=new $p(W),Nn=new Rh(Bt,yi),Qn=new L0(Bt,ti,Nn,yi),Rn=new Bl(Bt,Nn,ji,Qn),wi=new Zp(Bt,Rn,Nn,ji),mn=new Kp(Bt,yi,qt),Ne=new zh(Ci),Di=new oy(W,yn,hn,ti,yi,Qn,Ne),ir=new j0(Ci),Jr=new vc,qr=new pf(ti,yi),$t=new Up(W,yn,Fn,wi,r,h),ve=new uy(W,wi,yi),Jn=new Ra(Bt,ti,ji,yi),Gt=new qp(Bt,ti,ji,yi),ji.programs=Di.programs,W.capabilities=yi,W.extensions=ti,W.properties=Ci,W.renderLists=Jr,W.shadowMap=ve,W.state=Fn,W.info=ji}Tn();const An=new fy(W,Bt);function Pi(xe){xe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),re=!0}function tt(){console.log("THREE.WebGLRenderer: Context Restored."),re=!1;const xe=ji.autoReset,vt=ve.enabled,Ft=ve.autoUpdate,Pt=ve.needsUpdate,Yt=ve.type;Tn(),ji.autoReset=xe,ve.enabled=vt,ve.autoUpdate=Ft,ve.needsUpdate=Pt,ve.type=Yt}function Xn(xe){const vt=xe.target;vt.removeEventListener("dispose",Xn),function(xe){(function(xe){const vt=Ci.get(xe).programs;void 0!==vt&&(vt.forEach(function(Ft){Di.releaseProgram(Ft)}),xe.isShaderMaterial&&Di.releaseShaderCache(xe))})(xe),Ci.remove(xe)}(vt)}this.xr=An,this.getContext=function(){return Bt},this.getContextAttributes=function(){return Bt.getContextAttributes()},this.forceContextLoss=function(){const xe=ti.get("WEBGL_lose_context");xe&&xe.loseContext()},this.forceContextRestore=function(){const xe=ti.get("WEBGL_lose_context");xe&&xe.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(xe){void 0!==xe&&(ae=xe,this.setSize(kt,Dt,!1))},this.getSize=function(xe){return xe.set(kt,Dt)},this.setSize=function(xe,vt,Ft){An.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(kt=xe,Dt=vt,e.width=Math.floor(xe*ae),e.height=Math.floor(vt*ae),!1!==Ft&&(e.style.width=xe+"px",e.style.height=vt+"px"),this.setViewport(0,0,xe,vt))},this.getDrawingBufferSize=function(xe){return xe.set(kt*ae,Dt*ae).floor()},this.setDrawingBufferSize=function(xe,vt,Ft){kt=xe,Dt=vt,ae=Ft,e.width=Math.floor(xe*Ft),e.height=Math.floor(vt*Ft),this.setViewport(0,0,xe,vt)},this.getCurrentViewport=function(xe){return xe.copy(Re)},this.getViewport=function(xe){return xe.copy(Mt)},this.setViewport=function(xe,vt,Ft,Pt){xe.isVector4?Mt.set(xe.x,xe.y,xe.z,xe.w):Mt.set(xe,vt,Ft,Pt),Fn.viewport(Re.copy(Mt).multiplyScalar(ae).floor())},this.getScissor=function(xe){return xe.copy(Tt)},this.setScissor=function(xe,vt,Ft,Pt){xe.isVector4?Tt.set(xe.x,xe.y,xe.z,xe.w):Tt.set(xe,vt,Ft,Pt),Fn.scissor(Ue.copy(Tt).multiplyScalar(ae).floor())},this.getScissorTest=function(){return Et},this.setScissorTest=function(xe){Fn.setScissorTest(Et=xe)},this.setOpaqueSort=function(xe){Ke=xe},this.setTransparentSort=function(xe){ht=xe},this.getClearColor=function(xe){return xe.copy($t.getClearColor())},this.setClearColor=function(){$t.setClearColor.apply($t,arguments)},this.getClearAlpha=function(){return $t.getClearAlpha()},this.setClearAlpha=function(){$t.setClearAlpha.apply($t,arguments)},this.clear=function(xe,vt,Ft){let Pt=0;(void 0===xe||xe)&&(Pt|=16384),(void 0===vt||vt)&&(Pt|=256),(void 0===Ft||Ft)&&(Pt|=1024),Bt.clear(Pt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Pi,!1),e.removeEventListener("webglcontextrestored",tt,!1),Jr.dispose(),qr.dispose(),Ci.dispose(),yn.dispose(),hn.dispose(),wi.dispose(),Qn.dispose(),Di.dispose(),An.dispose(),An.removeEventListener("sessionstart",Qi),An.removeEventListener("sessionend",Es),jt&&(jt.dispose(),jt=null),Fo.stop()},this.renderBufferDirect=function(xe,vt,Ft,Pt,Yt,vi){null===vt&&(vt=Yn);const Li=Yt.isMesh&&Yt.matrixWorld.determinant()<0,Yi=function(xe,vt,Ft,Pt,Yt){!0!==vt.isScene&&(vt=Yn),qt.resetTextureUnits();const vi=vt.fog,Yi=null===ue?W.outputEncoding:!0===ue.isXRRenderTarget?ue.texture.encoding:ln,$i=(Pt.isMeshStandardMaterial?hn:yn).get(Pt.envMap||(Pt.isMeshStandardMaterial?vt.environment:null)),Gr=!0===Pt.vertexColors&&!!Ft.attributes.color&&4===Ft.attributes.color.itemSize,fr=!!Pt.normalMap&&!!Ft.attributes.tangent,yr=!!Ft.morphAttributes.position,ds=!!Ft.morphAttributes.normal,ic=Ft.morphAttributes.position?Ft.morphAttributes.position.length:0,qu=Pt.toneMapped?W.toneMapping:0,Er=Ci.get(Pt),Va=D.state.lights;!0!==nn||!0!==Un&&xe===ge||Ne.setState(Pt,xe,xe===ge&&Pt.id===te);let hs=!1;Pt.version===Er.__version?(Er.needsLights&&Er.lightsStateVersion!==Va.state.version||Er.outputEncoding!==Yi||Yt.isInstancedMesh&&!1===Er.instancing||!Yt.isInstancedMesh&&!0===Er.instancing||Yt.isSkinnedMesh&&!1===Er.skinning||!Yt.isSkinnedMesh&&!0===Er.skinning||Er.envMap!==$i||Pt.fog&&Er.fog!==vi||void 0!==Er.numClippingPlanes&&(Er.numClippingPlanes!==Ne.numPlanes||Er.numIntersection!==Ne.numIntersection)||Er.vertexAlphas!==Gr||Er.vertexTangents!==fr||Er.morphTargets!==yr||Er.morphNormals!==ds||Er.toneMapping!==qu||!0===yi.isWebGL2&&Er.morphTargetsCount!==ic)&&(hs=!0):(hs=!0,Er.__version=Pt.version);let ga=Er.currentProgram;!0===hs&&(ga=Lg(Pt,vt,Yt));let sl=!1,ol=!1,Ha=!1;const uo=ga.getUniforms(),yh=Er.uniforms;if(Fn.useProgram(ga.program)&&(sl=!0,ol=!0,Ha=!0),Pt.id!==te&&(te=Pt.id,ol=!0),sl||ge!==xe){if(uo.setValue(Bt,"projectionMatrix",xe.projectionMatrix),yi.logarithmicDepthBuffer&&uo.setValue(Bt,"logDepthBufFC",2/(Math.log(xe.far+1)/Math.LN2)),ge!==xe&&(ge=xe,ol=!0,Ha=!0),Pt.isShaderMaterial||Pt.isMeshPhongMaterial||Pt.isMeshToonMaterial||Pt.isMeshStandardMaterial||Pt.envMap){const Zo=uo.map.cameraPosition;void 0!==Zo&&Zo.setValue(Bt,Dn.setFromMatrixPosition(xe.matrixWorld))}(Pt.isMeshPhongMaterial||Pt.isMeshToonMaterial||Pt.isMeshLambertMaterial||Pt.isMeshBasicMaterial||Pt.isMeshStandardMaterial||Pt.isShaderMaterial)&&uo.setValue(Bt,"isOrthographic",!0===xe.isOrthographicCamera),(Pt.isMeshPhongMaterial||Pt.isMeshToonMaterial||Pt.isMeshLambertMaterial||Pt.isMeshBasicMaterial||Pt.isMeshStandardMaterial||Pt.isShaderMaterial||Pt.isShadowMaterial||Yt.isSkinnedMesh)&&uo.setValue(Bt,"viewMatrix",xe.matrixWorldInverse)}if(Yt.isSkinnedMesh){uo.setOptional(Bt,Yt,"bindMatrix"),uo.setOptional(Bt,Yt,"bindMatrixInverse");const Zo=Yt.skeleton;Zo&&(yi.floatVertexTextures?(null===Zo.boneTexture&&Zo.computeBoneTexture(),uo.setValue(Bt,"boneTexture",Zo.boneTexture,qt),uo.setValue(Bt,"boneTextureSize",Zo.boneTextureSize)):uo.setOptional(Bt,Zo,"boneMatrices"))}return!!Ft&&(void 0!==Ft.morphAttributes.position||void 0!==Ft.morphAttributes.normal)&&mn.update(Yt,Ft,Pt,ga),(ol||Er.receiveShadow!==Yt.receiveShadow)&&(Er.receiveShadow=Yt.receiveShadow,uo.setValue(Bt,"receiveShadow",Yt.receiveShadow)),ol&&(uo.setValue(Bt,"toneMappingExposure",W.toneMappingExposure),Er.needsLights&&function(xe,vt){xe.ambientLightColor.needsUpdate=vt,xe.lightProbe.needsUpdate=vt,xe.directionalLights.needsUpdate=vt,xe.directionalLightShadows.needsUpdate=vt,xe.pointLights.needsUpdate=vt,xe.pointLightShadows.needsUpdate=vt,xe.spotLights.needsUpdate=vt,xe.spotLightShadows.needsUpdate=vt,xe.rectAreaLights.needsUpdate=vt,xe.hemisphereLights.needsUpdate=vt}(yh,Ha),vi&&Pt.fog&&ir.refreshFogUniforms(yh,vi),ir.refreshMaterialUniforms(yh,Pt,ae,Dt,jt),Hl.upload(Bt,Er.uniformsList,yh,qt)),Pt.isShaderMaterial&&!0===Pt.uniformsNeedUpdate&&(Hl.upload(Bt,Er.uniformsList,yh,qt),Pt.uniformsNeedUpdate=!1),Pt.isSpriteMaterial&&uo.setValue(Bt,"center",Yt.center),uo.setValue(Bt,"modelViewMatrix",Yt.modelViewMatrix),uo.setValue(Bt,"normalMatrix",Yt.normalMatrix),uo.setValue(Bt,"modelMatrix",Yt.matrixWorld),ga}(xe,vt,Ft,Pt,Yt);Fn.setMaterial(Pt,Li);let $i=Ft.index;const Gr=Ft.attributes.position;if(null===$i){if(void 0===Gr||0===Gr.count)return}else if(0===$i.count)return;let fr=1;!0===Pt.wireframe&&($i=Rn.getWireframeAttribute(Ft),fr=2),Qn.setup(Yt,Pt,Yi,Ft,$i);let yr,ds=Jn;null!==$i&&(yr=Nn.get($i),ds=Gt,ds.setIndex(yr));const ic=null!==$i?$i.count:Gr.count,qu=Ft.drawRange.start*fr,Er=Ft.drawRange.count*fr,Va=null!==vi?vi.start*fr:0,hs=null!==vi?vi.count*fr:1/0,ga=Math.max(qu,Va),sl=Math.min(ic,qu+Er,Va+hs)-1,ol=Math.max(0,sl-ga+1);if(0!==ol){if(Yt.isMesh)!0===Pt.wireframe?(Fn.setLineWidth(Pt.wireframeLinewidth*ei()),ds.setMode(1)):ds.setMode(4);else if(Yt.isLine){let Ha=Pt.linewidth;void 0===Ha&&(Ha=1),Fn.setLineWidth(Ha*ei()),ds.setMode(Yt.isLineSegments?1:Yt.isLineLoop?2:3)}else Yt.isPoints?ds.setMode(0):Yt.isSprite&&ds.setMode(4);if(Yt.isInstancedMesh)ds.renderInstances(ga,ol,Yt.count);else if(Ft.isInstancedBufferGeometry){const Ha=Math.min(Ft.instanceCount,Ft._maxInstanceCount);ds.renderInstances(ga,ol,Ha)}else ds.render(ga,ol)}},this.compile=function(xe,vt){D=qr.get(xe),D.init(),N.push(D),xe.traverseVisible(function(Ft){Ft.isLight&&Ft.layers.test(vt.layers)&&(D.pushLight(Ft),Ft.castShadow&&D.pushShadow(Ft))}),D.setupLights(W.physicallyCorrectLights),xe.traverse(function(Ft){const Pt=Ft.material;if(Pt)if(Array.isArray(Pt))for(let Yt=0;Yt<Pt.length;Yt++)Lg(Pt[Yt],xe,Ft);else Lg(Pt,xe,Ft)}),N.pop(),D=null};let Xt=null;function Qi(){Fo.stop()}function Es(){Fo.start()}const Fo=new vp;function ns(xe,vt,Ft,Pt){if(!1===xe.visible)return;if(xe.layers.test(vt.layers))if(xe.isGroup)Ft=xe.renderOrder;else if(xe.isLOD)!0===xe.autoUpdate&&xe.update(vt);else if(xe.isLight)D.pushLight(xe),xe.castShadow&&D.pushShadow(xe);else if(xe.isSprite){if(!xe.frustumCulled||Wt.intersectsSprite(xe)){Pt&&Dn.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(Jt);const Li=wi.update(xe),Yi=xe.material;Yi.visible&&M.push(xe,Li,Yi,Ft,Dn.z,null)}}else if((xe.isMesh||xe.isLine||xe.isPoints)&&(xe.isSkinnedMesh&&xe.skeleton.frame!==ji.render.frame&&(xe.skeleton.update(),xe.skeleton.frame=ji.render.frame),!xe.frustumCulled||Wt.intersectsObject(xe))){Pt&&Dn.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(Jt);const Li=wi.update(xe),Yi=xe.material;if(Array.isArray(Yi)){const $i=Li.groups;for(let Gr=0,fr=$i.length;Gr<fr;Gr++){const yr=$i[Gr],ds=Yi[yr.materialIndex];ds&&ds.visible&&M.push(xe,Li,ds,Ft,Dn.z,yr)}}else Yi.visible&&M.push(xe,Li,Yi,Ft,Dn.z,null)}const vi=xe.children;for(let Li=0,Yi=vi.length;Li<Yi;Li++)ns(vi[Li],vt,Ft,Pt)}function Ba(xe,vt,Ft,Pt){const Yt=xe.opaque,vi=xe.transmissive,Li=xe.transparent;D.setupLightsView(Ft),vi.length>0&&function(xe,vt,Ft){null===jt&&(jt=new(!0===d&&!0===yi.isWebGL2?F:si)(1024,1024,{generateMipmaps:!0,type:null!==oi.convert(cn)?cn:Mn,minFilter:1008,magFilter:fi,wrapS:ki,wrapT:ki,useRenderToTexture:ti.has("WEBGL_multisampled_render_to_texture")}));const Pt=W.getRenderTarget();W.setRenderTarget(jt),W.clear();const Yt=W.toneMapping;W.toneMapping=0,Cl(xe,vt,Ft),W.toneMapping=Yt,qt.updateMultisampleRenderTarget(jt),qt.updateRenderTargetMipmap(jt),W.setRenderTarget(Pt)}(Yt,vt,Ft),Pt&&Fn.viewport(Re.copy(Pt)),Yt.length>0&&Cl(Yt,vt,Ft),vi.length>0&&Cl(vi,vt,Ft),Li.length>0&&Cl(Li,vt,Ft)}function Cl(xe,vt,Ft){const Pt=!0===vt.isScene?vt.overrideMaterial:null;for(let Yt=0,vi=xe.length;Yt<vi;Yt++){const Li=xe[Yt],Yi=Li.object,$i=Li.geometry,Gr=null===Pt?Li.material:Pt,fr=Li.group;Yi.layers.test(Ft.layers)&&fv(Yi,vt,Ft,$i,Gr,fr)}}function fv(xe,vt,Ft,Pt,Yt,vi){xe.onBeforeRender(W,vt,Ft,Pt,Yt,vi),xe.modelViewMatrix.multiplyMatrices(Ft.matrixWorldInverse,xe.matrixWorld),xe.normalMatrix.getNormalMatrix(xe.modelViewMatrix),Yt.onBeforeRender(W,vt,Ft,Pt,xe,vi),!0===Yt.transparent&&2===Yt.side?(Yt.side=1,Yt.needsUpdate=!0,W.renderBufferDirect(Ft,vt,Pt,Yt,xe,vi),Yt.side=0,Yt.needsUpdate=!0,W.renderBufferDirect(Ft,vt,Pt,Yt,xe,vi),Yt.side=2):W.renderBufferDirect(Ft,vt,Pt,Yt,xe,vi),xe.onAfterRender(W,vt,Ft,Pt,Yt,vi)}function Lg(xe,vt,Ft){!0!==vt.isScene&&(vt=Yn);const Pt=Ci.get(xe),Yt=D.state.lights,Li=Yt.state.version,Yi=Di.getParameters(xe,Yt.state,D.state.shadowsArray,vt,Ft),$i=Di.getProgramCacheKey(Yi);let Gr=Pt.programs;Pt.environment=xe.isMeshStandardMaterial?vt.environment:null,Pt.fog=vt.fog,Pt.envMap=(xe.isMeshStandardMaterial?hn:yn).get(xe.envMap||Pt.environment),void 0===Gr&&(xe.addEventListener("dispose",Xn),Gr=new Map,Pt.programs=Gr);let fr=Gr.get($i);if(void 0!==fr){if(Pt.currentProgram===fr&&Pt.lightsStateVersion===Li)return cp(xe,Yi),fr}else Yi.uniforms=Di.getUniforms(xe),xe.onBuild(Ft,Yi,W),xe.onBeforeCompile(Yi,W),fr=Di.acquireProgram(Yi,$i),Gr.set($i,fr),Pt.uniforms=Yi.uniforms;const yr=Pt.uniforms;(!xe.isShaderMaterial&&!xe.isRawShaderMaterial||!0===xe.clipping)&&(yr.clippingPlanes=Ne.uniform),cp(xe,Yi),Pt.needsLights=function(xe){return xe.isMeshLambertMaterial||xe.isMeshToonMaterial||xe.isMeshPhongMaterial||xe.isMeshStandardMaterial||xe.isShadowMaterial||xe.isShaderMaterial&&!0===xe.lights}(xe),Pt.lightsStateVersion=Li,Pt.needsLights&&(yr.ambientLightColor.value=Yt.state.ambient,yr.lightProbe.value=Yt.state.probe,yr.directionalLights.value=Yt.state.directional,yr.directionalLightShadows.value=Yt.state.directionalShadow,yr.spotLights.value=Yt.state.spot,yr.spotLightShadows.value=Yt.state.spotShadow,yr.rectAreaLights.value=Yt.state.rectArea,yr.ltc_1.value=Yt.state.rectAreaLTC1,yr.ltc_2.value=Yt.state.rectAreaLTC2,yr.pointLights.value=Yt.state.point,yr.pointLightShadows.value=Yt.state.pointShadow,yr.hemisphereLights.value=Yt.state.hemi,yr.directionalShadowMap.value=Yt.state.directionalShadowMap,yr.directionalShadowMatrix.value=Yt.state.directionalShadowMatrix,yr.spotShadowMap.value=Yt.state.spotShadowMap,yr.spotShadowMatrix.value=Yt.state.spotShadowMatrix,yr.pointShadowMap.value=Yt.state.pointShadowMap,yr.pointShadowMatrix.value=Yt.state.pointShadowMatrix);const ds=fr.getUniforms(),ic=Hl.seqWithValue(ds.seq,yr);return Pt.currentProgram=fr,Pt.uniformsList=ic,fr}function cp(xe,vt){const Ft=Ci.get(xe);Ft.outputEncoding=vt.outputEncoding,Ft.instancing=vt.instancing,Ft.skinning=vt.skinning,Ft.morphTargets=vt.morphTargets,Ft.morphNormals=vt.morphNormals,Ft.morphTargetsCount=vt.morphTargetsCount,Ft.numClippingPlanes=vt.numClippingPlanes,Ft.numIntersection=vt.numClipIntersection,Ft.vertexAlphas=vt.vertexAlphas,Ft.vertexTangents=vt.vertexTangents,Ft.toneMapping=vt.toneMapping}Fo.setAnimationLoop(function(xe){Xt&&Xt(xe)}),"undefined"!=typeof window&&Fo.setContext(window),this.setAnimationLoop=function(xe){Xt=xe,An.setAnimationLoop(xe),null===xe?Fo.stop():Fo.start()},An.addEventListener("sessionstart",Qi),An.addEventListener("sessionend",Es),this.render=function(xe,vt){if(void 0===vt||!0===vt.isCamera){if(!0!==re){if(!0===xe.autoUpdate&&xe.updateMatrixWorld(),null===vt.parent&&vt.updateMatrixWorld(),!0===An.enabled&&!0===An.isPresenting&&(!0===An.cameraAutoUpdate&&An.updateCamera(vt),vt=An.getCamera()),!0===xe.isScene&&xe.onBeforeRender(W,xe,vt,ue),D=qr.get(xe,N.length),D.init(),N.push(D),Jt.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),Wt.setFromProjectionMatrix(Jt),Un=this.localClippingEnabled,nn=Ne.init(this.clippingPlanes,Un,vt),M=Jr.get(xe,A.length),M.init(),A.push(M),ns(xe,vt,0,W.sortObjects),M.finish(),!0===W.sortObjects&&M.sort(Ke,ht),!0===nn&&Ne.beginShadows(),ve.render(D.state.shadowsArray,xe,vt),!0===nn&&Ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),$t.render(M,xe),D.setupLights(W.physicallyCorrectLights),vt.isArrayCamera){const Pt=vt.cameras;for(let Yt=0,vi=Pt.length;Yt<vi;Yt++){const Li=Pt[Yt];Ba(M,xe,Li,Li.viewport)}}else Ba(M,xe,vt);null!==ue&&(qt.updateMultisampleRenderTarget(ue),qt.updateRenderTargetMipmap(ue)),!0===xe.isScene&&xe.onAfterRender(W,xe,vt),Fn.buffers.depth.setTest(!0),Fn.buffers.depth.setMask(!0),Fn.buffers.color.setMask(!0),Fn.setPolygonOffset(!1),Qn.resetDefaultState(),te=-1,ge=null,N.pop(),D=N.length>0?N[N.length-1]:null,A.pop(),M=A.length>0?A[A.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return ue},this.setRenderTargetTextures=function(xe,vt,Ft){Ci.get(xe.texture).__webglTexture=vt,Ci.get(xe.depthTexture).__webglTexture=Ft;const Pt=Ci.get(xe);Pt.__hasExternalTextures=!0,Pt.__hasExternalTextures&&(Pt.__autoAllocateDepthBuffer=void 0===Ft,Pt.__autoAllocateDepthBuffer||xe.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),xe.useRenderToTexture=!1,xe.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(xe,vt){const Ft=Ci.get(xe);Ft.__webglFramebuffer=vt,Ft.__useDefaultFramebuffer=void 0===vt},this.setRenderTarget=function(xe,vt=0,Ft=0){ue=xe,U=vt,R=Ft;let Pt=!0;if(xe){const $i=Ci.get(xe);void 0!==$i.__useDefaultFramebuffer?(Fn.bindFramebuffer(36160,null),Pt=!1):void 0===$i.__webglFramebuffer?qt.setupRenderTarget(xe):$i.__hasExternalTextures&&qt.rebindTextures(xe,Ci.get(xe.texture).__webglTexture,Ci.get(xe.depthTexture).__webglTexture)}let Yt=null,vi=!1,Li=!1;if(xe){const $i=xe.texture;($i.isDataTexture3D||$i.isDataTexture2DArray)&&(Li=!0);const Gr=Ci.get(xe).__webglFramebuffer;xe.isWebGLCubeRenderTarget?(Yt=Gr[vt],vi=!0):Yt=xe.useRenderbuffer?Ci.get(xe).__webglMultisampledFramebuffer:Gr,Re.copy(xe.viewport),Ue.copy(xe.scissor),ot=xe.scissorTest}else Re.copy(Mt).multiplyScalar(ae).floor(),Ue.copy(Tt).multiplyScalar(ae).floor(),ot=Et;if(Fn.bindFramebuffer(36160,Yt)&&yi.drawBuffers&&Pt&&Fn.drawBuffers(xe,Yt),Fn.viewport(Re),Fn.scissor(Ue),Fn.setScissorTest(ot),vi){const $i=Ci.get(xe.texture);Bt.framebufferTexture2D(36160,36064,34069+vt,$i.__webglTexture,Ft)}else if(Li){const $i=Ci.get(xe.texture);Bt.framebufferTextureLayer(36160,36064,$i.__webglTexture,Ft||0,vt||0)}te=-1},this.readRenderTargetPixels=function(xe,vt,Ft,Pt,Yt,vi,Li){if(!xe||!xe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Yi=Ci.get(xe).__webglFramebuffer;if(xe.isWebGLCubeRenderTarget&&void 0!==Li&&(Yi=Yi[Li]),Yi){Fn.bindFramebuffer(36160,Yi);try{const $i=xe.texture,Gr=$i.format,fr=$i.type;if(Gr!==dt&&oi.convert(Gr)!==Bt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const yr=fr===cn&&(ti.has("EXT_color_buffer_half_float")||yi.isWebGL2&&ti.has("EXT_color_buffer_float"));if(!(fr===Mn||oi.convert(fr)===Bt.getParameter(35738)||fr===gt&&(yi.isWebGL2||ti.has("OES_texture_float")||ti.has("WEBGL_color_buffer_float"))||yr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Bt.checkFramebufferStatus(36160)?vt>=0&&vt<=xe.width-Pt&&Ft>=0&&Ft<=xe.height-Yt&&Bt.readPixels(vt,Ft,Pt,Yt,oi.convert(Gr),oi.convert(fr),vi):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const $i=null!==ue?Ci.get(ue).__webglFramebuffer:null;Fn.bindFramebuffer(36160,$i)}}},this.copyFramebufferToTexture=function(xe,vt,Ft=0){if(!0!==vt.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Pt=Math.pow(2,-Ft),Yt=Math.floor(vt.image.width*Pt),vi=Math.floor(vt.image.height*Pt);qt.setTexture2D(vt,0),Bt.copyTexSubImage2D(3553,Ft,0,0,xe.x,xe.y,Yt,vi),Fn.unbindTexture()},this.copyTextureToTexture=function(xe,vt,Ft,Pt=0){const Yt=vt.image.width,vi=vt.image.height,Li=oi.convert(Ft.format),Yi=oi.convert(Ft.type);qt.setTexture2D(Ft,0),Bt.pixelStorei(37440,Ft.flipY),Bt.pixelStorei(37441,Ft.premultiplyAlpha),Bt.pixelStorei(3317,Ft.unpackAlignment),vt.isDataTexture?Bt.texSubImage2D(3553,Pt,xe.x,xe.y,Yt,vi,Li,Yi,vt.image.data):vt.isCompressedTexture?Bt.compressedTexSubImage2D(3553,Pt,xe.x,xe.y,vt.mipmaps[0].width,vt.mipmaps[0].height,Li,vt.mipmaps[0].data):Bt.texSubImage2D(3553,Pt,xe.x,xe.y,Li,Yi,vt.image),0===Pt&&Ft.generateMipmaps&&Bt.generateMipmap(3553),Fn.unbindTexture()},this.copyTextureToTexture3D=function(xe,vt,Ft,Pt,Yt=0){if(W.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const vi=xe.max.x-xe.min.x+1,Li=xe.max.y-xe.min.y+1,Yi=xe.max.z-xe.min.z+1,$i=oi.convert(Pt.format),Gr=oi.convert(Pt.type);let fr;if(Pt.isDataTexture3D)qt.setTexture3D(Pt,0),fr=32879;else{if(!Pt.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");qt.setTexture2DArray(Pt,0),fr=35866}Bt.pixelStorei(37440,Pt.flipY),Bt.pixelStorei(37441,Pt.premultiplyAlpha),Bt.pixelStorei(3317,Pt.unpackAlignment);const yr=Bt.getParameter(3314),ds=Bt.getParameter(32878),ic=Bt.getParameter(3316),qu=Bt.getParameter(3315),Er=Bt.getParameter(32877),Va=Ft.isCompressedTexture?Ft.mipmaps[0]:Ft.image;Bt.pixelStorei(3314,Va.width),Bt.pixelStorei(32878,Va.height),Bt.pixelStorei(3316,xe.min.x),Bt.pixelStorei(3315,xe.min.y),Bt.pixelStorei(32877,xe.min.z),Ft.isDataTexture||Ft.isDataTexture3D?Bt.texSubImage3D(fr,Yt,vt.x,vt.y,vt.z,vi,Li,Yi,$i,Gr,Va.data):Ft.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Bt.compressedTexSubImage3D(fr,Yt,vt.x,vt.y,vt.z,vi,Li,Yi,$i,Va.data)):Bt.texSubImage3D(fr,Yt,vt.x,vt.y,vt.z,vi,Li,Yi,$i,Gr,Va),Bt.pixelStorei(3314,yr),Bt.pixelStorei(32878,ds),Bt.pixelStorei(3316,ic),Bt.pixelStorei(3315,qu),Bt.pixelStorei(32877,Er),0===Yt&&Pt.generateMipmaps&&Bt.generateMipmap(fr),Fn.unbindTexture()},this.initTexture=function(xe){qt.setTexture2D(xe,0),Fn.unbindTexture()},this.resetState=function(){U=0,R=0,ue=null,Fn.reset(),Qn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Lr.prototype.isWebGLRenderer=!0,class extends Lr{}.prototype.isWebGL1Renderer=!0;class Sd{constructor(e,t=25e-5){this.name="",this.color=new qe(e),this.density=t}clone(){return new Sd(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Sd.prototype.isFogExp2=!0;class wc{constructor(e,t=1,r=1e3){this.name="",this.color=new qe(e),this.near=t,this.far=r}clone(){return new wc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}wc.prototype.isFog=!0;class gu extends _r{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}gu.prototype.isScene=!0;class Ec{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Hs,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=_t()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_t()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=_t()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ec.prototype.isInterleavedBuffer=!0;const Ds=new p;class Gl{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ds.x=this.getX(t),Ds.y=this.getY(t),Ds.z=this.getZ(t),Ds.applyMatrix4(e),this.setXYZ(t,Ds.x,Ds.y,Ds.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ds.x=this.getX(t),Ds.y=this.getY(t),Ds.z=this.getZ(t),Ds.applyNormalMatrix(e),this.setXYZ(t,Ds.x,Ds.y,Ds.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ds.x=this.getX(t),Ds.y=this.getY(t),Ds.z=this.getZ(t),Ds.transformDirection(e),this.setXYZ(t,Ds.x,Ds.y,Ds.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,l){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new Ai(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Gl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Gl.prototype.isInterleavedBufferAttribute=!0;class Cd extends gi{constructor(e){super(),this.type="SpriteMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Mc;Cd.prototype.isSpriteMaterial=!0;const Sc=new p,Cc=new p,Dc=new p,Wl=new wt,Tc=new wt,Tm=new zn,Po=new p,jl=new p,Dd=new p,Am=new wt,Rm=new wt,_f=new wt;function Td(u,e,t,r,o,l){Wl.subVectors(u,t).addScalar(.5).multiply(r),void 0!==o?(Tc.x=l*Wl.x-o*Wl.y,Tc.y=o*Wl.x+l*Wl.y):Tc.copy(Wl),u.copy(e),u.x+=Tc.x,u.y+=Tc.y,u.applyMatrix4(Tm)}(class extends _r{constructor(e){if(super(),this.type="Sprite",void 0===Mc){Mc=new ui;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Ec(t,5);Mc.setIndex([0,1,2,0,2,3]),Mc.setAttribute("position",new Gl(r,3,0,!1)),Mc.setAttribute("uv",new Gl(r,2,3,!1))}this.geometry=Mc,this.material=void 0!==e?e:new Cd,this.center=new wt(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Cc.setFromMatrixScale(this.matrixWorld),Tm.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Dc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Cc.multiplyScalar(-Dc.z);const r=this.material.rotation;let o,l;0!==r&&(l=Math.cos(r),o=Math.sin(r));const d=this.center;Td(Po.set(-.5,-.5,0),Dc,d,Cc,o,l),Td(jl.set(.5,-.5,0),Dc,d,Cc,o,l),Td(Dd.set(.5,.5,0),Dc,d,Cc,o,l),Am.set(0,0),Rm.set(1,0),_f.set(1,1);let h=e.ray.intersectTriangle(Po,jl,Dd,!1,Sc);if(null===h&&(Td(jl.set(-.5,.5,0),Dc,d,Cc,o,l),Rm.set(0,1),h=e.ray.intersectTriangle(Po,Dd,jl,!1,Sc),null===h))return;const m=e.ray.origin.distanceTo(Sc);m<e.near||m>e.far||t.push({distance:m,point:Sc.clone(),uv:Hn.getUV(Sc,Po,jl,Dd,Am,Rm,_f,new wt),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Im=new p,_u=new pn,Id=new pn,my=new p,Pd=new zn;class yu extends Gs{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zn,this.bindMatrixInverse=new zn}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new pn,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;_u.fromBufferAttribute(o.attributes.skinIndex,e),Id.fromBufferAttribute(o.attributes.skinWeight,e),Im.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const d=Id.getComponent(l);if(0!==d){const h=_u.getComponent(l);Pd.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),t.addScaledVector(my.copy(Im).applyMatrix4(Pd),d)}}return t.applyMatrix4(this.bindMatrixInverse)}}yu.prototype.isSkinnedMesh=!0;(class extends _r{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends jn{constructor(e=null,t=1,r=1,o,l,d,h,m,_=fi,S=fi,M,D){super(null,d,h,m,_,S,o,l,M,D),this.image={data:e,width:t,height:r},this.magFilter=_,this.minFilter=S,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class Rc extends Ai{constructor(e,t,r,o=1){"number"==typeof r&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Rc.prototype.isInstancedBufferAttribute=!0;const bf=new zn,xf=new zn,vu=[],Ic=new Gs;(class extends Gs{constructor(e,t,r){super(e,t),this.instanceMatrix=new Rc(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(Ic.geometry=this.geometry,Ic.material=this.material,void 0!==Ic.material)for(let l=0;l<o;l++){this.getMatrixAt(l,bf),xf.multiplyMatrices(r,bf),Ic.matrixWorld=xf,Ic.raycast(e,vu);for(let d=0,h=vu.length;d<h;d++){const m=vu[d];m.instanceId=l,m.object=this,t.push(m)}vu.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Rc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class ss extends gi{constructor(e){super(),this.type="LineBasicMaterial",this.color=new qe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}ss.prototype.isLineBasicMaterial=!0;const bu=new p,Om=new p,Fm=new zn,Nm=new so,Pc=new _s;class bl extends _r{constructor(e=new ui,t=new ss){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let o=1,l=t.count;o<l;o++)bu.fromBufferAttribute(t,o-1),Om.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=bu.distanceTo(Om);e.setAttribute("lineDistance",new Gn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,d=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Pc.copy(r.boundingSphere),Pc.applyMatrix4(o),Pc.radius+=l,!1===e.ray.intersectsSphere(Pc))return;Fm.copy(o).invert(),Nm.copy(e.ray).applyMatrix4(Fm);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,_=new p,S=new p,M=new p,D=new p,A=this.isLineSegments?2:1;if(r.isBufferGeometry){const N=r.index,re=r.attributes.position;if(null!==N)for(let ue=Math.max(0,d.start),te=Math.min(N.count,d.start+d.count)-1;ue<te;ue+=A){const ge=N.getX(ue),Re=N.getX(ue+1);if(_.fromBufferAttribute(re,ge),S.fromBufferAttribute(re,Re),Nm.distanceSqToSegment(_,S,D,M)>m)continue;D.applyMatrix4(this.matrixWorld);const ot=e.ray.origin.distanceTo(D);ot<e.near||ot>e.far||t.push({distance:ot,point:M.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this})}else for(let ue=Math.max(0,d.start),te=Math.min(re.count,d.start+d.count)-1;ue<te;ue+=A){if(_.fromBufferAttribute(re,ue),S.fromBufferAttribute(re,ue+1),Nm.distanceSqToSegment(_,S,D,M)>m)continue;D.applyMatrix4(this.matrixWorld);const Re=e.ray.origin.distanceTo(D);Re<e.near||Re>e.far||t.push({distance:Re,point:M.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}bl.prototype.isLine=!0;const Od=new p,Lc=new p;class Ia extends bl{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let o=0,l=t.count;o<l;o+=2)Od.fromBufferAttribute(t,o),Lc.fromBufferAttribute(t,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+Od.distanceTo(Lc);e.setAttribute("lineDistance",new Gn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ia.prototype.isLineSegments=!0;(class extends bl{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class xl extends gi{constructor(e){super(),this.type="PointsMaterial",this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}xl.prototype.isPointsMaterial=!0;const Ef=new zn,Nd=new so,kd=new _s,Oc=new p;class xu extends _r{constructor(e=new ui,t=new xl){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,l=e.params.Points.threshold,d=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),kd.copy(r.boundingSphere),kd.applyMatrix4(o),kd.radius+=l,!1===e.ray.intersectsSphere(kd))return;Ef.copy(o).invert(),Nd.copy(e.ray).applyMatrix4(Ef);const h=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h;if(r.isBufferGeometry){const _=r.index,M=r.attributes.position;if(null!==_)for(let N=Math.max(0,d.start),W=Math.min(_.count,d.start+d.count);N<W;N++){const re=_.getX(N);Oc.fromBufferAttribute(M,re),km(Oc,re,m,o,e,t,this)}else for(let N=Math.max(0,d.start),W=Math.min(M.count,d.start+d.count);N<W;N++)Oc.fromBufferAttribute(M,N),km(Oc,N,m,o,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const h=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=l}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function km(u,e,t,r,o,l,d){const h=Nd.distanceSqToPoint(u);if(h<t){const m=new p;Nd.closestPointToPoint(u,m),m.applyMatrix4(r);const _=o.ray.origin.distanceTo(m);if(_<o.near||_>o.far)return;l.push({distance:_,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,object:d})}}xu.prototype.isPoints=!0,class extends jn{constructor(e,t,r,o,l,d,h,m,_){super(e,t,r,o,l,d,h,m,_),this.minFilter=void 0!==d?d:mt,this.magFilter=void 0!==l?l:mt,this.generateMipmaps=!1;const S=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function M(){S.needsUpdate=!0,e.requestVideoFrameCallback(M)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class extends jn{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=fi,this.minFilter=fi,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class extends jn{constructor(e,t,r,o,l,d,h,m,_,S,M,D){super(null,d,h,m,_,S,o,l,M,D),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class extends jn{constructor(e,t,r,o,l,d,h,m,_){super(e,t,r,o,l,d,h,m,_),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class qo extends ui{constructor(e=1,t=1,r=1,o=8,l=1,d=!1,h=0,m=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:o,heightSegments:l,openEnded:d,thetaStart:h,thetaLength:m};const _=this;o=Math.floor(o),l=Math.floor(l);const S=[],M=[],D=[],A=[];let N=0;const W=[],re=r/2;let U=0;function ue(te){const ge=N,Re=new wt,Ue=new p;let ot=0;const kt=!0===te?e:t,Dt=!0===te?1:-1;for(let Ke=1;Ke<=o;Ke++)M.push(0,re*Dt,0),D.push(0,Dt,0),A.push(.5,.5),N++;const ae=N;for(let Ke=0;Ke<=o;Ke++){const Mt=Ke/o*m+h,Tt=Math.cos(Mt),Et=Math.sin(Mt);Ue.x=kt*Et,Ue.y=re*Dt,Ue.z=kt*Tt,M.push(Ue.x,Ue.y,Ue.z),D.push(0,Dt,0),Re.x=.5*Tt+.5,Re.y=.5*Et*Dt+.5,A.push(Re.x,Re.y),N++}for(let Ke=0;Ke<o;Ke++){const ht=ge+Ke,Mt=ae+Ke;!0===te?S.push(Mt,Mt+1,ht):S.push(Mt+1,Mt,ht),ot+=3}_.addGroup(U,ot,!0===te?1:2),U+=ot}(function(){const te=new p,ge=new p;let Re=0;const Ue=(t-e)/r;for(let ot=0;ot<=l;ot++){const kt=[],Dt=ot/l,ae=Dt*(t-e)+e;for(let Ke=0;Ke<=o;Ke++){const ht=Ke/o,Mt=ht*m+h,Tt=Math.sin(Mt),Et=Math.cos(Mt);ge.x=ae*Tt,ge.y=-Dt*r+re,ge.z=ae*Et,M.push(ge.x,ge.y,ge.z),te.set(Tt,Ue,Et).normalize(),D.push(te.x,te.y,te.z),A.push(ht,1-Dt),kt.push(N++)}W.push(kt)}for(let ot=0;ot<o;ot++)for(let kt=0;kt<l;kt++){const ae=W[kt+1][ot],Ke=W[kt+1][ot+1],ht=W[kt][ot+1];S.push(W[kt][ot],ae,ht),S.push(ae,Ke,ht),Re+=6}_.addGroup(U,Re,0),U+=Re})(),!1===d&&(e>0&&ue(!0),t>0&&ue(!1)),this.setIndex(S),this.setAttribute("position",new Gn(M,3)),this.setAttribute("normal",new Gn(D,3)),this.setAttribute("uv",new Gn(A,2))}static fromJSON(e){return new qo(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new p,new p,new p,new Hn;class Lo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),l=0;t.push(0);for(let d=1;d<=e;d++)r=this.getPoint(d/e),l+=r.distanceTo(o),t.push(l),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const l=r.length;let d;d=t||e*r[l-1];let _,h=0,m=l-1;for(;h<=m;)if(o=Math.floor(h+(m-h)/2),_=r[o]-d,_<0)h=o+1;else{if(!(_>0)){m=o;break}m=o-1}if(o=m,r[o]===d)return o/(l-1);const S=r[o];return(o+(d-S)/(r[o+1]-S))/(l-1)}getTangent(e,t){const r=1e-4;let o=e-r,l=e+r;o<0&&(o=0),l>1&&(l=1);const d=this.getPoint(o),h=this.getPoint(l),m=t||(d.isVector2?new wt:new p);return m.copy(h).sub(d).normalize(),m}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new p,o=[],l=[],d=[],h=new p,m=new zn;for(let A=0;A<=e;A++)o[A]=this.getTangentAt(A/e,new p);l[0]=new p,d[0]=new p;let _=Number.MAX_VALUE;const S=Math.abs(o[0].x),M=Math.abs(o[0].y),D=Math.abs(o[0].z);S<=_&&(_=S,r.set(1,0,0)),M<=_&&(_=M,r.set(0,1,0)),D<=_&&r.set(0,0,1),h.crossVectors(o[0],r).normalize(),l[0].crossVectors(o[0],h),d[0].crossVectors(o[0],l[0]);for(let A=1;A<=e;A++){if(l[A]=l[A-1].clone(),d[A]=d[A-1].clone(),h.crossVectors(o[A-1],o[A]),h.length()>Number.EPSILON){h.normalize();const N=Math.acos(Ot(o[A-1].dot(o[A]),-1,1));l[A].applyMatrix4(m.makeRotationAxis(h,N))}d[A].crossVectors(o[A],l[A])}if(!0===t){let A=Math.acos(Ot(l[0].dot(l[e]),-1,1));A/=e,o[0].dot(h.crossVectors(l[0],l[e]))>0&&(A=-A);for(let N=1;N<=e;N++)l[N].applyMatrix4(m.makeRotationAxis(o[N],A*N)),d[N].crossVectors(o[N],l[N])}return{tangents:o,normals:l,binormals:d}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Mu extends Lo{constructor(e=0,t=0,r=1,o=1,l=0,d=2*Math.PI,h=!1,m=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=d,this.aClockwise=h,this.aRotation=m}getPoint(e,t){const r=t||new wt,o=2*Math.PI;let l=this.aEndAngle-this.aStartAngle;const d=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(l=d?0:o),!0===this.aClockwise&&!d&&(l===o?l=-o:l-=o);const h=this.aStartAngle+e*l;let m=this.aX+this.xRadius*Math.cos(h),_=this.aY+this.yRadius*Math.sin(h);if(0!==this.aRotation){const S=Math.cos(this.aRotation),M=Math.sin(this.aRotation),D=m-this.aX,A=_-this.aY;m=D*S-A*M+this.aX,_=D*M+A*S+this.aY}return r.set(m,_)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Mu.prototype.isEllipseCurve=!0;class Vm extends Mu{constructor(e,t,r,o,l,d){super(e,t,r,r,o,l,d),this.type="ArcCurve"}}function Cf(){let u=0,e=0,t=0,r=0;function o(l,d,h,m){u=l,e=h,t=-3*l+3*d-2*h-m,r=2*l-2*d+h+m}return{initCatmullRom:function(l,d,h,m,_){o(d,h,_*(h-l),_*(m-d))},initNonuniformCatmullRom:function(l,d,h,m,_,S,M){let D=(d-l)/_-(h-l)/(_+S)+(h-d)/S,A=(h-d)/S-(m-d)/(S+M)+(m-h)/M;D*=S,A*=S,o(d,h,D,A)},calc:function(l){const d=l*l;return u+e*l+t*d+r*(d*l)}}}Vm.prototype.isArcCurve=!0;const zd=new p,Df=new Cf,Gd=new Cf,Hm=new Cf;class Tf extends Lo{constructor(e=[],t=!1,r="centripetal",o=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new p){const r=t,o=this.points,l=o.length,d=(l-(this.closed?0:1))*e;let _,S,h=Math.floor(d),m=d-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:0===m&&h===l-1&&(h=l-2,m=1),this.closed||h>0?_=o[(h-1)%l]:(zd.subVectors(o[0],o[1]).add(o[0]),_=zd);const M=o[h%l],D=o[(h+1)%l];if(this.closed||h+2<l?S=o[(h+2)%l]:(zd.subVectors(o[l-1],o[l-2]).add(o[l-1]),S=zd),"centripetal"===this.curveType||"chordal"===this.curveType){const A="chordal"===this.curveType?.5:.25;let N=Math.pow(_.distanceToSquared(M),A),W=Math.pow(M.distanceToSquared(D),A),re=Math.pow(D.distanceToSquared(S),A);W<1e-4&&(W=1),N<1e-4&&(N=W),re<1e-4&&(re=W),Df.initNonuniformCatmullRom(_.x,M.x,D.x,S.x,N,W,re),Gd.initNonuniformCatmullRom(_.y,M.y,D.y,S.y,N,W,re),Hm.initNonuniformCatmullRom(_.z,M.z,D.z,S.z,N,W,re)}else"catmullrom"===this.curveType&&(Df.initCatmullRom(_.x,M.x,D.x,S.x,this.tension),Gd.initCatmullRom(_.y,M.y,D.y,S.y,this.tension),Hm.initCatmullRom(_.z,M.z,D.z,S.z,this.tension));return r.set(Df.calc(m),Gd.calc(m),Hm.calc(m)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new p).fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Um(u,e,t,r,o){const l=.5*(r-e),d=.5*(o-t),h=u*u;return(2*t-2*r+l+d)*(u*h)+(-3*t+3*r-2*l-d)*h+l*u+t}function $l(u,e,t,r){return function(u,e){const t=1-u;return t*t*e}(u,e)+function(u,e){return 2*(1-u)*u*e}(u,t)+function(u,e){return u*u*e}(u,r)}function wo(u,e,t,r,o){return function(u,e){const t=1-u;return t*t*t*e}(u,e)+function(u,e){const t=1-u;return 3*t*t*u*e}(u,t)+function(u,e){return 3*(1-u)*u*u*e}(u,r)+function(u,e){return u*u*u*e}(u,o)}Tf.prototype.isCatmullRomCurve3=!0;class Wm extends Lo{constructor(e=new wt,t=new wt,r=new wt,o=new wt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new wt){const r=t,o=this.v0,l=this.v1,d=this.v2,h=this.v3;return r.set(wo(e,o.x,l.x,d.x,h.x),wo(e,o.y,l.y,d.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Wm.prototype.isCubicBezierCurve=!0;class vy extends Lo{constructor(e=new p,t=new p,r=new p,o=new p){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new p){const r=t,o=this.v0,l=this.v1,d=this.v2,h=this.v3;return r.set(wo(e,o.x,l.x,d.x,h.x),wo(e,o.y,l.y,d.y,h.y),wo(e,o.z,l.z,d.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}vy.prototype.isCubicBezierCurve3=!0;class Su extends Lo{constructor(e=new wt,t=new wt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new wt){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new wt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Su.prototype.isLineCurve=!0;class Wd extends Lo{constructor(e=new wt,t=new wt,r=new wt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new wt){const r=t,o=this.v0,l=this.v1,d=this.v2;return r.set($l(e,o.x,l.x,d.x),$l(e,o.y,l.y,d.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Wd.prototype.isQuadraticBezierCurve=!0;class Af extends Lo{constructor(e=new p,t=new p,r=new p){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new p){const r=t,o=this.v0,l=this.v1,d=this.v2;return r.set($l(e,o.x,l.x,d.x),$l(e,o.y,l.y,d.y),$l(e,o.z,l.z,d.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Af.prototype.isQuadraticBezierCurve3=!0;class $m extends Lo{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new wt){const r=t,o=this.points,l=(o.length-1)*e,d=Math.floor(l),h=l-d,m=o[0===d?d:d-1],_=o[d],S=o[d>o.length-2?o.length-1:d+1],M=o[d>o.length-3?o.length-1:d+2];return r.set(Um(h,m.x,_.x,S.x,M.x),Um(h,m.y,_.y,S.y,M.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new wt).fromArray(o))}return this}}$m.prototype.isSplineCurve=!0;var jd=Object.freeze({__proto__:null,ArcCurve:Vm,CatmullRomCurve3:Tf,CubicBezierCurve:Wm,CubicBezierCurve3:vy,EllipseCurve:Mu,LineCurve:Su,LineCurve3:class extends Lo{constructor(e=new p,t=new p){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new p){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Wd,QuadraticBezierCurve3:Af,SplineCurve:$m});class Rf extends Lo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Su(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=r){const d=o[l]-r,h=this.curves[l],m=h.getLength();return h.getPointAt(0===m?0:1-d/m,t)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,l=this.curves;o<l.length;o++){const d=l[o],m=d.getPoints(d&&d.isEllipseCurve?2*e:d&&(d.isLineCurve||d.isLineCurve3)?1:d&&d.isSplineCurve?e*d.points.length:e);for(let _=0;_<m.length;_++){const S=m[_];r&&r.equals(S)||(t.push(S),r=S)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push((new jd[o.type]).fromJSON(o))}return this}}class $d extends Rf{constructor(e){super(),this.type="Path",this.currentPoint=new wt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Su(this.currentPoint.clone(),new wt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const l=new Wd(this.currentPoint.clone(),new wt(e,t),new wt(r,o));return this.curves.push(l),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,l,d){const h=new Wm(this.currentPoint.clone(),new wt(e,t),new wt(r,o),new wt(l,d));return this.curves.push(h),this.currentPoint.set(l,d),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new $m(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,l,d){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,o,l,d),this}absarc(e,t,r,o,l,d){return this.absellipse(e,t,r,r,o,l,d),this}ellipse(e,t,r,o,l,d,h,m){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,o,l,d,h,m),this}absellipse(e,t,r,o,l,d,h,m){const _=new Mu(e,t,r,o,l,d,h,m);if(this.curves.length>0){const M=_.getPoint(0);M.equals(this.currentPoint)||this.lineTo(M.x,M.y)}this.curves.push(_);const S=_.getPoint(1);return this.currentPoint.copy(S),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ha extends $d{constructor(e){super(e),this.uuid=_t(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push((new $d).fromJSON(o))}return this}}function Ym(u,e,t,r,o){let l,d;if(o===function(u,e,t,r){let o=0;for(let l=e,d=t-r;l<t;l+=r)o+=(u[d]-u[l])*(u[l+1]+u[d+1]),d=l;return o}(u,e,t,r)>0)for(l=e;l<t;l+=r)d=Kl(l,u[l],u[l+1],d);else for(l=t-r;l>=e;l-=r)d=Kl(l,u[l],u[l+1],d);return d&&Qa(d,d.next)&&(Vc(d),d=d.next),d}function El(u,e){if(!u)return u;e||(e=u);let r,t=u;do{if(r=!1,t.steiner||!Qa(t,t.next)&&0!==os(t.prev,t,t.next))t=t.next;else{if(Vc(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function Cu(u,e,t,r,o,l,d){if(!u)return;!d&&l&&function(u,e,t,r){let o=u;do{null===o.z&&(o.z=Ws(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==u);o.prevZ.nextZ=null,o.prevZ=null,function(u){let e,t,r,o,l,d,h,m,_=1;do{for(t=u,u=null,l=null,d=0;t;){for(d++,r=t,h=0,e=0;e<_&&(h++,r=r.nextZ,r);e++);for(m=_;h>0||m>0&&r;)0!==h&&(0===m||!r||t.z<=r.z)?(o=t,t=t.nextZ,h--):(o=r,r=r.nextZ,m--),l?l.nextZ=o:u=o,o.prevZ=l,l=o;t=r}l.nextZ=null,_*=2}while(d>1)}(o)}(u,r,o,l);let m,_,h=u;for(;u.prev!==u.next;)if(m=u.prev,_=u.next,l?wy(u,r,o,l):xy(u))e.push(m.i/t),e.push(u.i/t),e.push(_.i/t),Vc(u),u=_.next,h=_.next;else if((u=_)===h){d?1===d?Cu(u=Yd(El(u),e,t),e,t,r,o,l,2):2===d&&Nc(u,e,t,r,o,l):Cu(El(u),e,t,r,o,l,1);break}}function xy(u){const e=u.prev,t=u,r=u.next;if(os(e,t,r)>=0)return!1;let o=u.next.next;for(;o!==u.prev;){if(Ja(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&os(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function wy(u,e,t,r){const o=u.prev,l=u,d=u.next;if(os(o,l,d)>=0)return!1;const _=o.x>l.x?o.x>d.x?o.x:d.x:l.x>d.x?l.x:d.x,S=o.y>l.y?o.y>d.y?o.y:d.y:l.y>d.y?l.y:d.y,M=Ws(o.x<l.x?o.x<d.x?o.x:d.x:l.x<d.x?l.x:d.x,o.y<l.y?o.y<d.y?o.y:d.y:l.y<d.y?l.y:d.y,e,t,r),D=Ws(_,S,e,t,r);let A=u.prevZ,N=u.nextZ;for(;A&&A.z>=M&&N&&N.z<=D;){if(A!==u.prev&&A!==u.next&&Ja(o.x,o.y,l.x,l.y,d.x,d.y,A.x,A.y)&&os(A.prev,A,A.next)>=0||(A=A.prevZ,N!==u.prev&&N!==u.next&&Ja(o.x,o.y,l.x,l.y,d.x,d.y,N.x,N.y)&&os(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;A&&A.z>=M;){if(A!==u.prev&&A!==u.next&&Ja(o.x,o.y,l.x,l.y,d.x,d.y,A.x,A.y)&&os(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;N&&N.z<=D;){if(N!==u.prev&&N!==u.next&&Ja(o.x,o.y,l.x,l.y,d.x,d.y,N.x,N.y)&&os(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function Yd(u,e,t){let r=u;do{const o=r.prev,l=r.next.next;!Qa(o,l)&&ql(o,r,r.next,l)&&La(o,l)&&La(l,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(l.i/t),Vc(r),Vc(r.next),r=u=l),r=r.next}while(r!==u);return El(r)}function Nc(u,e,t,r,o,l){let d=u;do{let h=d.next.next;for(;h!==d.prev;){if(d.i!==h.i&&Xo(d,h)){let m=Xl(d,h);return d=El(d,d.next),m=El(m,m.next),Cu(d,e,t,r,o,l),void Cu(m,e,t,r,o,l)}h=h.next}d=d.next}while(d!==u)}function Du(u,e){return u.x-e.x}function My(u,e){if(e=function(u,e){let t=e;const r=u.x,o=u.y;let d,l=-1/0;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const D=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(D<=r&&D>l){if(l=D,D===r){if(o===t.y)return t;if(o===t.next.y)return t.next}d=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!d)return null;if(r===l)return d;const h=d,m=d.x,_=d.y;let M,S=1/0;t=d;do{r>=t.x&&t.x>=m&&r!==t.x&&Ja(o<_?r:l,o,m,_,o<_?l:r,o,t.x,t.y)&&(M=Math.abs(o-t.y)/(r-t.x),La(t,u)&&(M<S||M===S&&(t.x>d.x||t.x===d.x&&If(d,t)))&&(d=t,S=M)),t=t.next}while(t!==h);return d}(u,e),e){const t=Xl(e,u);El(e,e.next),El(t,t.next)}}function If(u,e){return os(u.prev,u,e.prev)<0&&os(e.next,u,u.next)<0}function Ws(u,e,t,r,o){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-t)*o)|u<<8))|u<<4))|u<<2))|u<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Yl(u){let e=u,t=u;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==u);return t}function Ja(u,e,t,r,o,l,d,h){return(o-d)*(e-h)-(u-d)*(l-h)>=0&&(u-d)*(r-h)-(t-d)*(e-h)>=0&&(t-d)*(l-h)-(o-d)*(r-h)>=0}function Xo(u,e){return u.next.i!==e.i&&u.prev.i!==e.i&&!function(u,e){let t=u;do{if(t.i!==u.i&&t.next.i!==u.i&&t.i!==e.i&&t.next.i!==e.i&&ql(t,t.next,u,e))return!0;t=t.next}while(t!==u);return!1}(u,e)&&(La(u,e)&&La(e,u)&&function(u,e){let t=u,r=!1;const o=(u.x+e.x)/2,l=(u.y+e.y)/2;do{t.y>l!=t.next.y>l&&t.next.y!==t.y&&o<(t.next.x-t.x)*(l-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==u);return r}(u,e)&&(os(u.prev,u,e.prev)||os(u,e.prev,e))||Qa(u,e)&&os(u.prev,u,u.next)>0&&os(e.prev,e,e.next)>0)}function os(u,e,t){return(e.y-u.y)*(t.x-e.x)-(e.x-u.x)*(t.y-e.y)}function Qa(u,e){return u.x===e.x&&u.y===e.y}function ql(u,e,t,r){const o=tl(os(u,e,t)),l=tl(os(u,e,r)),d=tl(os(t,r,u)),h=tl(os(t,r,e));return!!(o!==l&&d!==h||0===o&&el(u,t,e)||0===l&&el(u,r,e)||0===d&&el(t,u,r)||0===h&&el(t,e,r))}function el(u,e,t){return e.x<=Math.max(u.x,t.x)&&e.x>=Math.min(u.x,t.x)&&e.y<=Math.max(u.y,t.y)&&e.y>=Math.min(u.y,t.y)}function tl(u){return u>0?1:u<0?-1:0}function La(u,e){return os(u.prev,u,u.next)<0?os(u,e,u.next)>=0&&os(u,u.prev,e)>=0:os(u,e,u.prev)<0||os(u,u.next,e)<0}function Xl(u,e){const t=new qd(u.i,u.x,u.y),r=new qd(e.i,e.x,e.y),o=u.next,l=e.prev;return u.next=e,e.prev=u,t.next=o,o.prev=t,r.next=t,t.prev=r,l.next=r,r.prev=l,r}function Kl(u,e,t,r){const o=new qd(u,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function Vc(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function qd(u,e,t){this.i=u,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Oa{static area(e){const t=e.length;let r=0;for(let o=t-1,l=0;l<t;o=l++)r+=e[o].x*e[l].y-e[l].x*e[o].y;return.5*r}static isClockWise(e){return Oa.area(e)<0}static triangulateShape(e,t){const r=[],o=[],l=[];Pf(e),Lf(r,e);let d=e.length;t.forEach(Pf);for(let m=0;m<t.length;m++)o.push(d),d+=t[m].length,Lf(r,t[m]);const h=function(u,e,t=2){const r=e&&e.length,o=r?e[0]*t:u.length;let l=Ym(u,0,o,t,!0);const d=[];if(!l||l.next===l.prev)return d;let h,m,_,S,M,D,A;if(r&&(l=function(u,e,t,r){const o=[];let l,d,h,m,_;for(l=0,d=e.length;l<d;l++)h=e[l]*r,m=l<d-1?e[l+1]*r:u.length,_=Ym(u,h,m,r,!1),_===_.next&&(_.steiner=!0),o.push(Yl(_));for(o.sort(Du),l=0;l<o.length;l++)My(o[l],t),t=El(t,t.next);return t}(u,e,l,t)),u.length>80*t){h=_=u[0],m=S=u[1];for(let N=t;N<o;N+=t)M=u[N],D=u[N+1],M<h&&(h=M),D<m&&(m=D),M>_&&(_=M),D>S&&(S=D);A=Math.max(_-h,S-m),A=0!==A?1/A:0}return Cu(l,d,t,h,m,A),d}(r,o);for(let m=0;m<h.length;m+=3)l.push(h.slice(m,m+3));return l}}function Pf(u){const e=u.length;e>2&&u[e-1].equals(u[0])&&u.pop()}function Lf(u,e){for(let t=0;t<e.length;t++)u.push(e[t].x),u.push(e[t].y)}class Fa extends ui{constructor(e=new ha([new wt(.5,.5),new wt(-.5,.5),new wt(-.5,-.5),new wt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],l=[];for(let h=0,m=e.length;h<m;h++)d(e[h]);function d(h){const m=[],_=void 0!==t.curveSegments?t.curveSegments:12,S=void 0!==t.steps?t.steps:1;let M=void 0!==t.depth?t.depth:1,D=void 0===t.bevelEnabled||t.bevelEnabled,A=void 0!==t.bevelThickness?t.bevelThickness:.2,N=void 0!==t.bevelSize?t.bevelSize:A-.1,W=void 0!==t.bevelOffset?t.bevelOffset:0,re=void 0!==t.bevelSegments?t.bevelSegments:3;const U=t.extrudePath,R=void 0!==t.UVGenerator?t.UVGenerator:Xm;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),M=t.amount);let ue,ge,Re,Ue,ot,te=!1;U&&(ue=U.getSpacedPoints(S),te=!0,D=!1,ge=U.computeFrenetFrames(S,!1),Re=new p,Ue=new p,ot=new p),D||(re=0,A=0,N=0,W=0);const kt=h.extractPoints(_);let Dt=kt.shape;const ae=kt.holes;if(!Oa.isClockWise(Dt)){Dt=Dt.reverse();for(let qt=0,yn=ae.length;qt<yn;qt++){const hn=ae[qt];Oa.isClockWise(hn)&&(ae[qt]=hn.reverse())}}const ht=Oa.triangulateShape(Dt,ae),Mt=Dt;for(let qt=0,yn=ae.length;qt<yn;qt++)Dt=Dt.concat(ae[qt]);function Tt(qt,yn,hn){return yn||console.error("THREE.ExtrudeGeometry: vec does not exist"),yn.clone().multiplyScalar(hn).add(qt)}const Et=Dt.length,Wt=ht.length;function nn(qt,yn,hn){let Nn,Rn,wi;const Di=qt.x-yn.x,ir=qt.y-yn.y,Jr=hn.x-qt.x,qr=hn.y-qt.y,Ne=Di*Di+ir*ir;if(Math.abs(Di*qr-ir*Jr)>Number.EPSILON){const $t=Math.sqrt(Ne),mn=Math.sqrt(Jr*Jr+qr*qr),Jn=yn.x-ir/$t,Gt=yn.y+Di/$t,Tn=((hn.x-qr/mn-Jn)*qr-(hn.y+Jr/mn-Gt)*Jr)/(Di*qr-ir*Jr);Nn=Jn+Di*Tn-qt.x,Rn=Gt+ir*Tn-qt.y;const An=Nn*Nn+Rn*Rn;if(An<=2)return new wt(Nn,Rn);wi=Math.sqrt(An/2)}else{let $t=!1;Di>Number.EPSILON?Jr>Number.EPSILON&&($t=!0):Di<-Number.EPSILON?Jr<-Number.EPSILON&&($t=!0):Math.sign(ir)===Math.sign(qr)&&($t=!0),$t?(Nn=-ir,Rn=Di,wi=Math.sqrt(Ne)):(Nn=Di,Rn=ir,wi=Math.sqrt(Ne/2))}return new wt(Nn/wi,Rn/wi)}const Un=[];for(let qt=0,yn=Mt.length,hn=yn-1,Nn=qt+1;qt<yn;qt++,hn++,Nn++)hn===yn&&(hn=0),Nn===yn&&(Nn=0),Un[qt]=nn(Mt[qt],Mt[hn],Mt[Nn]);const jt=[];let Jt,Dn=Un.concat();for(let qt=0,yn=ae.length;qt<yn;qt++){const hn=ae[qt];Jt=[];for(let Nn=0,Rn=hn.length,wi=Rn-1,Di=Nn+1;Nn<Rn;Nn++,wi++,Di++)wi===Rn&&(wi=0),Di===Rn&&(Di=0),Jt[Nn]=nn(hn[Nn],hn[wi],hn[Di]);jt.push(Jt),Dn=Dn.concat(Jt)}for(let qt=0;qt<re;qt++){const yn=qt/re,hn=A*Math.cos(yn*Math.PI/2),Nn=N*Math.sin(yn*Math.PI/2)+W;for(let Rn=0,wi=Mt.length;Rn<wi;Rn++){const Di=Tt(Mt[Rn],Un[Rn],Nn);ti(Di.x,Di.y,-hn)}for(let Rn=0,wi=ae.length;Rn<wi;Rn++){const Di=ae[Rn];Jt=jt[Rn];for(let ir=0,Jr=Di.length;ir<Jr;ir++){const qr=Tt(Di[ir],Jt[ir],Nn);ti(qr.x,qr.y,-hn)}}}const Yn=N+W;for(let qt=0;qt<Et;qt++){const yn=D?Tt(Dt[qt],Dn[qt],Yn):Dt[qt];te?(Ue.copy(ge.normals[0]).multiplyScalar(yn.x),Re.copy(ge.binormals[0]).multiplyScalar(yn.y),ot.copy(ue[0]).add(Ue).add(Re),ti(ot.x,ot.y,ot.z)):ti(yn.x,yn.y,0)}for(let qt=1;qt<=S;qt++)for(let yn=0;yn<Et;yn++){const hn=D?Tt(Dt[yn],Dn[yn],Yn):Dt[yn];te?(Ue.copy(ge.normals[qt]).multiplyScalar(hn.x),Re.copy(ge.binormals[qt]).multiplyScalar(hn.y),ot.copy(ue[qt]).add(Ue).add(Re),ti(ot.x,ot.y,ot.z)):ti(hn.x,hn.y,M/S*qt)}for(let qt=re-1;qt>=0;qt--){const yn=qt/re,hn=A*Math.cos(yn*Math.PI/2),Nn=N*Math.sin(yn*Math.PI/2)+W;for(let Rn=0,wi=Mt.length;Rn<wi;Rn++){const Di=Tt(Mt[Rn],Un[Rn],Nn);ti(Di.x,Di.y,M+hn)}for(let Rn=0,wi=ae.length;Rn<wi;Rn++){const Di=ae[Rn];Jt=jt[Rn];for(let ir=0,Jr=Di.length;ir<Jr;ir++){const qr=Tt(Di[ir],Jt[ir],Nn);te?ti(qr.x,qr.y+ue[S-1].y,ue[S-1].x+hn):ti(qr.x,qr.y,M+hn)}}}function wr(qt,yn){let hn=qt.length;for(;--hn>=0;){const Nn=hn;let Rn=hn-1;Rn<0&&(Rn=qt.length-1);for(let wi=0,Di=S+2*re;wi<Di;wi++){const ir=Et*wi,Jr=Et*(wi+1);Fn(yn+Nn+ir,yn+Rn+ir,yn+Rn+Jr,yn+Nn+Jr)}}}function ti(qt,yn,hn){m.push(qt),m.push(yn),m.push(hn)}function yi(qt,yn,hn){ji(qt),ji(yn),ji(hn);const Nn=o.length/3,Rn=R.generateTopUV(r,o,Nn-3,Nn-2,Nn-1);Ci(Rn[0]),Ci(Rn[1]),Ci(Rn[2])}function Fn(qt,yn,hn,Nn){ji(qt),ji(yn),ji(Nn),ji(yn),ji(hn),ji(Nn);const Rn=o.length/3,wi=R.generateSideWallUV(r,o,Rn-6,Rn-3,Rn-2,Rn-1);Ci(wi[0]),Ci(wi[1]),Ci(wi[3]),Ci(wi[1]),Ci(wi[2]),Ci(wi[3])}function ji(qt){o.push(m[3*qt+0]),o.push(m[3*qt+1]),o.push(m[3*qt+2])}function Ci(qt){l.push(qt.x),l.push(qt.y)}(function(){const qt=o.length/3;if(D){let yn=0,hn=Et*yn;for(let Nn=0;Nn<Wt;Nn++){const Rn=ht[Nn];yi(Rn[2]+hn,Rn[1]+hn,Rn[0]+hn)}yn=S+2*re,hn=Et*yn;for(let Nn=0;Nn<Wt;Nn++){const Rn=ht[Nn];yi(Rn[0]+hn,Rn[1]+hn,Rn[2]+hn)}}else{for(let yn=0;yn<Wt;yn++){const hn=ht[yn];yi(hn[2],hn[1],hn[0])}for(let yn=0;yn<Wt;yn++){const hn=ht[yn];yi(hn[0]+Et*S,hn[1]+Et*S,hn[2]+Et*S)}}r.addGroup(qt,o.length/3-qt,0)})(),function(){const qt=o.length/3;let yn=0;wr(Mt,yn),yn+=Mt.length;for(let hn=0,Nn=ae.length;hn<Nn;hn++){const Rn=ae[hn];wr(Rn,yn),yn+=Rn.length}r.addGroup(qt,o.length/3-qt,1)}()}this.setAttribute("position",new Gn(o,3)),this.setAttribute("uv",new Gn(l,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(u,e,t){if(t.shapes=[],Array.isArray(u))for(let r=0,o=u.length;r<o;r++)t.shapes.push(u[r].uuid);else t.shapes.push(u.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let l=0,d=e.shapes.length;l<d;l++)r.push(t[e.shapes[l]]);const o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new jd[o.type]).fromJSON(o)),new Fa(r,e.options)}}const Xm={generateTopUV:function(u,e,t,r,o){const h=e[3*r],m=e[3*r+1],_=e[3*o],S=e[3*o+1];return[new wt(e[3*t],e[3*t+1]),new wt(h,m),new wt(_,S)]},generateSideWallUV:function(u,e,t,r,o,l){const d=e[3*t],h=e[3*t+1],m=e[3*t+2],_=e[3*r],S=e[3*r+1],M=e[3*r+2],D=e[3*o],A=e[3*o+1],N=e[3*o+2],W=e[3*l],re=e[3*l+1],U=e[3*l+2];return Math.abs(h-S)<Math.abs(d-_)?[new wt(d,1-m),new wt(_,1-M),new wt(D,1-N),new wt(W,1-U)]:[new wt(h,1-m),new wt(S,1-M),new wt(A,1-N),new wt(re,1-U)]}};class Hc extends ui{constructor(e=new ha([new wt(0,.5),new wt(-.5,-.5),new wt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],l=[],d=[];let h=0,m=0;if(!1===Array.isArray(e))_(e);else for(let S=0;S<e.length;S++)_(e[S]),this.addGroup(h,m,S),h+=m,m=0;function _(S){const M=o.length/3,D=S.extractPoints(t);let A=D.shape;const N=D.holes;!1===Oa.isClockWise(A)&&(A=A.reverse());for(let re=0,U=N.length;re<U;re++){const R=N[re];!0===Oa.isClockWise(R)&&(N[re]=R.reverse())}const W=Oa.triangulateShape(A,N);for(let re=0,U=N.length;re<U;re++)A=A.concat(N[re]);for(let re=0,U=A.length;re<U;re++){const R=A[re];o.push(R.x,R.y,0),l.push(0,0,1),d.push(R.x,R.y)}for(let re=0,U=W.length;re<U;re++){const R=W[re];r.push(R[0]+M,R[1]+M,R[2]+M),m+=3}}this.setIndex(r),this.setAttribute("position",new Gn(o,3)),this.setAttribute("normal",new Gn(l,3)),this.setAttribute("uv",new Gn(d,2))}toJSON(){const e=super.toJSON();return function(u,e){if(e.shapes=[],Array.isArray(u))for(let t=0,r=u.length;t<r;t++)e.shapes.push(u[t].uuid);else e.shapes.push(u.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++)r.push(t[e.shapes[o]]);return new Hc(r,e.curveSegments)}}(class extends gi{constructor(e){super(),this.type="ShadowMaterial",this.color=new qe(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class Fu extends gi{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Fu.prototype.isMeshStandardMaterial=!0;(class extends Fu{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new wt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ot(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;class eg extends gi{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new qe(16777215),this.specular=new qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}eg.prototype.isMeshPhongMaterial=!0;(class extends gi{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends gi{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends gi{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends gi{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends ss{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const zr={arraySlice:function(u,e,t){return zr.isTypedArray(u)?new u.constructor(u.subarray(e,void 0!==t?t:u.length)):u.slice(e,t)},convertArray:function(u,e,t){return!u||!t&&u.constructor===e?u:"number"==typeof e.BYTES_PER_ELEMENT?new e(u):Array.prototype.slice.call(u)},isTypedArray:function(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)},getKeyframeOrder:function(u){const t=u.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(function(o,l){return u[o]-u[l]}),r},sortedArray:function(u,e,t){const r=u.length,o=new u.constructor(r);for(let l=0,d=0;d!==r;++l){const h=t[l]*e;for(let m=0;m!==e;++m)o[d++]=u[h+m]}return o},flattenJSON:function(u,e,t,r){let o=1,l=u[0];for(;void 0!==l&&void 0===l[r];)l=u[o++];if(void 0===l)return;let d=l[r];if(void 0!==d)if(Array.isArray(d))do{d=l[r],void 0!==d&&(e.push(l.time),t.push.apply(t,d)),l=u[o++]}while(void 0!==l);else if(void 0!==d.toArray)do{d=l[r],void 0!==d&&(e.push(l.time),d.toArray(t,t.length)),l=u[o++]}while(void 0!==l);else do{d=l[r],void 0!==d&&(e.push(l.time),t.push(d)),l=u[o++]}while(void 0!==l)},subclip:function(u,e,t,r,o=30){const l=u.clone();l.name=e;const d=[];for(let m=0;m<l.tracks.length;++m){const _=l.tracks[m],S=_.getValueSize(),M=[],D=[];for(let A=0;A<_.times.length;++A){const N=_.times[A]*o;if(!(N<t||N>=r)){M.push(_.times[A]);for(let W=0;W<S;++W)D.push(_.values[A*S+W])}}0!==M.length&&(_.times=zr.convertArray(M,_.times.constructor),_.values=zr.convertArray(D,_.values.constructor),d.push(_))}l.tracks=d;let h=1/0;for(let m=0;m<l.tracks.length;++m)h>l.tracks[m].times[0]&&(h=l.tracks[m].times[0]);for(let m=0;m<l.tracks.length;++m)l.tracks[m].shift(-1*h);return l.resetDuration(),l},makeClipAdditive:function(u,e=0,t=u,r=30){r<=0&&(r=30);const o=t.tracks.length,l=e/r;for(let d=0;d<o;++d){const h=t.tracks[d],m=h.ValueTypeName;if("bool"===m||"string"===m)continue;const _=u.tracks.find(function(U){return U.name===h.name&&U.ValueTypeName===m});if(void 0===_)continue;let S=0;const M=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=M/3);let D=0;const A=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(D=A/3);const N=h.times.length-1;let W;if(l<=h.times[0])W=zr.arraySlice(h.values,S,M-S);else if(l>=h.times[N]){const U=N*M+S;W=zr.arraySlice(h.values,U,U+M-S)}else{const U=h.createInterpolant(),R=S,ue=M-S;U.evaluate(l),W=zr.arraySlice(U.resultBuffer,R,ue)}"quaternion"===m&&(new P).fromArray(W).normalize().conjugate().toArray(W);const re=_.times.length;for(let U=0;U<re;++U){const R=U*A+D;if("quaternion"===m)P.multiplyQuaternionsFlat(_.values,R,W,0,_.values,R);else{const ue=A-2*D;for(let te=0;te<ue;++te)_.values[R+te]-=W[te]}}}return u.blendMode=2501,u}};class Ml{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],l=t[r-1];e:{t:{let d;n:{i:if(!(e<o)){for(let h=r+2;;){if(void 0===o){if(e<l)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,l)}if(r===h)break;if(l=o,o=t[++r],e<o)break t}d=t.length;break n}if(e>=l)break e;{const h=t[1];e<h&&(r=2,l=h);for(let m=r-2;;){if(void 0===l)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===m)break;if(o=l,l=t[--r-1],e>=l)break t}d=r,r=0}}for(;r<d;){const h=r+d>>>1;e<t[h]?d=h:r=h+1}if(o=t[r],l=t[r-1],void 0===l)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(void 0===o)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,l,e)}this._cachedIndex=r,this.intervalChanged_(r,l,o)}return this.interpolate_(r,l,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,l=e*o;for(let d=0;d!==o;++d)t[d]=r[l+d];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ml.prototype.beforeStart_=Ml.prototype.copySampleValue_,Ml.prototype.afterEnd_=Ml.prototype.copySampleValue_;class ng extends Ml{constructor(e,t,r,o){super(e,t,r,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rr,endingEnd:Rr}}intervalChanged_(e,t,r){const o=this.parameterPositions;let l=e-2,d=e+1,h=o[l],m=o[d];if(void 0===h)switch(this.getSettings_().endingStart){case we:l=e,h=2*t-r;break;case G:l=o.length-2,h=t+o[l]-o[l+1];break;default:l=e,h=r}if(void 0===m)switch(this.getSettings_().endingEnd){case we:d=e,m=2*r-t;break;case G:d=1,m=r+o[1]-o[0];break;default:d=e-1,m=t}const _=.5*(r-t),S=this.valueSize;this._weightPrev=_/(t-h),this._weightNext=_/(m-r),this._offsetPrev=l*S,this._offsetNext=d*S}interpolate_(e,t,r,o){const l=this.resultBuffer,d=this.sampleValues,h=this.valueSize,m=e*h,_=m-h,S=this._offsetPrev,M=this._offsetNext,D=this._weightPrev,A=this._weightNext,N=(r-t)/(o-t),W=N*N,re=W*N,U=-D*re+2*D*W-D*N,R=(1+D)*re+(-1.5-2*D)*W+(-.5+D)*N+1,ue=(-1-A)*re+(1.5+A)*W+.5*N,te=A*re-A*W;for(let ge=0;ge!==h;++ge)l[ge]=U*d[S+ge]+R*d[_+ge]+ue*d[m+ge]+te*d[M+ge];return l}}class ig extends Ml{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,d=this.sampleValues,h=this.valueSize,m=e*h,_=m-h,S=(r-t)/(o-t),M=1-S;for(let D=0;D!==h;++D)l[D]=d[_+D]*M+d[m+D]*S;return l}}class rg extends Ml{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class Oo{constructor(e,t,r,o){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zr.convertArray(t,this.TimeBufferType),this.values=zr.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:zr.convertArray(e.times,Array),values:zr.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new rg(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ig(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ng(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let l=0,d=o-1;for(;l!==o&&r[l]<e;)++l;for(;-1!==d&&r[d]>t;)--d;if(++d,0!==l||d!==o){l>=d&&(d=Math.max(d,1),l=d-1);const h=this.getValueSize();this.times=zr.arraySlice(r,l,d),this.values=zr.arraySlice(this.values,l*h,d*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,l=r.length;0===l&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let d=null;for(let h=0;h!==l;h++){const m=r[h];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(null!==d&&d>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,d),e=!1;break}d=m}if(void 0!==o&&zr.isTypedArray(o))for(let h=0,m=o.length;h!==m;++h){const _=o[h];if(isNaN(_)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,_),e=!1;break}}return e}optimize(){const e=zr.arraySlice(this.times),t=zr.arraySlice(this.values),r=this.getValueSize(),o=2302===this.getInterpolation(),l=e.length-1;let d=1;for(let h=1;h<l;++h){let m=!1;const _=e[h];if(_!==e[h+1]&&(1!==h||_!==e[0]))if(o)m=!0;else{const M=h*r,D=M-r,A=M+r;for(let N=0;N!==r;++N){const W=t[M+N];if(W!==t[D+N]||W!==t[A+N]){m=!0;break}}}if(m){if(h!==d){e[d]=e[h];const M=h*r,D=d*r;for(let A=0;A!==r;++A)t[D+A]=t[M+A]}++d}}if(l>0){e[d]=e[l];for(let h=l*r,m=d*r,_=0;_!==r;++_)t[m+_]=t[h+_];++d}return d!==e.length?(this.times=zr.arraySlice(e,0,d),this.values=zr.arraySlice(t,0,d*r)):(this.times=e,this.values=t),this}clone(){const e=zr.arraySlice(this.times,0),t=zr.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}Oo.prototype.TimeBufferType=Float32Array,Oo.prototype.ValueBufferType=Float32Array,Oo.prototype.DefaultInterpolation=2301;class Uc extends Oo{}Uc.prototype.ValueTypeName="bool",Uc.prototype.ValueBufferType=Array,Uc.prototype.DefaultInterpolation=2300,Uc.prototype.InterpolantFactoryMethodLinear=void 0,Uc.prototype.InterpolantFactoryMethodSmooth=void 0;class Ff extends Oo{}Ff.prototype.ValueTypeName="color";class Qd extends Oo{}Qd.prototype.ValueTypeName="number";class Py extends Ml{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const l=this.resultBuffer,d=this.sampleValues,h=this.valueSize,m=(r-t)/(o-t);let _=e*h;for(let S=_+h;_!==S;_+=4)P.slerpFlat(l,0,d,_-h,d,_,m);return l}}class Nu extends Oo{InterpolantFactoryMethodLinear(e){return new Py(this.times,this.values,this.getValueSize(),e)}}Nu.prototype.ValueTypeName="quaternion",Nu.prototype.DefaultInterpolation=2301,Nu.prototype.InterpolantFactoryMethodSmooth=void 0;class zc extends Oo{}zc.prototype.ValueTypeName="string",zc.prototype.ValueBufferType=Array,zc.prototype.DefaultInterpolation=2300,zc.prototype.InterpolantFactoryMethodLinear=void 0,zc.prototype.InterpolantFactoryMethodSmooth=void 0;class eh extends Oo{}eh.prototype.ValueTypeName="vector";class ku{constructor(e,t=-1,r,o=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=_t(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let d=0,h=r.length;d!==h;++d)t.push(sg(r[d]).scale(o));const l=new this(e.name,e.duration,t,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,d=r.length;l!==d;++l)t.push(Oo.toJSON(r[l]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const l=t.length,d=[];for(let h=0;h<l;h++){let m=[],_=[];m.push((h+l-1)%l,h,(h+1)%l),_.push(0,1,0);const S=zr.getKeyframeOrder(m);m=zr.sortedArray(m,1,S),_=zr.sortedArray(_,1,S),!o&&0===m[0]&&(m.push(l),_.push(_[0])),d.push(new Qd(".morphTargetInfluences["+t[h].name+"]",m,_).scale(1/r))}return new this(e,-1,d)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},l=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const _=e[h],S=_.name.match(l);if(S&&S.length>1){const M=S[1];let D=o[M];D||(o[M]=D=[]),D.push(_)}}const d=[];for(const h in o)d.push(this.CreateFromMorphTargetSequence(h,o[h],t,r));return d}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(M,D,A,N,W){if(0!==A.length){const re=[],U=[];zr.flattenJSON(A,re,U,N),0!==re.length&&W.push(new M(D,re,U))}},o=[],l=e.name||"default",d=e.fps||30,h=e.blendMode;let m=e.length||-1;const _=e.hierarchy||[];for(let M=0;M<_.length;M++){const D=_[M].keys;if(D&&0!==D.length)if(D[0].morphTargets){const A={};let N;for(N=0;N<D.length;N++)if(D[N].morphTargets)for(let W=0;W<D[N].morphTargets.length;W++)A[D[N].morphTargets[W]]=-1;for(const W in A){const re=[],U=[];for(let R=0;R!==D[N].morphTargets.length;++R){const ue=D[N];re.push(ue.time),U.push(ue.morphTarget===W?1:0)}o.push(new Qd(".morphTargetInfluence["+W+"]",re,U))}m=A.length*(d||1)}else{const A=".bones["+t[M].name+"]";r(eh,A+".position",D,"pos",o),r(Nu,A+".quaternion",D,"rot",o),r(eh,A+".scale",D,"scl",o)}}return 0===o.length?null:new this(l,m,o,h)}resetDuration(){let t=0;for(let r=0,o=this.tracks.length;r!==o;++r){const l=this.tracks[r];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sg(u){if(void 0===u.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(u){switch(u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qd;case"vector":case"vector2":case"vector3":case"vector4":return eh;case"color":return Ff;case"quaternion":return Nu;case"bool":case"boolean":return Uc;case"string":return zc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+u)}(u.type);if(void 0===u.times){const t=[],r=[];zr.flattenJSON(u.keys,t,r,"value"),u.times=t,u.values=r}return void 0!==e.parse?e.parse(u):new e(u.name,u.times,u.values,u.interpolation)}const Zl={enabled:!1,files:{},add:function(u,e){!1!==this.enabled&&(this.files[u]=e)},get:function(u){if(!1!==this.enabled)return this.files[u]},remove:function(u){delete this.files[u]},clear:function(){this.files={}}};class Bu{constructor(e,t,r){const o=this;let m,l=!1,d=0,h=0;const _=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(S){h++,!1===l&&void 0!==o.onStart&&o.onStart(S,d,h),l=!0},this.itemEnd=function(S){d++,void 0!==o.onProgress&&o.onProgress(S,d,h),d===h&&(l=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(S){void 0!==o.onError&&o.onError(S)},this.resolveURL=function(S){return m?m(S):S},this.setURLModifier=function(S){return m=S,this},this.addHandler=function(S,M){return _.push(S,M),this},this.removeHandler=function(S){const M=_.indexOf(S);return-1!==M&&_.splice(M,2),this},this.getHandler=function(S){for(let M=0,D=_.length;M<D;M+=2){const A=_[M],N=_[M+1];if(A.global&&(A.lastIndex=0),A.test(S))return N}return null}}}const Z0=new Bu;class fa{constructor(e){this.manager=void 0!==e?e:Z0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,l){r.load(e,o,t,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const nl={};class il extends fa{constructor(e){super(e)}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const l=Zl.get(e);if(void 0!==l)return this.manager.itemStart(e),setTimeout(()=>{t&&t(l),this.manager.itemEnd(e)},0),l;if(void 0!==nl[e])return void nl[e].push({onLoad:t,onProgress:r,onError:o});nl[e]=[],nl[e].push({onLoad:t,onProgress:r,onError:o});const d=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,m=this.responseType;fetch(d).then(_=>{if(200===_.status||0===_.status){if(0===_.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===_.body.getReader)return _;const S=nl[e],M=_.body.getReader(),D=_.headers.get("Content-Length"),A=D?parseInt(D):0,N=0!==A;let W=0;const re=new ReadableStream({start(U){!function R(){M.read().then(({done:ue,value:te})=>{if(ue)U.close();else{W+=te.byteLength;const ge=new ProgressEvent("progress",{lengthComputable:N,loaded:W,total:A});for(let Re=0,Ue=S.length;Re<Ue;Re++){const ot=S[Re];ot.onProgress&&ot.onProgress(ge)}U.enqueue(te),R()}})}()}});return new Response(re)}throw Error(`fetch for "${_.url}" responded with ${_.status}: ${_.statusText}`)}).then(_=>{switch(m){case"arraybuffer":return _.arrayBuffer();case"blob":return _.blob();case"document":return _.text().then(S=>(new DOMParser).parseFromString(S,h));case"json":return _.json();default:if(void 0===h)return _.text();{const M=/charset="?([^;"\s]*)"?/i.exec(h),D=M&&M[1]?M[1].toLowerCase():void 0,A=new TextDecoder(D);return _.arrayBuffer().then(N=>A.decode(N))}}}).then(_=>{Zl.add(e,_);const S=nl[e];delete nl[e];for(let M=0,D=S.length;M<D;M++){const A=S[M];A.onLoad&&A.onLoad(_)}}).catch(_=>{const S=nl[e];if(void 0===S)throw this.manager.itemError(e),_;delete nl[e];for(let M=0,D=S.length;M<D;M++){const A=S[M];A.onError&&A.onError(_)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Gc extends fa{constructor(e){super(e)}load(e,t,r,o){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,d=Zl.get(e);if(void 0!==d)return l.manager.itemStart(e),setTimeout(function(){t&&t(d),l.manager.itemEnd(e)},0),d;const h=v("img");function m(){S(),Zl.add(e,this),t&&t(this),l.manager.itemEnd(e)}function _(M){S(),o&&o(M),l.manager.itemError(e),l.manager.itemEnd(e)}function S(){h.removeEventListener("load",m,!1),h.removeEventListener("error",_,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",_,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),l.manager.itemStart(e),h.src=e,h}}class Nf extends fa{constructor(e){super(e)}load(e,t,r,o){const l=new Qc,d=new Gc(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let h=0;function m(_){d.load(e[_],function(S){l.images[_]=S,h++,6===h&&(l.needsUpdate=!0,t&&t(l))},void 0,o)}for(let _=0;_<e.length;++_)m(_);return l}}class nh extends fa{constructor(e){super(e)}load(e,t,r,o){const l=new jn,d=new Gc(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(e,function(h){l.image=h,l.needsUpdate=!0,void 0!==t&&t(l)},r,o),l}}class Ko extends _r{constructor(e,t=1){super(),this.type="Light",this.color=new qe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ko.prototype.isLight=!0;(class extends Ko{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.groundColor=new qe(t)}copy(e){return Ko.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const Ny=new zn,og=new p,Bf=new p;class ih{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new wt(512,512),this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tu,this._frameExtents=new wt(1,1),this._viewportCount=1,this._viewports=[new pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;og.setFromMatrixPosition(e.matrixWorld),t.position.copy(og),Bf.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Bf),t.updateMatrixWorld(),Ny.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ny),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ag extends ih{constructor(){super(new xs(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*Pe*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;(r!==t.fov||o!==t.aspect||l!==t.far)&&(t.fov=r,t.aspect=o,t.far=l,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}ag.prototype.isSpotLightShadow=!0;(class extends Ko{constructor(e,t,r=0,o=Math.PI/3,l=0,d=1){super(e,t),this.type="SpotLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,this.distance=r,this.angle=o,this.penumbra=l,this.decay=d,this.shadow=new ag}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const rh=new zn,Wc=new p,sh=new p;class oh extends ih{constructor(){super(new xs(90,1,.5,500)),this._frameExtents=new wt(4,2),this._viewportCount=6,this._viewports=[new pn(2,1,1,1),new pn(0,1,1,1),new pn(3,1,1,1),new pn(1,1,1,1),new pn(3,0,1,1),new pn(1,0,1,1)],this._cubeDirections=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],this._cubeUps=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,l=e.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),Wc.setFromMatrixPosition(e.matrixWorld),r.position.copy(Wc),sh.copy(r.position),sh.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(sh),r.updateMatrixWorld(),o.makeTranslation(-Wc.x,-Wc.y,-Wc.z),rh.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rh)}}oh.prototype.isPointLightShadow=!0;class Vu extends Ko{constructor(e,t,r=0,o=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new oh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Vu.prototype.isPointLight=!0;class cg extends ih{constructor(){super(new cu(-5,5,5,-5,.5,500))}}cg.prototype.isDirectionalLightShadow=!0;(class extends Ko{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,this.shadow=new cg}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class extends Ko{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends Ko{constructor(e,t,r=10,o=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class Uf{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new p)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,l=e.z,d=this.coefficients;return t.copy(d[0]).multiplyScalar(.282095),t.addScaledVector(d[1],.488603*o),t.addScaledVector(d[2],.488603*l),t.addScaledVector(d[3],.488603*r),t.addScaledVector(d[4],r*o*1.092548),t.addScaledVector(d[5],o*l*1.092548),t.addScaledVector(d[6],.315392*(3*l*l-1)),t.addScaledVector(d[7],r*l*1.092548),t.addScaledVector(d[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,l=e.z,d=this.coefficients;return t.copy(d[0]).multiplyScalar(.886227),t.addScaledVector(d[1],1.023328*o),t.addScaledVector(d[2],1.023328*l),t.addScaledVector(d[3],1.023328*r),t.addScaledVector(d[4],.858086*r*o),t.addScaledVector(d[5],.858086*o*l),t.addScaledVector(d[6],.743125*l*l-.247708),t.addScaledVector(d[7],.858086*r*l),t.addScaledVector(d[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+3*o);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+3*o);return e}static getBasisAt(e,t){const r=e.x,o=e.y,l=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*l,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*r*l,t[8]=.546274*(r*r-o*o)}}Uf.prototype.isSphericalHarmonics3=!0;class lh extends Ko{constructor(e=new Uf,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}lh.prototype.isLightProbe=!0;let Hu;(class extends ui{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class extends fa{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,d=Zl.get(e);if(void 0!==d)return l.manager.itemStart(e),setTimeout(function(){t&&t(d),l.manager.itemEnd(e)},0),d;const h={};h.credentials="anonymous"===this.crossOrigin?"same-origin":"include",h.headers=this.requestHeader,fetch(e,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(m){Zl.add(e,m),t&&t(m),l.manager.itemEnd(e)}).catch(function(m){o&&o(m),l.manager.itemError(e),l.manager.itemEnd(e)}),l.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class fg extends fa{constructor(e){super(e)}load(e,t,r,o){const l=this,d=new il(this.manager);d.setResponseType("arraybuffer"),d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(h){try{const m=h.slice(0);(void 0===Hu&&(Hu=new(window.AudioContext||window.webkitAudioContext)),Hu).decodeAudioData(m,function(S){t(S)})}catch(m){o?o(m):console.error(m),l.manager.itemError(e)}},r,o)}}(class extends lh{constructor(e,t,r=1){super(void 0,r);const o=(new qe).set(e),l=(new qe).set(t),d=new p(o.r,o.g,o.b),h=new p(l.r,l.g,l.b),m=Math.sqrt(Math.PI),_=m*Math.sqrt(.75);this.sh.coefficients[0].copy(d).add(h).multiplyScalar(m),this.sh.coefficients[1].copy(d).sub(h).multiplyScalar(_)}}).prototype.isHemisphereLightProbe=!0,class extends lh{constructor(e,t=1){super(void 0,t);const r=(new qe).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class qf{constructor(e,t,r){let o,l,d;switch(this.binding=e,this.valueSize=r,t){case"quaternion":o=this._slerp,l=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,l=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,l=e*o+o;let d=this.cumulativeWeight;if(0===d){for(let h=0;h!==o;++h)r[l+h]=r[h];d=t}else d+=t,this._mixBufferRegion(r,l,0,t/d,o);this.cumulativeWeight=d}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,l=this.cumulativeWeight,d=this.cumulativeWeightAdditive,h=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1&&this._mixBufferRegion(r,o,t*this._origIndex,1-l,t),d>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let m=t,_=t+t;m!==_;++m)if(r[m]!==r[m+t]){h.setValue(r,o);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,o=r*this._origIndex;this.binding.getValue(t,o);for(let l=r,d=o;l!==d;++l)t[l]=t[o+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,l){if(o>=.5)for(let d=0;d!==l;++d)e[t+d]=e[r+d]}_slerp(e,t,r,o){P.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,l){const d=this._workIndex*l;P.multiplyQuaternionsFlat(e,d,e,t,e,r),P.slerpFlat(e,t,e,t,e,d,o)}_lerp(e,t,r,o,l){const d=1-o;for(let h=0;h!==l;++h){const m=t+h;e[m]=e[m]*d+e[r+h]*o}}_lerpAdditive(e,t,r,o,l){for(let d=0;d!==l;++d){const h=t+d;e[h]=e[h]+e[r+d]*o}}}const Uu="\\[\\]\\.:\\/",Na=new RegExp("["+Uu+"]","g"),Xf="[^"+Uu+"]",zy="[^"+Uu.replace("\\.","")+"]",ka=/((?:WC+[\/:])*)/.source.replace("WC",Xf),pa=/(WCOD+)?/.source.replace("WCOD",zy),ma=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xf),vg=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xf),bg=new RegExp("^"+ka+pa+ma+vg+"$"),Gy=["material","materials","bones"];class Wy{constructor(e,t,r){const o=r||as.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=r.length;o!==l;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let as=(()=>{class u{constructor(t,r,o){this.path=r,this.parsedPath=o||u.parseTrackName(r),this.node=u.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,o){return t&&t.isAnimationObjectGroup?new u.Composite(t,r,o):new u(t,r,o)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Na,"")}static parseTrackName(t){const r=bg.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const o={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},l=o.nodeName&&o.nodeName.lastIndexOf(".");if(void 0!==l&&-1!==l){const d=o.nodeName.substring(l+1);-1!==Gy.indexOf(d)&&(o.nodeName=o.nodeName.substring(0,l),o.objectName=d)}if(null===o.propertyName||0===o.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return o}static findNode(t,r){if(!r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const o=t.skeleton.getBoneByName(r);if(void 0!==o)return o}if(t.children){const o=function(d){for(let h=0;h<d.length;h++){const m=d[h];if(m.name===r||m.uuid===r)return m;const _=o(m.children);if(_)return _}return null},l=o(t.children);if(l)return l}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)t[r++]=o[l]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)o[l]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)o[l]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const o=this.resolvedProperty;for(let l=0,d=o.length;l!==d;++l)o[l]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,o=r.objectName,l=r.propertyName;let d=r.propertyIndex;if(t||(t=u.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(o){let S=r.objectIndex;switch(o){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let M=0;M<t.length;M++)if(t[M].name===S){S=M;break}break;default:if(void 0===t[o])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[o]}if(void 0!==S){if(void 0===t[S])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[S]}}const h=t[l];if(void 0===h)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+l+" but it wasn't found.",t);let m=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(void 0!==d){if("morphTargetInfluences"===l){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[d]&&(d=t.morphTargetDictionary[d])}_=this.BindingType.ArrayElement,this.resolvedProperty=h,this.propertyIndex=d}else void 0!==h.fromArray&&void 0!==h.toArray?(_=this.BindingType.HasFromToArray,this.resolvedProperty=h):Array.isArray(h)?(_=this.BindingType.EntireArray,this.resolvedProperty=h):this.propertyName=l;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return u.Composite=Wy,u})();as.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},as.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},as.prototype.GetterByBindingType=[as.prototype._getValue_direct,as.prototype._getValue_array,as.prototype._getValue_arrayElement,as.prototype._getValue_toArray],as.prototype.SetterByBindingTypeAndVersioning=[[as.prototype._setValue_direct,as.prototype._setValue_direct_setNeedsUpdate,as.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[as.prototype._setValue_array,as.prototype._setValue_array_setNeedsUpdate,as.prototype._setValue_array_setMatrixWorldNeedsUpdate],[as.prototype._setValue_arrayElement,as.prototype._setValue_arrayElement_setNeedsUpdate,as.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[as.prototype._setValue_fromArray,as.prototype._setValue_fromArray_setNeedsUpdate,as.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Kf{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const l=t.tracks,d=l.length,h=new Array(d),m={endingStart:Rr,endingEnd:Rr};for(let _=0;_!==d;++_){const S=l[_].createInterpolant(null);h[_]=S,S.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,l=e._clip.duration,h=o/l;e.warp(1,l/o,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,l=o.time,d=this.timeScale;let h=this._timeScaleInterpolant;null===h&&(h=o._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,_=h.sampleValues;return m[0]=l,m[1]=l+r,_[0]=e/d,_[1]=t/d,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled)return void this._updateWeight(e);const l=this._startTime;if(null!==l){const m=(e-l)*r;if(m<0||0===r)return;this._startTime=null,t=r*m}t*=this._updateTimeScale(e);const d=this._updateTime(t),h=this._updateWeight(e);if(h>0){const m=this._interpolants,_=this._propertyBindings;if(2501===this.blendMode)for(let S=0,M=m.length;S!==M;++S)m[S].evaluate(d),_[S].accumulateAdditive(h);else for(let S=0,M=m.length;S!==M;++S)m[S].evaluate(d),_[S].accumulate(o,h)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,l=this._loopCount;const d=2202===r;if(0===e)return-1===l?o:d&&1==(1&l)?t-o:o;if(2200===r){-1===l&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===l&&(e>=0?(l=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d)),o>=t||o<0){const h=Math.floor(o/t);o-=t*h,l+=Math.abs(h);const m=this.repetitions-l;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===m){const _=e<0;this._setEndings(_,!_,d)}else this._setEndings(!1,!1,d);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=o;if(d&&1==(1&l))return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=we,o.endingEnd=we):(o.endingStart=e?this.zeroSlopeAtStart?we:Rr:G,o.endingEnd=t?this.zeroSlopeAtEnd?we:Rr:G)}_scheduleFading(e,t,r){const o=this._mixer,l=o.time;let d=this._weightInterpolant;null===d&&(d=o._lendControlInterpolant(),this._weightInterpolant=d);const h=d.parameterPositions,m=d.sampleValues;return h[0]=l,m[0]=t,h[1]=l+e,m[1]=r,this}}(class extends k{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,l=o.length,d=e._propertyBindings,h=e._interpolants,m=r.uuid,_=this._bindingsByRootAndName;let S=_[m];void 0===S&&(S={},_[m]=S);for(let M=0;M!==l;++M){const D=o[M],A=D.name;let N=S[A];if(void 0!==N)++N.referenceCount,d[M]=N;else{if(N=d[M],void 0!==N){null===N._cacheIndex&&(++N.referenceCount,this._addInactiveBinding(N,m,A));continue}N=new qf(as.create(r,A,t&&t._propertyBindings[M].binding.parsedPath),D.ValueTypeName,D.getValueSize()),++N.referenceCount,this._addInactiveBinding(N,m,A),d[M]=N}h[M].resultBuffer=N.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,l=this._actionsByClip[o];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];0==l.useCount++&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];0==--l.useCount&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,l=this._actionsByClip;let d=l[t];if(void 0===d)d={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=d;else{const h=d.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=o.length,o.push(e),d.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const l=e._clip.uuid,d=this._actionsByClip,h=d[l],m=h.knownActions,_=m[m.length-1],S=e._byClipCacheIndex;_._byClipCacheIndex=S,m[S]=_,m.pop(),e._byClipCacheIndex=null,delete h.actionByRoot[(e._localRoot||this._root).uuid],0===m.length&&delete d[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const l=t[r];0==--l.referenceCount&&this._removeInactiveBinding(l)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,l=this._bindings;let d=o[t];void 0===d&&(d={},o[t]=d),d[r]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,l=r.path,d=this._bindingsByRootAndName,h=d[o],m=t[t.length-1],_=e._cacheIndex;m._cacheIndex=_,t[_]=m,t.pop(),delete h[l],0===Object.keys(h).length&&delete d[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,l=t[o];e._cacheIndex=o,t[o]=e,l._cacheIndex=r,t[r]=l}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new ig(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,l=t[o];e.__cacheIndex=o,t[o]=e,l.__cacheIndex=r,t[r]=l}clipAction(e,t,r){const o=t||this._root,l=o.uuid;let d="string"==typeof e?ku.findByName(o,e):e;const h=null!==d?d.uuid:e,m=this._actionsByClip[h];let _=null;if(void 0===r&&(r=null!==d?d.blendMode:2500),void 0!==m){const M=m.actionByRoot[l];if(void 0!==M&&M.blendMode===r)return M;_=m.knownActions[0],null===d&&(d=_._clip)}if(null===d)return null;const S=new Kf(this,d,t,r);return this._bindAction(S,_),this._addInactiveAction(S,h,l),S}existingAction(e,t){const r=t||this._root,o=r.uuid,l="string"==typeof e?ku.findByName(r,e):e,h=this._actionsByClip[l?l.uuid:e];return void 0!==h&&h.actionByRoot[o]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,o=this.time+=e*=this.timeScale,l=Math.sign(e),d=this._accuIndex^=1;for(let _=0;_!==r;++_)t[_]._update(o,e,l,d);const h=this._bindings,m=this._nActiveBindings;for(let _=0;_!==m;++_)h[_].apply(d);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,l=o[r];if(void 0!==l){const d=l.knownActions;for(let h=0,m=d.length;h!==m;++h){const _=d[h];this._deactivateAction(_);const S=_._cacheIndex,M=t[t.length-1];_._cacheIndex=null,_._byClipCacheIndex=null,M._cacheIndex=S,t[S]=M,t.pop(),this._removeInactiveBindingsForAction(_)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const d in r){const m=r[d].actionByRoot[t];void 0!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}const l=this._bindingsByRootAndName[t];if(void 0!==l)for(const d in l){const h=l[d];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Zf{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Zf(void 0===this.value.clone?this.value:this.value.clone())}}(class extends Ec{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class wg{constructor(e,t,r=0,o=1/0){this.ray=new so(e,t),this.near=r,this.far=o,this.camera=null,this.layers=new qc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return $c(e,this,r,t),r.sort(Jf),r}intersectObjects(e,t=!0,r=[]){for(let o=0,l=e.length;o<l;o++)$c(e[o],this,r,t);return r.sort(Jf),r}}function Jf(u,e){return u.distance-e.distance}function $c(u,e,t,r){if(u.layers.test(e.layers)&&u.raycast(e,t),!0===r){const o=u.children;for(let l=0,d=o.length;l<d;l++)$c(o[l],e,t,!0)}}class Yy{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ot(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Qf=new wt;class nc{constructor(e=new wt(1/0,1/0),t=new wt(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Qf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Qf.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}nc.prototype.isBox2=!0;const rl=new p,ju=new zn,dh=new zn;function Sg(u){const e=[];u&&u.isBone&&e.push(u);for(let t=0;t<u.children.length;t++)e.push.apply(e,Sg(u.children[t]));return e}const fh=new p,ws=new Dh;class Jy extends Ia{constructor(e){const t=new ui,r=new ss({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],d={},h=new qe(16755200),m=new qe(16711680),_=new qe(43775),S=new qe(16777215),M=new qe(3355443);function D(N,W,re){A(N,re),A(W,re)}function A(N,W){o.push(0,0,0),l.push(W.r,W.g,W.b),void 0===d[N]&&(d[N]=[]),d[N].push(o.length/3-1)}D("n1","n2",h),D("n2","n4",h),D("n4","n3",h),D("n3","n1",h),D("f1","f2",h),D("f2","f4",h),D("f4","f3",h),D("f3","f1",h),D("n1","f1",h),D("n2","f2",h),D("n3","f3",h),D("n4","f4",h),D("p","n1",m),D("p","n2",m),D("p","n3",m),D("p","n4",m),D("u1","u2",_),D("u2","u3",_),D("u3","u1",_),D("c","t",S),D("p","c",M),D("cn1","cn2",M),D("cn3","cn4",M),D("cf1","cf2",M),D("cf3","cf4",M),t.setAttribute("position",new Gn(o,3)),t.setAttribute("color",new Gn(l,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}update(){const e=this.geometry,t=this.pointMap;ws.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ts("c",t,e,ws,0,0,-1),Ts("t",t,e,ws,0,0,1),Ts("n1",t,e,ws,-1,-1,-1),Ts("n2",t,e,ws,1,-1,-1),Ts("n3",t,e,ws,-1,1,-1),Ts("n4",t,e,ws,1,1,-1),Ts("f1",t,e,ws,-1,-1,1),Ts("f2",t,e,ws,1,-1,1),Ts("f3",t,e,ws,-1,1,1),Ts("f4",t,e,ws,1,1,1),Ts("u1",t,e,ws,.7,1.1,-1),Ts("u2",t,e,ws,-.7,1.1,-1),Ts("u3",t,e,ws,0,2,-1),Ts("cf1",t,e,ws,-1,0,1),Ts("cf2",t,e,ws,1,0,1),Ts("cf3",t,e,ws,0,-1,1),Ts("cf4",t,e,ws,0,1,1),Ts("cn1",t,e,ws,-1,0,-1),Ts("cn2",t,e,ws,1,0,-1),Ts("cn3",t,e,ws,0,-1,-1),Ts("cn4",t,e,ws,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ts(u,e,t,r,o,l,d){fh.set(o,l,d).unproject(r);const h=e[u];if(void 0!==h){const m=t.getAttribute("position");for(let _=0,S=h.length;_<S;_++)m.setXYZ(h[_],fh.x,fh.y,fh.z)}}class np extends Ia{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],o=new ui;o.setAttribute("position",new Gn(t,3)),o.setAttribute("color",new Gn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(o,new ss({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,r){const o=new qe,l=this.geometry.attributes.color.array;return o.set(e),o.toArray(l,0),o.toArray(l,3),o.set(t),o.toArray(l,6),o.toArray(l,9),o.set(r),o.toArray(l,12),o.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Rg{constructor(){this.type="ShapePath",this.color=new qe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new $d,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,o){return this.currentPath.quadraticCurveTo(e,t,r,o),this}bezierCurveTo(e,t,r,o,l,d){return this.currentPath.bezierCurveTo(e,t,r,o,l,d),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(R){const ue=[];for(let te=0,ge=R.length;te<ge;te++){const Re=R[te],Ue=new ha;Ue.curves=Re.curves,ue.push(Ue)}return ue}function o(R,ue){const te=ue.length;let ge=!1;for(let Re=te-1,Ue=0;Ue<te;Re=Ue++){let ot=ue[Re],kt=ue[Ue],Dt=kt.x-ot.x,ae=kt.y-ot.y;if(Math.abs(ae)>Number.EPSILON){if(ae<0&&(ot=ue[Ue],Dt=-Dt,kt=ue[Re],ae=-ae),R.y<ot.y||R.y>kt.y)continue;if(R.y===ot.y){if(R.x===ot.x)return!0}else{const Ke=ae*(R.x-ot.x)-Dt*(R.y-ot.y);if(0===Ke)return!0;if(Ke<0)continue;ge=!ge}}else{if(R.y!==ot.y)continue;if(kt.x<=R.x&&R.x<=ot.x||ot.x<=R.x&&R.x<=kt.x)return!0}}return ge}const l=Oa.isClockWise,d=this.subPaths;if(0===d.length)return[];if(!0===t)return r(d);let h,m,_;const S=[];if(1===d.length)return m=d[0],_=new ha,_.curves=m.curves,S.push(_),S;let M=!l(d[0].getPoints());M=e?!M:M;const D=[],A=[];let re,U,N=[],W=0;A[W]=void 0,N[W]=[];for(let R=0,ue=d.length;R<ue;R++)m=d[R],re=m.getPoints(),h=l(re),h=e?!h:h,h?(!M&&A[W]&&W++,A[W]={s:new ha,p:re},A[W].s.curves=m.curves,M&&W++,N[W]=[]):N[W].push({h:m,p:re[0]});if(!A[0])return r(d);if(A.length>1){let R=!1;const ue=[];for(let te=0,ge=A.length;te<ge;te++)D[te]=[];for(let te=0,ge=A.length;te<ge;te++){const Re=N[te];for(let Ue=0;Ue<Re.length;Ue++){const ot=Re[Ue];let kt=!0;for(let Dt=0;Dt<A.length;Dt++)o(ot.p,A[Dt].p)&&(te!==Dt&&ue.push({froms:te,tos:Dt,hole:Ue}),kt?(kt=!1,D[Dt].push(ot)):R=!0);kt&&D[te].push(ot)}}ue.length>0&&(R||(N=D))}for(let R=0,ue=A.length;R<ue;R++){_=A[R].s,S.push(_),U=N[R];for(let te=0,ge=U.length;te<ge;te++)_.holes.push(U[te].h)}return S}}const ip=new Float32Array(1);new Int32Array(ip.buffer),Lo.create=function(u,e){return console.log("THREE.Curve.create() has been deprecated"),u.prototype=Object.create(Lo.prototype),u.prototype.constructor=u,u.prototype.getPoint=e,u},$d.prototype.fromPoints=function(u){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(u)},class extends Ia{constructor(e=10,t=10,r=4473924,o=8947848){r=new qe(r),o=new qe(o);const l=t/2,d=e/t,h=e/2,m=[],_=[];for(let D=0,A=0,N=-h;D<=t;D++,N+=d){m.push(-h,0,N,h,0,N),m.push(N,0,-h,N,0,h);const W=D===l?r:o;W.toArray(_,A),A+=3,W.toArray(_,A),A+=3,W.toArray(_,A),A+=3,W.toArray(_,A),A+=3}const S=new ui;S.setAttribute("position",new Gn(m,3)),S.setAttribute("color",new Gn(_,3)),super(S,new ss({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Ia{constructor(e){const t=Sg(e),r=new ui,o=[],l=[],d=new qe(0,0,1),h=new qe(0,1,0);for(let _=0;_<t.length;_++){const S=t[_];S.parent&&S.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(d.r,d.g,d.b),l.push(h.r,h.g,h.b))}r.setAttribute("position",new Gn(o,3)),r.setAttribute("color",new Gn(l,3)),super(r,new ss({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");dh.copy(this.root.matrixWorld).invert();for(let l=0,d=0;l<t.length;l++){const h=t[l];h.parent&&h.parent.isBone&&(ju.multiplyMatrices(dh,h.matrixWorld),rl.setFromMatrixPosition(ju),o.setXYZ(d,rl.x,rl.y,rl.z),ju.multiplyMatrices(dh,h.parent.matrixWorld),rl.setFromMatrixPosition(ju),o.setXYZ(d+1,rl.x,rl.y,rl.z),d+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},fa.prototype.extractUrlBase=function(u){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(u)},fa.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},nc.prototype.center=function(u){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(u)},nc.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},nc.prototype.isIntersectionBox=function(u){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(u)},nc.prototype.size=function(u){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(u)},Zt.prototype.center=function(u){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(u)},Zt.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Zt.prototype.isIntersectionBox=function(u){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(u)},Zt.prototype.isIntersectionSphere=function(u){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(u)},Zt.prototype.size=function(u){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(u)},_s.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},tu.prototype.setFromMatrix=function(u){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(u)},rs.prototype.flattenToArrayOffset=function(u,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(u,e)},rs.prototype.multiplyVector3=function(u){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),u.applyMatrix3(this)},rs.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},rs.prototype.applyToBufferAttribute=function(u){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),u.applyMatrix3(this)},rs.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},rs.prototype.getInverse=function(u){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(u).invert()},zn.prototype.extractPosition=function(u){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(u)},zn.prototype.flattenToArrayOffset=function(u,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(u,e)},zn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new p).setFromMatrixColumn(this,3)},zn.prototype.setRotationFromQuaternion=function(u){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(u)},zn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},zn.prototype.multiplyVector3=function(u){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),u.applyMatrix4(this)},zn.prototype.multiplyVector4=function(u){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),u.applyMatrix4(this)},zn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},zn.prototype.rotateAxis=function(u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),u.transformDirection(this)},zn.prototype.crossVector=function(u){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),u.applyMatrix4(this)},zn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},zn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},zn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},zn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},zn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},zn.prototype.applyToBufferAttribute=function(u){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),u.applyMatrix4(this)},zn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},zn.prototype.makeFrustum=function(u,e,t,r,o,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(u,e,r,t,o,l)},zn.prototype.getInverse=function(u){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(u).invert()},Ta.prototype.isIntersectionLine=function(u){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(u)},P.prototype.multiplyVector3=function(u){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),u.applyQuaternion(this)},P.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},so.prototype.isIntersectionBox=function(u){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(u)},so.prototype.isIntersectionPlane=function(u){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(u)},so.prototype.isIntersectionSphere=function(u){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(u)},Hn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Hn.prototype.barycoordFromPoint=function(u,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(u,e)},Hn.prototype.midpoint=function(u){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(u)},Hn.prototypenormal=function(u){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(u)},Hn.prototype.plane=function(u){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(u)},Hn.barycoordFromPoint=function(u,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Hn.getBarycoord(u,e,t,r,o)},Hn.normal=function(u,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Hn.getNormal(u,e,t,r)},ha.prototype.extractAllPoints=function(u){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(u)},ha.prototype.extrude=function(u){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fa(this,u)},ha.prototype.makeGeometry=function(u){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Hc(this,u)},wt.prototype.fromAttribute=function(u,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(u,e,t)},wt.prototype.distanceToManhattan=function(u){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(u)},wt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},p.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},p.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},p.prototype.getPositionFromMatrix=function(u){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(u)},p.prototype.getScaleFromMatrix=function(u){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(u)},p.prototype.getColumnFromMatrix=function(u,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,u)},p.prototype.applyProjection=function(u){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(u)},p.prototype.fromAttribute=function(u,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(u,e,t)},p.prototype.distanceToManhattan=function(u){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(u)},p.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pn.prototype.fromAttribute=function(u,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(u,e,t)},pn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_r.prototype.getChildByName=function(u){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(u)},_r.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},_r.prototype.translate=function(u,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,u)},_r.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},_r.prototype.applyMatrix=function(u){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(u)},Object.defineProperties(_r.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Gs.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Gs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),yu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},xs.prototype.setLens=function(u,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(u)},Object.defineProperties(Ko.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=u}},shadowCameraLeft:{set:function(u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=u}},shadowCameraRight:{set:function(u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=u}},shadowCameraTop:{set:function(u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=u}},shadowCameraBottom:{set:function(u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=u}},shadowCameraNear:{set:function(u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=u}},shadowCameraFar:{set:function(u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(u){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=u}},shadowMapHeight:{set:function(u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=u}}}),Object.defineProperties(Ai.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===_o},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(_o)}}}),Ai.prototype.setDynamic=function(u){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===u?_o:Hs),this},Ai.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ai.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ui.prototype.addIndex=function(u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(u)},ui.prototype.addAttribute=function(u,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===u?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(u,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(u,new Ai(arguments[1],arguments[2])))},ui.prototype.addDrawCall=function(u,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(u,e)},ui.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ui.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ui.prototype.removeAttribute=function(u){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(u)},ui.prototype.applyMatrix=function(u){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(u)},Object.defineProperties(ui.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Ec.prototype.setDynamic=function(u){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===u?_o:Hs),this},Ec.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Fa.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Fa.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Fa.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},gu.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Zf.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(gi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new qe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(u){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===u}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(u){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=u}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ca.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=u}}}),Lr.prototype.clearTarget=function(u,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(u),this.clear(e,t,r)},Lr.prototype.animate=function(u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(u)},Lr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Lr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Lr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Lr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Lr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Lr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Lr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Lr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Lr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Lr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Lr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Lr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Lr.prototype.enableScissorTest=function(u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(u)},Lr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Lr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Lr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Lr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Lr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Lr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Lr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Lr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Lr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Lr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Lr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=u}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===u?rn:ln}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(uy.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(si.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=u}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=u}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=u}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=u}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=u}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=u}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=u}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=u}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=u}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=u}}}),class extends _r{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new fg).load(u,function(r){e.setBuffer(r)}),this},Th.prototype.updateCubeMap=function(u,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(u,e)},Th.prototype.clear=function(u,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(u,e,t,r)},dn.crossOrigin=void 0,dn.loadTexture=function(u,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new nh;o.setCrossOrigin(this.crossOrigin);const l=o.load(u,t,void 0,r);return e&&(l.mapping=e),l},dn.loadTextureCube=function(u,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new Nf;o.setCrossOrigin(this.crossOrigin);const l=o.load(u,t,void 0,r);return e&&(l.mapping=e),l},dn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},dn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137")}},sn=>{sn(sn.s=1629)}]);