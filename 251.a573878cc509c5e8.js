(self.webpackChunkwebgl_v1=self.webpackChunkwebgl_v1||[]).push([[251],{4646:function(Z,nt,G){var N;Z=G.nmd(Z),function(){var m,P=[].slice;m=function(){var I,$,rt,st,W;for(W=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},S.SCHEMES={},$=0,rt=(st="mono monochromatic contrast triade tetrade analogic".split(/\s+/)).length;$<rt;$++)S.SCHEMES[st[$]]=!0;function S(){var a,u;for(a=[],u=1;u<=4;u++)a.push(new S.mutablecolor(60));this.col=a,this._scheme="mono",this._distance=.5,this._web_safe=!1,this._add_complement=!1}return S.PRESETS={default:[-1,-1,1,-.7,.25,1,.5,1],pastel:[.5,-.9,.5,.5,.1,.9,.75,.75],soft:[.3,-.8,.3,.5,.1,.9,.5,.75],light:[.25,1,.5,.75,.1,1,.5,1],hard:[1,-1,1,-.6,.1,1,.6,1],pale:[.1,-.85,.1,.5,.1,1,.1,.75]},S.COLOR_WHEEL={0:[255,0,0,100],15:[255,51,0,100],30:[255,102,0,100],45:[255,128,0,100],60:[255,153,0,100],75:[255,178,0,100],90:[255,204,0,100],105:[255,229,0,100],120:[255,255,0,100],135:[204,255,0,100],150:[153,255,0,100],165:[51,255,0,100],180:[0,204,0,80],195:[0,178,102,70],210:[0,153,153,60],225:[0,102,178,70],240:[0,51,204,80],255:[25,25,178,70],270:[51,0,153,60],285:[64,0,153,60],300:[102,0,153,60],315:[153,0,153,60],330:[204,0,153,80],345:[229,0,102,90]},S.prototype.colors=function(){var a,u,h,d,g,M,E,p,y,T;if(y=1,u=this.col[0].get_hue(),(a={mono:function(){},contrast:(T=this,function(){return y=2,T.col[1].set_hue(u),T.col[1].rotate(180)}),triade:function(T){return function(){var O;return y=3,O=60*T._distance,T.col[1].set_hue(u),T.col[1].rotate(180-O),T.col[2].set_hue(u),T.col[2].rotate(180+O)}}(this),tetrade:function(T){return function(){var O;return y=4,O=90*T._distance,T.col[1].set_hue(u),T.col[1].rotate(180),T.col[2].set_hue(u),T.col[2].rotate(180+O),T.col[3].set_hue(u),T.col[3].rotate(O)}}(this),analogic:function(T){return function(){var O;return y=T._add_complement?4:3,O=60*T._distance,T.col[1].set_hue(u),T.col[1].rotate(O),T.col[2].set_hue(u),T.col[2].rotate(360-O),T.col[3].set_hue(u),T.col[3].rotate(180)}}(this)}).monochromatic=a.mono,null==a[this._scheme])throw"Unknown color scheme name: "+this._scheme;for(a[this._scheme](),E=[],h=g=0,p=y-1;0<=p?g<=p:g>=p;h=0<=p?++g:--g)for(d=M=0;M<=3;d=++M)E[4*h+d]=this.col[h].get_hex(this._web_safe,d);return E},S.prototype.colorset=function(){var a,u;for(a=I(this.colors()),u=[];a.length>0;)u.push(a.splice(0,4));return u},S.prototype.from_hue=function(a){if(null==a)throw"from_hue needs an argument";return this.col[0].set_hue(a),this},S.prototype.rgb2ryb=function(){var a,u,h,d,g,M,E,p,y;return null!=(E=1<=arguments.length?P.call(arguments,0):[])[0]&&W(E[0])&&(E=E[0]),M=E[0],u=E[1],a=E[2],M-=p=Math.min(M,u,a),u-=p,a-=p,d=Math.max(M,u,a),M-=y=Math.min(M,u),u-=y,a>0&&u>0&&(a/=2,u/=2),y+=u,a+=u,(g=Math.max(M,y,a))>0&&(M*=h=d/g,y*=h,a*=h),M+=p,y+=p,a+=p,[Math.floor(M),Math.floor(y),Math.floor(a)]},S.prototype.rgb2hsv=function(){var a,u,h,d,g,M,E,p,T;return null!=(p=1<=arguments.length?P.call(arguments,0):[])[0]&&W(p[0])&&(p=p[0]),E=p[0],h=p[1],a=p[2],E/=255,h/=255,a/=255,M=Math.min.apply(Math,[E,h,a]),T=g=Math.max.apply(Math,[E,h,a]),(u=g-M)>0?(d=E===g?(h-a)/u:h===g?2+(a-E)/u:4+(E-h)/u,d*=60,[d%=360,u/g,T]):[0,0,T]},S.prototype.rgbToHsv=function(){var a,u,h,d,g,M,E,p,y,T;if(null!=(p=1<=arguments.length?P.call(arguments,0):[])[0]&&W(p[0])&&(p=p[0]),E=p[0],h=p[1],a=p[2],E/=255,h/=255,a/=255,d=void 0,y=void 0,T=g=Math.max(E,h,a),u=g-(M=Math.min(E,h,a)),y=0===g?0:u/g,g===M)d=0;else{switch(g){case E:d=(h-a)/u+(h<a?6:0);break;case h:d=(a-E)/u+2;break;case a:d=(E-h)/u+4}d/=6}return[d,y,T]},S.prototype.from_hex=function(a){var p,L,c,f,n,s;if(null==a)throw"from_hex needs an argument";if(!/^([0-9A-F]{2}){3}$/im.test(a))throw"from_hex("+a+") - argument must be in the form of RRGGBB";return f=/(..)(..)(..)/.exec(a).slice(1,4),L=function(){var l,_,A;for(A=[],_=0,l=f.length;_<l;_++)A.push(parseInt(f[_],16));return A}(),c=this.rgb2ryb([L[0],L[1],L[2]]),n=(p=this.rgbToHsv(c[0],c[1],c[2]))[1],s=p[2],this.from_hue(360*p[0]),this._set_variant_preset([n,s,n,.7*s,.25*n,1,.5*n,1]),this},S.prototype.add_complement=function(a){if(null==a)throw"add_complement needs an argument";return this._add_complement=a,this},S.prototype.web_safe=function(a){if(null==a)throw"web_safe needs an argument";return this._web_safe=a,this},S.prototype.distance=function(a){if(null==a)throw"distance needs an argument";if(a<0)throw"distance("+a+") - argument must be >= 0";if(a>1)throw"distance("+a+") - argument must be <= 1";return this._distance=a,this},S.prototype.scheme=function(a){if(null==a)return this._scheme;if(null==S.SCHEMES[a])throw"'"+a+"' isn't a valid scheme name";return this._scheme=a,this},S.prototype.variation=function(a){if(null==a)throw"variation needs an argument";if(null==S.PRESETS[a])throw"'$v' isn't a valid variation name";return this._set_variant_preset(S.PRESETS[a]),this},S.prototype._set_variant_preset=function(a){var u,h,d;for(d=[],u=h=0;h<=3;u=++h)d.push(this.col[u].set_variant_preset(a));return d},I=function(a){var u,h,d;if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return u="",null!=a.global&&(u+="g"),null!=a.ignoreCase&&(u+="i"),null!=a.multiline&&(u+="m"),null!=a.sticky&&(u+="y"),new RegExp(a.source,u);for(h in d=new a.constructor,a)d[h]=I(a[h]);return d},S.mutablecolor=function(){function a(u){if(null==u)throw"No hue specified";this.saturation=[],this.value=[],this.base_red=0,this.base_green=0,this.base_blue=0,this.base_saturation=0,this.base_value=0,this.set_hue(u),this.set_variant_preset(S.PRESETS.default)}return a.prototype.hue=0,a.prototype.saturation=[],a.prototype.value=[],a.prototype.base_red=0,a.prototype.base_green=0,a.prototype.base_saturation=0,a.prototype.base_value=0,a.prototype.get_hue=function(){return this.hue},a.prototype.set_hue=function(u){var h,d,g,M,E,p,y,T,O,b;for(d in h=function(L,c,f){return L+Math.round((c-L)*f)},this.hue=Math.round(u%360),b=(E=this.hue%15+(this.hue-Math.floor(this.hue)))/15,y=(15+(p=this.hue-Math.floor(E)))%360,360===p&&(p=0),360===y&&(y=0),g=S.COLOR_WHEEL[p],M=S.COLOR_WHEEL[y],T={red:0,green:1,blue:2,value:3})this["base_"+d]=h(g[O=T[d]],M[O],b);return this.base_saturation=h(100,100,b)/100,this.base_value/=100},a.prototype.rotate=function(u){return this.set_hue((this.hue+u)%360)},a.prototype.get_saturation=function(u){var h,d;return(h=(d=this.saturation[u])<0?-d*this.base_saturation:d)>1&&(h=1),h<0&&(h=0),h},a.prototype.get_value=function(u){var h,d;return(h=(d=this.value[u])<0?-d*this.base_value:d)>1&&(h=1),h<0&&(h=0),h},a.prototype.set_variant=function(u,h,d){return this.saturation[u]=h,this.value[u]=d},a.prototype.set_variant_preset=function(u){var h,d,g;for(g=[],h=d=0;d<=3;h=++d)g.push(this.set_variant(h,u[2*h],u[2*h+1]));return g},a.prototype.get_hex=function(u,h){var g,M,p,y,T,O,b,c,f,n,s,l,_,A;for(b=Math.max.apply(Math,function(){var k,D,H,Q;for(Q=[],D=0,k=(H=["red","green","blue"]).length;D<k;D++)Q.push(this["base_"+(g=H[D])]);return Q}.call(this)),Math.min.apply(Math,function(){var k,D,H,Q;for(Q=[],D=0,k=(H=["red","green","blue"]).length;D<k;D++)Q.push(this["base_"+(g=H[D])]);return Q}.call(this)),A=255*(h<0?this.base_value:this.get_value(h)),l=h<0?this.base_saturation:this.get_saturation(h),p=b>0?A/b:0,n=[],O=0,y=(f=["red","green","blue"]).length;O<y;O++)g=f[O],s=Math.min.apply(Math,[255,Math.round(A-(A-this["base_"+g]*p)*l)]),n.push(s);for(u&&(n=function(){var k,D,H;for(H=[],D=0,k=n.length;D<k;D++)H.push(51*Math.round(n[D]/51));return H}()),M="",c=0,T=n.length;c<T;c++)(_=n[c].toString(16)).length<2&&(_="0"+_),M+=_;return M},a}(),S}(),null!==Z&&null!=Z.exports?Z.exports=m:void 0!==(N=function(){return m}.apply(nt,[]))&&(Z.exports=N)}.call(this)},9575:(Z,nt,G)=>{var J;!function(N,m,P,I){"use strict";var g,$=["","webkit","Moz","MS","ms","o"],rt=m.createElement("div"),W=Math.round,B=Math.abs,S=Date.now;function a(t,e,i){return setTimeout(y(t,i),e)}function u(t,e,i){return!!Array.isArray(t)&&(h(t,i[e],i),!0)}function h(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==I)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function d(t,e,i){var r="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var o=new Error("get-stack-trace"),v=o&&o.stack?o.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",C=N.console&&(N.console.warn||N.console.log);return C&&C.call(N.console,r,v),t.apply(this,arguments)}}g="function"!=typeof Object.assign?function(e){if(e===I||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(o!==I&&null!==o)for(var v in o)o.hasOwnProperty(v)&&(i[v]=o[v])}return i}:Object.assign;var M=d(function(e,i,r){for(var o=Object.keys(i),v=0;v<o.length;)(!r||r&&e[o[v]]===I)&&(e[o[v]]=i[o[v]]),v++;return e},"extend","Use `assign`."),E=d(function(e,i){return M(e,i,!0)},"merge","Use `assign`.");function p(t,e,i){var o,r=e.prototype;(o=t.prototype=Object.create(r)).constructor=t,o._super=r,i&&g(o,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return"function"==typeof t?t.apply(e&&e[0]||I,e):t}function O(t,e){return t===I?e:t}function b(t,e,i){h(n(e),function(r){t.addEventListener(r,i,!1)})}function L(t,e,i){h(n(e),function(r){t.removeEventListener(r,i,!1)})}function c(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function f(t,e){return t.indexOf(e)>-1}function n(t){return t.trim().split(/\s+/g)}function s(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var r=0;r<t.length;){if(i&&t[r][i]==e||!i&&t[r]===e)return r;r++}return-1}function l(t){return Array.prototype.slice.call(t,0)}function _(t,e,i){for(var r=[],o=[],v=0;v<t.length;){var C=e?t[v][e]:t[v];s(o,C)<0&&r.push(t[v]),o[v]=C,v++}return i&&(r=e?r.sort(function(w,F){return w[e]>F[e]}):r.sort()),r}function A(t,e){for(var i,r,o=e[0].toUpperCase()+e.slice(1),v=0;v<$.length;){if((r=(i=$[v])?i+o:e)in t)return r;v++}return I}var k=1;function H(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||N}var Yt="ontouchstart"in N,ae=A(N,"PointerEvent")!==I,oe=Yt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ut="touch",Nt="mouse",Wt=["x","y"],Et=["clientX","clientY"];function X(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(r){T(t.options.enable,[t])&&i.handler(r)},this.init()}function fe(t,e,i){var r=i.pointers.length,o=i.changedPointers.length,v=1&e&&r-o==0,C=12&e&&r-o==0;i.isFirst=!!v,i.isFinal=!!C,v&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,o=r.length;i.firstInput||(i.firstInput=Xt(e)),o>1&&!i.firstMultiple?i.firstMultiple=Xt(e):1===o&&(i.firstMultiple=!1);var v=i.firstInput,C=i.firstMultiple,x=C?C.center:v.center,w=e.center=zt(r);e.timeStamp=S(),e.deltaTime=e.timeStamp-v.timeStamp,e.angle=Rt(x,w),e.distance=yt(x,w),function(t,e){var i=e.center,r=t.offsetDelta||{},o=t.prevDelta||{},v=t.prevInput||{};(1===e.eventType||4===v.eventType)&&(o=t.prevDelta={x:v.deltaX||0,y:v.deltaY||0},r=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-r.x),e.deltaY=o.y+(i.y-r.y)}(i,e),e.offsetDirection=Vt(e.deltaX,e.deltaY);var F=Bt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=F.x,e.overallVelocityY=F.y,e.overallVelocity=B(F.x)>B(F.y)?F.x:F.y,e.scale=C?function(t,e){return yt(e[0],e[1],Et)/yt(t[0],t[1],Et)}(C.pointers,r):1,e.rotation=C?function(t,e){return Rt(e[1],e[0],Et)+Rt(t[1],t[0],Et)}(C.pointers,r):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var o,v,C,x,i=t.lastInterval||e,r=e.timeStamp-i.timeStamp;if(8!=e.eventType&&(r>25||i.velocity===I)){var w=e.deltaX-i.deltaX,F=e.deltaY-i.deltaY,K=Bt(r,w,F);v=K.x,C=K.y,o=B(K.x)>B(K.y)?K.x:K.y,x=Vt(w,F),t.lastInterval=e}else o=i.velocity,v=i.velocityX,C=i.velocityY,x=i.direction;e.velocity=o,e.velocityX=v,e.velocityY=C,e.direction=x}(i,e);var K=t.element;c(e.srcEvent.target,K)&&(K=e.srcEvent.target),e.target=K}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Xt(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:W(t.pointers[i].clientX),clientY:W(t.pointers[i].clientY)},i++;return{timeStamp:S(),pointers:e,center:zt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function zt(t){var e=t.length;if(1===e)return{x:W(t[0].clientX),y:W(t[0].clientY)};for(var i=0,r=0,o=0;o<e;)i+=t[o].clientX,r+=t[o].clientY,o++;return{x:W(i/e),y:W(r/e)}}function Bt(t,e,i){return{x:e/t||0,y:i/t||0}}function Vt(t,e){return t===e?1:B(t)>=B(e)?t<0?2:4:e<0?8:16}function yt(t,e,i){i||(i=Wt);var r=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(r*r+o*o)}function Rt(t,e,i){return i||(i=Wt),180*Math.atan2(e[i[1]]-t[i[1]],e[i[0]]-t[i[0]])/Math.PI}X.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(H(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(H(this.element),this.evWin,this.domHandler)}};var ge={mousedown:1,mousemove:2,mouseup:4},Te="mousedown",Ee="mousemove mouseup";function Mt(){this.evEl=Te,this.evWin=Ee,this.pressed=!1,X.apply(this,arguments)}p(Mt,X,{handler:function(e){var i=ge[e.type];1&i&&0===e.button&&(this.pressed=!0),2&i&&1!==e.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[e],changedPointers:[e],pointerType:Nt,srcEvent:e}))}});var ye={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Me={2:ut,3:"pen",4:Nt,5:"kinect"},Zt="pointerdown",qt="pointermove pointerup pointercancel";function bt(){this.evEl=Zt,this.evWin=qt,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}N.MSPointerEvent&&!N.PointerEvent&&(Zt="MSPointerDown",qt="MSPointerMove MSPointerUp MSPointerCancel"),p(bt,X,{handler:function(e){var i=this.store,r=!1,o=e.type.toLowerCase().replace("ms",""),v=ye[o],C=Me[e.pointerType]||e.pointerType,x=C==ut,w=s(i,e.pointerId,"pointerId");1&v&&(0===e.button||x)?w<0&&(i.push(e),w=i.length-1):12&v&&(r=!0),!(w<0)&&(i[w]=e,this.callback(this.manager,v,{pointers:i,changedPointers:[e],pointerType:C,srcEvent:e}),r&&i.splice(w,1))}});var Ce={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ie="touchstart",Pe="touchstart touchmove touchend touchcancel";function jt(){this.evTarget=Ie,this.evWin=Pe,this.started=!1,X.apply(this,arguments)}function Se(t,e){var i=l(t.touches),r=l(t.changedTouches);return 12&e&&(i=_(i.concat(r),"identifier",!0)),[i,r]}p(jt,X,{handler:function(e){var i=Ce[e.type];if(1===i&&(this.started=!0),this.started){var r=Se.call(this,e,i);12&i&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:r[0],changedPointers:r[1],pointerType:ut,srcEvent:e})}}});var Oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ae="touchstart touchmove touchend touchcancel";function Ct(){this.evTarget=Ae,this.targetIds={},X.apply(this,arguments)}function Ne(t,e){var i=l(t.touches),r=this.targetIds;if(3&e&&1===i.length)return r[i[0].identifier]=!0,[i,i];var o,v,C=l(t.changedTouches),x=[],w=this.target;if(v=i.filter(function(F){return c(F.target,w)}),1===e)for(o=0;o<v.length;)r[v[o].identifier]=!0,o++;for(o=0;o<C.length;)r[C[o].identifier]&&x.push(C[o]),12&e&&delete r[C[o].identifier],o++;return x.length?[_(v.concat(x),"identifier",!0),x]:void 0}function xt(){X.apply(this,arguments);var t=y(this.handler,this);this.touch=new Ct(this.manager,t),this.mouse=new Mt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function be(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,Jt.call(this,e)):12&t&&Jt.call(this,e)}function Jt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var r=this.lastTouches;setTimeout(function(){var v=r.indexOf(i);v>-1&&r.splice(v,1)},2500)}}function xe(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],v=Math.abs(e-o.x),C=Math.abs(i-o.y);if(v<=25&&C<=25)return!0}return!1}p(Ct,X,{handler:function(e){var i=Oe[e.type],r=Ne.call(this,e,i);!r||this.callback(this.manager,i,{pointers:r[0],changedPointers:r[1],pointerType:ut,srcEvent:e})}}),p(xt,X,{handler:function(e,i,r){var v=r.pointerType==Nt;if(!(v&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(r.pointerType==ut)be.call(this,i,r);else if(v&&xe.call(this,r))return;this.callback(e,i,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var $t=A(rt.style,"touchAction"),Qt=$t!==I,te="compute",wt="manipulation",ht="none",mt="pan-x",_t="pan-y",It=function(){if(!Qt)return!1;var t={},e=N.CSS&&N.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||N.CSS.supports("touch-action",i)}),t}();function Lt(t,e){this.manager=t,this.set(e)}Lt.prototype={set:function(t){t==te&&(t=this.compute()),Qt&&this.manager.element.style&&It[t]&&(this.manager.element.style[$t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(f(t,ht))return ht;var e=f(t,mt),i=f(t,_t);return e&&i?ht:e||i?e?mt:_t:f(t,wt)?wt:"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,o=f(r,ht)&&!It[ht],v=f(r,_t)&&!It[_t],C=f(r,mt)&&!It[mt];if(o&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return C&&v||!(o||v&&6&i||C&&24&i)?void 0:this.preventSrc(e)}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var j=32;function et(t){this.options=g({},this.defaults,t||{}),this.id=k++,this.manager=null,this.options.enable=O(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ie(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function ne(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function St(t,e){var i=e.manager;return i?i.get(t):t}function V(){et.apply(this,arguments)}function Ot(){V.apply(this,arguments),this.pX=null,this.pY=null}function Dt(){V.apply(this,arguments)}function Ut(){et.apply(this,arguments),this._timer=null,this._input=null}function Ft(){V.apply(this,arguments)}function kt(){V.apply(this,arguments)}function At(){et.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return(e=e||{}).recognizers=O(e.recognizers,ct.defaults.preset),new Ht(t,e)}function Ht(t,e){this.options=g({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){return new(t.options.inputClass||(ae?bt:oe?Ct:Yt?xt:Mt))(t,fe)}(this),this.touchAction=new Lt(this,this.options.touchAction),se(this,!0),h(this.options.recognizers,function(i){var r=this.add(new i[0](i[1]));i[2]&&r.recognizeWith(i[2]),i[3]&&r.requireFailure(i[3])},this)}function se(t,e){var r,i=t.element;i.style&&(h(t.options.cssProps,function(o,v){r=A(i.style,v),e?(t.oldCssProps[r]=i.style[r],i.style[r]=o):i.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={}))}et.prototype={defaults:{},set:function(t){return g(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(u(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=St(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return u(t,"dropRecognizeWith",this)||(t=St(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(u(t,"requireFailure",this))return this;var e=this.requireFail;return-1===s(e,t=St(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(u(t,"dropRequireFailure",this))return this;t=St(t,this);var e=s(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function r(o){e.manager.emit(o,t)}i<8&&r(e.options.event+ie(i)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),i>=8&&r(e.options.event+ie(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=j},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=g({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=j);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},p(V,et,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,r=6&e,o=this.attrTest(t);return r&&(8&i||!o)?16|e:r||o?4&i?8|e:2&e?4|e:2:j}}),p(Ot,V,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(_t),24&t&&e.push(mt),e},directionTest:function(t){var e=this.options,i=!0,r=t.distance,o=t.direction,v=t.deltaX,C=t.deltaY;return o&e.direction||(6&e.direction?(o=0===v?1:v<0?2:4,i=v!=this.pX,r=Math.abs(t.deltaX)):(o=0===C?1:C<0?8:16,i=C!=this.pY,r=Math.abs(t.deltaY))),t.direction=o,i&&r>e.threshold&&o&e.direction},attrTest:function(t){return V.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=ne(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(Dt,V,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ht]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),p(Ut,et,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!r||!i||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=a(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return j},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=S(),this.manager.emit(this.options.event,this._input)))}}),p(Ft,V,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ht]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),p(kt,V,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ot.prototype.getTouchAction.call(this)},attrTest:function(t){var i,e=this.options.direction;return 30&e?i=t.overallVelocity:6&e?i=t.overallVelocityX:24&e&&(i=t.overallVelocityY),this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&B(i)>this.options.velocity&&4&t.eventType},emit:function(t){var e=ne(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(At,et,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&i){if(4!=t.eventType)return this.failTimeout();var v=!this.pTime||t.timeStamp-this.pTime<e.interval,C=!this.pCenter||yt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,C&&v?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=a(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return j},failTimeout:function(){return this._timer=a(function(){this.state=j},this.options.interval,this),j},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.7",ct.defaults={domEvents:!1,touchAction:te,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Dt,{enable:!1},["rotate"]],[kt,{direction:6}],[Ot,{direction:6},["swipe"]],[At],[At,{event:"doubletap",taps:2},["tap"]],[Ut]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ht.prototype={set:function(t){return g(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,r=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var v=0;v<r.length;)i=r[v],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&14&i.state&&(o=e.curRecognizer=i),v++}},get:function(t){if(t instanceof et)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(u(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(u(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=s(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==I&&e!==I){var i=this.handlers;return h(n(t),function(r){i[r]=i[r]||[],i[r].push(e)}),this}},off:function(t,e){if(t!==I){var i=this.handlers;return h(n(t),function(r){e?i[r]&&i[r].splice(s(i[r],e),1):delete i[r]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=m.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](e),r++}},destroy:function(){this.element&&se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},g(ct,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:j,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ht,Input:X,TouchAction:Lt,TouchInput:Ct,MouseInput:Mt,PointerEventInput:bt,TouchMouseInput:xt,SingleTouchInput:jt,Recognizer:et,AttrRecognizer:V,Tap:At,Pan:Ot,Swipe:kt,Pinch:Dt,Rotate:Ft,Press:Ut,on:b,off:L,each:h,merge:E,extend:M,assign:g,inherit:p,bindFn:y,prefixed:A}),(void 0!==N?N:"undefined"!=typeof self?self:{}).Hammer=ct,(J=function(){return ct}.call(nt,G,nt,Z))!==I&&(Z.exports=J)}(window,document)},3251:(Z,nt,G)=>{"use strict";G.r(nt),G.d(nt,{GameModule:()=>L});var J=G(6019),N=G(3517),m=G(3556),P=G(3838),I=G(2620);class ${constructor(f){this._iterator=0,this._limit=f,this._opacityRate=1/f,this._velocity=P.M8C.randFloat(.02,.4),this._tumble=new P.Pa4(P.M8C.randFloat(-.05,.05),P.M8C.randFloat(-.05,.05),P.M8C.randFloat(-.05,.05))}Next(){this._iterator++}get HasNext(){return this._iterator!==this._limit}get OpacityRate(){return this._opacityRate}get Velocity(){return this._velocity}get Tumble(){return this._tumble}}class rt extends P.Kj0{constructor(f,n,s,l,_){var A;super(),this.IsMatch=!1,this.IsRemoved=!1,this.initShell(),this.position.set(f,n,s),this.rotateY(l),this._geometry=new P.DvJ,this._material=null===(A=_.material)||void 0===A?void 0:A.clone(),this._mesh=new P.Kj0(this._geometry,this._material),this._mesh.translateX(.01),this.add(this._mesh),this._thetaStart=Math.abs(l),this._thetaOffset=this._thetaStart,this._matchKey=_.matchKey}set ThetaOffset(f){this._thetaOffset=this.mod(this._thetaStart-f,I.uo)}get ThetaOffset(){return this._thetaOffset}get MatchKey(){return this._matchKey}LockPiece(f){this.IsRemoved||(this._material.opacity=f?.4:1)}InitRemove(){this._pieceRemoval=new $(P.M8C.randInt(30,60))}Remove(){this._pieceRemoval.HasNext?(this._material.opacity-=this._pieceRemoval.OpacityRate,this._mesh.translateX(this._pieceRemoval.Velocity),this._mesh.rotateX(this._pieceRemoval.Tumble.x),this._mesh.rotateZ(this._pieceRemoval.Tumble.z),this._pieceRemoval.Next()):(this.IsMatch=!1,this.IsRemoved=!0)}Dispose(){this._shellMaterial.dispose(),this._shellGeometry.dispose(),this._material.dispose(),this._geometry.dispose()}initShell(){this._shellMaterial=new P.vBJ({transparent:!0,opacity:0}),this.material=this._shellMaterial;const f=1.05;this._shellGeometry=new P.DvJ(f,f,f),this.geometry=this._shellGeometry}mod(f,n){return(f%n+n)%n}}class st{constructor(f,n,s){this._steps=[],this._iterator=0;const l=1/s;for(let _=l;_<=l*s;_+=l)this._steps.push(P.M8C.lerp(f,n,_));this._steps[s-1]=n}get HasNext(){return this._iterator!==this._steps.length}get Next(){return this._steps[this._iterator++]}}class W extends P.Tme{constructor(f,n,s){super(),this._theta=0,this.position.y=f,n.forEach(l=>{const _=new rt(l.polarCoords.x,0,l.polarCoords.z,l.rotationY,s[Math.floor(Math.random()*s.length)]);this.add(_)});for(let l=0;l<this.children.length;l++){const _=this.children[l];0===l?(_.Prev=this.children[this.children.length-1],_.Next=this.children[l+1]):l===this.children.length-1?(_.Prev=this.children[l-1],_.Next=this.children[0]):(_.Prev=this.children[l-1],_.Next=this.children[l+1])}}set Above(f){this._wheelAbove=f}get Above(){return this._wheelAbove}set Below(f){this._wheelBelow=f}get Below(){return this._wheelBelow}get RotateEase(){return this._rotateEase}Rotate(f){this.rotation.y=f}UpdateTheta(f){this._theta+=f,Math.abs(this._theta)>=I.uo&&(this._theta=0),this.Rotate(this._theta)}SnapToGrid(){const f=Math.ceil(this._theta/I.oE),n=Math.abs(this._theta-f*I.oE),s=Math.abs(this._theta-(f-1)*I.oE),l=this._theta;n<s?this._theta+=n:this._theta-=s,this._rotateEase=new st(l,this._theta,10);for(const _ of this.children)_.ThetaOffset=this._theta}ResetIsMatch(){for(const f of this.children)f.IsMatch=!1}Dispose(){for(const f of this.children)f.Dispose()}}G(4646);let S=(()=>{class c{constructor(){this._currentMaterials=[]}get Materials(){return this._currentMaterials}InitColorsMaterials(){const n=this.getColorScheme();let s=0;this._currentMaterials.length&&(this._currentMaterials.forEach(l=>l.material.dispose()),this._currentMaterials=[]),this._currentMaterials=[],n.forEach(l=>{this._currentMaterials.push({material:new P.Wid({color:new P.Ilk(l),transparent:!0}),materialColorHex:l,matchKey:s++})})}getColorScheme(){const n=new ColorScheme,s=["contrast","triade","tetrade","analogic"],l=s[P.M8C.randInt(0,s.length-1)];return n.from_hue(P.M8C.randInt(126,360)).scheme(l).variation("hard"),n.colors().map(A=>`#${A}`).slice(0,I.pQ)}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac}),c})(),a=(()=>{class c{constructor(n){this.materialManager=n,this._piecePoints=[],this._axle=[],this._boardLocking=!1,this._boardLocked=!1,this._pendingLevelChange=!1,this.initPolarCoords(),this._stack=new P.Tme}get Axle(){return this._axle}get BoardLocked(){return this._boardLocked}InitShapes(n){n&&!this._scene&&(this._scene=n),this.dispose(),this.materialManager.InitColorsMaterials();for(let s=-3;s<=3;s++){const l=new W(s*I.EH,this._piecePoints,this.materialManager.Materials);this._axle.push(l),this._stack.add(l)}this._scene.add(this._stack);for(let s=0;s<this._axle.length;s++)0===s?(this._axle[s].Above=this._axle[s+1],this._axle[s].Below=void 0):s===this._axle.length-1?(this._axle[s].Above=void 0,this._axle[s].Below=this._axle[s-1]):(this._axle[s].Above=this._axle[s+1],this._axle[s].Below=this._axle[s-1])}UpdateShapes(){var n,s,l,_;(null===(s=null===(n=this._activeWheel)||void 0===n?void 0:n.RotateEase)||void 0===s?void 0:s.HasNext)&&this._activeWheel.Rotate(null===(_=null===(l=this._activeWheel)||void 0===l?void 0:l.RotateEase)||void 0===_?void 0:_.Next),this._boardLocking&&(this.animateLock(this._boardLocking),this._boardLocked=!0),this._boardLocked&&this.animateRemoval()&&(this.animateLock(!1),this._boardLocked=!1,this._pendingLevelChange&&(this.InitShapes(),this._pendingLevelChange=!1))}SetActiveWheel(n){n&&(this._activeWheel=n)}SetMatches(n){this._matchPieces=n,this._matchPieces.forEach(s=>s.InitRemove())}LockBoard(n){this._boardLocking=n}SetLevelChange(){this._pendingLevelChange=!0}animateLock(n){this._axle.forEach(s=>{for(const l of s.children)l.IsMatch||l.LockPiece(n)})}animateRemoval(){const n=!this._matchPieces.some(s=>s.IsMatch);return n||this._matchPieces.forEach(s=>s.Remove()),n}initPolarCoords(){for(let n=0;n<I.ZO;n+=I.Dj){const s=P.M8C.degToRad(n),l=I.i8*Math.cos(s),_=I.i8*Math.sin(s);this._piecePoints.push({polarCoords:new P.Pa4(l,0,_),rotationY:-1*s})}}dispose(){this._axle.length&&this._axle.forEach(n=>n.Dispose()),this._axle=[],this._stack.clear()}}return c.\u0275fac=function(n){return new(n||c)(m.LFG(S))},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac}),c})();G(9575);var h=(()=>{return(c=h||(h={})).Up="Up",c.Down="Down",c.Next="Next",c.Prev="Prev",h;var c})();let d=(()=>{class c{constructor(){this._matches=[]}FindMatches(n,s){for(const l of s)l.ResetIsMatch();return n.IsMatch=!0,this._matches=[n],this.directionalSearch(n),this._matches.length>=I.TT?this._matches:[]}directionalSearch(n){let s;for(const l in h){switch(s=void 0,l){case h.Next:s=this.matchNext(n);break;case h.Prev:s=this.matchPrev(n);break;case h.Up:s=this.matchAbove(n);break;case h.Down:s=this.matchBelow(n)}s&&(s.IsMatch=!0,this._matches.push(s),this.directionalSearch(s))}}matchNext(n){if(!n.Next.IsMatch&&!n.Next.IsRemoved&&n.Next.MatchKey===n.MatchKey)return n.Next}matchPrev(n){if(!n.Prev.IsMatch&&!n.Prev.IsRemoved&&n.Prev.MatchKey===n.MatchKey)return n.Prev}matchAbove(n){const s=n.parent;return s.Above?s.Above.children.find(_=>!_.IsMatch&&!_.IsRemoved&&_.MatchKey===n.MatchKey&&Math.abs(_.ThetaOffset-n.ThetaOffset)<I.Ng):void 0}matchBelow(n){const s=n.parent;return s.Below?s.Below.children.find(_=>!_.IsMatch&&!_.IsRemoved&&_.MatchKey===n.MatchKey&&Math.abs(_.ThetaOffset-n.ThetaOffset)<I.Ng):void 0}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac}),c})(),g=(()=>{class c{constructor(){this._level=1,this._levelPieceCount=0,this._score=0,this._timestamp=Date.now()}get Level(){return this._level}get Score(){return this._score}UpdateScore(n){Date.now(),this._timestamp=Date.now();let l=0;l=n*this._level,this._score+=l}UpdateLevel(n){const s=this._level*I.Ic;this._levelPieceCount+=n;const l=this._levelPieceCount>=s;return l&&(this._level++,this._levelPieceCount=0),l}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac}),c})(),M=(()=>{class c{constructor(n,s,l){this.objectManager=n,this.gameEngine=s,this.scoringManager=l,this._x=0,this._panning=!1,this._rayCaster=new P.iMs,this._pointerPos=new P.FM8}InitInteractions(n){this._hammer=new Hammer(n),this._hammer.on("panstart",s=>{if(!this.objectManager.BoardLocked){const l=this.getPickedGamePiece(s.center.x,s.center.y);l&&!(null==l?void 0:l.IsRemoved)&&(this._activeWheel=l.parent,this.objectManager.SetActiveWheel(this._activeWheel))}}),this._hammer.on("pan",s=>{var l;this.objectManager.BoardLocked||(this._panning?this.deviceCordRotation(s.center.x):this._panning=!0,s.isFinal&&(this._panning=!1,null===(l=this._activeWheel)||void 0===l||l.SnapToGrid(),this._activeWheel=void 0),this._x=s.center.x)}),this._hammer.on("press",s=>{if(!this.objectManager.BoardLocked){const l=this.getPickedGamePiece(s.center.x,s.center.y);if(l&&!(null==l?void 0:l.IsRemoved)){const _=this.gameEngine.FindMatches(l,this.objectManager.Axle);_.length&&(this.objectManager.LockBoard(!0),this.objectManager.SetMatches(_),this.scoringManager.UpdateScore(_.length),this.scoringManager.UpdateLevel(_.length)&&this.objectManager.SetLevelChange())}}})}UpdateSize(n,s){this._canvasRect=n,this._camera=s}deviceCordRotation(n){this._activeWheel&&this._activeWheel.UpdateTheta(P.M8C.degToRad(n-this._x)*(I.AG/this._canvasRect.width)*-1)}getPickedGamePiece(n,s){const _=this._canvasRect.bottom-this._canvasRect.top;this._pointerPos.x=(n-this._canvasRect.left)/(this._canvasRect.right-this._canvasRect.left)*2-1,this._pointerPos.y=-(s-this._canvasRect.top)/_*2+1,this._rayCaster.setFromCamera(this._pointerPos,this._camera);const A=this._rayCaster.intersectObjects(this.objectManager.Axle);if(A.length){const k=A[0].object;return k.parent instanceof rt?k.parent:k}}}return c.\u0275fac=function(n){return new(n||c)(m.LFG(a),m.LFG(d),m.LFG(g))},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac}),c})(),E=(()=>{class c{constructor(n,s){this.objectManager=n,this.interactionManager=s,this._width=0,this._height=0}get scene(){return this._scene}InitScene(){if(!this._scene){this._scene=new P.xsS;const n=new P.Ox3(16777215,1);n.position.set(0,0,5),n.target.position.set(0,0,0),this._scene.add(n),this._scene.add(n.target),this._scene.background=new P.Ilk(252645135),this.objectManager.InitShapes(this._scene)}}UpdateSize(n){this._width=n.width,this._height=n.height;const s=this._width/this._height;this._camera?(this._camera.aspect=s,this._camera.updateProjectionMatrix()):(this._camera=new P.cPb(45,s,1,25),this._camera.position.set(0,0,5)),this._renderer&&this._renderer.setSize(this._width,this._height,!1),this.interactionManager.UpdateSize(n,this._camera)}InitRenderer(n){n&&(this._renderer=new P.CP7({canvas:n,antialias:!0})),this._renderer&&this._renderer.setSize(this._width,this._height,!1)}RenderScene(){var n;null===(n=this._renderer)||void 0===n||n.render(this._scene,this._camera)}}return c.\u0275fac=function(n){return new(n||c)(m.LFG(a),m.LFG(M))},c.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac}),c})();const p=["mainCanvas"];let y=(()=>{class c{constructor(n,s){this.sceneManager=n,this.interactionManager=s,this._initialRectCalculated=!1}onResize(){var n;this.sceneManager.UpdateSize(null===(n=this.canvas)||void 0===n?void 0:n.nativeElement.getBoundingClientRect())}ngAfterContentChecked(){var n;if(!this._initialRectCalculated){const s=null===(n=this.canvas)||void 0===n?void 0:n.nativeElement.getBoundingClientRect();s&&(this.sceneManager.UpdateSize(s),this._initialRectCalculated=!0)}}ngAfterViewInit(){var n;const s=null===(n=this.canvas)||void 0===n?void 0:n.nativeElement;s&&(this.sceneManager.InitRenderer(s),this.interactionManager.InitInteractions(s))}}return c.\u0275fac=function(n){return new(n||c)(m.Y36(E),m.Y36(M))},c.\u0275cmp=m.Xpm({type:c,selectors:[["wgl-canvas"]],viewQuery:function(n,s){if(1&n&&m.Gf(p,5),2&n){let l;m.iGM(l=m.CRH())&&(s.canvas=l.first)}},hostBindings:function(n,s){1&n&&m.NdJ("resize",function(){return s.onResize()},!1,m.Jf7)},decls:2,vars:0,consts:[[1,"main-canvas"],["mainCanvas",""]],template:function(n,s){1&n&&m._UZ(0,"canvas",0,1)},styles:[".main-canvas[_ngcontent-%COMP%]{height:100%;width:100%;display:block}"]}),c})();const O=[{path:"",component:(()=>{class c{constructor(n,s,l,_){this.ngZone=n,this.sceneManager=s,this.objectManager=l,this.scoringManager=_}ngOnInit(){this.sceneManager.InitScene(),this.animate()}animate(){this.ngZone.runOutsideAngular(()=>{this.objectManager.UpdateShapes(),this.sceneManager.RenderScene(),requestAnimationFrame(()=>{this.animate()})})}}return c.\u0275fac=function(n){return new(n||c)(m.Y36(m.R0b),m.Y36(E),m.Y36(a),m.Y36(g))},c.\u0275cmp=m.Xpm({type:c,selectors:[["wgl-game-container"]],decls:10,vars:2,consts:[[1,"game-container"],[1,"game-scoring"],[1,"game-canvas"],[1,"level-progress"]],template:function(n,s){1&n&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"p"),m._uU(3),m.qZA(),m.TgZ(4,"p"),m._uU(5),m.qZA(),m.qZA(),m._UZ(6,"wgl-canvas",2),m.TgZ(7,"div",3),m.TgZ(8,"p"),m._uU(9,"Progress"),m.qZA(),m.qZA(),m.qZA()),2&n&&(m.xp6(3),m.hij("Score: ",s.scoringManager.Score,""),m.xp6(2),m.hij("Level: ",s.scoringManager.Level,""))},directives:[y],styles:[".game-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}.game-container[_ngcontent-%COMP%]   .game-scoring[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1em;flex:unset}.game-container[_ngcontent-%COMP%]   .game-canvas[_ngcontent-%COMP%]{flex:1 1 auto}.game-container[_ngcontent-%COMP%]   .level-progress[_ngcontent-%COMP%]{padding:1em;flex:unset}@media screen and (min-aspect-ratio: 3/5){.game-container[_ngcontent-%COMP%]{flex-direction:row}.game-container[_ngcontent-%COMP%]   .game-scoring[_ngcontent-%COMP%]{flex-direction:column;justify-content:start;flex:1 1 auto}.game-container[_ngcontent-%COMP%]   .game-canvas[_ngcontent-%COMP%]{width:45em;flex:unset}}@media only screen and (min-aspect-ratio: 3/5) and (min-aspect-ratio: 4/5){.game-container[_ngcontent-%COMP%]   .game-canvas[_ngcontent-%COMP%]{width:35em}}@media only screen and (min-aspect-ratio: 3/5) and (min-aspect-ratio: 5/3){.game-container[_ngcontent-%COMP%]   .game-canvas[_ngcontent-%COMP%]{width:30%}}@media screen and (min-aspect-ratio: 3/5){.game-container[_ngcontent-%COMP%]   .level-progress[_ngcontent-%COMP%]{flex:1 1 auto}}"]}),c})()}];let b=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=m.oAB({type:c}),c.\u0275inj=m.cJS({imports:[[J.ez,N.Bz.forChild(O)]]}),c})(),L=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=m.oAB({type:c}),c.\u0275inj=m.cJS({providers:[E,S,a,M,d,g],imports:[[J.ez,b]]}),c})()}}]);